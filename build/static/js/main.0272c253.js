/*! For license information please see main.0272c253.js.LICENSE.txt */
(()=>{var g={8210:function(g,e,I){var t;!function(){"use strict";var n,C=1e9,l={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o=!0,r="[DecimalError] ",a=r+"Invalid argument: ",c=r+"Exponent out of range: ",i=Math.floor,A=Math.pow,u=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,d=1e7,s=9007199254740991,b=i(1286742750677284.5),m={};function Z(g,e){var I,t,n,C,l,r,a,c,i=g.constructor,A=i.precision;if(!g.s||!e.s)return e.s||(e=new i(g)),o?v(e,A):e;if(a=g.d,c=e.d,l=g.e,n=e.e,a=a.slice(),C=l-n){for(C<0?(t=a,C=-C,r=c.length):(t=c,n=l,r=a.length),C>(r=(l=Math.ceil(A/7))>r?l+1:r+1)&&(C=r,t.length=1),t.reverse();C--;)t.push(0);t.reverse()}for((r=a.length)-(C=c.length)<0&&(C=r,t=c,c=a,a=t),I=0;C;)I=(a[--C]=a[C]+c[C]+I)/d|0,a[C]%=d;for(I&&(a.unshift(I),++n),r=a.length;0==a[--r];)a.pop();return e.d=a,e.e=n,o?v(e,A):e}function y(g,e,I){if(g!==~~g||g<e||g>I)throw Error(a+g)}function p(g){var e,I,t,n=g.length-1,C="",l=g[0];if(n>0){for(C+=l,e=1;e<n;e++)(I=7-(t=g[e]+"").length)&&(C+=W(I)),C+=t;(I=7-(t=(l=g[e])+"").length)&&(C+=W(I))}else if(0===l)return"0";for(;l%10===0;)l/=10;return C+l}m.absoluteValue=m.abs=function(){var g=new this.constructor(this);return g.s&&(g.s=1),g},m.comparedTo=m.cmp=function(g){var e,I,t,n,C=this;if(g=new C.constructor(g),C.s!==g.s)return C.s||-g.s;if(C.e!==g.e)return C.e>g.e^C.s<0?1:-1;for(e=0,I=(t=C.d.length)<(n=g.d.length)?t:n;e<I;++e)if(C.d[e]!==g.d[e])return C.d[e]>g.d[e]^C.s<0?1:-1;return t===n?0:t>n^C.s<0?1:-1},m.decimalPlaces=m.dp=function(){var g=this,e=g.d.length-1,I=7*(e-g.e);if(e=g.d[e])for(;e%10==0;e/=10)I--;return I<0?0:I},m.dividedBy=m.div=function(g){return G(this,new this.constructor(g))},m.dividedToIntegerBy=m.idiv=function(g){var e=this.constructor;return v(G(this,new e(g),0,1),e.precision)},m.equals=m.eq=function(g){return!this.cmp(g)},m.exponent=function(){return B(this)},m.greaterThan=m.gt=function(g){return this.cmp(g)>0},m.greaterThanOrEqualTo=m.gte=function(g){return this.cmp(g)>=0},m.isInteger=m.isint=function(){return this.e>this.d.length-2},m.isNegative=m.isneg=function(){return this.s<0},m.isPositive=m.ispos=function(){return this.s>0},m.isZero=function(){return 0===this.s},m.lessThan=m.lt=function(g){return this.cmp(g)<0},m.lessThanOrEqualTo=m.lte=function(g){return this.cmp(g)<1},m.logarithm=m.log=function(g){var e,I=this,t=I.constructor,C=t.precision,l=C+5;if(void 0===g)g=new t(10);else if((g=new t(g)).s<1||g.eq(n))throw Error(r+"NaN");if(I.s<1)throw Error(r+(I.s?"NaN":"-Infinity"));return I.eq(n)?new t(0):(o=!1,e=G(f(I,l),f(g,l),l),o=!0,v(e,C))},m.minus=m.sub=function(g){var e=this;return g=new e.constructor(g),e.s==g.s?X(e,g):Z(e,(g.s=-g.s,g))},m.modulo=m.mod=function(g){var e,I=this,t=I.constructor,n=t.precision;if(!(g=new t(g)).s)throw Error(r+"NaN");return I.s?(o=!1,e=G(I,g,0,1).times(g),o=!0,I.minus(e)):v(new t(I),n)},m.naturalExponential=m.exp=function(){return h(this)},m.naturalLogarithm=m.ln=function(){return f(this)},m.negated=m.neg=function(){var g=new this.constructor(this);return g.s=-g.s||0,g},m.plus=m.add=function(g){var e=this;return g=new e.constructor(g),e.s==g.s?Z(e,g):X(e,(g.s=-g.s,g))},m.precision=m.sd=function(g){var e,I,t,n=this;if(void 0!==g&&g!==!!g&&1!==g&&0!==g)throw Error(a+g);if(e=B(n)+1,I=7*(t=n.d.length-1)+1,t=n.d[t]){for(;t%10==0;t/=10)I--;for(t=n.d[0];t>=10;t/=10)I++}return g&&e>I?e:I},m.squareRoot=m.sqrt=function(){var g,e,I,t,n,C,l,a=this,c=a.constructor;if(a.s<1){if(!a.s)return new c(0);throw Error(r+"NaN")}for(g=B(a),o=!1,0==(n=Math.sqrt(+a))||n==1/0?(((e=p(a.d)).length+g)%2==0&&(e+="0"),n=Math.sqrt(e),g=i((g+1)/2)-(g<0||g%2),t=new c(e=n==1/0?"5e"+g:(e=n.toExponential()).slice(0,e.indexOf("e")+1)+g)):t=new c(n.toString()),n=l=(I=c.precision)+3;;)if(t=(C=t).plus(G(a,C,l+2)).times(.5),p(C.d).slice(0,l)===(e=p(t.d)).slice(0,l)){if(e=e.slice(l-3,l+1),n==l&&"4999"==e){if(v(C,I+1,0),C.times(C).eq(a)){t=C;break}}else if("9999"!=e)break;l+=4}return o=!0,v(t,I)},m.times=m.mul=function(g){var e,I,t,n,C,l,r,a,c,i=this,A=i.constructor,u=i.d,s=(g=new A(g)).d;if(!i.s||!g.s)return new A(0);for(g.s*=i.s,I=i.e+g.e,(a=u.length)<(c=s.length)&&(C=u,u=s,s=C,l=a,a=c,c=l),C=[],t=l=a+c;t--;)C.push(0);for(t=c;--t>=0;){for(e=0,n=a+t;n>t;)r=C[n]+s[t]*u[n-t-1]+e,C[n--]=r%d|0,e=r/d|0;C[n]=(C[n]+e)%d|0}for(;!C[--l];)C.pop();return e?++I:C.shift(),g.d=C,g.e=I,o?v(g,A.precision):g},m.toDecimalPlaces=m.todp=function(g,e){var I=this,t=I.constructor;return I=new t(I),void 0===g?I:(y(g,0,C),void 0===e?e=t.rounding:y(e,0,8),v(I,g+B(I)+1,e))},m.toExponential=function(g,e){var I,t=this,n=t.constructor;return void 0===g?I=R(t,!0):(y(g,0,C),void 0===e?e=n.rounding:y(e,0,8),I=R(t=v(new n(t),g+1,e),!0,g+1)),I},m.toFixed=function(g,e){var I,t,n=this,l=n.constructor;return void 0===g?R(n):(y(g,0,C),void 0===e?e=l.rounding:y(e,0,8),I=R((t=v(new l(n),g+B(n)+1,e)).abs(),!1,g+B(t)+1),n.isneg()&&!n.isZero()?"-"+I:I)},m.toInteger=m.toint=function(){var g=this,e=g.constructor;return v(new e(g),B(g)+1,e.rounding)},m.toNumber=function(){return+this},m.toPower=m.pow=function(g){var e,I,t,C,l,a,c=this,A=c.constructor,u=+(g=new A(g));if(!g.s)return new A(n);if(!(c=new A(c)).s){if(g.s<1)throw Error(r+"Infinity");return c}if(c.eq(n))return c;if(t=A.precision,g.eq(n))return v(c,t);if(a=(e=g.e)>=(I=g.d.length-1),l=c.s,a){if((I=u<0?-u:u)<=s){for(C=new A(n),e=Math.ceil(t/7+4),o=!1;I%2&&J((C=C.times(c)).d,e),0!==(I=i(I/2));)J((c=c.times(c)).d,e);return o=!0,g.s<0?new A(n).div(C):v(C,t)}}else if(l<0)throw Error(r+"NaN");return l=l<0&&1&g.d[Math.max(e,I)]?-1:1,c.s=1,o=!1,C=g.times(f(c,t+12)),o=!0,(C=h(C)).s=l,C},m.toPrecision=function(g,e){var I,t,n=this,l=n.constructor;return void 0===g?t=R(n,(I=B(n))<=l.toExpNeg||I>=l.toExpPos):(y(g,1,C),void 0===e?e=l.rounding:y(e,0,8),t=R(n=v(new l(n),g,e),g<=(I=B(n))||I<=l.toExpNeg,g)),t},m.toSignificantDigits=m.tosd=function(g,e){var I=this.constructor;return void 0===g?(g=I.precision,e=I.rounding):(y(g,1,C),void 0===e?e=I.rounding:y(e,0,8)),v(new I(this),g,e)},m.toString=m.valueOf=m.val=m.toJSON=function(){var g=this,e=B(g),I=g.constructor;return R(g,e<=I.toExpNeg||e>=I.toExpPos)};var G=function(){function g(g,e){var I,t=0,n=g.length;for(g=g.slice();n--;)I=g[n]*e+t,g[n]=I%d|0,t=I/d|0;return t&&g.unshift(t),g}function e(g,e,I,t){var n,C;if(I!=t)C=I>t?1:-1;else for(n=C=0;n<I;n++)if(g[n]!=e[n]){C=g[n]>e[n]?1:-1;break}return C}function I(g,e,I){for(var t=0;I--;)g[I]-=t,t=g[I]<e[I]?1:0,g[I]=t*d+g[I]-e[I];for(;!g[0]&&g.length>1;)g.shift()}return function(t,n,C,l){var o,a,c,i,A,u,s,b,m,Z,y,p,G,h,S,W,f,V,X=t.constructor,R=t.s==n.s?1:-1,J=t.d,k=n.d;if(!t.s)return new X(t);if(!n.s)throw Error(r+"Division by zero");for(a=t.e-n.e,f=k.length,S=J.length,b=(s=new X(R)).d=[],c=0;k[c]==(J[c]||0);)++c;if(k[c]>(J[c]||0)&&--a,(p=null==C?C=X.precision:l?C+(B(t)-B(n))+1:C)<0)return new X(0);if(p=p/7+2|0,c=0,1==f)for(i=0,k=k[0],p++;(c<S||i)&&p--;c++)G=i*d+(J[c]||0),b[c]=G/k|0,i=G%k|0;else{for((i=d/(k[0]+1)|0)>1&&(k=g(k,i),J=g(J,i),f=k.length,S=J.length),h=f,Z=(m=J.slice(0,f)).length;Z<f;)m[Z++]=0;(V=k.slice()).unshift(0),W=k[0],k[1]>=d/2&&++W;do{i=0,(o=e(k,m,f,Z))<0?(y=m[0],f!=Z&&(y=y*d+(m[1]||0)),(i=y/W|0)>1?(i>=d&&(i=d-1),1==(o=e(A=g(k,i),m,u=A.length,Z=m.length))&&(i--,I(A,f<u?V:k,u))):(0==i&&(o=i=1),A=k.slice()),(u=A.length)<Z&&A.unshift(0),I(m,A,Z),-1==o&&(o=e(k,m,f,Z=m.length))<1&&(i++,I(m,f<Z?V:k,Z)),Z=m.length):0===o&&(i++,m=[0]),b[c++]=i,o&&m[0]?m[Z++]=J[h]||0:(m=[J[h]],Z=1)}while((h++<S||void 0!==m[0])&&p--)}return b[0]||b.shift(),s.e=a,v(s,l?C+B(s)+1:C)}}();function h(g,e){var I,t,C,l,r,a=0,i=0,u=g.constructor,d=u.precision;if(B(g)>16)throw Error(c+B(g));if(!g.s)return new u(n);for(null==e?(o=!1,r=d):r=e,l=new u(.03125);g.abs().gte(.1);)g=g.times(l),i+=5;for(r+=Math.log(A(2,i))/Math.LN10*2+5|0,I=t=C=new u(n),u.precision=r;;){if(t=v(t.times(g),r),I=I.times(++a),p((l=C.plus(G(t,I,r))).d).slice(0,r)===p(C.d).slice(0,r)){for(;i--;)C=v(C.times(C),r);return u.precision=d,null==e?(o=!0,v(C,d)):C}C=l}}function B(g){for(var e=7*g.e,I=g.d[0];I>=10;I/=10)e++;return e}function S(g,e,I){if(e>g.LN10.sd())throw o=!0,I&&(g.precision=I),Error(r+"LN10 precision limit exceeded");return v(new g(g.LN10),e)}function W(g){for(var e="";g--;)e+="0";return e}function f(g,e){var I,t,C,l,a,c,i,A,u,d=1,s=g,b=s.d,m=s.constructor,Z=m.precision;if(s.s<1)throw Error(r+(s.s?"NaN":"-Infinity"));if(s.eq(n))return new m(0);if(null==e?(o=!1,A=Z):A=e,s.eq(10))return null==e&&(o=!0),S(m,A);if(A+=10,m.precision=A,t=(I=p(b)).charAt(0),l=B(s),!(Math.abs(l)<15e14))return i=S(m,A+2,Z).times(l+""),s=f(new m(t+"."+I.slice(1)),A-10).plus(i),m.precision=Z,null==e?(o=!0,v(s,Z)):s;for(;t<7&&1!=t||1==t&&I.charAt(1)>3;)t=(I=p((s=s.times(g)).d)).charAt(0),d++;for(l=B(s),t>1?(s=new m("0."+I),l++):s=new m(t+"."+I.slice(1)),c=a=s=G(s.minus(n),s.plus(n),A),u=v(s.times(s),A),C=3;;){if(a=v(a.times(u),A),p((i=c.plus(G(a,new m(C),A))).d).slice(0,A)===p(c.d).slice(0,A))return c=c.times(2),0!==l&&(c=c.plus(S(m,A+2,Z).times(l+""))),c=G(c,new m(d),A),m.precision=Z,null==e?(o=!0,v(c,Z)):c;c=i,C+=2}}function V(g,e){var I,t,n;for((I=e.indexOf("."))>-1&&(e=e.replace(".","")),(t=e.search(/e/i))>0?(I<0&&(I=t),I+=+e.slice(t+1),e=e.substring(0,t)):I<0&&(I=e.length),t=0;48===e.charCodeAt(t);)++t;for(n=e.length;48===e.charCodeAt(n-1);)--n;if(e=e.slice(t,n)){if(n-=t,I=I-t-1,g.e=i(I/7),g.d=[],t=(I+1)%7,I<0&&(t+=7),t<n){for(t&&g.d.push(+e.slice(0,t)),n-=7;t<n;)g.d.push(+e.slice(t,t+=7));t=7-(e=e.slice(t)).length}else t-=n;for(;t--;)e+="0";if(g.d.push(+e),o&&(g.e>b||g.e<-b))throw Error(c+I)}else g.s=0,g.e=0,g.d=[0];return g}function v(g,e,I){var t,n,C,l,r,a,u,s,m=g.d;for(l=1,C=m[0];C>=10;C/=10)l++;if((t=e-l)<0)t+=7,n=e,u=m[s=0];else{if((s=Math.ceil((t+1)/7))>=(C=m.length))return g;for(u=C=m[s],l=1;C>=10;C/=10)l++;n=(t%=7)-7+l}if(void 0!==I&&(r=u/(C=A(10,l-n-1))%10|0,a=e<0||void 0!==m[s+1]||u%C,a=I<4?(r||a)&&(0==I||I==(g.s<0?3:2)):r>5||5==r&&(4==I||a||6==I&&(t>0?n>0?u/A(10,l-n):0:m[s-1])%10&1||I==(g.s<0?8:7))),e<1||!m[0])return a?(C=B(g),m.length=1,e=e-C-1,m[0]=A(10,(7-e%7)%7),g.e=i(-e/7)||0):(m.length=1,m[0]=g.e=g.s=0),g;if(0==t?(m.length=s,C=1,s--):(m.length=s+1,C=A(10,7-t),m[s]=n>0?(u/A(10,l-n)%A(10,n)|0)*C:0),a)for(;;){if(0==s){(m[0]+=C)==d&&(m[0]=1,++g.e);break}if(m[s]+=C,m[s]!=d)break;m[s--]=0,C=1}for(t=m.length;0===m[--t];)m.pop();if(o&&(g.e>b||g.e<-b))throw Error(c+B(g));return g}function X(g,e){var I,t,n,C,l,r,a,c,i,A,u=g.constructor,s=u.precision;if(!g.s||!e.s)return e.s?e.s=-e.s:e=new u(g),o?v(e,s):e;if(a=g.d,A=e.d,t=e.e,c=g.e,a=a.slice(),l=c-t){for((i=l<0)?(I=a,l=-l,r=A.length):(I=A,t=c,r=a.length),l>(n=Math.max(Math.ceil(s/7),r)+2)&&(l=n,I.length=1),I.reverse(),n=l;n--;)I.push(0);I.reverse()}else{for((i=(n=a.length)<(r=A.length))&&(r=n),n=0;n<r;n++)if(a[n]!=A[n]){i=a[n]<A[n];break}l=0}for(i&&(I=a,a=A,A=I,e.s=-e.s),r=a.length,n=A.length-r;n>0;--n)a[r++]=0;for(n=A.length;n>l;){if(a[--n]<A[n]){for(C=n;C&&0===a[--C];)a[C]=d-1;--a[C],a[n]+=d}a[n]-=A[n]}for(;0===a[--r];)a.pop();for(;0===a[0];a.shift())--t;return a[0]?(e.d=a,e.e=t,o?v(e,s):e):new u(0)}function R(g,e,I){var t,n=B(g),C=p(g.d),l=C.length;return e?(I&&(t=I-l)>0?C=C.charAt(0)+"."+C.slice(1)+W(t):l>1&&(C=C.charAt(0)+"."+C.slice(1)),C=C+(n<0?"e":"e+")+n):n<0?(C="0."+W(-n-1)+C,I&&(t=I-l)>0&&(C+=W(t))):n>=l?(C+=W(n+1-l),I&&(t=I-n-1)>0&&(C=C+"."+W(t))):((t=n+1)<l&&(C=C.slice(0,t)+"."+C.slice(t)),I&&(t=I-l)>0&&(n+1===l&&(C+="."),C+=W(t))),g.s<0?"-"+C:C}function J(g,e){if(g.length>e)return g.length=e,!0}function k(g){if(!g||"object"!==typeof g)throw Error(r+"Object expected");var e,I,t,n=["precision",1,C,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<n.length;e+=3)if(void 0!==(t=g[I=n[e]])){if(!(i(t)===t&&t>=n[e+1]&&t<=n[e+2]))throw Error(a+I+": "+t);this[I]=t}if(void 0!==(t=g[I="LN10"])){if(t!=Math.LN10)throw Error(a+I+": "+t);this[I]=new this(t)}return this}l=function g(e){var I,t,n;function C(g){var e=this;if(!(e instanceof C))return new C(g);if(e.constructor=C,g instanceof C)return e.s=g.s,e.e=g.e,void(e.d=(g=g.d)?g.slice():g);if("number"===typeof g){if(0*g!==0)throw Error(a+g);if(g>0)e.s=1;else{if(!(g<0))return e.s=0,e.e=0,void(e.d=[0]);g=-g,e.s=-1}return g===~~g&&g<1e7?(e.e=0,void(e.d=[g])):V(e,g.toString())}if("string"!==typeof g)throw Error(a+g);if(45===g.charCodeAt(0)?(g=g.slice(1),e.s=-1):e.s=1,!u.test(g))throw Error(a+g);V(e,g)}if(C.prototype=m,C.ROUND_UP=0,C.ROUND_DOWN=1,C.ROUND_CEIL=2,C.ROUND_FLOOR=3,C.ROUND_HALF_UP=4,C.ROUND_HALF_DOWN=5,C.ROUND_HALF_EVEN=6,C.ROUND_HALF_CEIL=7,C.ROUND_HALF_FLOOR=8,C.clone=g,C.config=C.set=k,void 0===e&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],I=0;I<n.length;)e.hasOwnProperty(t=n[I++])||(e[t]=this[t]);return C.config(e),C}(l),l.default=l.Decimal=l,n=new l(1),void 0===(t=function(){return l}.call(e,I,e,g))||(g.exports=t)}()},7283:g=>{"use strict";var e=Object.prototype.hasOwnProperty,I="~";function t(){}function n(g,e,I){this.fn=g,this.context=e,this.once=I||!1}function C(g,e,t,C,l){if("function"!==typeof t)throw new TypeError("The listener must be a function");var o=new n(t,C||g,l),r=I?I+e:e;return g._events[r]?g._events[r].fn?g._events[r]=[g._events[r],o]:g._events[r].push(o):(g._events[r]=o,g._eventsCount++),g}function l(g,e){0===--g._eventsCount?g._events=new t:delete g._events[e]}function o(){this._events=new t,this._eventsCount=0}Object.create&&(t.prototype=Object.create(null),(new t).__proto__||(I=!1)),o.prototype.eventNames=function(){var g,t,n=[];if(0===this._eventsCount)return n;for(t in g=this._events)e.call(g,t)&&n.push(I?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(g)):n},o.prototype.listeners=function(g){var e=I?I+g:g,t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var n=0,C=t.length,l=new Array(C);n<C;n++)l[n]=t[n].fn;return l},o.prototype.listenerCount=function(g){var e=I?I+g:g,t=this._events[e];return t?t.fn?1:t.length:0},o.prototype.emit=function(g,e,t,n,C,l){var o=I?I+g:g;if(!this._events[o])return!1;var r,a,c=this._events[o],i=arguments.length;if(c.fn){switch(c.once&&this.removeListener(g,c.fn,void 0,!0),i){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,t),!0;case 4:return c.fn.call(c.context,e,t,n),!0;case 5:return c.fn.call(c.context,e,t,n,C),!0;case 6:return c.fn.call(c.context,e,t,n,C,l),!0}for(a=1,r=new Array(i-1);a<i;a++)r[a-1]=arguments[a];c.fn.apply(c.context,r)}else{var A,u=c.length;for(a=0;a<u;a++)switch(c[a].once&&this.removeListener(g,c[a].fn,void 0,!0),i){case 1:c[a].fn.call(c[a].context);break;case 2:c[a].fn.call(c[a].context,e);break;case 3:c[a].fn.call(c[a].context,e,t);break;case 4:c[a].fn.call(c[a].context,e,t,n);break;default:if(!r)for(A=1,r=new Array(i-1);A<i;A++)r[A-1]=arguments[A];c[a].fn.apply(c[a].context,r)}}return!0},o.prototype.on=function(g,e,I){return C(this,g,e,I,!1)},o.prototype.once=function(g,e,I){return C(this,g,e,I,!0)},o.prototype.removeListener=function(g,e,t,n){var C=I?I+g:g;if(!this._events[C])return this;if(!e)return l(this,C),this;var o=this._events[C];if(o.fn)o.fn!==e||n&&!o.once||t&&o.context!==t||l(this,C);else{for(var r=0,a=[],c=o.length;r<c;r++)(o[r].fn!==e||n&&!o[r].once||t&&o[r].context!==t)&&a.push(o[r]);a.length?this._events[C]=1===a.length?a[0]:a:l(this,C)}return this},o.prototype.removeAllListeners=function(g){var e;return g?(e=I?I+g:g,this._events[e]&&l(this,e)):(this._events=new t,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=I,o.EventEmitter=o,g.exports=o},7685:(g,e,I)=>{var t=I(7937)(I(6552),"DataView");g.exports=t},8724:(g,e,I)=>{var t=I(7615),n=I(5051),C=I(2154),l=I(8734),o=I(2662);function r(g){var e=-1,I=null==g?0:g.length;for(this.clear();++e<I;){var t=g[e];this.set(t[0],t[1])}}r.prototype.clear=t,r.prototype.delete=n,r.prototype.get=C,r.prototype.has=l,r.prototype.set=o,g.exports=r},7160:(g,e,I)=>{var t=I(7563),n=I(9935),C=I(4190),l=I(1946),o=I(1714);function r(g){var e=-1,I=null==g?0:g.length;for(this.clear();++e<I;){var t=g[e];this.set(t[0],t[1])}}r.prototype.clear=t,r.prototype.delete=n,r.prototype.get=C,r.prototype.has=l,r.prototype.set=o,g.exports=r},5204:(g,e,I)=>{var t=I(7937)(I(6552),"Map");g.exports=t},4816:(g,e,I)=>{var t=I(7251),n=I(7159),C=I(438),l=I(9394),o=I(6874);function r(g){var e=-1,I=null==g?0:g.length;for(this.clear();++e<I;){var t=g[e];this.set(t[0],t[1])}}r.prototype.clear=t,r.prototype.delete=n,r.prototype.get=C,r.prototype.has=l,r.prototype.set=o,g.exports=r},5387:(g,e,I)=>{var t=I(7937)(I(6552),"Promise");g.exports=t},2070:(g,e,I)=>{var t=I(7937)(I(6552),"Set");g.exports=t},8902:(g,e,I)=>{var t=I(4816),n=I(6179),C=I(6704);function l(g){var e=-1,I=null==g?0:g.length;for(this.__data__=new t;++e<I;)this.add(g[e])}l.prototype.add=l.prototype.push=n,l.prototype.has=C,g.exports=l},5538:(g,e,I)=>{var t=I(7160),n=I(4545),C=I(793),l=I(7760),o=I(3892),r=I(6788);function a(g){var e=this.__data__=new t(g);this.size=e.size}a.prototype.clear=n,a.prototype.delete=C,a.prototype.get=l,a.prototype.has=o,a.prototype.set=r,g.exports=a},9812:(g,e,I)=>{var t=I(6552).Symbol;g.exports=t},2929:(g,e,I)=>{var t=I(6552).Uint8Array;g.exports=t},6600:(g,e,I)=>{var t=I(7937)(I(6552),"WeakMap");g.exports=t},1170:g=>{g.exports=function(g,e,I){switch(I.length){case 0:return g.call(e);case 1:return g.call(e,I[0]);case 2:return g.call(e,I[0],I[1]);case 3:return g.call(e,I[0],I[1],I[2])}return g.apply(e,I)}},5295:g=>{g.exports=function(g,e){for(var I=-1,t=null==g?0:g.length;++I<t;)if(!e(g[I],I,g))return!1;return!0}},7529:g=>{g.exports=function(g,e){for(var I=-1,t=null==g?0:g.length,n=0,C=[];++I<t;){var l=g[I];e(l,I,g)&&(C[n++]=l)}return C}},5866:(g,e,I)=>{var t=I(8468);g.exports=function(g,e){return!!(null==g?0:g.length)&&t(g,e,0)>-1}},1558:g=>{g.exports=function(g,e,I){for(var t=-1,n=null==g?0:g.length;++t<n;)if(I(e,g[t]))return!0;return!1}},3204:(g,e,I)=>{var t=I(3343),n=I(2777),C=I(4052),l=I(4543),o=I(9194),r=I(1268),a=Object.prototype.hasOwnProperty;g.exports=function(g,e){var I=C(g),c=!I&&n(g),i=!I&&!c&&l(g),A=!I&&!c&&!i&&r(g),u=I||c||i||A,d=u?t(g.length,String):[],s=d.length;for(var b in g)!e&&!a.call(g,b)||u&&("length"==b||i&&("offset"==b||"parent"==b)||A&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||o(b,s))||d.push(b);return d}},149:g=>{g.exports=function(g,e){for(var I=-1,t=null==g?0:g.length,n=Array(t);++I<t;)n[I]=e(g[I],I,g);return n}},8895:g=>{g.exports=function(g,e){for(var I=-1,t=e.length,n=g.length;++I<t;)g[n+I]=e[I];return g}},2587:g=>{g.exports=function(g,e){for(var I=-1,t=null==g?0:g.length;++I<t;)if(e(g[I],I,g))return!0;return!1}},5967:g=>{g.exports=function(g){return g.split("")}},1340:(g,e,I)=>{var t=I(3211);g.exports=function(g,e){for(var I=g.length;I--;)if(t(g[I][0],e))return I;return-1}},1775:(g,e,I)=>{var t=I(5654);g.exports=function(g,e,I){"__proto__"==e&&t?t(g,e,{configurable:!0,enumerable:!0,value:I,writable:!0}):g[e]=I}},5652:(g,e,I)=>{var t=I(4664),n=I(6516)(t);g.exports=n},4746:(g,e,I)=>{var t=I(5652);g.exports=function(g,e){var I=!0;return t(g,(function(g,t,n){return I=!!e(g,t,n)})),I}},9742:(g,e,I)=>{var t=I(9841);g.exports=function(g,e,I){for(var n=-1,C=g.length;++n<C;){var l=g[n],o=e(l);if(null!=o&&(void 0===r?o===o&&!t(o):I(o,r)))var r=o,a=l}return a}},5816:g=>{g.exports=function(g,e,I,t){for(var n=g.length,C=I+(t?1:-1);t?C--:++C<n;)if(e(g[C],C,g))return C;return-1}},755:(g,e,I)=>{var t=I(8895),n=I(7116);g.exports=function g(e,I,C,l,o){var r=-1,a=e.length;for(C||(C=n),o||(o=[]);++r<a;){var c=e[r];I>0&&C(c)?I>1?g(c,I-1,C,l,o):t(o,c):l||(o[o.length]=c)}return o}},4258:(g,e,I)=>{var t=I(5906)();g.exports=t},4664:(g,e,I)=>{var t=I(4258),n=I(8673);g.exports=function(g,e){return g&&t(g,e,n)}},2969:(g,e,I)=>{var t=I(5324),n=I(914);g.exports=function(g,e){for(var I=0,C=(e=t(e,g)).length;null!=g&&I<C;)g=g[n(e[I++])];return I&&I==C?g:void 0}},4262:(g,e,I)=>{var t=I(8895),n=I(4052);g.exports=function(g,e,I){var C=e(g);return n(g)?C:t(C,I(g))}},6913:(g,e,I)=>{var t=I(9812),n=I(4552),C=I(6095),l=t?t.toStringTag:void 0;g.exports=function(g){return null==g?void 0===g?"[object Undefined]":"[object Null]":l&&l in Object(g)?n(g):C(g)}},7498:g=>{g.exports=function(g,e){return g>e}},7894:g=>{g.exports=function(g,e){return null!=g&&e in Object(g)}},8468:(g,e,I)=>{var t=I(5816),n=I(644),C=I(4020);g.exports=function(g,e,I){return e===e?C(g,e,I):t(g,n,I)}},5193:(g,e,I)=>{var t=I(6913),n=I(2761);g.exports=function(g){return n(g)&&"[object Arguments]"==t(g)}},6989:(g,e,I)=>{var t=I(6399),n=I(2761);g.exports=function g(e,I,C,l,o){return e===I||(null==e||null==I||!n(e)&&!n(I)?e!==e&&I!==I:t(e,I,C,l,g,o))}},6399:(g,e,I)=>{var t=I(5538),n=I(3668),C=I(9987),l=I(5752),o=I(6924),r=I(4052),a=I(4543),c=I(1268),i="[object Arguments]",A="[object Array]",u="[object Object]",d=Object.prototype.hasOwnProperty;g.exports=function(g,e,I,s,b,m){var Z=r(g),y=r(e),p=Z?A:o(g),G=y?A:o(e),h=(p=p==i?u:p)==u,B=(G=G==i?u:G)==u,S=p==G;if(S&&a(g)){if(!a(e))return!1;Z=!0,h=!1}if(S&&!h)return m||(m=new t),Z||c(g)?n(g,e,I,s,b,m):C(g,e,p,I,s,b,m);if(!(1&I)){var W=h&&d.call(g,"__wrapped__"),f=B&&d.call(e,"__wrapped__");if(W||f){var V=W?g.value():g,v=f?e.value():e;return m||(m=new t),b(V,v,I,s,m)}}return!!S&&(m||(m=new t),l(g,e,I,s,b,m))}},6532:(g,e,I)=>{var t=I(5538),n=I(6989);g.exports=function(g,e,I,C){var l=I.length,o=l,r=!C;if(null==g)return!o;for(g=Object(g);l--;){var a=I[l];if(r&&a[2]?a[1]!==g[a[0]]:!(a[0]in g))return!1}for(;++l<o;){var c=(a=I[l])[0],i=g[c],A=a[1];if(r&&a[2]){if(void 0===i&&!(c in g))return!1}else{var u=new t;if(C)var d=C(i,A,c,g,e,u);if(!(void 0===d?n(A,i,3,C,u):d))return!1}}return!0}},644:g=>{g.exports=function(g){return g!==g}},6954:(g,e,I)=>{var t=I(1629),n=I(7857),C=I(6686),l=I(6996),o=/^\[object .+?Constructor\]$/,r=Function.prototype,a=Object.prototype,c=r.toString,i=a.hasOwnProperty,A=RegExp("^"+c.call(i).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");g.exports=function(g){return!(!C(g)||n(g))&&(t(g)?A:o).test(l(g))}},5428:(g,e,I)=>{var t=I(6913),n=I(6173),C=I(2761),l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l["[object Arguments]"]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l["[object Function]"]=l["[object Map]"]=l["[object Number]"]=l["[object Object]"]=l["[object RegExp]"]=l["[object Set]"]=l["[object String]"]=l["[object WeakMap]"]=!1,g.exports=function(g){return C(g)&&n(g.length)&&!!l[t(g)]}},9096:(g,e,I)=>{var t=I(9256),n=I(5029),C=I(3279),l=I(4052),o=I(3932);g.exports=function(g){return"function"==typeof g?g:null==g?C:"object"==typeof g?l(g)?n(g[0],g[1]):t(g):o(g)}},3713:(g,e,I)=>{var t=I(6140),n=I(1143),C=Object.prototype.hasOwnProperty;g.exports=function(g){if(!t(g))return n(g);var e=[];for(var I in Object(g))C.call(g,I)&&"constructor"!=I&&e.push(I);return e}},61:g=>{g.exports=function(g,e){return g<e}},8883:(g,e,I)=>{var t=I(5652),n=I(6571);g.exports=function(g,e){var I=-1,C=n(g)?Array(g.length):[];return t(g,(function(g,t,n){C[++I]=e(g,t,n)})),C}},9256:(g,e,I)=>{var t=I(6532),n=I(3781),C=I(1310);g.exports=function(g){var e=n(g);return 1==e.length&&e[0][2]?C(e[0][0],e[0][1]):function(I){return I===g||t(I,g,e)}}},5029:(g,e,I)=>{var t=I(6989),n=I(3097),C=I(3366),l=I(2597),o=I(9417),r=I(1310),a=I(914);g.exports=function(g,e){return l(g)&&o(e)?r(a(g),e):function(I){var l=n(I,g);return void 0===l&&l===e?C(I,g):t(e,l,3)}}},2536:(g,e,I)=>{var t=I(149),n=I(2969),C=I(9096),l=I(8883),o=I(320),r=I(7574),a=I(5893),c=I(3279),i=I(4052);g.exports=function(g,e,I){e=e.length?t(e,(function(g){return i(g)?function(e){return n(e,1===g.length?g[0]:g)}:g})):[c];var A=-1;e=t(e,r(C));var u=l(g,(function(g,I,n){return{criteria:t(e,(function(e){return e(g)})),index:++A,value:g}}));return o(u,(function(g,e){return a(g,e,I)}))}},396:g=>{g.exports=function(g){return function(e){return null==e?void 0:e[g]}}},2866:(g,e,I)=>{var t=I(2969);g.exports=function(g){return function(e){return t(e,g)}}},9676:g=>{var e=Math.ceil,I=Math.max;g.exports=function(g,t,n,C){for(var l=-1,o=I(e((t-g)/(n||1)),0),r=Array(o);o--;)r[C?o:++l]=g,g+=n;return r}},5647:(g,e,I)=>{var t=I(3279),n=I(5636),C=I(6350);g.exports=function(g,e){return C(n(g,e,t),g+"")}},8325:(g,e,I)=>{var t=I(2541),n=I(5654),C=I(3279),l=n?function(g,e){return n(g,"toString",{configurable:!0,enumerable:!1,value:t(e),writable:!0})}:C;g.exports=l},3871:g=>{g.exports=function(g,e,I){var t=-1,n=g.length;e<0&&(e=-e>n?0:n+e),(I=I>n?n:I)<0&&(I+=n),n=e>I?0:I-e>>>0,e>>>=0;for(var C=Array(n);++t<n;)C[t]=g[t+e];return C}},2165:(g,e,I)=>{var t=I(5652);g.exports=function(g,e){var I;return t(g,(function(g,t,n){return!(I=e(g,t,n))})),!!I}},320:g=>{g.exports=function(g,e){var I=g.length;for(g.sort(e);I--;)g[I]=g[I].value;return g}},3343:g=>{g.exports=function(g,e){for(var I=-1,t=Array(g);++I<g;)t[I]=e(I);return t}},8541:(g,e,I)=>{var t=I(9812),n=I(149),C=I(4052),l=I(9841),o=t?t.prototype:void 0,r=o?o.toString:void 0;g.exports=function g(e){if("string"==typeof e)return e;if(C(e))return n(e,g)+"";if(l(e))return r?r.call(e):"";var I=e+"";return"0"==I&&1/e==-1/0?"-0":I}},1141:(g,e,I)=>{var t=I(143),n=/^\s+/;g.exports=function(g){return g?g.slice(0,t(g)+1).replace(n,""):g}},7574:g=>{g.exports=function(g){return function(e){return g(e)}}},4416:(g,e,I)=>{var t=I(8902),n=I(5866),C=I(1558),l=I(8114),o=I(8182),r=I(2074);g.exports=function(g,e,I){var a=-1,c=n,i=g.length,A=!0,u=[],d=u;if(I)A=!1,c=C;else if(i>=200){var s=e?null:o(g);if(s)return r(s);A=!1,c=l,d=new t}else d=e?[]:u;g:for(;++a<i;){var b=g[a],m=e?e(b):b;if(b=I||0!==b?b:0,A&&m===m){for(var Z=d.length;Z--;)if(d[Z]===m)continue g;e&&d.push(m),u.push(b)}else c(d,m,I)||(d!==u&&d.push(m),u.push(b))}return u}},8114:g=>{g.exports=function(g,e){return g.has(e)}},5324:(g,e,I)=>{var t=I(4052),n=I(2597),C=I(4079),l=I(1069);g.exports=function(g,e){return t(g)?g:n(g,e)?[g]:C(l(g))}},8189:(g,e,I)=>{var t=I(3871);g.exports=function(g,e,I){var n=g.length;return I=void 0===I?n:I,!e&&I>=n?g:t(g,e,I)}},6599:(g,e,I)=>{var t=I(9841);g.exports=function(g,e){if(g!==e){var I=void 0!==g,n=null===g,C=g===g,l=t(g),o=void 0!==e,r=null===e,a=e===e,c=t(e);if(!r&&!c&&!l&&g>e||l&&o&&a&&!r&&!c||n&&o&&a||!I&&a||!C)return 1;if(!n&&!l&&!c&&g<e||c&&I&&C&&!n&&!l||r&&I&&C||!o&&C||!a)return-1}return 0}},5893:(g,e,I)=>{var t=I(6599);g.exports=function(g,e,I){for(var n=-1,C=g.criteria,l=e.criteria,o=C.length,r=I.length;++n<o;){var a=t(C[n],l[n]);if(a)return n>=r?a:a*("desc"==I[n]?-1:1)}return g.index-e.index}},3440:(g,e,I)=>{var t=I(6552)["__core-js_shared__"];g.exports=t},6516:(g,e,I)=>{var t=I(6571);g.exports=function(g,e){return function(I,n){if(null==I)return I;if(!t(I))return g(I,n);for(var C=I.length,l=e?C:-1,o=Object(I);(e?l--:++l<C)&&!1!==n(o[l],l,o););return I}}},5906:g=>{g.exports=function(g){return function(e,I,t){for(var n=-1,C=Object(e),l=t(e),o=l.length;o--;){var r=l[g?o:++n];if(!1===I(C[r],r,C))break}return e}}},7676:(g,e,I)=>{var t=I(8189),n=I(6311),C=I(9115),l=I(1069);g.exports=function(g){return function(e){e=l(e);var I=n(e)?C(e):void 0,o=I?I[0]:e.charAt(0),r=I?t(I,1).join(""):e.slice(1);return o[g]()+r}}},9995:(g,e,I)=>{var t=I(9096),n=I(6571),C=I(8673);g.exports=function(g){return function(e,I,l){var o=Object(e);if(!n(e)){var r=t(I,3);e=C(e),I=function(g){return r(o[g],g,o)}}var a=g(e,I,l);return a>-1?o[r?e[a]:a]:void 0}}},3331:(g,e,I)=>{var t=I(9676),n=I(929),C=I(7303);g.exports=function(g){return function(e,I,l){return l&&"number"!=typeof l&&n(e,I,l)&&(I=l=void 0),e=C(e),void 0===I?(I=e,e=0):I=C(I),l=void 0===l?e<I?1:-1:C(l),t(e,I,l,g)}}},8182:(g,e,I)=>{var t=I(2070),n=I(5713),C=I(2074),l=t&&1/C(new t([,-0]))[1]==1/0?function(g){return new t(g)}:n;g.exports=l},5654:(g,e,I)=>{var t=I(7937),n=function(){try{var g=t(Object,"defineProperty");return g({},"",{}),g}catch(e){}}();g.exports=n},3668:(g,e,I)=>{var t=I(8902),n=I(2587),C=I(8114);g.exports=function(g,e,I,l,o,r){var a=1&I,c=g.length,i=e.length;if(c!=i&&!(a&&i>c))return!1;var A=r.get(g),u=r.get(e);if(A&&u)return A==e&&u==g;var d=-1,s=!0,b=2&I?new t:void 0;for(r.set(g,e),r.set(e,g);++d<c;){var m=g[d],Z=e[d];if(l)var y=a?l(Z,m,d,e,g,r):l(m,Z,d,g,e,r);if(void 0!==y){if(y)continue;s=!1;break}if(b){if(!n(e,(function(g,e){if(!C(b,e)&&(m===g||o(m,g,I,l,r)))return b.push(e)}))){s=!1;break}}else if(m!==Z&&!o(m,Z,I,l,r)){s=!1;break}}return r.delete(g),r.delete(e),s}},9987:(g,e,I)=>{var t=I(9812),n=I(2929),C=I(3211),l=I(3668),o=I(4160),r=I(2074),a=t?t.prototype:void 0,c=a?a.valueOf:void 0;g.exports=function(g,e,I,t,a,i,A){switch(I){case"[object DataView]":if(g.byteLength!=e.byteLength||g.byteOffset!=e.byteOffset)return!1;g=g.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(g.byteLength!=e.byteLength||!i(new n(g),new n(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return C(+g,+e);case"[object Error]":return g.name==e.name&&g.message==e.message;case"[object RegExp]":case"[object String]":return g==e+"";case"[object Map]":var u=o;case"[object Set]":var d=1&t;if(u||(u=r),g.size!=e.size&&!d)return!1;var s=A.get(g);if(s)return s==e;t|=2,A.set(g,e);var b=l(u(g),u(e),t,a,i,A);return A.delete(g),b;case"[object Symbol]":if(c)return c.call(g)==c.call(e)}return!1}},5752:(g,e,I)=>{var t=I(9395),n=Object.prototype.hasOwnProperty;g.exports=function(g,e,I,C,l,o){var r=1&I,a=t(g),c=a.length;if(c!=t(e).length&&!r)return!1;for(var i=c;i--;){var A=a[i];if(!(r?A in e:n.call(e,A)))return!1}var u=o.get(g),d=o.get(e);if(u&&d)return u==e&&d==g;var s=!0;o.set(g,e),o.set(e,g);for(var b=r;++i<c;){var m=g[A=a[i]],Z=e[A];if(C)var y=r?C(Z,m,A,e,g,o):C(m,Z,A,g,e,o);if(!(void 0===y?m===Z||l(m,Z,I,C,o):y)){s=!1;break}b||(b="constructor"==A)}if(s&&!b){var p=g.constructor,G=e.constructor;p==G||!("constructor"in g)||!("constructor"in e)||"function"==typeof p&&p instanceof p&&"function"==typeof G&&G instanceof G||(s=!1)}return o.delete(g),o.delete(e),s}},7105:(g,e,I)=>{var t="object"==typeof I.g&&I.g&&I.g.Object===Object&&I.g;g.exports=t},9395:(g,e,I)=>{var t=I(4262),n=I(9621),C=I(8673);g.exports=function(g){return t(g,C,n)}},2622:(g,e,I)=>{var t=I(705);g.exports=function(g,e){var I=g.__data__;return t(e)?I["string"==typeof e?"string":"hash"]:I.map}},3781:(g,e,I)=>{var t=I(9417),n=I(8673);g.exports=function(g){for(var e=n(g),I=e.length;I--;){var C=e[I],l=g[C];e[I]=[C,l,t(l)]}return e}},7937:(g,e,I)=>{var t=I(6954),n=I(4657);g.exports=function(g,e){var I=n(g,e);return t(I)?I:void 0}},5990:(g,e,I)=>{var t=I(3028)(Object.getPrototypeOf,Object);g.exports=t},4552:(g,e,I)=>{var t=I(9812),n=Object.prototype,C=n.hasOwnProperty,l=n.toString,o=t?t.toStringTag:void 0;g.exports=function(g){var e=C.call(g,o),I=g[o];try{g[o]=void 0;var t=!0}catch(r){}var n=l.call(g);return t&&(e?g[o]=I:delete g[o]),n}},9621:(g,e,I)=>{var t=I(7529),n=I(7828),C=Object.prototype.propertyIsEnumerable,l=Object.getOwnPropertySymbols,o=l?function(g){return null==g?[]:(g=Object(g),t(l(g),(function(e){return C.call(g,e)})))}:n;g.exports=o},6924:(g,e,I)=>{var t=I(7685),n=I(5204),C=I(5387),l=I(2070),o=I(6600),r=I(6913),a=I(6996),c="[object Map]",i="[object Promise]",A="[object Set]",u="[object WeakMap]",d="[object DataView]",s=a(t),b=a(n),m=a(C),Z=a(l),y=a(o),p=r;(t&&p(new t(new ArrayBuffer(1)))!=d||n&&p(new n)!=c||C&&p(C.resolve())!=i||l&&p(new l)!=A||o&&p(new o)!=u)&&(p=function(g){var e=r(g),I="[object Object]"==e?g.constructor:void 0,t=I?a(I):"";if(t)switch(t){case s:return d;case b:return c;case m:return i;case Z:return A;case y:return u}return e}),g.exports=p},4657:g=>{g.exports=function(g,e){return null==g?void 0:g[e]}},9057:(g,e,I)=>{var t=I(5324),n=I(2777),C=I(4052),l=I(9194),o=I(6173),r=I(914);g.exports=function(g,e,I){for(var a=-1,c=(e=t(e,g)).length,i=!1;++a<c;){var A=r(e[a]);if(!(i=null!=g&&I(g,A)))break;g=g[A]}return i||++a!=c?i:!!(c=null==g?0:g.length)&&o(c)&&l(A,c)&&(C(g)||n(g))}},6311:g=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");g.exports=function(g){return e.test(g)}},7615:(g,e,I)=>{var t=I(5575);g.exports=function(){this.__data__=t?t(null):{},this.size=0}},5051:g=>{g.exports=function(g){var e=this.has(g)&&delete this.__data__[g];return this.size-=e?1:0,e}},2154:(g,e,I)=>{var t=I(5575),n=Object.prototype.hasOwnProperty;g.exports=function(g){var e=this.__data__;if(t){var I=e[g];return"__lodash_hash_undefined__"===I?void 0:I}return n.call(e,g)?e[g]:void 0}},8734:(g,e,I)=>{var t=I(5575),n=Object.prototype.hasOwnProperty;g.exports=function(g){var e=this.__data__;return t?void 0!==e[g]:n.call(e,g)}},2662:(g,e,I)=>{var t=I(5575);g.exports=function(g,e){var I=this.__data__;return this.size+=this.has(g)?0:1,I[g]=t&&void 0===e?"__lodash_hash_undefined__":e,this}},7116:(g,e,I)=>{var t=I(9812),n=I(2777),C=I(4052),l=t?t.isConcatSpreadable:void 0;g.exports=function(g){return C(g)||n(g)||!!(l&&g&&g[l])}},9194:g=>{var e=/^(?:0|[1-9]\d*)$/;g.exports=function(g,I){var t=typeof g;return!!(I=null==I?9007199254740991:I)&&("number"==t||"symbol"!=t&&e.test(g))&&g>-1&&g%1==0&&g<I}},929:(g,e,I)=>{var t=I(3211),n=I(6571),C=I(9194),l=I(6686);g.exports=function(g,e,I){if(!l(I))return!1;var o=typeof e;return!!("number"==o?n(I)&&C(e,I.length):"string"==o&&e in I)&&t(I[e],g)}},2597:(g,e,I)=>{var t=I(4052),n=I(9841),C=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/;g.exports=function(g,e){if(t(g))return!1;var I=typeof g;return!("number"!=I&&"symbol"!=I&&"boolean"!=I&&null!=g&&!n(g))||(l.test(g)||!C.test(g)||null!=e&&g in Object(e))}},705:g=>{g.exports=function(g){var e=typeof g;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==g:null===g}},7857:(g,e,I)=>{var t=I(3440),n=function(){var g=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}();g.exports=function(g){return!!n&&n in g}},6140:g=>{var e=Object.prototype;g.exports=function(g){var I=g&&g.constructor;return g===("function"==typeof I&&I.prototype||e)}},9417:(g,e,I)=>{var t=I(6686);g.exports=function(g){return g===g&&!t(g)}},7563:g=>{g.exports=function(){this.__data__=[],this.size=0}},9935:(g,e,I)=>{var t=I(1340),n=Array.prototype.splice;g.exports=function(g){var e=this.__data__,I=t(e,g);return!(I<0)&&(I==e.length-1?e.pop():n.call(e,I,1),--this.size,!0)}},4190:(g,e,I)=>{var t=I(1340);g.exports=function(g){var e=this.__data__,I=t(e,g);return I<0?void 0:e[I][1]}},1946:(g,e,I)=>{var t=I(1340);g.exports=function(g){return t(this.__data__,g)>-1}},1714:(g,e,I)=>{var t=I(1340);g.exports=function(g,e){var I=this.__data__,n=t(I,g);return n<0?(++this.size,I.push([g,e])):I[n][1]=e,this}},7251:(g,e,I)=>{var t=I(8724),n=I(7160),C=I(5204);g.exports=function(){this.size=0,this.__data__={hash:new t,map:new(C||n),string:new t}}},7159:(g,e,I)=>{var t=I(2622);g.exports=function(g){var e=t(this,g).delete(g);return this.size-=e?1:0,e}},438:(g,e,I)=>{var t=I(2622);g.exports=function(g){return t(this,g).get(g)}},9394:(g,e,I)=>{var t=I(2622);g.exports=function(g){return t(this,g).has(g)}},6874:(g,e,I)=>{var t=I(2622);g.exports=function(g,e){var I=t(this,g),n=I.size;return I.set(g,e),this.size+=I.size==n?0:1,this}},4160:g=>{g.exports=function(g){var e=-1,I=Array(g.size);return g.forEach((function(g,t){I[++e]=[t,g]})),I}},1310:g=>{g.exports=function(g,e){return function(I){return null!=I&&(I[g]===e&&(void 0!==e||g in Object(I)))}}},8259:(g,e,I)=>{var t=I(5797);g.exports=function(g){var e=t(g,(function(g){return 500===I.size&&I.clear(),g})),I=e.cache;return e}},5575:(g,e,I)=>{var t=I(7937)(Object,"create");g.exports=t},1143:(g,e,I)=>{var t=I(3028)(Object.keys,Object);g.exports=t},6832:(g,e,I)=>{g=I.nmd(g);var t=I(7105),n=e&&!e.nodeType&&e,C=n&&g&&!g.nodeType&&g,l=C&&C.exports===n&&t.process,o=function(){try{var g=C&&C.require&&C.require("util").types;return g||l&&l.binding&&l.binding("util")}catch(e){}}();g.exports=o},6095:g=>{var e=Object.prototype.toString;g.exports=function(g){return e.call(g)}},3028:g=>{g.exports=function(g,e){return function(I){return g(e(I))}}},5636:(g,e,I)=>{var t=I(1170),n=Math.max;g.exports=function(g,e,I){return e=n(void 0===e?g.length-1:e,0),function(){for(var C=arguments,l=-1,o=n(C.length-e,0),r=Array(o);++l<o;)r[l]=C[e+l];l=-1;for(var a=Array(e+1);++l<e;)a[l]=C[l];return a[e]=I(r),t(g,this,a)}}},6552:(g,e,I)=>{var t=I(7105),n="object"==typeof self&&self&&self.Object===Object&&self,C=t||n||Function("return this")();g.exports=C},6179:g=>{g.exports=function(g){return this.__data__.set(g,"__lodash_hash_undefined__"),this}},6704:g=>{g.exports=function(g){return this.__data__.has(g)}},2074:g=>{g.exports=function(g){var e=-1,I=Array(g.size);return g.forEach((function(g){I[++e]=g})),I}},6350:(g,e,I)=>{var t=I(8325),n=I(6578)(t);g.exports=n},6578:g=>{var e=Date.now;g.exports=function(g){var I=0,t=0;return function(){var n=e(),C=16-(n-t);if(t=n,C>0){if(++I>=800)return arguments[0]}else I=0;return g.apply(void 0,arguments)}}},4545:(g,e,I)=>{var t=I(7160);g.exports=function(){this.__data__=new t,this.size=0}},793:g=>{g.exports=function(g){var e=this.__data__,I=e.delete(g);return this.size=e.size,I}},7760:g=>{g.exports=function(g){return this.__data__.get(g)}},3892:g=>{g.exports=function(g){return this.__data__.has(g)}},6788:(g,e,I)=>{var t=I(7160),n=I(5204),C=I(4816);g.exports=function(g,e){var I=this.__data__;if(I instanceof t){var l=I.__data__;if(!n||l.length<199)return l.push([g,e]),this.size=++I.size,this;I=this.__data__=new C(l)}return I.set(g,e),this.size=I.size,this}},4020:g=>{g.exports=function(g,e,I){for(var t=I-1,n=g.length;++t<n;)if(g[t]===e)return t;return-1}},9115:(g,e,I)=>{var t=I(5967),n=I(6311),C=I(715);g.exports=function(g){return n(g)?C(g):t(g)}},4079:(g,e,I)=>{var t=I(8259),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C=/\\(\\)?/g,l=t((function(g){var e=[];return 46===g.charCodeAt(0)&&e.push(""),g.replace(n,(function(g,I,t,n){e.push(t?n.replace(C,"$1"):I||g)})),e}));g.exports=l},914:(g,e,I)=>{var t=I(9841);g.exports=function(g){if("string"==typeof g||t(g))return g;var e=g+"";return"0"==e&&1/g==-1/0?"-0":e}},6996:g=>{var e=Function.prototype.toString;g.exports=function(g){if(null!=g){try{return e.call(g)}catch(I){}try{return g+""}catch(I){}}return""}},143:g=>{var e=/\s/;g.exports=function(g){for(var I=g.length;I--&&e.test(g.charAt(I)););return I}},715:g=>{var e="\\ud800-\\udfff",I="["+e+"]",t="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\\ud83c[\\udffb-\\udfff]",C="[^"+e+"]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",r="(?:"+t+"|"+n+")"+"?",a="[\\ufe0e\\ufe0f]?",c=a+r+("(?:\\u200d(?:"+[C,l,o].join("|")+")"+a+r+")*"),i="(?:"+[C+t+"?",t,l,o,I].join("|")+")",A=RegExp(n+"(?="+n+")|"+i+c,"g");g.exports=function(g){return g.match(A)||[]}},2541:g=>{g.exports=function(g){return function(){return g}}},3950:(g,e,I)=>{var t=I(6686),n=I(4757),C=I(801),l=Math.max,o=Math.min;g.exports=function(g,e,I){var r,a,c,i,A,u,d=0,s=!1,b=!1,m=!0;if("function"!=typeof g)throw new TypeError("Expected a function");function Z(e){var I=r,t=a;return r=a=void 0,d=e,i=g.apply(t,I)}function y(g){var I=g-u;return void 0===u||I>=e||I<0||b&&g-d>=c}function p(){var g=n();if(y(g))return G(g);A=setTimeout(p,function(g){var I=e-(g-u);return b?o(I,c-(g-d)):I}(g))}function G(g){return A=void 0,m&&r?Z(g):(r=a=void 0,i)}function h(){var g=n(),I=y(g);if(r=arguments,a=this,u=g,I){if(void 0===A)return function(g){return d=g,A=setTimeout(p,e),s?Z(g):i}(u);if(b)return clearTimeout(A),A=setTimeout(p,e),Z(u)}return void 0===A&&(A=setTimeout(p,e)),i}return e=C(e)||0,t(I)&&(s=!!I.leading,c=(b="maxWait"in I)?l(C(I.maxWait)||0,e):c,m="trailing"in I?!!I.trailing:m),h.cancel=function(){void 0!==A&&clearTimeout(A),d=0,r=u=a=A=void 0},h.flush=function(){return void 0===A?i:G(n())},h}},3211:g=>{g.exports=function(g,e){return g===e||g!==g&&e!==e}},7002:(g,e,I)=>{var t=I(5295),n=I(4746),C=I(9096),l=I(4052),o=I(929);g.exports=function(g,e,I){var r=l(g)?t:n;return I&&o(g,e,I)&&(e=void 0),r(g,C(e,3))}},8990:(g,e,I)=>{var t=I(9995)(I(2520));g.exports=t},2520:(g,e,I)=>{var t=I(5816),n=I(9096),C=I(9140),l=Math.max;g.exports=function(g,e,I){var o=null==g?0:g.length;if(!o)return-1;var r=null==I?0:C(I);return r<0&&(r=l(o+r,0)),t(g,n(e,3),r)}},3538:(g,e,I)=>{var t=I(755),n=I(3411);g.exports=function(g,e){return t(n(g,e),1)}},3097:(g,e,I)=>{var t=I(2969);g.exports=function(g,e,I){var n=null==g?void 0:t(g,e);return void 0===n?I:n}},3366:(g,e,I)=>{var t=I(7894),n=I(9057);g.exports=function(g,e){return null!=g&&n(g,e,t)}},3279:g=>{g.exports=function(g){return g}},2777:(g,e,I)=>{var t=I(5193),n=I(2761),C=Object.prototype,l=C.hasOwnProperty,o=C.propertyIsEnumerable,r=t(function(){return arguments}())?t:function(g){return n(g)&&l.call(g,"callee")&&!o.call(g,"callee")};g.exports=r},4052:g=>{var e=Array.isArray;g.exports=e},6571:(g,e,I)=>{var t=I(1629),n=I(6173);g.exports=function(g){return null!=g&&n(g.length)&&!t(g)}},6361:(g,e,I)=>{var t=I(6913),n=I(2761);g.exports=function(g){return!0===g||!1===g||n(g)&&"[object Boolean]"==t(g)}},4543:(g,e,I)=>{g=I.nmd(g);var t=I(6552),n=I(14),C=e&&!e.nodeType&&e,l=C&&g&&!g.nodeType&&g,o=l&&l.exports===C?t.Buffer:void 0,r=(o?o.isBuffer:void 0)||n;g.exports=r},9853:(g,e,I)=>{var t=I(6989);g.exports=function(g,e){return t(g,e)}},1629:(g,e,I)=>{var t=I(6913),n=I(6686);g.exports=function(g){if(!n(g))return!1;var e=t(g);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},6173:g=>{g.exports=function(g){return"number"==typeof g&&g>-1&&g%1==0&&g<=9007199254740991}},5268:(g,e,I)=>{var t=I(9160);g.exports=function(g){return t(g)&&g!=+g}},9686:g=>{g.exports=function(g){return null==g}},9160:(g,e,I)=>{var t=I(6913),n=I(2761);g.exports=function(g){return"number"==typeof g||n(g)&&"[object Number]"==t(g)}},6686:g=>{g.exports=function(g){var e=typeof g;return null!=g&&("object"==e||"function"==e)}},2761:g=>{g.exports=function(g){return null!=g&&"object"==typeof g}},2322:(g,e,I)=>{var t=I(6913),n=I(5990),C=I(2761),l=Function.prototype,o=Object.prototype,r=l.toString,a=o.hasOwnProperty,c=r.call(Object);g.exports=function(g){if(!C(g)||"[object Object]"!=t(g))return!1;var e=n(g);if(null===e)return!0;var I=a.call(e,"constructor")&&e.constructor;return"function"==typeof I&&I instanceof I&&r.call(I)==c}},620:(g,e,I)=>{var t=I(6913),n=I(4052),C=I(2761);g.exports=function(g){return"string"==typeof g||!n(g)&&C(g)&&"[object String]"==t(g)}},9841:(g,e,I)=>{var t=I(6913),n=I(2761);g.exports=function(g){return"symbol"==typeof g||n(g)&&"[object Symbol]"==t(g)}},1268:(g,e,I)=>{var t=I(5428),n=I(7574),C=I(6832),l=C&&C.isTypedArray,o=l?n(l):t;g.exports=o},8673:(g,e,I)=>{var t=I(3204),n=I(3713),C=I(6571);g.exports=function(g){return C(g)?t(g):n(g)}},4065:g=>{g.exports=function(g){var e=null==g?0:g.length;return e?g[e-1]:void 0}},3411:(g,e,I)=>{var t=I(149),n=I(9096),C=I(8883),l=I(4052);g.exports=function(g,e){return(l(g)?t:C)(g,n(e,3))}},1733:(g,e,I)=>{var t=I(1775),n=I(4664),C=I(9096);g.exports=function(g,e){var I={};return e=C(e,3),n(g,(function(g,n,C){t(I,n,e(g,n,C))})),I}},539:(g,e,I)=>{var t=I(9742),n=I(7498),C=I(3279);g.exports=function(g){return g&&g.length?t(g,C,n):void 0}},2794:(g,e,I)=>{var t=I(9742),n=I(7498),C=I(9096);g.exports=function(g,e){return g&&g.length?t(g,C(e,2),n):void 0}},5797:(g,e,I)=>{var t=I(4816);function n(g,e){if("function"!=typeof g||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var I=function(){var t=arguments,n=e?e.apply(this,t):t[0],C=I.cache;if(C.has(n))return C.get(n);var l=g.apply(this,t);return I.cache=C.set(n,l)||C,l};return I.cache=new(n.Cache||t),I}n.Cache=t,g.exports=n},6745:(g,e,I)=>{var t=I(9742),n=I(61),C=I(3279);g.exports=function(g){return g&&g.length?t(g,C,n):void 0}},9364:(g,e,I)=>{var t=I(9742),n=I(9096),C=I(61);g.exports=function(g,e){return g&&g.length?t(g,n(e,2),C):void 0}},5713:g=>{g.exports=function(){}},4757:(g,e,I)=>{var t=I(6552);g.exports=function(){return t.Date.now()}},3932:(g,e,I)=>{var t=I(396),n=I(2866),C=I(2597),l=I(914);g.exports=function(g){return C(g)?t(l(g)):n(g)}},6604:(g,e,I)=>{var t=I(3331)();g.exports=t},4597:(g,e,I)=>{var t=I(2587),n=I(9096),C=I(2165),l=I(4052),o=I(929);g.exports=function(g,e,I){var r=l(g)?t:C;return I&&o(g,e,I)&&(e=void 0),r(g,n(e,3))}},7424:(g,e,I)=>{var t=I(755),n=I(2536),C=I(5647),l=I(929),o=C((function(g,e){if(null==g)return[];var I=e.length;return I>1&&l(g,e[0],e[1])?e=[]:I>2&&l(e[0],e[1],e[2])&&(e=[e[0]]),n(g,t(e,1),[])}));g.exports=o},7828:g=>{g.exports=function(){return[]}},14:g=>{g.exports=function(){return!1}},9889:(g,e,I)=>{var t=I(3950),n=I(6686);g.exports=function(g,e,I){var C=!0,l=!0;if("function"!=typeof g)throw new TypeError("Expected a function");return n(I)&&(C="leading"in I?!!I.leading:C,l="trailing"in I?!!I.trailing:l),t(g,e,{leading:C,maxWait:e,trailing:l})}},7303:(g,e,I)=>{var t=I(801),n=1/0;g.exports=function(g){return g?(g=t(g))===n||g===-1/0?17976931348623157e292*(g<0?-1:1):g===g?g:0:0===g?g:0}},9140:(g,e,I)=>{var t=I(7303);g.exports=function(g){var e=t(g),I=e%1;return e===e?I?e-I:e:0}},801:(g,e,I)=>{var t=I(1141),n=I(6686),C=I(9841),l=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,r=/^0o[0-7]+$/i,a=parseInt;g.exports=function(g){if("number"==typeof g)return g;if(C(g))return NaN;if(n(g)){var e="function"==typeof g.valueOf?g.valueOf():g;g=n(e)?e+"":e}if("string"!=typeof g)return 0===g?g:+g;g=t(g);var I=o.test(g);return I||r.test(g)?a(g.slice(2),I?2:8):l.test(g)?NaN:+g}},1069:(g,e,I)=>{var t=I(8541);g.exports=function(g){return null==g?"":t(g)}},977:(g,e,I)=>{var t=I(9096),n=I(4416);g.exports=function(g,e){return g&&g.length?n(g,t(e,2)):[]}},643:(g,e,I)=>{var t=I(7676)("toUpperCase");g.exports=t},1497:(g,e,I)=>{"use strict";var t=I(3218);function n(){}function C(){}C.resetWarningCache=n,g.exports=function(){function g(g,e,I,n,C,l){if(l!==t){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function e(){return g}g.isRequired=g;var I={array:g,bigint:g,bool:g,func:g,number:g,object:g,string:g,symbol:g,any:g,arrayOf:e,element:g,elementType:g,instanceOf:e,node:g,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:C,resetWarningCache:n};return I.PropTypes=I,I}},5173:(g,e,I)=>{g.exports=I(1497)()},3218:g=>{"use strict";g.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2730:(g,e,I)=>{"use strict";var t=I(5043),n=I(8853);function C(g){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+g,I=1;I<arguments.length;I++)e+="&args[]="+encodeURIComponent(arguments[I]);return"Minified React error #"+g+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,o={};function r(g,e){a(g,e),a(g+"Capture",e)}function a(g,e){for(o[g]=e,g=0;g<e.length;g++)l.add(e[g])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),i=Object.prototype.hasOwnProperty,A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},d={};function s(g,e,I,t,n,C,l){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=t,this.attributeNamespace=n,this.mustUseProperty=I,this.propertyName=g,this.type=e,this.sanitizeURL=C,this.removeEmptyString=l}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(g){b[g]=new s(g,0,!1,g,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(g){var e=g[0];b[e]=new s(e,1,!1,g[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(g){b[g]=new s(g,2,!1,g.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(g){b[g]=new s(g,2,!1,g,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(g){b[g]=new s(g,3,!1,g.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(g){b[g]=new s(g,3,!0,g,null,!1,!1)})),["capture","download"].forEach((function(g){b[g]=new s(g,4,!1,g,null,!1,!1)})),["cols","rows","size","span"].forEach((function(g){b[g]=new s(g,6,!1,g,null,!1,!1)})),["rowSpan","start"].forEach((function(g){b[g]=new s(g,5,!1,g.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function Z(g){return g[1].toUpperCase()}function y(g,e,I,t){var n=b.hasOwnProperty(e)?b[e]:null;(null!==n?0!==n.type:t||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(g,e,I,t){if(null===e||"undefined"===typeof e||function(g,e,I,t){if(null!==I&&0===I.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!t&&(null!==I?!I.acceptsBooleans:"data-"!==(g=g.toLowerCase().slice(0,5))&&"aria-"!==g);default:return!1}}(g,e,I,t))return!0;if(t)return!1;if(null!==I)switch(I.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,I,n,t)&&(I=null),t||null===n?function(g){return!!i.call(d,g)||!i.call(u,g)&&(A.test(g)?d[g]=!0:(u[g]=!0,!1))}(e)&&(null===I?g.removeAttribute(e):g.setAttribute(e,""+I)):n.mustUseProperty?g[n.propertyName]=null===I?3!==n.type&&"":I:(e=n.attributeName,t=n.attributeNamespace,null===I?g.removeAttribute(e):(I=3===(n=n.type)||4===n&&!0===I?"":""+I,t?g.setAttributeNS(t,e,I):g.setAttribute(e,I))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(g){var e=g.replace(m,Z);b[e]=new s(e,1,!1,g,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(g){var e=g.replace(m,Z);b[e]=new s(e,1,!1,g,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(g){var e=g.replace(m,Z);b[e]=new s(e,1,!1,g,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(g){b[g]=new s(g,1,!1,g.toLowerCase(),null,!1,!1)})),b.xlinkHref=new s("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(g){b[g]=new s(g,1,!1,g.toLowerCase(),null,!0,!0)}));var p=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),h=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),V=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),k=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var Y=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var H=Symbol.iterator;function w(g){return null===g||"object"!==typeof g?null:"function"===typeof(g=H&&g[H]||g["@@iterator"])?g:null}var N,K=Object.assign;function F(g){if(void 0===N)try{throw Error()}catch(I){var e=I.stack.trim().match(/\n( *(at )?)/);N=e&&e[1]||""}return"\n"+N+g}var x=!1;function E(g,e){if(!g||x)return"";x=!0;var I=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(a){var t=a}Reflect.construct(g,[],e)}else{try{e.call()}catch(a){t=a}g.call(e.prototype)}else{try{throw Error()}catch(a){t=a}g()}}catch(a){if(a&&t&&"string"===typeof a.stack){for(var n=a.stack.split("\n"),C=t.stack.split("\n"),l=n.length-1,o=C.length-1;1<=l&&0<=o&&n[l]!==C[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==C[o]){if(1!==l||1!==o)do{if(l--,0>--o||n[l]!==C[o]){var r="\n"+n[l].replace(" at new "," at ");return g.displayName&&r.includes("<anonymous>")&&(r=r.replace("<anonymous>",g.displayName)),r}}while(1<=l&&0<=o);break}}}finally{x=!1,Error.prepareStackTrace=I}return(g=g?g.displayName||g.name:"")?F(g):""}function M(g){switch(g.tag){case 5:return F(g.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return g=E(g.type,!1);case 11:return g=E(g.type.render,!1);case 1:return g=E(g.type,!0);default:return""}}function z(g){if(null==g)return null;if("function"===typeof g)return g.displayName||g.name||null;if("string"===typeof g)return g;switch(g){case B:return"Fragment";case h:return"Portal";case W:return"Profiler";case S:return"StrictMode";case X:return"Suspense";case R:return"SuspenseList"}if("object"===typeof g)switch(g.$$typeof){case V:return(g.displayName||"Context")+".Consumer";case f:return(g._context.displayName||"Context")+".Provider";case v:var e=g.render;return(g=g.displayName)||(g=""!==(g=e.displayName||e.name||"")?"ForwardRef("+g+")":"ForwardRef"),g;case J:return null!==(e=g.displayName||null)?e:z(g.type)||"Memo";case k:e=g._payload,g=g._init;try{return z(g(e))}catch(I){}}return null}function U(g){var e=g.type;switch(g.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=(g=e.render).displayName||g.name||"",e.displayName||(""!==g?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(e);case 8:return e===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function Q(g){switch(typeof g){case"boolean":case"number":case"string":case"undefined":case"object":return g;default:return""}}function L(g){var e=g.type;return(g=g.nodeName)&&"input"===g.toLowerCase()&&("checkbox"===e||"radio"===e)}function D(g){g._valueTracker||(g._valueTracker=function(g){var e=L(g)?"checked":"value",I=Object.getOwnPropertyDescriptor(g.constructor.prototype,e),t=""+g[e];if(!g.hasOwnProperty(e)&&"undefined"!==typeof I&&"function"===typeof I.get&&"function"===typeof I.set){var n=I.get,C=I.set;return Object.defineProperty(g,e,{configurable:!0,get:function(){return n.call(this)},set:function(g){t=""+g,C.call(this,g)}}),Object.defineProperty(g,e,{enumerable:I.enumerable}),{getValue:function(){return t},setValue:function(g){t=""+g},stopTracking:function(){g._valueTracker=null,delete g[e]}}}}(g))}function T(g){if(!g)return!1;var e=g._valueTracker;if(!e)return!0;var I=e.getValue(),t="";return g&&(t=L(g)?g.checked?"true":"false":g.value),(g=t)!==I&&(e.setValue(g),!0)}function j(g){if("undefined"===typeof(g=g||("undefined"!==typeof document?document:void 0)))return null;try{return g.activeElement||g.body}catch(e){return g.body}}function O(g,e){var I=e.checked;return K({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=I?I:g._wrapperState.initialChecked})}function P(g,e){var I=null==e.defaultValue?"":e.defaultValue,t=null!=e.checked?e.checked:e.defaultChecked;I=Q(null!=e.value?e.value:I),g._wrapperState={initialChecked:t,initialValue:I,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function q(g,e){null!=(e=e.checked)&&y(g,"checked",e,!1)}function _(g,e){q(g,e);var I=Q(e.value),t=e.type;if(null!=I)"number"===t?(0===I&&""===g.value||g.value!=I)&&(g.value=""+I):g.value!==""+I&&(g.value=""+I);else if("submit"===t||"reset"===t)return void g.removeAttribute("value");e.hasOwnProperty("value")?gg(g,e.type,I):e.hasOwnProperty("defaultValue")&&gg(g,e.type,Q(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(g.defaultChecked=!!e.defaultChecked)}function $(g,e,I){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var t=e.type;if(!("submit"!==t&&"reset"!==t||void 0!==e.value&&null!==e.value))return;e=""+g._wrapperState.initialValue,I||e===g.value||(g.value=e),g.defaultValue=e}""!==(I=g.name)&&(g.name=""),g.defaultChecked=!!g._wrapperState.initialChecked,""!==I&&(g.name=I)}function gg(g,e,I){"number"===e&&j(g.ownerDocument)===g||(null==I?g.defaultValue=""+g._wrapperState.initialValue:g.defaultValue!==""+I&&(g.defaultValue=""+I))}var eg=Array.isArray;function Ig(g,e,I,t){if(g=g.options,e){e={};for(var n=0;n<I.length;n++)e["$"+I[n]]=!0;for(I=0;I<g.length;I++)n=e.hasOwnProperty("$"+g[I].value),g[I].selected!==n&&(g[I].selected=n),n&&t&&(g[I].defaultSelected=!0)}else{for(I=""+Q(I),e=null,n=0;n<g.length;n++){if(g[n].value===I)return g[n].selected=!0,void(t&&(g[n].defaultSelected=!0));null!==e||g[n].disabled||(e=g[n])}null!==e&&(e.selected=!0)}}function tg(g,e){if(null!=e.dangerouslySetInnerHTML)throw Error(C(91));return K({},e,{value:void 0,defaultValue:void 0,children:""+g._wrapperState.initialValue})}function ng(g,e){var I=e.value;if(null==I){if(I=e.children,e=e.defaultValue,null!=I){if(null!=e)throw Error(C(92));if(eg(I)){if(1<I.length)throw Error(C(93));I=I[0]}e=I}null==e&&(e=""),I=e}g._wrapperState={initialValue:Q(I)}}function Cg(g,e){var I=Q(e.value),t=Q(e.defaultValue);null!=I&&((I=""+I)!==g.value&&(g.value=I),null==e.defaultValue&&g.defaultValue!==I&&(g.defaultValue=I)),null!=t&&(g.defaultValue=""+t)}function lg(g){var e=g.textContent;e===g._wrapperState.initialValue&&""!==e&&null!==e&&(g.value=e)}function og(g){switch(g){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rg(g,e){return null==g||"http://www.w3.org/1999/xhtml"===g?og(e):"http://www.w3.org/2000/svg"===g&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":g}var ag,cg,ig=(cg=function(g,e){if("http://www.w3.org/2000/svg"!==g.namespaceURI||"innerHTML"in g)g.innerHTML=e;else{for((ag=ag||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ag.firstChild;g.firstChild;)g.removeChild(g.firstChild);for(;e.firstChild;)g.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(g,e,I,t){MSApp.execUnsafeLocalFunction((function(){return cg(g,e)}))}:cg);function Ag(g,e){if(e){var I=g.firstChild;if(I&&I===g.lastChild&&3===I.nodeType)return void(I.nodeValue=e)}g.textContent=e}var ug={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dg=["Webkit","ms","Moz","O"];function sg(g,e,I){return null==e||"boolean"===typeof e||""===e?"":I||"number"!==typeof e||0===e||ug.hasOwnProperty(g)&&ug[g]?(""+e).trim():e+"px"}function bg(g,e){for(var I in g=g.style,e)if(e.hasOwnProperty(I)){var t=0===I.indexOf("--"),n=sg(I,e[I],t);"float"===I&&(I="cssFloat"),t?g.setProperty(I,n):g[I]=n}}Object.keys(ug).forEach((function(g){dg.forEach((function(e){e=e+g.charAt(0).toUpperCase()+g.substring(1),ug[e]=ug[g]}))}));var mg=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zg(g,e){if(e){if(mg[g]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(C(137,g));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(C(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(C(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(C(62))}}function yg(g,e){if(-1===g.indexOf("-"))return"string"===typeof e.is;switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pg=null;function Gg(g){return(g=g.target||g.srcElement||window).correspondingUseElement&&(g=g.correspondingUseElement),3===g.nodeType?g.parentNode:g}var hg=null,Bg=null,Sg=null;function Wg(g){if(g=yn(g)){if("function"!==typeof hg)throw Error(C(280));var e=g.stateNode;e&&(e=Gn(e),hg(g.stateNode,g.type,e))}}function fg(g){Bg?Sg?Sg.push(g):Sg=[g]:Bg=g}function Vg(){if(Bg){var g=Bg,e=Sg;if(Sg=Bg=null,Wg(g),e)for(g=0;g<e.length;g++)Wg(e[g])}}function vg(g,e){return g(e)}function Xg(){}var Rg=!1;function Jg(g,e,I){if(Rg)return g(e,I);Rg=!0;try{return vg(g,e,I)}finally{Rg=!1,(null!==Bg||null!==Sg)&&(Xg(),Vg())}}function kg(g,e){var I=g.stateNode;if(null===I)return null;var t=Gn(I);if(null===t)return null;I=t[e];g:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(t=!t.disabled)||(t=!("button"===(g=g.type)||"input"===g||"select"===g||"textarea"===g)),g=!t;break g;default:g=!1}if(g)return null;if(I&&"function"!==typeof I)throw Error(C(231,e,typeof I));return I}var Yg=!1;if(c)try{var Hg={};Object.defineProperty(Hg,"passive",{get:function(){Yg=!0}}),window.addEventListener("test",Hg,Hg),window.removeEventListener("test",Hg,Hg)}catch(cg){Yg=!1}function wg(g,e,I,t,n,C,l,o,r){var a=Array.prototype.slice.call(arguments,3);try{e.apply(I,a)}catch(c){this.onError(c)}}var Ng=!1,Kg=null,Fg=!1,xg=null,Eg={onError:function(g){Ng=!0,Kg=g}};function Mg(g,e,I,t,n,C,l,o,r){Ng=!1,Kg=null,wg.apply(Eg,arguments)}function zg(g){var e=g,I=g;if(g.alternate)for(;e.return;)e=e.return;else{g=e;do{0!==(4098&(e=g).flags)&&(I=e.return),g=e.return}while(g)}return 3===e.tag?I:null}function Ug(g){if(13===g.tag){var e=g.memoizedState;if(null===e&&(null!==(g=g.alternate)&&(e=g.memoizedState)),null!==e)return e.dehydrated}return null}function Qg(g){if(zg(g)!==g)throw Error(C(188))}function Lg(g){return null!==(g=function(g){var e=g.alternate;if(!e){if(null===(e=zg(g)))throw Error(C(188));return e!==g?null:g}for(var I=g,t=e;;){var n=I.return;if(null===n)break;var l=n.alternate;if(null===l){if(null!==(t=n.return)){I=t;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===I)return Qg(n),g;if(l===t)return Qg(n),e;l=l.sibling}throw Error(C(188))}if(I.return!==t.return)I=n,t=l;else{for(var o=!1,r=n.child;r;){if(r===I){o=!0,I=n,t=l;break}if(r===t){o=!0,t=n,I=l;break}r=r.sibling}if(!o){for(r=l.child;r;){if(r===I){o=!0,I=l,t=n;break}if(r===t){o=!0,t=l,I=n;break}r=r.sibling}if(!o)throw Error(C(189))}}if(I.alternate!==t)throw Error(C(190))}if(3!==I.tag)throw Error(C(188));return I.stateNode.current===I?g:e}(g))?Dg(g):null}function Dg(g){if(5===g.tag||6===g.tag)return g;for(g=g.child;null!==g;){var e=Dg(g);if(null!==e)return e;g=g.sibling}return null}var Tg=n.unstable_scheduleCallback,jg=n.unstable_cancelCallback,Og=n.unstable_shouldYield,Pg=n.unstable_requestPaint,qg=n.unstable_now,_g=n.unstable_getCurrentPriorityLevel,$g=n.unstable_ImmediatePriority,ge=n.unstable_UserBlockingPriority,ee=n.unstable_NormalPriority,Ie=n.unstable_LowPriority,te=n.unstable_IdlePriority,ne=null,Ce=null;var le=Math.clz32?Math.clz32:function(g){return g>>>=0,0===g?32:31-(oe(g)/re|0)|0},oe=Math.log,re=Math.LN2;var ae=64,ce=4194304;function ie(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&g;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&g;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function Ae(g,e){var I=g.pendingLanes;if(0===I)return 0;var t=0,n=g.suspendedLanes,C=g.pingedLanes,l=268435455&I;if(0!==l){var o=l&~n;0!==o?t=ie(o):0!==(C&=l)&&(t=ie(C))}else 0!==(l=I&~n)?t=ie(l):0!==C&&(t=ie(C));if(0===t)return 0;if(0!==e&&e!==t&&0===(e&n)&&((n=t&-t)>=(C=e&-e)||16===n&&0!==(4194240&C)))return e;if(0!==(4&t)&&(t|=16&I),0!==(e=g.entangledLanes))for(g=g.entanglements,e&=t;0<e;)n=1<<(I=31-le(e)),t|=g[I],e&=~n;return t}function ue(g,e){switch(g){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function de(g){return 0!==(g=-1073741825&g.pendingLanes)?g:1073741824&g?1073741824:0}function se(){var g=ae;return 0===(4194240&(ae<<=1))&&(ae=64),g}function be(g){for(var e=[],I=0;31>I;I++)e.push(g);return e}function me(g,e,I){g.pendingLanes|=e,536870912!==e&&(g.suspendedLanes=0,g.pingedLanes=0),(g=g.eventTimes)[e=31-le(e)]=I}function Ze(g,e){var I=g.entangledLanes|=e;for(g=g.entanglements;I;){var t=31-le(I),n=1<<t;n&e|g[t]&e&&(g[t]|=e),I&=~n}}var ye=0;function pe(g){return 1<(g&=-g)?4<g?0!==(268435455&g)?16:536870912:4:1}var Ge,he,Be,Se,We,fe=!1,Ve=[],ve=null,Xe=null,Re=null,Je=new Map,ke=new Map,Ye=[],He="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function we(g,e){switch(g){case"focusin":case"focusout":ve=null;break;case"dragenter":case"dragleave":Xe=null;break;case"mouseover":case"mouseout":Re=null;break;case"pointerover":case"pointerout":Je.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ke.delete(e.pointerId)}}function Ne(g,e,I,t,n,C){return null===g||g.nativeEvent!==C?(g={blockedOn:e,domEventName:I,eventSystemFlags:t,nativeEvent:C,targetContainers:[n]},null!==e&&(null!==(e=yn(e))&&he(e)),g):(g.eventSystemFlags|=t,e=g.targetContainers,null!==n&&-1===e.indexOf(n)&&e.push(n),g)}function Ke(g){var e=Zn(g.target);if(null!==e){var I=zg(e);if(null!==I)if(13===(e=I.tag)){if(null!==(e=Ug(I)))return g.blockedOn=e,void We(g.priority,(function(){Be(I)}))}else if(3===e&&I.stateNode.current.memoizedState.isDehydrated)return void(g.blockedOn=3===I.tag?I.stateNode.containerInfo:null)}g.blockedOn=null}function Fe(g){if(null!==g.blockedOn)return!1;for(var e=g.targetContainers;0<e.length;){var I=Oe(g.domEventName,g.eventSystemFlags,e[0],g.nativeEvent);if(null!==I)return null!==(e=yn(I))&&he(e),g.blockedOn=I,!1;var t=new(I=g.nativeEvent).constructor(I.type,I);pg=t,I.target.dispatchEvent(t),pg=null,e.shift()}return!0}function xe(g,e,I){Fe(g)&&I.delete(e)}function Ee(){fe=!1,null!==ve&&Fe(ve)&&(ve=null),null!==Xe&&Fe(Xe)&&(Xe=null),null!==Re&&Fe(Re)&&(Re=null),Je.forEach(xe),ke.forEach(xe)}function Me(g,e){g.blockedOn===e&&(g.blockedOn=null,fe||(fe=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ee)))}function ze(g){function e(e){return Me(e,g)}if(0<Ve.length){Me(Ve[0],g);for(var I=1;I<Ve.length;I++){var t=Ve[I];t.blockedOn===g&&(t.blockedOn=null)}}for(null!==ve&&Me(ve,g),null!==Xe&&Me(Xe,g),null!==Re&&Me(Re,g),Je.forEach(e),ke.forEach(e),I=0;I<Ye.length;I++)(t=Ye[I]).blockedOn===g&&(t.blockedOn=null);for(;0<Ye.length&&null===(I=Ye[0]).blockedOn;)Ke(I),null===I.blockedOn&&Ye.shift()}var Ue=p.ReactCurrentBatchConfig,Qe=!0;function Le(g,e,I,t){var n=ye,C=Ue.transition;Ue.transition=null;try{ye=1,Te(g,e,I,t)}finally{ye=n,Ue.transition=C}}function De(g,e,I,t){var n=ye,C=Ue.transition;Ue.transition=null;try{ye=4,Te(g,e,I,t)}finally{ye=n,Ue.transition=C}}function Te(g,e,I,t){if(Qe){var n=Oe(g,e,I,t);if(null===n)Ut(g,e,t,je,I),we(g,t);else if(function(g,e,I,t,n){switch(e){case"focusin":return ve=Ne(ve,g,e,I,t,n),!0;case"dragenter":return Xe=Ne(Xe,g,e,I,t,n),!0;case"mouseover":return Re=Ne(Re,g,e,I,t,n),!0;case"pointerover":var C=n.pointerId;return Je.set(C,Ne(Je.get(C)||null,g,e,I,t,n)),!0;case"gotpointercapture":return C=n.pointerId,ke.set(C,Ne(ke.get(C)||null,g,e,I,t,n)),!0}return!1}(n,g,e,I,t))t.stopPropagation();else if(we(g,t),4&e&&-1<He.indexOf(g)){for(;null!==n;){var C=yn(n);if(null!==C&&Ge(C),null===(C=Oe(g,e,I,t))&&Ut(g,e,t,je,I),C===n)break;n=C}null!==n&&t.stopPropagation()}else Ut(g,e,t,null,I)}}var je=null;function Oe(g,e,I,t){if(je=null,null!==(g=Zn(g=Gg(t))))if(null===(e=zg(g)))g=null;else if(13===(I=e.tag)){if(null!==(g=Ug(e)))return g;g=null}else if(3===I){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;g=null}else e!==g&&(g=null);return je=g,null}function Pe(g){switch(g){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_g()){case $g:return 1;case ge:return 4;case ee:case Ie:return 16;case te:return 536870912;default:return 16}default:return 16}}var qe=null,_e=null,$e=null;function gI(){if($e)return $e;var g,e,I=_e,t=I.length,n="value"in qe?qe.value:qe.textContent,C=n.length;for(g=0;g<t&&I[g]===n[g];g++);var l=t-g;for(e=1;e<=l&&I[t-e]===n[C-e];e++);return $e=n.slice(g,1<e?1-e:void 0)}function eI(g){var e=g.keyCode;return"charCode"in g?0===(g=g.charCode)&&13===e&&(g=13):g=e,10===g&&(g=13),32<=g||13===g?g:0}function II(){return!0}function tI(){return!1}function nI(g){function e(e,I,t,n,C){for(var l in this._reactName=e,this._targetInst=t,this.type=I,this.nativeEvent=n,this.target=C,this.currentTarget=null,g)g.hasOwnProperty(l)&&(e=g[l],this[l]=e?e(n):n[l]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?II:tI,this.isPropagationStopped=tI,this}return K(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():"unknown"!==typeof g.returnValue&&(g.returnValue=!1),this.isDefaultPrevented=II)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():"unknown"!==typeof g.cancelBubble&&(g.cancelBubble=!0),this.isPropagationStopped=II)},persist:function(){},isPersistent:II}),e}var CI,lI,oI,rI={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aI=nI(rI),cI=K({},rI,{view:0,detail:0}),iI=nI(cI),AI=K({},cI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:SI,button:0,buttons:0,relatedTarget:function(g){return void 0===g.relatedTarget?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==oI&&(oI&&"mousemove"===g.type?(CI=g.screenX-oI.screenX,lI=g.screenY-oI.screenY):lI=CI=0,oI=g),CI)},movementY:function(g){return"movementY"in g?g.movementY:lI}}),uI=nI(AI),dI=nI(K({},AI,{dataTransfer:0})),sI=nI(K({},cI,{relatedTarget:0})),bI=nI(K({},rI,{animationName:0,elapsedTime:0,pseudoElement:0})),mI=K({},rI,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),ZI=nI(mI),yI=nI(K({},rI,{data:0})),pI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BI(g){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(g):!!(g=hI[g])&&!!e[g]}function SI(){return BI}var WI=K({},cI,{key:function(g){if(g.key){var e=pI[g.key]||g.key;if("Unidentified"!==e)return e}return"keypress"===g.type?13===(g=eI(g))?"Enter":String.fromCharCode(g):"keydown"===g.type||"keyup"===g.type?GI[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:SI,charCode:function(g){return"keypress"===g.type?eI(g):0},keyCode:function(g){return"keydown"===g.type||"keyup"===g.type?g.keyCode:0},which:function(g){return"keypress"===g.type?eI(g):"keydown"===g.type||"keyup"===g.type?g.keyCode:0}}),fI=nI(WI),VI=nI(K({},AI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vI=nI(K({},cI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:SI})),XI=nI(K({},rI,{propertyName:0,elapsedTime:0,pseudoElement:0})),RI=K({},AI,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),JI=nI(RI),kI=[9,13,27,32],YI=c&&"CompositionEvent"in window,HI=null;c&&"documentMode"in document&&(HI=document.documentMode);var wI=c&&"TextEvent"in window&&!HI,NI=c&&(!YI||HI&&8<HI&&11>=HI),KI=String.fromCharCode(32),FI=!1;function xI(g,e){switch(g){case"keyup":return-1!==kI.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function EI(g){return"object"===typeof(g=g.detail)&&"data"in g?g.data:null}var MI=!1;var zI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function UI(g){var e=g&&g.nodeName&&g.nodeName.toLowerCase();return"input"===e?!!zI[g.type]:"textarea"===e}function QI(g,e,I,t){fg(t),0<(e=Lt(e,"onChange")).length&&(I=new aI("onChange","change",null,I,t),g.push({event:I,listeners:e}))}var LI=null,DI=null;function TI(g){Kt(g,0)}function jI(g){if(T(pn(g)))return g}function OI(g,e){if("change"===g)return e}var PI=!1;if(c){var qI;if(c){var _I="oninput"in document;if(!_I){var $I=document.createElement("div");$I.setAttribute("oninput","return;"),_I="function"===typeof $I.oninput}qI=_I}else qI=!1;PI=qI&&(!document.documentMode||9<document.documentMode)}function gt(){LI&&(LI.detachEvent("onpropertychange",et),DI=LI=null)}function et(g){if("value"===g.propertyName&&jI(DI)){var e=[];QI(e,DI,g,Gg(g)),Jg(TI,e)}}function It(g,e,I){"focusin"===g?(gt(),DI=I,(LI=e).attachEvent("onpropertychange",et)):"focusout"===g&&gt()}function tt(g){if("selectionchange"===g||"keyup"===g||"keydown"===g)return jI(DI)}function nt(g,e){if("click"===g)return jI(e)}function Ct(g,e){if("input"===g||"change"===g)return jI(e)}var lt="function"===typeof Object.is?Object.is:function(g,e){return g===e&&(0!==g||1/g===1/e)||g!==g&&e!==e};function ot(g,e){if(lt(g,e))return!0;if("object"!==typeof g||null===g||"object"!==typeof e||null===e)return!1;var I=Object.keys(g),t=Object.keys(e);if(I.length!==t.length)return!1;for(t=0;t<I.length;t++){var n=I[t];if(!i.call(e,n)||!lt(g[n],e[n]))return!1}return!0}function rt(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function at(g,e){var I,t=rt(g);for(g=0;t;){if(3===t.nodeType){if(I=g+t.textContent.length,g<=e&&I>=e)return{node:t,offset:e-g};g=I}g:{for(;t;){if(t.nextSibling){t=t.nextSibling;break g}t=t.parentNode}t=void 0}t=rt(t)}}function ct(g,e){return!(!g||!e)&&(g===e||(!g||3!==g.nodeType)&&(e&&3===e.nodeType?ct(g,e.parentNode):"contains"in g?g.contains(e):!!g.compareDocumentPosition&&!!(16&g.compareDocumentPosition(e))))}function it(){for(var g=window,e=j();e instanceof g.HTMLIFrameElement;){try{var I="string"===typeof e.contentWindow.location.href}catch(t){I=!1}if(!I)break;e=j((g=e.contentWindow).document)}return e}function At(g){var e=g&&g.nodeName&&g.nodeName.toLowerCase();return e&&("input"===e&&("text"===g.type||"search"===g.type||"tel"===g.type||"url"===g.type||"password"===g.type)||"textarea"===e||"true"===g.contentEditable)}function ut(g){var e=it(),I=g.focusedElem,t=g.selectionRange;if(e!==I&&I&&I.ownerDocument&&ct(I.ownerDocument.documentElement,I)){if(null!==t&&At(I))if(e=t.start,void 0===(g=t.end)&&(g=e),"selectionStart"in I)I.selectionStart=e,I.selectionEnd=Math.min(g,I.value.length);else if((g=(e=I.ownerDocument||document)&&e.defaultView||window).getSelection){g=g.getSelection();var n=I.textContent.length,C=Math.min(t.start,n);t=void 0===t.end?C:Math.min(t.end,n),!g.extend&&C>t&&(n=t,t=C,C=n),n=at(I,C);var l=at(I,t);n&&l&&(1!==g.rangeCount||g.anchorNode!==n.node||g.anchorOffset!==n.offset||g.focusNode!==l.node||g.focusOffset!==l.offset)&&((e=e.createRange()).setStart(n.node,n.offset),g.removeAllRanges(),C>t?(g.addRange(e),g.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),g.addRange(e)))}for(e=[],g=I;g=g.parentNode;)1===g.nodeType&&e.push({element:g,left:g.scrollLeft,top:g.scrollTop});for("function"===typeof I.focus&&I.focus(),I=0;I<e.length;I++)(g=e[I]).element.scrollLeft=g.left,g.element.scrollTop=g.top}}var dt=c&&"documentMode"in document&&11>=document.documentMode,st=null,bt=null,mt=null,Zt=!1;function yt(g,e,I){var t=I.window===I?I.document:9===I.nodeType?I:I.ownerDocument;Zt||null==st||st!==j(t)||("selectionStart"in(t=st)&&At(t)?t={start:t.selectionStart,end:t.selectionEnd}:t={anchorNode:(t=(t.ownerDocument&&t.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset},mt&&ot(mt,t)||(mt=t,0<(t=Lt(bt,"onSelect")).length&&(e=new aI("onSelect","select",null,e,I),g.push({event:e,listeners:t}),e.target=st)))}function pt(g,e){var I={};return I[g.toLowerCase()]=e.toLowerCase(),I["Webkit"+g]="webkit"+e,I["Moz"+g]="moz"+e,I}var Gt={animationend:pt("Animation","AnimationEnd"),animationiteration:pt("Animation","AnimationIteration"),animationstart:pt("Animation","AnimationStart"),transitionend:pt("Transition","TransitionEnd")},ht={},Bt={};function St(g){if(ht[g])return ht[g];if(!Gt[g])return g;var e,I=Gt[g];for(e in I)if(I.hasOwnProperty(e)&&e in Bt)return ht[g]=I[e];return g}c&&(Bt=document.createElement("div").style,"AnimationEvent"in window||(delete Gt.animationend.animation,delete Gt.animationiteration.animation,delete Gt.animationstart.animation),"TransitionEvent"in window||delete Gt.transitionend.transition);var Wt=St("animationend"),ft=St("animationiteration"),Vt=St("animationstart"),vt=St("transitionend"),Xt=new Map,Rt="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jt(g,e){Xt.set(g,e),r(e,[g])}for(var kt=0;kt<Rt.length;kt++){var Yt=Rt[kt];Jt(Yt.toLowerCase(),"on"+(Yt[0].toUpperCase()+Yt.slice(1)))}Jt(Wt,"onAnimationEnd"),Jt(ft,"onAnimationIteration"),Jt(Vt,"onAnimationStart"),Jt("dblclick","onDoubleClick"),Jt("focusin","onFocus"),Jt("focusout","onBlur"),Jt(vt,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),r("onBeforeInput",["compositionend","keypress","textInput","paste"]),r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ht="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wt=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ht));function Nt(g,e,I){var t=g.type||"unknown-event";g.currentTarget=I,function(g,e,I,t,n,l,o,r,a){if(Mg.apply(this,arguments),Ng){if(!Ng)throw Error(C(198));var c=Kg;Ng=!1,Kg=null,Fg||(Fg=!0,xg=c)}}(t,e,void 0,g),g.currentTarget=null}function Kt(g,e){e=0!==(4&e);for(var I=0;I<g.length;I++){var t=g[I],n=t.event;t=t.listeners;g:{var C=void 0;if(e)for(var l=t.length-1;0<=l;l--){var o=t[l],r=o.instance,a=o.currentTarget;if(o=o.listener,r!==C&&n.isPropagationStopped())break g;Nt(n,o,a),C=r}else for(l=0;l<t.length;l++){if(r=(o=t[l]).instance,a=o.currentTarget,o=o.listener,r!==C&&n.isPropagationStopped())break g;Nt(n,o,a),C=r}}}if(Fg)throw g=xg,Fg=!1,xg=null,g}function Ft(g,e){var I=e[sn];void 0===I&&(I=e[sn]=new Set);var t=g+"__bubble";I.has(t)||(zt(e,g,2,!1),I.add(t))}function xt(g,e,I){var t=0;e&&(t|=4),zt(I,g,t,e)}var Et="_reactListening"+Math.random().toString(36).slice(2);function Mt(g){if(!g[Et]){g[Et]=!0,l.forEach((function(e){"selectionchange"!==e&&(wt.has(e)||xt(e,!1,g),xt(e,!0,g))}));var e=9===g.nodeType?g:g.ownerDocument;null===e||e[Et]||(e[Et]=!0,xt("selectionchange",!1,e))}}function zt(g,e,I,t){switch(Pe(e)){case 1:var n=Le;break;case 4:n=De;break;default:n=Te}I=n.bind(null,e,I,g),n=void 0,!Yg||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(n=!0),t?void 0!==n?g.addEventListener(e,I,{capture:!0,passive:n}):g.addEventListener(e,I,!0):void 0!==n?g.addEventListener(e,I,{passive:n}):g.addEventListener(e,I,!1)}function Ut(g,e,I,t,n){var C=t;if(0===(1&e)&&0===(2&e)&&null!==t)g:for(;;){if(null===t)return;var l=t.tag;if(3===l||4===l){var o=t.stateNode.containerInfo;if(o===n||8===o.nodeType&&o.parentNode===n)break;if(4===l)for(l=t.return;null!==l;){var r=l.tag;if((3===r||4===r)&&((r=l.stateNode.containerInfo)===n||8===r.nodeType&&r.parentNode===n))return;l=l.return}for(;null!==o;){if(null===(l=Zn(o)))return;if(5===(r=l.tag)||6===r){t=C=l;continue g}o=o.parentNode}}t=t.return}Jg((function(){var t=C,n=Gg(I),l=[];g:{var o=Xt.get(g);if(void 0!==o){var r=aI,a=g;switch(g){case"keypress":if(0===eI(I))break g;case"keydown":case"keyup":r=fI;break;case"focusin":a="focus",r=sI;break;case"focusout":a="blur",r=sI;break;case"beforeblur":case"afterblur":r=sI;break;case"click":if(2===I.button)break g;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":r=uI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":r=dI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":r=vI;break;case Wt:case ft:case Vt:r=bI;break;case vt:r=XI;break;case"scroll":r=iI;break;case"wheel":r=JI;break;case"copy":case"cut":case"paste":r=ZI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":r=VI}var c=0!==(4&e),i=!c&&"scroll"===g,A=c?null!==o?o+"Capture":null:o;c=[];for(var u,d=t;null!==d;){var s=(u=d).stateNode;if(5===u.tag&&null!==s&&(u=s,null!==A&&(null!=(s=kg(d,A))&&c.push(Qt(d,s,u)))),i)break;d=d.return}0<c.length&&(o=new r(o,a,null,I,n),l.push({event:o,listeners:c}))}}if(0===(7&e)){if(r="mouseout"===g||"pointerout"===g,(!(o="mouseover"===g||"pointerover"===g)||I===pg||!(a=I.relatedTarget||I.fromElement)||!Zn(a)&&!a[dn])&&(r||o)&&(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,r?(r=t,null!==(a=(a=I.relatedTarget||I.toElement)?Zn(a):null)&&(a!==(i=zg(a))||5!==a.tag&&6!==a.tag)&&(a=null)):(r=null,a=t),r!==a)){if(c=uI,s="onMouseLeave",A="onMouseEnter",d="mouse","pointerout"!==g&&"pointerover"!==g||(c=VI,s="onPointerLeave",A="onPointerEnter",d="pointer"),i=null==r?o:pn(r),u=null==a?o:pn(a),(o=new c(s,d+"leave",r,I,n)).target=i,o.relatedTarget=u,s=null,Zn(n)===t&&((c=new c(A,d+"enter",a,I,n)).target=u,c.relatedTarget=i,s=c),i=s,r&&a)g:{for(A=a,d=0,u=c=r;u;u=Dt(u))d++;for(u=0,s=A;s;s=Dt(s))u++;for(;0<d-u;)c=Dt(c),d--;for(;0<u-d;)A=Dt(A),u--;for(;d--;){if(c===A||null!==A&&c===A.alternate)break g;c=Dt(c),A=Dt(A)}c=null}else c=null;null!==r&&Tt(l,o,r,c,!1),null!==a&&null!==i&&Tt(l,i,a,c,!0)}if("select"===(r=(o=t?pn(t):window).nodeName&&o.nodeName.toLowerCase())||"input"===r&&"file"===o.type)var b=OI;else if(UI(o))if(PI)b=Ct;else{b=tt;var m=It}else(r=o.nodeName)&&"input"===r.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(b=nt);switch(b&&(b=b(g,t))?QI(l,b,I,n):(m&&m(g,o,t),"focusout"===g&&(m=o._wrapperState)&&m.controlled&&"number"===o.type&&gg(o,"number",o.value)),m=t?pn(t):window,g){case"focusin":(UI(m)||"true"===m.contentEditable)&&(st=m,bt=t,mt=null);break;case"focusout":mt=bt=st=null;break;case"mousedown":Zt=!0;break;case"contextmenu":case"mouseup":case"dragend":Zt=!1,yt(l,I,n);break;case"selectionchange":if(dt)break;case"keydown":case"keyup":yt(l,I,n)}var Z;if(YI)g:{switch(g){case"compositionstart":var y="onCompositionStart";break g;case"compositionend":y="onCompositionEnd";break g;case"compositionupdate":y="onCompositionUpdate";break g}y=void 0}else MI?xI(g,I)&&(y="onCompositionEnd"):"keydown"===g&&229===I.keyCode&&(y="onCompositionStart");y&&(NI&&"ko"!==I.locale&&(MI||"onCompositionStart"!==y?"onCompositionEnd"===y&&MI&&(Z=gI()):(_e="value"in(qe=n)?qe.value:qe.textContent,MI=!0)),0<(m=Lt(t,y)).length&&(y=new yI(y,g,null,I,n),l.push({event:y,listeners:m}),Z?y.data=Z:null!==(Z=EI(I))&&(y.data=Z))),(Z=wI?function(g,e){switch(g){case"compositionend":return EI(e);case"keypress":return 32!==e.which?null:(FI=!0,KI);case"textInput":return(g=e.data)===KI&&FI?null:g;default:return null}}(g,I):function(g,e){if(MI)return"compositionend"===g||!YI&&xI(g,e)?(g=gI(),$e=_e=qe=null,MI=!1,g):null;switch(g){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return NI&&"ko"!==e.locale?null:e.data}}(g,I))&&(0<(t=Lt(t,"onBeforeInput")).length&&(n=new yI("onBeforeInput","beforeinput",null,I,n),l.push({event:n,listeners:t}),n.data=Z))}Kt(l,e)}))}function Qt(g,e,I){return{instance:g,listener:e,currentTarget:I}}function Lt(g,e){for(var I=e+"Capture",t=[];null!==g;){var n=g,C=n.stateNode;5===n.tag&&null!==C&&(n=C,null!=(C=kg(g,I))&&t.unshift(Qt(g,C,n)),null!=(C=kg(g,e))&&t.push(Qt(g,C,n))),g=g.return}return t}function Dt(g){if(null===g)return null;do{g=g.return}while(g&&5!==g.tag);return g||null}function Tt(g,e,I,t,n){for(var C=e._reactName,l=[];null!==I&&I!==t;){var o=I,r=o.alternate,a=o.stateNode;if(null!==r&&r===t)break;5===o.tag&&null!==a&&(o=a,n?null!=(r=kg(I,C))&&l.unshift(Qt(I,r,o)):n||null!=(r=kg(I,C))&&l.push(Qt(I,r,o))),I=I.return}0!==l.length&&g.push({event:e,listeners:l})}var jt=/\r\n?/g,Ot=/\u0000|\uFFFD/g;function Pt(g){return("string"===typeof g?g:""+g).replace(jt,"\n").replace(Ot,"")}function qt(g,e,I){if(e=Pt(e),Pt(g)!==e&&I)throw Error(C(425))}function _t(){}var $t=null,gn=null;function en(g,e){return"textarea"===g||"noscript"===g||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var In="function"===typeof setTimeout?setTimeout:void 0,tn="function"===typeof clearTimeout?clearTimeout:void 0,nn="function"===typeof Promise?Promise:void 0,Cn="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nn?function(g){return nn.resolve(null).then(g).catch(ln)}:In;function ln(g){setTimeout((function(){throw g}))}function on(g,e){var I=e,t=0;do{var n=I.nextSibling;if(g.removeChild(I),n&&8===n.nodeType)if("/$"===(I=n.data)){if(0===t)return g.removeChild(n),void ze(e);t--}else"$"!==I&&"$?"!==I&&"$!"!==I||t++;I=n}while(I);ze(e)}function rn(g){for(;null!=g;g=g.nextSibling){var e=g.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=g.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return g}function an(g){g=g.previousSibling;for(var e=0;g;){if(8===g.nodeType){var I=g.data;if("$"===I||"$!"===I||"$?"===I){if(0===e)return g;e--}else"/$"===I&&e++}g=g.previousSibling}return null}var cn=Math.random().toString(36).slice(2),An="__reactFiber$"+cn,un="__reactProps$"+cn,dn="__reactContainer$"+cn,sn="__reactEvents$"+cn,bn="__reactListeners$"+cn,mn="__reactHandles$"+cn;function Zn(g){var e=g[An];if(e)return e;for(var I=g.parentNode;I;){if(e=I[dn]||I[An]){if(I=e.alternate,null!==e.child||null!==I&&null!==I.child)for(g=an(g);null!==g;){if(I=g[An])return I;g=an(g)}return e}I=(g=I).parentNode}return null}function yn(g){return!(g=g[An]||g[dn])||5!==g.tag&&6!==g.tag&&13!==g.tag&&3!==g.tag?null:g}function pn(g){if(5===g.tag||6===g.tag)return g.stateNode;throw Error(C(33))}function Gn(g){return g[un]||null}var hn=[],Bn=-1;function Sn(g){return{current:g}}function Wn(g){0>Bn||(g.current=hn[Bn],hn[Bn]=null,Bn--)}function fn(g,e){Bn++,hn[Bn]=g.current,g.current=e}var Vn={},vn=Sn(Vn),Xn=Sn(!1),Rn=Vn;function Jn(g,e){var I=g.type.contextTypes;if(!I)return Vn;var t=g.stateNode;if(t&&t.__reactInternalMemoizedUnmaskedChildContext===e)return t.__reactInternalMemoizedMaskedChildContext;var n,C={};for(n in I)C[n]=e[n];return t&&((g=g.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,g.__reactInternalMemoizedMaskedChildContext=C),C}function kn(g){return null!==(g=g.childContextTypes)&&void 0!==g}function Yn(){Wn(Xn),Wn(vn)}function Hn(g,e,I){if(vn.current!==Vn)throw Error(C(168));fn(vn,e),fn(Xn,I)}function wn(g,e,I){var t=g.stateNode;if(e=e.childContextTypes,"function"!==typeof t.getChildContext)return I;for(var n in t=t.getChildContext())if(!(n in e))throw Error(C(108,U(g)||"Unknown",n));return K({},I,t)}function Nn(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||Vn,Rn=vn.current,fn(vn,g),fn(Xn,Xn.current),!0}function Kn(g,e,I){var t=g.stateNode;if(!t)throw Error(C(169));I?(g=wn(g,e,Rn),t.__reactInternalMemoizedMergedChildContext=g,Wn(Xn),Wn(vn),fn(vn,g)):Wn(Xn),fn(Xn,I)}var Fn=null,xn=!1,En=!1;function Mn(g){null===Fn?Fn=[g]:Fn.push(g)}function zn(){if(!En&&null!==Fn){En=!0;var g=0,e=ye;try{var I=Fn;for(ye=1;g<I.length;g++){var t=I[g];do{t=t(!0)}while(null!==t)}Fn=null,xn=!1}catch(n){throw null!==Fn&&(Fn=Fn.slice(g+1)),Tg($g,zn),n}finally{ye=e,En=!1}}return null}var Un=[],Qn=0,Ln=null,Dn=0,Tn=[],jn=0,On=null,Pn=1,qn="";function _n(g,e){Un[Qn++]=Dn,Un[Qn++]=Ln,Ln=g,Dn=e}function $n(g,e,I){Tn[jn++]=Pn,Tn[jn++]=qn,Tn[jn++]=On,On=g;var t=Pn;g=qn;var n=32-le(t)-1;t&=~(1<<n),I+=1;var C=32-le(e)+n;if(30<C){var l=n-n%5;C=(t&(1<<l)-1).toString(32),t>>=l,n-=l,Pn=1<<32-le(e)+n|I<<n|t,qn=C+g}else Pn=1<<C|I<<n|t,qn=g}function gC(g){null!==g.return&&(_n(g,1),$n(g,1,0))}function eC(g){for(;g===Ln;)Ln=Un[--Qn],Un[Qn]=null,Dn=Un[--Qn],Un[Qn]=null;for(;g===On;)On=Tn[--jn],Tn[jn]=null,qn=Tn[--jn],Tn[jn]=null,Pn=Tn[--jn],Tn[jn]=null}var IC=null,tC=null,nC=!1,CC=null;function lC(g,e){var I=Ja(5,null,null,0);I.elementType="DELETED",I.stateNode=e,I.return=g,null===(e=g.deletions)?(g.deletions=[I],g.flags|=16):e.push(I)}function oC(g,e){switch(g.tag){case 5:var I=g.type;return null!==(e=1!==e.nodeType||I.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(g.stateNode=e,IC=g,tC=rn(e.firstChild),!0);case 6:return null!==(e=""===g.pendingProps||3!==e.nodeType?null:e)&&(g.stateNode=e,IC=g,tC=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(I=null!==On?{id:Pn,overflow:qn}:null,g.memoizedState={dehydrated:e,treeContext:I,retryLane:1073741824},(I=Ja(18,null,null,0)).stateNode=e,I.return=g,g.child=I,IC=g,tC=null,!0);default:return!1}}function rC(g){return 0!==(1&g.mode)&&0===(128&g.flags)}function aC(g){if(nC){var e=tC;if(e){var I=e;if(!oC(g,e)){if(rC(g))throw Error(C(418));e=rn(I.nextSibling);var t=IC;e&&oC(g,e)?lC(t,I):(g.flags=-4097&g.flags|2,nC=!1,IC=g)}}else{if(rC(g))throw Error(C(418));g.flags=-4097&g.flags|2,nC=!1,IC=g}}}function cC(g){for(g=g.return;null!==g&&5!==g.tag&&3!==g.tag&&13!==g.tag;)g=g.return;IC=g}function iC(g){if(g!==IC)return!1;if(!nC)return cC(g),nC=!0,!1;var e;if((e=3!==g.tag)&&!(e=5!==g.tag)&&(e="head"!==(e=g.type)&&"body"!==e&&!en(g.type,g.memoizedProps)),e&&(e=tC)){if(rC(g))throw AC(),Error(C(418));for(;e;)lC(g,e),e=rn(e.nextSibling)}if(cC(g),13===g.tag){if(!(g=null!==(g=g.memoizedState)?g.dehydrated:null))throw Error(C(317));g:{for(g=g.nextSibling,e=0;g;){if(8===g.nodeType){var I=g.data;if("/$"===I){if(0===e){tC=rn(g.nextSibling);break g}e--}else"$"!==I&&"$!"!==I&&"$?"!==I||e++}g=g.nextSibling}tC=null}}else tC=IC?rn(g.stateNode.nextSibling):null;return!0}function AC(){for(var g=tC;g;)g=rn(g.nextSibling)}function uC(){tC=IC=null,nC=!1}function dC(g){null===CC?CC=[g]:CC.push(g)}var sC=p.ReactCurrentBatchConfig;function bC(g,e,I){if(null!==(g=I.ref)&&"function"!==typeof g&&"object"!==typeof g){if(I._owner){if(I=I._owner){if(1!==I.tag)throw Error(C(309));var t=I.stateNode}if(!t)throw Error(C(147,g));var n=t,l=""+g;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===l?e.ref:(e=function(g){var e=n.refs;null===g?delete e[l]:e[l]=g},e._stringRef=l,e)}if("string"!==typeof g)throw Error(C(284));if(!I._owner)throw Error(C(290,g))}return g}function mC(g,e){throw g=Object.prototype.toString.call(e),Error(C(31,"[object Object]"===g?"object with keys {"+Object.keys(e).join(", ")+"}":g))}function ZC(g){return(0,g._init)(g._payload)}function yC(g){function e(e,I){if(g){var t=e.deletions;null===t?(e.deletions=[I],e.flags|=16):t.push(I)}}function I(I,t){if(!g)return null;for(;null!==t;)e(I,t),t=t.sibling;return null}function t(g,e){for(g=new Map;null!==e;)null!==e.key?g.set(e.key,e):g.set(e.index,e),e=e.sibling;return g}function n(g,e){return(g=Ya(g,e)).index=0,g.sibling=null,g}function l(e,I,t){return e.index=t,g?null!==(t=e.alternate)?(t=t.index)<I?(e.flags|=2,I):t:(e.flags|=2,I):(e.flags|=1048576,I)}function o(e){return g&&null===e.alternate&&(e.flags|=2),e}function r(g,e,I,t){return null===e||6!==e.tag?((e=Ka(I,g.mode,t)).return=g,e):((e=n(e,I)).return=g,e)}function a(g,e,I,t){var C=I.type;return C===B?i(g,e,I.props.children,t,I.key):null!==e&&(e.elementType===C||"object"===typeof C&&null!==C&&C.$$typeof===k&&ZC(C)===e.type)?((t=n(e,I.props)).ref=bC(g,e,I),t.return=g,t):((t=Ha(I.type,I.key,I.props,null,g.mode,t)).ref=bC(g,e,I),t.return=g,t)}function c(g,e,I,t){return null===e||4!==e.tag||e.stateNode.containerInfo!==I.containerInfo||e.stateNode.implementation!==I.implementation?((e=Fa(I,g.mode,t)).return=g,e):((e=n(e,I.children||[])).return=g,e)}function i(g,e,I,t,C){return null===e||7!==e.tag?((e=wa(I,g.mode,t,C)).return=g,e):((e=n(e,I)).return=g,e)}function A(g,e,I){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Ka(""+e,g.mode,I)).return=g,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case G:return(I=Ha(e.type,e.key,e.props,null,g.mode,I)).ref=bC(g,null,e),I.return=g,I;case h:return(e=Fa(e,g.mode,I)).return=g,e;case k:return A(g,(0,e._init)(e._payload),I)}if(eg(e)||w(e))return(e=wa(e,g.mode,I,null)).return=g,e;mC(g,e)}return null}function u(g,e,I,t){var n=null!==e?e.key:null;if("string"===typeof I&&""!==I||"number"===typeof I)return null!==n?null:r(g,e,""+I,t);if("object"===typeof I&&null!==I){switch(I.$$typeof){case G:return I.key===n?a(g,e,I,t):null;case h:return I.key===n?c(g,e,I,t):null;case k:return u(g,e,(n=I._init)(I._payload),t)}if(eg(I)||w(I))return null!==n?null:i(g,e,I,t,null);mC(g,I)}return null}function d(g,e,I,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return r(e,g=g.get(I)||null,""+t,n);if("object"===typeof t&&null!==t){switch(t.$$typeof){case G:return a(e,g=g.get(null===t.key?I:t.key)||null,t,n);case h:return c(e,g=g.get(null===t.key?I:t.key)||null,t,n);case k:return d(g,e,I,(0,t._init)(t._payload),n)}if(eg(t)||w(t))return i(e,g=g.get(I)||null,t,n,null);mC(e,t)}return null}function s(n,C,o,r){for(var a=null,c=null,i=C,s=C=0,b=null;null!==i&&s<o.length;s++){i.index>s?(b=i,i=null):b=i.sibling;var m=u(n,i,o[s],r);if(null===m){null===i&&(i=b);break}g&&i&&null===m.alternate&&e(n,i),C=l(m,C,s),null===c?a=m:c.sibling=m,c=m,i=b}if(s===o.length)return I(n,i),nC&&_n(n,s),a;if(null===i){for(;s<o.length;s++)null!==(i=A(n,o[s],r))&&(C=l(i,C,s),null===c?a=i:c.sibling=i,c=i);return nC&&_n(n,s),a}for(i=t(n,i);s<o.length;s++)null!==(b=d(i,n,s,o[s],r))&&(g&&null!==b.alternate&&i.delete(null===b.key?s:b.key),C=l(b,C,s),null===c?a=b:c.sibling=b,c=b);return g&&i.forEach((function(g){return e(n,g)})),nC&&_n(n,s),a}function b(n,o,r,a){var c=w(r);if("function"!==typeof c)throw Error(C(150));if(null==(r=c.call(r)))throw Error(C(151));for(var i=c=null,s=o,b=o=0,m=null,Z=r.next();null!==s&&!Z.done;b++,Z=r.next()){s.index>b?(m=s,s=null):m=s.sibling;var y=u(n,s,Z.value,a);if(null===y){null===s&&(s=m);break}g&&s&&null===y.alternate&&e(n,s),o=l(y,o,b),null===i?c=y:i.sibling=y,i=y,s=m}if(Z.done)return I(n,s),nC&&_n(n,b),c;if(null===s){for(;!Z.done;b++,Z=r.next())null!==(Z=A(n,Z.value,a))&&(o=l(Z,o,b),null===i?c=Z:i.sibling=Z,i=Z);return nC&&_n(n,b),c}for(s=t(n,s);!Z.done;b++,Z=r.next())null!==(Z=d(s,n,b,Z.value,a))&&(g&&null!==Z.alternate&&s.delete(null===Z.key?b:Z.key),o=l(Z,o,b),null===i?c=Z:i.sibling=Z,i=Z);return g&&s.forEach((function(g){return e(n,g)})),nC&&_n(n,b),c}return function g(t,C,l,r){if("object"===typeof l&&null!==l&&l.type===B&&null===l.key&&(l=l.props.children),"object"===typeof l&&null!==l){switch(l.$$typeof){case G:g:{for(var a=l.key,c=C;null!==c;){if(c.key===a){if((a=l.type)===B){if(7===c.tag){I(t,c.sibling),(C=n(c,l.props.children)).return=t,t=C;break g}}else if(c.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===k&&ZC(a)===c.type){I(t,c.sibling),(C=n(c,l.props)).ref=bC(t,c,l),C.return=t,t=C;break g}I(t,c);break}e(t,c),c=c.sibling}l.type===B?((C=wa(l.props.children,t.mode,r,l.key)).return=t,t=C):((r=Ha(l.type,l.key,l.props,null,t.mode,r)).ref=bC(t,C,l),r.return=t,t=r)}return o(t);case h:g:{for(c=l.key;null!==C;){if(C.key===c){if(4===C.tag&&C.stateNode.containerInfo===l.containerInfo&&C.stateNode.implementation===l.implementation){I(t,C.sibling),(C=n(C,l.children||[])).return=t,t=C;break g}I(t,C);break}e(t,C),C=C.sibling}(C=Fa(l,t.mode,r)).return=t,t=C}return o(t);case k:return g(t,C,(c=l._init)(l._payload),r)}if(eg(l))return s(t,C,l,r);if(w(l))return b(t,C,l,r);mC(t,l)}return"string"===typeof l&&""!==l||"number"===typeof l?(l=""+l,null!==C&&6===C.tag?(I(t,C.sibling),(C=n(C,l)).return=t,t=C):(I(t,C),(C=Ka(l,t.mode,r)).return=t,t=C),o(t)):I(t,C)}}var pC=yC(!0),GC=yC(!1),hC=Sn(null),BC=null,SC=null,WC=null;function fC(){WC=SC=BC=null}function VC(g){var e=hC.current;Wn(hC),g._currentValue=e}function vC(g,e,I){for(;null!==g;){var t=g.alternate;if((g.childLanes&e)!==e?(g.childLanes|=e,null!==t&&(t.childLanes|=e)):null!==t&&(t.childLanes&e)!==e&&(t.childLanes|=e),g===I)break;g=g.return}}function XC(g,e){BC=g,WC=SC=null,null!==(g=g.dependencies)&&null!==g.firstContext&&(0!==(g.lanes&e)&&(yo=!0),g.firstContext=null)}function RC(g){var e=g._currentValue;if(WC!==g)if(g={context:g,memoizedValue:e,next:null},null===SC){if(null===BC)throw Error(C(308));SC=g,BC.dependencies={lanes:0,firstContext:g}}else SC=SC.next=g;return e}var JC=null;function kC(g){null===JC?JC=[g]:JC.push(g)}function YC(g,e,I,t){var n=e.interleaved;return null===n?(I.next=I,kC(e)):(I.next=n.next,n.next=I),e.interleaved=I,HC(g,t)}function HC(g,e){g.lanes|=e;var I=g.alternate;for(null!==I&&(I.lanes|=e),I=g,g=g.return;null!==g;)g.childLanes|=e,null!==(I=g.alternate)&&(I.childLanes|=e),I=g,g=g.return;return 3===I.tag?I.stateNode:null}var wC=!1;function NC(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KC(g,e){g=g.updateQueue,e.updateQueue===g&&(e.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function FC(g,e){return{eventTime:g,lane:e,tag:0,payload:null,callback:null,next:null}}function xC(g,e,I){var t=g.updateQueue;if(null===t)return null;if(t=t.shared,0!==(2&vr)){var n=t.pending;return null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e,HC(g,I)}return null===(n=t.interleaved)?(e.next=e,kC(t)):(e.next=n.next,n.next=e),t.interleaved=e,HC(g,I)}function EC(g,e,I){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&I))){var t=e.lanes;I|=t&=g.pendingLanes,e.lanes=I,Ze(g,I)}}function MC(g,e){var I=g.updateQueue,t=g.alternate;if(null!==t&&I===(t=t.updateQueue)){var n=null,C=null;if(null!==(I=I.firstBaseUpdate)){do{var l={eventTime:I.eventTime,lane:I.lane,tag:I.tag,payload:I.payload,callback:I.callback,next:null};null===C?n=C=l:C=C.next=l,I=I.next}while(null!==I);null===C?n=C=e:C=C.next=e}else n=C=e;return I={baseState:t.baseState,firstBaseUpdate:n,lastBaseUpdate:C,shared:t.shared,effects:t.effects},void(g.updateQueue=I)}null===(g=I.lastBaseUpdate)?I.firstBaseUpdate=e:g.next=e,I.lastBaseUpdate=e}function zC(g,e,I,t){var n=g.updateQueue;wC=!1;var C=n.firstBaseUpdate,l=n.lastBaseUpdate,o=n.shared.pending;if(null!==o){n.shared.pending=null;var r=o,a=r.next;r.next=null,null===l?C=a:l.next=a,l=r;var c=g.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==l&&(null===o?c.firstBaseUpdate=a:o.next=a,c.lastBaseUpdate=r))}if(null!==C){var i=n.baseState;for(l=0,c=a=r=null,o=C;;){var A=o.lane,u=o.eventTime;if((t&A)===A){null!==c&&(c=c.next={eventTime:u,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});g:{var d=g,s=o;switch(A=e,u=I,s.tag){case 1:if("function"===typeof(d=s.payload)){i=d.call(u,i,A);break g}i=d;break g;case 3:d.flags=-65537&d.flags|128;case 0:if(null===(A="function"===typeof(d=s.payload)?d.call(u,i,A):d)||void 0===A)break g;i=K({},i,A);break g;case 2:wC=!0}}null!==o.callback&&0!==o.lane&&(g.flags|=64,null===(A=n.effects)?n.effects=[o]:A.push(o))}else u={eventTime:u,lane:A,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(a=c=u,r=i):c=c.next=u,l|=A;if(null===(o=o.next)){if(null===(o=n.shared.pending))break;o=(A=o).next,A.next=null,n.lastBaseUpdate=A,n.shared.pending=null}}if(null===c&&(r=i),n.baseState=r,n.firstBaseUpdate=a,n.lastBaseUpdate=c,null!==(e=n.shared.interleaved)){n=e;do{l|=n.lane,n=n.next}while(n!==e)}else null===C&&(n.shared.lanes=0);Nr|=l,g.lanes=l,g.memoizedState=i}}function UC(g,e,I){if(g=e.effects,e.effects=null,null!==g)for(e=0;e<g.length;e++){var t=g[e],n=t.callback;if(null!==n){if(t.callback=null,t=I,"function"!==typeof n)throw Error(C(191,n));n.call(t)}}}var QC={},LC=Sn(QC),DC=Sn(QC),TC=Sn(QC);function jC(g){if(g===QC)throw Error(C(174));return g}function OC(g,e){switch(fn(TC,e),fn(DC,g),fn(LC,QC),g=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rg(null,"");break;default:e=rg(e=(g=8===g?e.parentNode:e).namespaceURI||null,g=g.tagName)}Wn(LC),fn(LC,e)}function PC(){Wn(LC),Wn(DC),Wn(TC)}function qC(g){jC(TC.current);var e=jC(LC.current),I=rg(e,g.type);e!==I&&(fn(DC,g),fn(LC,I))}function _C(g){DC.current===g&&(Wn(LC),Wn(DC))}var $C=Sn(0);function gl(g){for(var e=g;null!==e;){if(13===e.tag){var I=e.memoizedState;if(null!==I&&(null===(I=I.dehydrated)||"$?"===I.data||"$!"===I.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===g)break;for(;null===e.sibling;){if(null===e.return||e.return===g)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var el=[];function Il(){for(var g=0;g<el.length;g++)el[g]._workInProgressVersionPrimary=null;el.length=0}var tl=p.ReactCurrentDispatcher,nl=p.ReactCurrentBatchConfig,Cl=0,ll=null,ol=null,rl=null,al=!1,cl=!1,il=0,Al=0;function ul(){throw Error(C(321))}function dl(g,e){if(null===e)return!1;for(var I=0;I<e.length&&I<g.length;I++)if(!lt(g[I],e[I]))return!1;return!0}function sl(g,e,I,t,n,l){if(Cl=l,ll=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tl.current=null===g||null===g.memoizedState?_l:$l,g=I(t,n),cl){l=0;do{if(cl=!1,il=0,25<=l)throw Error(C(301));l+=1,rl=ol=null,e.updateQueue=null,tl.current=go,g=I(t,n)}while(cl)}if(tl.current=ql,e=null!==ol&&null!==ol.next,Cl=0,rl=ol=ll=null,al=!1,e)throw Error(C(300));return g}function bl(){var g=0!==il;return il=0,g}function ml(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===rl?ll.memoizedState=rl=g:rl=rl.next=g,rl}function Zl(){if(null===ol){var g=ll.alternate;g=null!==g?g.memoizedState:null}else g=ol.next;var e=null===rl?ll.memoizedState:rl.next;if(null!==e)rl=e,ol=g;else{if(null===g)throw Error(C(310));g={memoizedState:(ol=g).memoizedState,baseState:ol.baseState,baseQueue:ol.baseQueue,queue:ol.queue,next:null},null===rl?ll.memoizedState=rl=g:rl=rl.next=g}return rl}function yl(g,e){return"function"===typeof e?e(g):e}function pl(g){var e=Zl(),I=e.queue;if(null===I)throw Error(C(311));I.lastRenderedReducer=g;var t=ol,n=t.baseQueue,l=I.pending;if(null!==l){if(null!==n){var o=n.next;n.next=l.next,l.next=o}t.baseQueue=n=l,I.pending=null}if(null!==n){l=n.next,t=t.baseState;var r=o=null,a=null,c=l;do{var i=c.lane;if((Cl&i)===i)null!==a&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),t=c.hasEagerState?c.eagerState:g(t,c.action);else{var A={lane:i,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===a?(r=a=A,o=t):a=a.next=A,ll.lanes|=i,Nr|=i}c=c.next}while(null!==c&&c!==l);null===a?o=t:a.next=r,lt(t,e.memoizedState)||(yo=!0),e.memoizedState=t,e.baseState=o,e.baseQueue=a,I.lastRenderedState=t}if(null!==(g=I.interleaved)){n=g;do{l=n.lane,ll.lanes|=l,Nr|=l,n=n.next}while(n!==g)}else null===n&&(I.lanes=0);return[e.memoizedState,I.dispatch]}function Gl(g){var e=Zl(),I=e.queue;if(null===I)throw Error(C(311));I.lastRenderedReducer=g;var t=I.dispatch,n=I.pending,l=e.memoizedState;if(null!==n){I.pending=null;var o=n=n.next;do{l=g(l,o.action),o=o.next}while(o!==n);lt(l,e.memoizedState)||(yo=!0),e.memoizedState=l,null===e.baseQueue&&(e.baseState=l),I.lastRenderedState=l}return[l,t]}function hl(){}function Bl(g,e){var I=ll,t=Zl(),n=e(),l=!lt(t.memoizedState,n);if(l&&(t.memoizedState=n,yo=!0),t=t.queue,wl(fl.bind(null,I,t,g),[g]),t.getSnapshot!==e||l||null!==rl&&1&rl.memoizedState.tag){if(I.flags|=2048,Rl(9,Wl.bind(null,I,t,n,e),void 0,null),null===Xr)throw Error(C(349));0!==(30&Cl)||Sl(I,e,n)}return n}function Sl(g,e,I){g.flags|=16384,g={getSnapshot:e,value:I},null===(e=ll.updateQueue)?(e={lastEffect:null,stores:null},ll.updateQueue=e,e.stores=[g]):null===(I=e.stores)?e.stores=[g]:I.push(g)}function Wl(g,e,I,t){e.value=I,e.getSnapshot=t,Vl(e)&&vl(g)}function fl(g,e,I){return I((function(){Vl(e)&&vl(g)}))}function Vl(g){var e=g.getSnapshot;g=g.value;try{var I=e();return!lt(g,I)}catch(t){return!0}}function vl(g){var e=HC(g,1);null!==e&&Ia(e,g,1,-1)}function Xl(g){var e=ml();return"function"===typeof g&&(g=g()),e.memoizedState=e.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:g},e.queue=g,g=g.dispatch=Tl.bind(null,ll,g),[e.memoizedState,g]}function Rl(g,e,I,t){return g={tag:g,create:e,destroy:I,deps:t,next:null},null===(e=ll.updateQueue)?(e={lastEffect:null,stores:null},ll.updateQueue=e,e.lastEffect=g.next=g):null===(I=e.lastEffect)?e.lastEffect=g.next=g:(t=I.next,I.next=g,g.next=t,e.lastEffect=g),g}function Jl(){return Zl().memoizedState}function kl(g,e,I,t){var n=ml();ll.flags|=g,n.memoizedState=Rl(1|e,I,void 0,void 0===t?null:t)}function Yl(g,e,I,t){var n=Zl();t=void 0===t?null:t;var C=void 0;if(null!==ol){var l=ol.memoizedState;if(C=l.destroy,null!==t&&dl(t,l.deps))return void(n.memoizedState=Rl(e,I,C,t))}ll.flags|=g,n.memoizedState=Rl(1|e,I,C,t)}function Hl(g,e){return kl(8390656,8,g,e)}function wl(g,e){return Yl(2048,8,g,e)}function Nl(g,e){return Yl(4,2,g,e)}function Kl(g,e){return Yl(4,4,g,e)}function Fl(g,e){return"function"===typeof e?(g=g(),e(g),function(){e(null)}):null!==e&&void 0!==e?(g=g(),e.current=g,function(){e.current=null}):void 0}function xl(g,e,I){return I=null!==I&&void 0!==I?I.concat([g]):null,Yl(4,4,Fl.bind(null,e,g),I)}function El(){}function Ml(g,e){var I=Zl();e=void 0===e?null:e;var t=I.memoizedState;return null!==t&&null!==e&&dl(e,t[1])?t[0]:(I.memoizedState=[g,e],g)}function zl(g,e){var I=Zl();e=void 0===e?null:e;var t=I.memoizedState;return null!==t&&null!==e&&dl(e,t[1])?t[0]:(g=g(),I.memoizedState=[g,e],g)}function Ul(g,e,I){return 0===(21&Cl)?(g.baseState&&(g.baseState=!1,yo=!0),g.memoizedState=I):(lt(I,e)||(I=se(),ll.lanes|=I,Nr|=I,g.baseState=!0),e)}function Ql(g,e){var I=ye;ye=0!==I&&4>I?I:4,g(!0);var t=nl.transition;nl.transition={};try{g(!1),e()}finally{ye=I,nl.transition=t}}function Ll(){return Zl().memoizedState}function Dl(g,e,I){var t=ea(g);if(I={lane:t,action:I,hasEagerState:!1,eagerState:null,next:null},jl(g))Ol(e,I);else if(null!==(I=YC(g,e,I,t))){Ia(I,g,t,ga()),Pl(I,e,t)}}function Tl(g,e,I){var t=ea(g),n={lane:t,action:I,hasEagerState:!1,eagerState:null,next:null};if(jl(g))Ol(e,n);else{var C=g.alternate;if(0===g.lanes&&(null===C||0===C.lanes)&&null!==(C=e.lastRenderedReducer))try{var l=e.lastRenderedState,o=C(l,I);if(n.hasEagerState=!0,n.eagerState=o,lt(o,l)){var r=e.interleaved;return null===r?(n.next=n,kC(e)):(n.next=r.next,r.next=n),void(e.interleaved=n)}}catch(a){}null!==(I=YC(g,e,n,t))&&(Ia(I,g,t,n=ga()),Pl(I,e,t))}}function jl(g){var e=g.alternate;return g===ll||null!==e&&e===ll}function Ol(g,e){cl=al=!0;var I=g.pending;null===I?e.next=e:(e.next=I.next,I.next=e),g.pending=e}function Pl(g,e,I){if(0!==(4194240&I)){var t=e.lanes;I|=t&=g.pendingLanes,e.lanes=I,Ze(g,I)}}var ql={readContext:RC,useCallback:ul,useContext:ul,useEffect:ul,useImperativeHandle:ul,useInsertionEffect:ul,useLayoutEffect:ul,useMemo:ul,useReducer:ul,useRef:ul,useState:ul,useDebugValue:ul,useDeferredValue:ul,useTransition:ul,useMutableSource:ul,useSyncExternalStore:ul,useId:ul,unstable_isNewReconciler:!1},_l={readContext:RC,useCallback:function(g,e){return ml().memoizedState=[g,void 0===e?null:e],g},useContext:RC,useEffect:Hl,useImperativeHandle:function(g,e,I){return I=null!==I&&void 0!==I?I.concat([g]):null,kl(4194308,4,Fl.bind(null,e,g),I)},useLayoutEffect:function(g,e){return kl(4194308,4,g,e)},useInsertionEffect:function(g,e){return kl(4,2,g,e)},useMemo:function(g,e){var I=ml();return e=void 0===e?null:e,g=g(),I.memoizedState=[g,e],g},useReducer:function(g,e,I){var t=ml();return e=void 0!==I?I(e):e,t.memoizedState=t.baseState=e,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:e},t.queue=g,g=g.dispatch=Dl.bind(null,ll,g),[t.memoizedState,g]},useRef:function(g){return g={current:g},ml().memoizedState=g},useState:Xl,useDebugValue:El,useDeferredValue:function(g){return ml().memoizedState=g},useTransition:function(){var g=Xl(!1),e=g[0];return g=Ql.bind(null,g[1]),ml().memoizedState=g,[e,g]},useMutableSource:function(){},useSyncExternalStore:function(g,e,I){var t=ll,n=ml();if(nC){if(void 0===I)throw Error(C(407));I=I()}else{if(I=e(),null===Xr)throw Error(C(349));0!==(30&Cl)||Sl(t,e,I)}n.memoizedState=I;var l={value:I,getSnapshot:e};return n.queue=l,Hl(fl.bind(null,t,l,g),[g]),t.flags|=2048,Rl(9,Wl.bind(null,t,l,I,e),void 0,null),I},useId:function(){var g=ml(),e=Xr.identifierPrefix;if(nC){var I=qn;e=":"+e+"R"+(I=(Pn&~(1<<32-le(Pn)-1)).toString(32)+I),0<(I=il++)&&(e+="H"+I.toString(32)),e+=":"}else e=":"+e+"r"+(I=Al++).toString(32)+":";return g.memoizedState=e},unstable_isNewReconciler:!1},$l={readContext:RC,useCallback:Ml,useContext:RC,useEffect:wl,useImperativeHandle:xl,useInsertionEffect:Nl,useLayoutEffect:Kl,useMemo:zl,useReducer:pl,useRef:Jl,useState:function(){return pl(yl)},useDebugValue:El,useDeferredValue:function(g){return Ul(Zl(),ol.memoizedState,g)},useTransition:function(){return[pl(yl)[0],Zl().memoizedState]},useMutableSource:hl,useSyncExternalStore:Bl,useId:Ll,unstable_isNewReconciler:!1},go={readContext:RC,useCallback:Ml,useContext:RC,useEffect:wl,useImperativeHandle:xl,useInsertionEffect:Nl,useLayoutEffect:Kl,useMemo:zl,useReducer:Gl,useRef:Jl,useState:function(){return Gl(yl)},useDebugValue:El,useDeferredValue:function(g){var e=Zl();return null===ol?e.memoizedState=g:Ul(e,ol.memoizedState,g)},useTransition:function(){return[Gl(yl)[0],Zl().memoizedState]},useMutableSource:hl,useSyncExternalStore:Bl,useId:Ll,unstable_isNewReconciler:!1};function eo(g,e){if(g&&g.defaultProps){for(var I in e=K({},e),g=g.defaultProps)void 0===e[I]&&(e[I]=g[I]);return e}return e}function Io(g,e,I,t){I=null===(I=I(t,e=g.memoizedState))||void 0===I?e:K({},e,I),g.memoizedState=I,0===g.lanes&&(g.updateQueue.baseState=I)}var to={isMounted:function(g){return!!(g=g._reactInternals)&&zg(g)===g},enqueueSetState:function(g,e,I){g=g._reactInternals;var t=ga(),n=ea(g),C=FC(t,n);C.payload=e,void 0!==I&&null!==I&&(C.callback=I),null!==(e=xC(g,C,n))&&(Ia(e,g,n,t),EC(e,g,n))},enqueueReplaceState:function(g,e,I){g=g._reactInternals;var t=ga(),n=ea(g),C=FC(t,n);C.tag=1,C.payload=e,void 0!==I&&null!==I&&(C.callback=I),null!==(e=xC(g,C,n))&&(Ia(e,g,n,t),EC(e,g,n))},enqueueForceUpdate:function(g,e){g=g._reactInternals;var I=ga(),t=ea(g),n=FC(I,t);n.tag=2,void 0!==e&&null!==e&&(n.callback=e),null!==(e=xC(g,n,t))&&(Ia(e,g,t,I),EC(e,g,t))}};function no(g,e,I,t,n,C,l){return"function"===typeof(g=g.stateNode).shouldComponentUpdate?g.shouldComponentUpdate(t,C,l):!e.prototype||!e.prototype.isPureReactComponent||(!ot(I,t)||!ot(n,C))}function Co(g,e,I){var t=!1,n=Vn,C=e.contextType;return"object"===typeof C&&null!==C?C=RC(C):(n=kn(e)?Rn:vn.current,C=(t=null!==(t=e.contextTypes)&&void 0!==t)?Jn(g,n):Vn),e=new e(I,C),g.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=to,g.stateNode=e,e._reactInternals=g,t&&((g=g.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,g.__reactInternalMemoizedMaskedChildContext=C),e}function lo(g,e,I,t){g=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(I,t),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(I,t),e.state!==g&&to.enqueueReplaceState(e,e.state,null)}function oo(g,e,I,t){var n=g.stateNode;n.props=I,n.state=g.memoizedState,n.refs={},NC(g);var C=e.contextType;"object"===typeof C&&null!==C?n.context=RC(C):(C=kn(e)?Rn:vn.current,n.context=Jn(g,C)),n.state=g.memoizedState,"function"===typeof(C=e.getDerivedStateFromProps)&&(Io(g,e,C,I),n.state=g.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(e=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),e!==n.state&&to.enqueueReplaceState(n,n.state,null),zC(g,I,n,t),n.state=g.memoizedState),"function"===typeof n.componentDidMount&&(g.flags|=4194308)}function ro(g,e){try{var I="",t=e;do{I+=M(t),t=t.return}while(t);var n=I}catch(C){n="\nError generating stack: "+C.message+"\n"+C.stack}return{value:g,source:e,stack:n,digest:null}}function ao(g,e,I){return{value:g,source:null,stack:null!=I?I:null,digest:null!=e?e:null}}function co(g,e){try{console.error(e.value)}catch(I){setTimeout((function(){throw I}))}}var io="function"===typeof WeakMap?WeakMap:Map;function Ao(g,e,I){(I=FC(-1,I)).tag=3,I.payload={element:null};var t=e.value;return I.callback=function(){Qr||(Qr=!0,Lr=t),co(0,e)},I}function uo(g,e,I){(I=FC(-1,I)).tag=3;var t=g.type.getDerivedStateFromError;if("function"===typeof t){var n=e.value;I.payload=function(){return t(n)},I.callback=function(){co(0,e)}}var C=g.stateNode;return null!==C&&"function"===typeof C.componentDidCatch&&(I.callback=function(){co(0,e),"function"!==typeof t&&(null===Dr?Dr=new Set([this]):Dr.add(this));var g=e.stack;this.componentDidCatch(e.value,{componentStack:null!==g?g:""})}),I}function so(g,e,I){var t=g.pingCache;if(null===t){t=g.pingCache=new io;var n=new Set;t.set(e,n)}else void 0===(n=t.get(e))&&(n=new Set,t.set(e,n));n.has(I)||(n.add(I),g=Wa.bind(null,g,e,I),e.then(g,g))}function bo(g){do{var e;if((e=13===g.tag)&&(e=null===(e=g.memoizedState)||null!==e.dehydrated),e)return g;g=g.return}while(null!==g);return null}function mo(g,e,I,t,n){return 0===(1&g.mode)?(g===e?g.flags|=65536:(g.flags|=128,I.flags|=131072,I.flags&=-52805,1===I.tag&&(null===I.alternate?I.tag=17:((e=FC(-1,1)).tag=2,xC(I,e,1))),I.lanes|=1),g):(g.flags|=65536,g.lanes=n,g)}var Zo=p.ReactCurrentOwner,yo=!1;function po(g,e,I,t){e.child=null===g?GC(e,null,I,t):pC(e,g.child,I,t)}function Go(g,e,I,t,n){I=I.render;var C=e.ref;return XC(e,n),t=sl(g,e,I,t,C,n),I=bl(),null===g||yo?(nC&&I&&gC(e),e.flags|=1,po(g,e,t,n),e.child):(e.updateQueue=g.updateQueue,e.flags&=-2053,g.lanes&=~n,Qo(g,e,n))}function ho(g,e,I,t,n){if(null===g){var C=I.type;return"function"!==typeof C||ka(C)||void 0!==C.defaultProps||null!==I.compare||void 0!==I.defaultProps?((g=Ha(I.type,null,t,e,e.mode,n)).ref=e.ref,g.return=e,e.child=g):(e.tag=15,e.type=C,Bo(g,e,C,t,n))}if(C=g.child,0===(g.lanes&n)){var l=C.memoizedProps;if((I=null!==(I=I.compare)?I:ot)(l,t)&&g.ref===e.ref)return Qo(g,e,n)}return e.flags|=1,(g=Ya(C,t)).ref=e.ref,g.return=e,e.child=g}function Bo(g,e,I,t,n){if(null!==g){var C=g.memoizedProps;if(ot(C,t)&&g.ref===e.ref){if(yo=!1,e.pendingProps=t=C,0===(g.lanes&n))return e.lanes=g.lanes,Qo(g,e,n);0!==(131072&g.flags)&&(yo=!0)}}return fo(g,e,I,t,n)}function So(g,e,I){var t=e.pendingProps,n=t.children,C=null!==g?g.memoizedState:null;if("hidden"===t.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fn(Yr,kr),kr|=I;else{if(0===(1073741824&I))return g=null!==C?C.baseLanes|I:I,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:g,cachePool:null,transitions:null},e.updateQueue=null,fn(Yr,kr),kr|=g,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},t=null!==C?C.baseLanes:I,fn(Yr,kr),kr|=t}else null!==C?(t=C.baseLanes|I,e.memoizedState=null):t=I,fn(Yr,kr),kr|=t;return po(g,e,n,I),e.child}function Wo(g,e){var I=e.ref;(null===g&&null!==I||null!==g&&g.ref!==I)&&(e.flags|=512,e.flags|=2097152)}function fo(g,e,I,t,n){var C=kn(I)?Rn:vn.current;return C=Jn(e,C),XC(e,n),I=sl(g,e,I,t,C,n),t=bl(),null===g||yo?(nC&&t&&gC(e),e.flags|=1,po(g,e,I,n),e.child):(e.updateQueue=g.updateQueue,e.flags&=-2053,g.lanes&=~n,Qo(g,e,n))}function Vo(g,e,I,t,n){if(kn(I)){var C=!0;Nn(e)}else C=!1;if(XC(e,n),null===e.stateNode)Uo(g,e),Co(e,I,t),oo(e,I,t,n),t=!0;else if(null===g){var l=e.stateNode,o=e.memoizedProps;l.props=o;var r=l.context,a=I.contextType;"object"===typeof a&&null!==a?a=RC(a):a=Jn(e,a=kn(I)?Rn:vn.current);var c=I.getDerivedStateFromProps,i="function"===typeof c||"function"===typeof l.getSnapshotBeforeUpdate;i||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(o!==t||r!==a)&&lo(e,l,t,a),wC=!1;var A=e.memoizedState;l.state=A,zC(e,t,l,n),r=e.memoizedState,o!==t||A!==r||Xn.current||wC?("function"===typeof c&&(Io(e,I,c,t),r=e.memoizedState),(o=wC||no(e,I,o,t,A,r,a))?(i||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||("function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount()),"function"===typeof l.componentDidMount&&(e.flags|=4194308)):("function"===typeof l.componentDidMount&&(e.flags|=4194308),e.memoizedProps=t,e.memoizedState=r),l.props=t,l.state=r,l.context=a,t=o):("function"===typeof l.componentDidMount&&(e.flags|=4194308),t=!1)}else{l=e.stateNode,KC(g,e),o=e.memoizedProps,a=e.type===e.elementType?o:eo(e.type,o),l.props=a,i=e.pendingProps,A=l.context,"object"===typeof(r=I.contextType)&&null!==r?r=RC(r):r=Jn(e,r=kn(I)?Rn:vn.current);var u=I.getDerivedStateFromProps;(c="function"===typeof u||"function"===typeof l.getSnapshotBeforeUpdate)||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(o!==i||A!==r)&&lo(e,l,t,r),wC=!1,A=e.memoizedState,l.state=A,zC(e,t,l,n);var d=e.memoizedState;o!==i||A!==d||Xn.current||wC?("function"===typeof u&&(Io(e,I,u,t),d=e.memoizedState),(a=wC||no(e,I,a,t,A,d,r)||!1)?(c||"function"!==typeof l.UNSAFE_componentWillUpdate&&"function"!==typeof l.componentWillUpdate||("function"===typeof l.componentWillUpdate&&l.componentWillUpdate(t,d,r),"function"===typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(t,d,r)),"function"===typeof l.componentDidUpdate&&(e.flags|=4),"function"===typeof l.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof l.componentDidUpdate||o===g.memoizedProps&&A===g.memoizedState||(e.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||o===g.memoizedProps&&A===g.memoizedState||(e.flags|=1024),e.memoizedProps=t,e.memoizedState=d),l.props=t,l.state=d,l.context=r,t=a):("function"!==typeof l.componentDidUpdate||o===g.memoizedProps&&A===g.memoizedState||(e.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||o===g.memoizedProps&&A===g.memoizedState||(e.flags|=1024),t=!1)}return vo(g,e,I,t,C,n)}function vo(g,e,I,t,n,C){Wo(g,e);var l=0!==(128&e.flags);if(!t&&!l)return n&&Kn(e,I,!1),Qo(g,e,C);t=e.stateNode,Zo.current=e;var o=l&&"function"!==typeof I.getDerivedStateFromError?null:t.render();return e.flags|=1,null!==g&&l?(e.child=pC(e,g.child,null,C),e.child=pC(e,null,o,C)):po(g,e,o,C),e.memoizedState=t.state,n&&Kn(e,I,!0),e.child}function Xo(g){var e=g.stateNode;e.pendingContext?Hn(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Hn(0,e.context,!1),OC(g,e.containerInfo)}function Ro(g,e,I,t,n){return uC(),dC(n),e.flags|=256,po(g,e,I,t),e.child}var Jo,ko,Yo,Ho,wo={dehydrated:null,treeContext:null,retryLane:0};function No(g){return{baseLanes:g,cachePool:null,transitions:null}}function Ko(g,e,I){var t,n=e.pendingProps,l=$C.current,o=!1,r=0!==(128&e.flags);if((t=r)||(t=(null===g||null!==g.memoizedState)&&0!==(2&l)),t?(o=!0,e.flags&=-129):null!==g&&null===g.memoizedState||(l|=1),fn($C,1&l),null===g)return aC(e),null!==(g=e.memoizedState)&&null!==(g=g.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===g.data?e.lanes=8:e.lanes=1073741824,null):(r=n.children,g=n.fallback,o?(n=e.mode,o=e.child,r={mode:"hidden",children:r},0===(1&n)&&null!==o?(o.childLanes=0,o.pendingProps=r):o=Na(r,n,0,null),g=wa(g,n,I,null),o.return=e,g.return=e,o.sibling=g,e.child=o,e.child.memoizedState=No(I),e.memoizedState=wo,g):Fo(e,r));if(null!==(l=g.memoizedState)&&null!==(t=l.dehydrated))return function(g,e,I,t,n,l,o){if(I)return 256&e.flags?(e.flags&=-257,xo(g,e,o,t=ao(Error(C(422))))):null!==e.memoizedState?(e.child=g.child,e.flags|=128,null):(l=t.fallback,n=e.mode,t=Na({mode:"visible",children:t.children},n,0,null),(l=wa(l,n,o,null)).flags|=2,t.return=e,l.return=e,t.sibling=l,e.child=t,0!==(1&e.mode)&&pC(e,g.child,null,o),e.child.memoizedState=No(o),e.memoizedState=wo,l);if(0===(1&e.mode))return xo(g,e,o,null);if("$!"===n.data){if(t=n.nextSibling&&n.nextSibling.dataset)var r=t.dgst;return t=r,xo(g,e,o,t=ao(l=Error(C(419)),t,void 0))}if(r=0!==(o&g.childLanes),yo||r){if(null!==(t=Xr)){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(t.suspendedLanes|o))?0:n)&&n!==l.retryLane&&(l.retryLane=n,HC(g,n),Ia(t,g,n,-1))}return sa(),xo(g,e,o,t=ao(Error(C(421))))}return"$?"===n.data?(e.flags|=128,e.child=g.child,e=Va.bind(null,g),n._reactRetry=e,null):(g=l.treeContext,tC=rn(n.nextSibling),IC=e,nC=!0,CC=null,null!==g&&(Tn[jn++]=Pn,Tn[jn++]=qn,Tn[jn++]=On,Pn=g.id,qn=g.overflow,On=e),e=Fo(e,t.children),e.flags|=4096,e)}(g,e,r,n,t,l,I);if(o){o=n.fallback,r=e.mode,t=(l=g.child).sibling;var a={mode:"hidden",children:n.children};return 0===(1&r)&&e.child!==l?((n=e.child).childLanes=0,n.pendingProps=a,e.deletions=null):(n=Ya(l,a)).subtreeFlags=14680064&l.subtreeFlags,null!==t?o=Ya(t,o):(o=wa(o,r,I,null)).flags|=2,o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,r=null===(r=g.child.memoizedState)?No(I):{baseLanes:r.baseLanes|I,cachePool:null,transitions:r.transitions},o.memoizedState=r,o.childLanes=g.childLanes&~I,e.memoizedState=wo,n}return g=(o=g.child).sibling,n=Ya(o,{mode:"visible",children:n.children}),0===(1&e.mode)&&(n.lanes=I),n.return=e,n.sibling=null,null!==g&&(null===(I=e.deletions)?(e.deletions=[g],e.flags|=16):I.push(g)),e.child=n,e.memoizedState=null,n}function Fo(g,e){return(e=Na({mode:"visible",children:e},g.mode,0,null)).return=g,g.child=e}function xo(g,e,I,t){return null!==t&&dC(t),pC(e,g.child,null,I),(g=Fo(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,g}function Eo(g,e,I){g.lanes|=e;var t=g.alternate;null!==t&&(t.lanes|=e),vC(g.return,e,I)}function Mo(g,e,I,t,n){var C=g.memoizedState;null===C?g.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:t,tail:I,tailMode:n}:(C.isBackwards=e,C.rendering=null,C.renderingStartTime=0,C.last=t,C.tail=I,C.tailMode=n)}function zo(g,e,I){var t=e.pendingProps,n=t.revealOrder,C=t.tail;if(po(g,e,t.children,I),0!==(2&(t=$C.current)))t=1&t|2,e.flags|=128;else{if(null!==g&&0!==(128&g.flags))g:for(g=e.child;null!==g;){if(13===g.tag)null!==g.memoizedState&&Eo(g,I,e);else if(19===g.tag)Eo(g,I,e);else if(null!==g.child){g.child.return=g,g=g.child;continue}if(g===e)break g;for(;null===g.sibling;){if(null===g.return||g.return===e)break g;g=g.return}g.sibling.return=g.return,g=g.sibling}t&=1}if(fn($C,t),0===(1&e.mode))e.memoizedState=null;else switch(n){case"forwards":for(I=e.child,n=null;null!==I;)null!==(g=I.alternate)&&null===gl(g)&&(n=I),I=I.sibling;null===(I=n)?(n=e.child,e.child=null):(n=I.sibling,I.sibling=null),Mo(e,!1,n,I,C);break;case"backwards":for(I=null,n=e.child,e.child=null;null!==n;){if(null!==(g=n.alternate)&&null===gl(g)){e.child=n;break}g=n.sibling,n.sibling=I,I=n,n=g}Mo(e,!0,I,null,C);break;case"together":Mo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uo(g,e){0===(1&e.mode)&&null!==g&&(g.alternate=null,e.alternate=null,e.flags|=2)}function Qo(g,e,I){if(null!==g&&(e.dependencies=g.dependencies),Nr|=e.lanes,0===(I&e.childLanes))return null;if(null!==g&&e.child!==g.child)throw Error(C(153));if(null!==e.child){for(I=Ya(g=e.child,g.pendingProps),e.child=I,I.return=e;null!==g.sibling;)g=g.sibling,(I=I.sibling=Ya(g,g.pendingProps)).return=e;I.sibling=null}return e.child}function Lo(g,e){if(!nC)switch(g.tailMode){case"hidden":e=g.tail;for(var I=null;null!==e;)null!==e.alternate&&(I=e),e=e.sibling;null===I?g.tail=null:I.sibling=null;break;case"collapsed":I=g.tail;for(var t=null;null!==I;)null!==I.alternate&&(t=I),I=I.sibling;null===t?e||null===g.tail?g.tail=null:g.tail.sibling=null:t.sibling=null}}function Do(g){var e=null!==g.alternate&&g.alternate.child===g.child,I=0,t=0;if(e)for(var n=g.child;null!==n;)I|=n.lanes|n.childLanes,t|=14680064&n.subtreeFlags,t|=14680064&n.flags,n.return=g,n=n.sibling;else for(n=g.child;null!==n;)I|=n.lanes|n.childLanes,t|=n.subtreeFlags,t|=n.flags,n.return=g,n=n.sibling;return g.subtreeFlags|=t,g.childLanes=I,e}function To(g,e,I){var t=e.pendingProps;switch(eC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Do(e),null;case 1:case 17:return kn(e.type)&&Yn(),Do(e),null;case 3:return t=e.stateNode,PC(),Wn(Xn),Wn(vn),Il(),t.pendingContext&&(t.context=t.pendingContext,t.pendingContext=null),null!==g&&null!==g.child||(iC(e)?e.flags|=4:null===g||g.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==CC&&(la(CC),CC=null))),ko(g,e),Do(e),null;case 5:_C(e);var n=jC(TC.current);if(I=e.type,null!==g&&null!=e.stateNode)Yo(g,e,I,t,n),g.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!t){if(null===e.stateNode)throw Error(C(166));return Do(e),null}if(g=jC(LC.current),iC(e)){t=e.stateNode,I=e.type;var l=e.memoizedProps;switch(t[An]=e,t[un]=l,g=0!==(1&e.mode),I){case"dialog":Ft("cancel",t),Ft("close",t);break;case"iframe":case"object":case"embed":Ft("load",t);break;case"video":case"audio":for(n=0;n<Ht.length;n++)Ft(Ht[n],t);break;case"source":Ft("error",t);break;case"img":case"image":case"link":Ft("error",t),Ft("load",t);break;case"details":Ft("toggle",t);break;case"input":P(t,l),Ft("invalid",t);break;case"select":t._wrapperState={wasMultiple:!!l.multiple},Ft("invalid",t);break;case"textarea":ng(t,l),Ft("invalid",t)}for(var r in Zg(I,l),n=null,l)if(l.hasOwnProperty(r)){var a=l[r];"children"===r?"string"===typeof a?t.textContent!==a&&(!0!==l.suppressHydrationWarning&&qt(t.textContent,a,g),n=["children",a]):"number"===typeof a&&t.textContent!==""+a&&(!0!==l.suppressHydrationWarning&&qt(t.textContent,a,g),n=["children",""+a]):o.hasOwnProperty(r)&&null!=a&&"onScroll"===r&&Ft("scroll",t)}switch(I){case"input":D(t),$(t,l,!0);break;case"textarea":D(t),lg(t);break;case"select":case"option":break;default:"function"===typeof l.onClick&&(t.onclick=_t)}t=n,e.updateQueue=t,null!==t&&(e.flags|=4)}else{r=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===g&&(g=og(I)),"http://www.w3.org/1999/xhtml"===g?"script"===I?((g=r.createElement("div")).innerHTML="<script><\/script>",g=g.removeChild(g.firstChild)):"string"===typeof t.is?g=r.createElement(I,{is:t.is}):(g=r.createElement(I),"select"===I&&(r=g,t.multiple?r.multiple=!0:t.size&&(r.size=t.size))):g=r.createElementNS(g,I),g[An]=e,g[un]=t,Jo(g,e,!1,!1),e.stateNode=g;g:{switch(r=yg(I,t),I){case"dialog":Ft("cancel",g),Ft("close",g),n=t;break;case"iframe":case"object":case"embed":Ft("load",g),n=t;break;case"video":case"audio":for(n=0;n<Ht.length;n++)Ft(Ht[n],g);n=t;break;case"source":Ft("error",g),n=t;break;case"img":case"image":case"link":Ft("error",g),Ft("load",g),n=t;break;case"details":Ft("toggle",g),n=t;break;case"input":P(g,t),n=O(g,t),Ft("invalid",g);break;case"option":default:n=t;break;case"select":g._wrapperState={wasMultiple:!!t.multiple},n=K({},t,{value:void 0}),Ft("invalid",g);break;case"textarea":ng(g,t),n=tg(g,t),Ft("invalid",g)}for(l in Zg(I,n),a=n)if(a.hasOwnProperty(l)){var c=a[l];"style"===l?bg(g,c):"dangerouslySetInnerHTML"===l?null!=(c=c?c.__html:void 0)&&ig(g,c):"children"===l?"string"===typeof c?("textarea"!==I||""!==c)&&Ag(g,c):"number"===typeof c&&Ag(g,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(o.hasOwnProperty(l)?null!=c&&"onScroll"===l&&Ft("scroll",g):null!=c&&y(g,l,c,r))}switch(I){case"input":D(g),$(g,t,!1);break;case"textarea":D(g),lg(g);break;case"option":null!=t.value&&g.setAttribute("value",""+Q(t.value));break;case"select":g.multiple=!!t.multiple,null!=(l=t.value)?Ig(g,!!t.multiple,l,!1):null!=t.defaultValue&&Ig(g,!!t.multiple,t.defaultValue,!0);break;default:"function"===typeof n.onClick&&(g.onclick=_t)}switch(I){case"button":case"input":case"select":case"textarea":t=!!t.autoFocus;break g;case"img":t=!0;break g;default:t=!1}}t&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Do(e),null;case 6:if(g&&null!=e.stateNode)Ho(g,e,g.memoizedProps,t);else{if("string"!==typeof t&&null===e.stateNode)throw Error(C(166));if(I=jC(TC.current),jC(LC.current),iC(e)){if(t=e.stateNode,I=e.memoizedProps,t[An]=e,(l=t.nodeValue!==I)&&null!==(g=IC))switch(g.tag){case 3:qt(t.nodeValue,I,0!==(1&g.mode));break;case 5:!0!==g.memoizedProps.suppressHydrationWarning&&qt(t.nodeValue,I,0!==(1&g.mode))}l&&(e.flags|=4)}else(t=(9===I.nodeType?I:I.ownerDocument).createTextNode(t))[An]=e,e.stateNode=t}return Do(e),null;case 13:if(Wn($C),t=e.memoizedState,null===g||null!==g.memoizedState&&null!==g.memoizedState.dehydrated){if(nC&&null!==tC&&0!==(1&e.mode)&&0===(128&e.flags))AC(),uC(),e.flags|=98560,l=!1;else if(l=iC(e),null!==t&&null!==t.dehydrated){if(null===g){if(!l)throw Error(C(318));if(!(l=null!==(l=e.memoizedState)?l.dehydrated:null))throw Error(C(317));l[An]=e}else uC(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Do(e),l=!1}else null!==CC&&(la(CC),CC=null),l=!0;if(!l)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=I,e):((t=null!==t)!==(null!==g&&null!==g.memoizedState)&&t&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===g||0!==(1&$C.current)?0===Hr&&(Hr=3):sa())),null!==e.updateQueue&&(e.flags|=4),Do(e),null);case 4:return PC(),ko(g,e),null===g&&Mt(e.stateNode.containerInfo),Do(e),null;case 10:return VC(e.type._context),Do(e),null;case 19:if(Wn($C),null===(l=e.memoizedState))return Do(e),null;if(t=0!==(128&e.flags),null===(r=l.rendering))if(t)Lo(l,!1);else{if(0!==Hr||null!==g&&0!==(128&g.flags))for(g=e.child;null!==g;){if(null!==(r=gl(g))){for(e.flags|=128,Lo(l,!1),null!==(t=r.updateQueue)&&(e.updateQueue=t,e.flags|=4),e.subtreeFlags=0,t=I,I=e.child;null!==I;)g=t,(l=I).flags&=14680066,null===(r=l.alternate)?(l.childLanes=0,l.lanes=g,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,l.type=r.type,g=r.dependencies,l.dependencies=null===g?null:{lanes:g.lanes,firstContext:g.firstContext}),I=I.sibling;return fn($C,1&$C.current|2),e.child}g=g.sibling}null!==l.tail&&qg()>zr&&(e.flags|=128,t=!0,Lo(l,!1),e.lanes=4194304)}else{if(!t)if(null!==(g=gl(r))){if(e.flags|=128,t=!0,null!==(I=g.updateQueue)&&(e.updateQueue=I,e.flags|=4),Lo(l,!0),null===l.tail&&"hidden"===l.tailMode&&!r.alternate&&!nC)return Do(e),null}else 2*qg()-l.renderingStartTime>zr&&1073741824!==I&&(e.flags|=128,t=!0,Lo(l,!1),e.lanes=4194304);l.isBackwards?(r.sibling=e.child,e.child=r):(null!==(I=l.last)?I.sibling=r:e.child=r,l.last=r)}return null!==l.tail?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=qg(),e.sibling=null,I=$C.current,fn($C,t?1&I|2:1&I),e):(Do(e),null);case 22:case 23:return ia(),t=null!==e.memoizedState,null!==g&&null!==g.memoizedState!==t&&(e.flags|=8192),t&&0!==(1&e.mode)?0!==(1073741824&kr)&&(Do(e),6&e.subtreeFlags&&(e.flags|=8192)):Do(e),null;case 24:case 25:return null}throw Error(C(156,e.tag))}function jo(g,e){switch(eC(e),e.tag){case 1:return kn(e.type)&&Yn(),65536&(g=e.flags)?(e.flags=-65537&g|128,e):null;case 3:return PC(),Wn(Xn),Wn(vn),Il(),0!==(65536&(g=e.flags))&&0===(128&g)?(e.flags=-65537&g|128,e):null;case 5:return _C(e),null;case 13:if(Wn($C),null!==(g=e.memoizedState)&&null!==g.dehydrated){if(null===e.alternate)throw Error(C(340));uC()}return 65536&(g=e.flags)?(e.flags=-65537&g|128,e):null;case 19:return Wn($C),null;case 4:return PC(),null;case 10:return VC(e.type._context),null;case 22:case 23:return ia(),null;default:return null}}Jo=function(g,e){for(var I=e.child;null!==I;){if(5===I.tag||6===I.tag)g.appendChild(I.stateNode);else if(4!==I.tag&&null!==I.child){I.child.return=I,I=I.child;continue}if(I===e)break;for(;null===I.sibling;){if(null===I.return||I.return===e)return;I=I.return}I.sibling.return=I.return,I=I.sibling}},ko=function(){},Yo=function(g,e,I,t){var n=g.memoizedProps;if(n!==t){g=e.stateNode,jC(LC.current);var C,l=null;switch(I){case"input":n=O(g,n),t=O(g,t),l=[];break;case"select":n=K({},n,{value:void 0}),t=K({},t,{value:void 0}),l=[];break;case"textarea":n=tg(g,n),t=tg(g,t),l=[];break;default:"function"!==typeof n.onClick&&"function"===typeof t.onClick&&(g.onclick=_t)}for(c in Zg(I,t),I=null,n)if(!t.hasOwnProperty(c)&&n.hasOwnProperty(c)&&null!=n[c])if("style"===c){var r=n[c];for(C in r)r.hasOwnProperty(C)&&(I||(I={}),I[C]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(o.hasOwnProperty(c)?l||(l=[]):(l=l||[]).push(c,null));for(c in t){var a=t[c];if(r=null!=n?n[c]:void 0,t.hasOwnProperty(c)&&a!==r&&(null!=a||null!=r))if("style"===c)if(r){for(C in r)!r.hasOwnProperty(C)||a&&a.hasOwnProperty(C)||(I||(I={}),I[C]="");for(C in a)a.hasOwnProperty(C)&&r[C]!==a[C]&&(I||(I={}),I[C]=a[C])}else I||(l||(l=[]),l.push(c,I)),I=a;else"dangerouslySetInnerHTML"===c?(a=a?a.__html:void 0,r=r?r.__html:void 0,null!=a&&r!==a&&(l=l||[]).push(c,a)):"children"===c?"string"!==typeof a&&"number"!==typeof a||(l=l||[]).push(c,""+a):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(o.hasOwnProperty(c)?(null!=a&&"onScroll"===c&&Ft("scroll",g),l||r===a||(l=[])):(l=l||[]).push(c,a))}I&&(l=l||[]).push("style",I);var c=l;(e.updateQueue=c)&&(e.flags|=4)}},Ho=function(g,e,I,t){I!==t&&(e.flags|=4)};var Oo=!1,Po=!1,qo="function"===typeof WeakSet?WeakSet:Set,_o=null;function $o(g,e){var I=g.ref;if(null!==I)if("function"===typeof I)try{I(null)}catch(t){Sa(g,e,t)}else I.current=null}function gr(g,e,I){try{I()}catch(t){Sa(g,e,t)}}var er=!1;function Ir(g,e,I){var t=e.updateQueue;if(null!==(t=null!==t?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&g)===g){var C=n.destroy;n.destroy=void 0,void 0!==C&&gr(e,I,C)}n=n.next}while(n!==t)}}function tr(g,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var I=e=e.next;do{if((I.tag&g)===g){var t=I.create;I.destroy=t()}I=I.next}while(I!==e)}}function nr(g){var e=g.ref;if(null!==e){var I=g.stateNode;g.tag,g=I,"function"===typeof e?e(g):e.current=g}}function Cr(g){var e=g.alternate;null!==e&&(g.alternate=null,Cr(e)),g.child=null,g.deletions=null,g.sibling=null,5===g.tag&&(null!==(e=g.stateNode)&&(delete e[An],delete e[un],delete e[sn],delete e[bn],delete e[mn])),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function lr(g){return 5===g.tag||3===g.tag||4===g.tag}function or(g){g:for(;;){for(;null===g.sibling;){if(null===g.return||lr(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;5!==g.tag&&6!==g.tag&&18!==g.tag;){if(2&g.flags)continue g;if(null===g.child||4===g.tag)continue g;g.child.return=g,g=g.child}if(!(2&g.flags))return g.stateNode}}function rr(g,e,I){var t=g.tag;if(5===t||6===t)g=g.stateNode,e?8===I.nodeType?I.parentNode.insertBefore(g,e):I.insertBefore(g,e):(8===I.nodeType?(e=I.parentNode).insertBefore(g,I):(e=I).appendChild(g),null!==(I=I._reactRootContainer)&&void 0!==I||null!==e.onclick||(e.onclick=_t));else if(4!==t&&null!==(g=g.child))for(rr(g,e,I),g=g.sibling;null!==g;)rr(g,e,I),g=g.sibling}function ar(g,e,I){var t=g.tag;if(5===t||6===t)g=g.stateNode,e?I.insertBefore(g,e):I.appendChild(g);else if(4!==t&&null!==(g=g.child))for(ar(g,e,I),g=g.sibling;null!==g;)ar(g,e,I),g=g.sibling}var cr=null,ir=!1;function Ar(g,e,I){for(I=I.child;null!==I;)ur(g,e,I),I=I.sibling}function ur(g,e,I){if(Ce&&"function"===typeof Ce.onCommitFiberUnmount)try{Ce.onCommitFiberUnmount(ne,I)}catch(o){}switch(I.tag){case 5:Po||$o(I,e);case 6:var t=cr,n=ir;cr=null,Ar(g,e,I),ir=n,null!==(cr=t)&&(ir?(g=cr,I=I.stateNode,8===g.nodeType?g.parentNode.removeChild(I):g.removeChild(I)):cr.removeChild(I.stateNode));break;case 18:null!==cr&&(ir?(g=cr,I=I.stateNode,8===g.nodeType?on(g.parentNode,I):1===g.nodeType&&on(g,I),ze(g)):on(cr,I.stateNode));break;case 4:t=cr,n=ir,cr=I.stateNode.containerInfo,ir=!0,Ar(g,e,I),cr=t,ir=n;break;case 0:case 11:case 14:case 15:if(!Po&&(null!==(t=I.updateQueue)&&null!==(t=t.lastEffect))){n=t=t.next;do{var C=n,l=C.destroy;C=C.tag,void 0!==l&&(0!==(2&C)||0!==(4&C))&&gr(I,e,l),n=n.next}while(n!==t)}Ar(g,e,I);break;case 1:if(!Po&&($o(I,e),"function"===typeof(t=I.stateNode).componentWillUnmount))try{t.props=I.memoizedProps,t.state=I.memoizedState,t.componentWillUnmount()}catch(o){Sa(I,e,o)}Ar(g,e,I);break;case 21:Ar(g,e,I);break;case 22:1&I.mode?(Po=(t=Po)||null!==I.memoizedState,Ar(g,e,I),Po=t):Ar(g,e,I);break;default:Ar(g,e,I)}}function dr(g){var e=g.updateQueue;if(null!==e){g.updateQueue=null;var I=g.stateNode;null===I&&(I=g.stateNode=new qo),e.forEach((function(e){var t=va.bind(null,g,e);I.has(e)||(I.add(e),e.then(t,t))}))}}function sr(g,e){var I=e.deletions;if(null!==I)for(var t=0;t<I.length;t++){var n=I[t];try{var l=g,o=e,r=o;g:for(;null!==r;){switch(r.tag){case 5:cr=r.stateNode,ir=!1;break g;case 3:case 4:cr=r.stateNode.containerInfo,ir=!0;break g}r=r.return}if(null===cr)throw Error(C(160));ur(l,o,n),cr=null,ir=!1;var a=n.alternate;null!==a&&(a.return=null),n.return=null}catch(c){Sa(n,e,c)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)br(e,g),e=e.sibling}function br(g,e){var I=g.alternate,t=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:if(sr(e,g),mr(g),4&t){try{Ir(3,g,g.return),tr(3,g)}catch(b){Sa(g,g.return,b)}try{Ir(5,g,g.return)}catch(b){Sa(g,g.return,b)}}break;case 1:sr(e,g),mr(g),512&t&&null!==I&&$o(I,I.return);break;case 5:if(sr(e,g),mr(g),512&t&&null!==I&&$o(I,I.return),32&g.flags){var n=g.stateNode;try{Ag(n,"")}catch(b){Sa(g,g.return,b)}}if(4&t&&null!=(n=g.stateNode)){var l=g.memoizedProps,o=null!==I?I.memoizedProps:l,r=g.type,a=g.updateQueue;if(g.updateQueue=null,null!==a)try{"input"===r&&"radio"===l.type&&null!=l.name&&q(n,l),yg(r,o);var c=yg(r,l);for(o=0;o<a.length;o+=2){var i=a[o],A=a[o+1];"style"===i?bg(n,A):"dangerouslySetInnerHTML"===i?ig(n,A):"children"===i?Ag(n,A):y(n,i,A,c)}switch(r){case"input":_(n,l);break;case"textarea":Cg(n,l);break;case"select":var u=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!l.multiple;var d=l.value;null!=d?Ig(n,!!l.multiple,d,!1):u!==!!l.multiple&&(null!=l.defaultValue?Ig(n,!!l.multiple,l.defaultValue,!0):Ig(n,!!l.multiple,l.multiple?[]:"",!1))}n[un]=l}catch(b){Sa(g,g.return,b)}}break;case 6:if(sr(e,g),mr(g),4&t){if(null===g.stateNode)throw Error(C(162));n=g.stateNode,l=g.memoizedProps;try{n.nodeValue=l}catch(b){Sa(g,g.return,b)}}break;case 3:if(sr(e,g),mr(g),4&t&&null!==I&&I.memoizedState.isDehydrated)try{ze(e.containerInfo)}catch(b){Sa(g,g.return,b)}break;case 4:default:sr(e,g),mr(g);break;case 13:sr(e,g),mr(g),8192&(n=g.child).flags&&(l=null!==n.memoizedState,n.stateNode.isHidden=l,!l||null!==n.alternate&&null!==n.alternate.memoizedState||(Mr=qg())),4&t&&dr(g);break;case 22:if(i=null!==I&&null!==I.memoizedState,1&g.mode?(Po=(c=Po)||i,sr(e,g),Po=c):sr(e,g),mr(g),8192&t){if(c=null!==g.memoizedState,(g.stateNode.isHidden=c)&&!i&&0!==(1&g.mode))for(_o=g,i=g.child;null!==i;){for(A=_o=i;null!==_o;){switch(d=(u=_o).child,u.tag){case 0:case 11:case 14:case 15:Ir(4,u,u.return);break;case 1:$o(u,u.return);var s=u.stateNode;if("function"===typeof s.componentWillUnmount){t=u,I=u.return;try{e=t,s.props=e.memoizedProps,s.state=e.memoizedState,s.componentWillUnmount()}catch(b){Sa(t,I,b)}}break;case 5:$o(u,u.return);break;case 22:if(null!==u.memoizedState){Gr(A);continue}}null!==d?(d.return=u,_o=d):Gr(A)}i=i.sibling}g:for(i=null,A=g;;){if(5===A.tag){if(null===i){i=A;try{n=A.stateNode,c?"function"===typeof(l=n.style).setProperty?l.setProperty("display","none","important"):l.display="none":(r=A.stateNode,o=void 0!==(a=A.memoizedProps.style)&&null!==a&&a.hasOwnProperty("display")?a.display:null,r.style.display=sg("display",o))}catch(b){Sa(g,g.return,b)}}}else if(6===A.tag){if(null===i)try{A.stateNode.nodeValue=c?"":A.memoizedProps}catch(b){Sa(g,g.return,b)}}else if((22!==A.tag&&23!==A.tag||null===A.memoizedState||A===g)&&null!==A.child){A.child.return=A,A=A.child;continue}if(A===g)break g;for(;null===A.sibling;){if(null===A.return||A.return===g)break g;i===A&&(i=null),A=A.return}i===A&&(i=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:sr(e,g),mr(g),4&t&&dr(g);case 21:}}function mr(g){var e=g.flags;if(2&e){try{g:{for(var I=g.return;null!==I;){if(lr(I)){var t=I;break g}I=I.return}throw Error(C(160))}switch(t.tag){case 5:var n=t.stateNode;32&t.flags&&(Ag(n,""),t.flags&=-33),ar(g,or(g),n);break;case 3:case 4:var l=t.stateNode.containerInfo;rr(g,or(g),l);break;default:throw Error(C(161))}}catch(o){Sa(g,g.return,o)}g.flags&=-3}4096&e&&(g.flags&=-4097)}function Zr(g,e,I){_o=g,yr(g,e,I)}function yr(g,e,I){for(var t=0!==(1&g.mode);null!==_o;){var n=_o,C=n.child;if(22===n.tag&&t){var l=null!==n.memoizedState||Oo;if(!l){var o=n.alternate,r=null!==o&&null!==o.memoizedState||Po;o=Oo;var a=Po;if(Oo=l,(Po=r)&&!a)for(_o=n;null!==_o;)r=(l=_o).child,22===l.tag&&null!==l.memoizedState?hr(n):null!==r?(r.return=l,_o=r):hr(n);for(;null!==C;)_o=C,yr(C,e,I),C=C.sibling;_o=n,Oo=o,Po=a}pr(g)}else 0!==(8772&n.subtreeFlags)&&null!==C?(C.return=n,_o=C):pr(g)}}function pr(g){for(;null!==_o;){var e=_o;if(0!==(8772&e.flags)){var I=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Po||tr(5,e);break;case 1:var t=e.stateNode;if(4&e.flags&&!Po)if(null===I)t.componentDidMount();else{var n=e.elementType===e.type?I.memoizedProps:eo(e.type,I.memoizedProps);t.componentDidUpdate(n,I.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;null!==l&&UC(e,l,t);break;case 3:var o=e.updateQueue;if(null!==o){if(I=null,null!==e.child)switch(e.child.tag){case 5:case 1:I=e.child.stateNode}UC(e,o,I)}break;case 5:var r=e.stateNode;if(null===I&&4&e.flags){I=r;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&I.focus();break;case"img":a.src&&(I.src=a.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var i=c.memoizedState;if(null!==i){var A=i.dehydrated;null!==A&&ze(A)}}}break;default:throw Error(C(163))}Po||512&e.flags&&nr(e)}catch(u){Sa(e,e.return,u)}}if(e===g){_o=null;break}if(null!==(I=e.sibling)){I.return=e.return,_o=I;break}_o=e.return}}function Gr(g){for(;null!==_o;){var e=_o;if(e===g){_o=null;break}var I=e.sibling;if(null!==I){I.return=e.return,_o=I;break}_o=e.return}}function hr(g){for(;null!==_o;){var e=_o;try{switch(e.tag){case 0:case 11:case 15:var I=e.return;try{tr(4,e)}catch(r){Sa(e,I,r)}break;case 1:var t=e.stateNode;if("function"===typeof t.componentDidMount){var n=e.return;try{t.componentDidMount()}catch(r){Sa(e,n,r)}}var C=e.return;try{nr(e)}catch(r){Sa(e,C,r)}break;case 5:var l=e.return;try{nr(e)}catch(r){Sa(e,l,r)}}}catch(r){Sa(e,e.return,r)}if(e===g){_o=null;break}var o=e.sibling;if(null!==o){o.return=e.return,_o=o;break}_o=e.return}}var Br,Sr=Math.ceil,Wr=p.ReactCurrentDispatcher,fr=p.ReactCurrentOwner,Vr=p.ReactCurrentBatchConfig,vr=0,Xr=null,Rr=null,Jr=0,kr=0,Yr=Sn(0),Hr=0,wr=null,Nr=0,Kr=0,Fr=0,xr=null,Er=null,Mr=0,zr=1/0,Ur=null,Qr=!1,Lr=null,Dr=null,Tr=!1,jr=null,Or=0,Pr=0,qr=null,_r=-1,$r=0;function ga(){return 0!==(6&vr)?qg():-1!==_r?_r:_r=qg()}function ea(g){return 0===(1&g.mode)?1:0!==(2&vr)&&0!==Jr?Jr&-Jr:null!==sC.transition?(0===$r&&($r=se()),$r):0!==(g=ye)?g:g=void 0===(g=window.event)?16:Pe(g.type)}function Ia(g,e,I,t){if(50<Pr)throw Pr=0,qr=null,Error(C(185));me(g,I,t),0!==(2&vr)&&g===Xr||(g===Xr&&(0===(2&vr)&&(Kr|=I),4===Hr&&oa(g,Jr)),ta(g,t),1===I&&0===vr&&0===(1&e.mode)&&(zr=qg()+500,xn&&zn()))}function ta(g,e){var I=g.callbackNode;!function(g,e){for(var I=g.suspendedLanes,t=g.pingedLanes,n=g.expirationTimes,C=g.pendingLanes;0<C;){var l=31-le(C),o=1<<l,r=n[l];-1===r?0!==(o&I)&&0===(o&t)||(n[l]=ue(o,e)):r<=e&&(g.expiredLanes|=o),C&=~o}}(g,e);var t=Ae(g,g===Xr?Jr:0);if(0===t)null!==I&&jg(I),g.callbackNode=null,g.callbackPriority=0;else if(e=t&-t,g.callbackPriority!==e){if(null!=I&&jg(I),1===e)0===g.tag?function(g){xn=!0,Mn(g)}(ra.bind(null,g)):Mn(ra.bind(null,g)),Cn((function(){0===(6&vr)&&zn()})),I=null;else{switch(pe(t)){case 1:I=$g;break;case 4:I=ge;break;case 16:default:I=ee;break;case 536870912:I=te}I=Xa(I,na.bind(null,g))}g.callbackPriority=e,g.callbackNode=I}}function na(g,e){if(_r=-1,$r=0,0!==(6&vr))throw Error(C(327));var I=g.callbackNode;if(ha()&&g.callbackNode!==I)return null;var t=Ae(g,g===Xr?Jr:0);if(0===t)return null;if(0!==(30&t)||0!==(t&g.expiredLanes)||e)e=ba(g,t);else{e=t;var n=vr;vr|=2;var l=da();for(Xr===g&&Jr===e||(Ur=null,zr=qg()+500,Aa(g,e));;)try{Za();break}catch(r){ua(g,r)}fC(),Wr.current=l,vr=n,null!==Rr?e=0:(Xr=null,Jr=0,e=Hr)}if(0!==e){if(2===e&&(0!==(n=de(g))&&(t=n,e=Ca(g,n))),1===e)throw I=wr,Aa(g,0),oa(g,t),ta(g,qg()),I;if(6===e)oa(g,t);else{if(n=g.current.alternate,0===(30&t)&&!function(g){for(var e=g;;){if(16384&e.flags){var I=e.updateQueue;if(null!==I&&null!==(I=I.stores))for(var t=0;t<I.length;t++){var n=I[t],C=n.getSnapshot;n=n.value;try{if(!lt(C(),n))return!1}catch(o){return!1}}}if(I=e.child,16384&e.subtreeFlags&&null!==I)I.return=e,e=I;else{if(e===g)break;for(;null===e.sibling;){if(null===e.return||e.return===g)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(n)&&(2===(e=ba(g,t))&&(0!==(l=de(g))&&(t=l,e=Ca(g,l))),1===e))throw I=wr,Aa(g,0),oa(g,t),ta(g,qg()),I;switch(g.finishedWork=n,g.finishedLanes=t,e){case 0:case 1:throw Error(C(345));case 2:case 5:Ga(g,Er,Ur);break;case 3:if(oa(g,t),(130023424&t)===t&&10<(e=Mr+500-qg())){if(0!==Ae(g,0))break;if(((n=g.suspendedLanes)&t)!==t){ga(),g.pingedLanes|=g.suspendedLanes&n;break}g.timeoutHandle=In(Ga.bind(null,g,Er,Ur),e);break}Ga(g,Er,Ur);break;case 4:if(oa(g,t),(4194240&t)===t)break;for(e=g.eventTimes,n=-1;0<t;){var o=31-le(t);l=1<<o,(o=e[o])>n&&(n=o),t&=~l}if(t=n,10<(t=(120>(t=qg()-t)?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*Sr(t/1960))-t)){g.timeoutHandle=In(Ga.bind(null,g,Er,Ur),t);break}Ga(g,Er,Ur);break;default:throw Error(C(329))}}}return ta(g,qg()),g.callbackNode===I?na.bind(null,g):null}function Ca(g,e){var I=xr;return g.current.memoizedState.isDehydrated&&(Aa(g,e).flags|=256),2!==(g=ba(g,e))&&(e=Er,Er=I,null!==e&&la(e)),g}function la(g){null===Er?Er=g:Er.push.apply(Er,g)}function oa(g,e){for(e&=~Fr,e&=~Kr,g.suspendedLanes|=e,g.pingedLanes&=~e,g=g.expirationTimes;0<e;){var I=31-le(e),t=1<<I;g[I]=-1,e&=~t}}function ra(g){if(0!==(6&vr))throw Error(C(327));ha();var e=Ae(g,0);if(0===(1&e))return ta(g,qg()),null;var I=ba(g,e);if(0!==g.tag&&2===I){var t=de(g);0!==t&&(e=t,I=Ca(g,t))}if(1===I)throw I=wr,Aa(g,0),oa(g,e),ta(g,qg()),I;if(6===I)throw Error(C(345));return g.finishedWork=g.current.alternate,g.finishedLanes=e,Ga(g,Er,Ur),ta(g,qg()),null}function aa(g,e){var I=vr;vr|=1;try{return g(e)}finally{0===(vr=I)&&(zr=qg()+500,xn&&zn())}}function ca(g){null!==jr&&0===jr.tag&&0===(6&vr)&&ha();var e=vr;vr|=1;var I=Vr.transition,t=ye;try{if(Vr.transition=null,ye=1,g)return g()}finally{ye=t,Vr.transition=I,0===(6&(vr=e))&&zn()}}function ia(){kr=Yr.current,Wn(Yr)}function Aa(g,e){g.finishedWork=null,g.finishedLanes=0;var I=g.timeoutHandle;if(-1!==I&&(g.timeoutHandle=-1,tn(I)),null!==Rr)for(I=Rr.return;null!==I;){var t=I;switch(eC(t),t.tag){case 1:null!==(t=t.type.childContextTypes)&&void 0!==t&&Yn();break;case 3:PC(),Wn(Xn),Wn(vn),Il();break;case 5:_C(t);break;case 4:PC();break;case 13:case 19:Wn($C);break;case 10:VC(t.type._context);break;case 22:case 23:ia()}I=I.return}if(Xr=g,Rr=g=Ya(g.current,null),Jr=kr=e,Hr=0,wr=null,Fr=Kr=Nr=0,Er=xr=null,null!==JC){for(e=0;e<JC.length;e++)if(null!==(t=(I=JC[e]).interleaved)){I.interleaved=null;var n=t.next,C=I.pending;if(null!==C){var l=C.next;C.next=n,t.next=l}I.pending=t}JC=null}return g}function ua(g,e){for(;;){var I=Rr;try{if(fC(),tl.current=ql,al){for(var t=ll.memoizedState;null!==t;){var n=t.queue;null!==n&&(n.pending=null),t=t.next}al=!1}if(Cl=0,rl=ol=ll=null,cl=!1,il=0,fr.current=null,null===I||null===I.return){Hr=1,wr=e,Rr=null;break}g:{var l=g,o=I.return,r=I,a=e;if(e=Jr,r.flags|=32768,null!==a&&"object"===typeof a&&"function"===typeof a.then){var c=a,i=r,A=i.tag;if(0===(1&i.mode)&&(0===A||11===A||15===A)){var u=i.alternate;u?(i.updateQueue=u.updateQueue,i.memoizedState=u.memoizedState,i.lanes=u.lanes):(i.updateQueue=null,i.memoizedState=null)}var d=bo(o);if(null!==d){d.flags&=-257,mo(d,o,r,0,e),1&d.mode&&so(l,c,e),a=c;var s=(e=d).updateQueue;if(null===s){var b=new Set;b.add(a),e.updateQueue=b}else s.add(a);break g}if(0===(1&e)){so(l,c,e),sa();break g}a=Error(C(426))}else if(nC&&1&r.mode){var m=bo(o);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),mo(m,o,r,0,e),dC(ro(a,r));break g}}l=a=ro(a,r),4!==Hr&&(Hr=2),null===xr?xr=[l]:xr.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e,MC(l,Ao(0,a,e));break g;case 1:r=a;var Z=l.type,y=l.stateNode;if(0===(128&l.flags)&&("function"===typeof Z.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Dr||!Dr.has(y)))){l.flags|=65536,e&=-e,l.lanes|=e,MC(l,uo(l,r,e));break g}}l=l.return}while(null!==l)}pa(I)}catch(p){e=p,Rr===I&&null!==I&&(Rr=I=I.return);continue}break}}function da(){var g=Wr.current;return Wr.current=ql,null===g?ql:g}function sa(){0!==Hr&&3!==Hr&&2!==Hr||(Hr=4),null===Xr||0===(268435455&Nr)&&0===(268435455&Kr)||oa(Xr,Jr)}function ba(g,e){var I=vr;vr|=2;var t=da();for(Xr===g&&Jr===e||(Ur=null,Aa(g,e));;)try{ma();break}catch(n){ua(g,n)}if(fC(),vr=I,Wr.current=t,null!==Rr)throw Error(C(261));return Xr=null,Jr=0,Hr}function ma(){for(;null!==Rr;)ya(Rr)}function Za(){for(;null!==Rr&&!Og();)ya(Rr)}function ya(g){var e=Br(g.alternate,g,kr);g.memoizedProps=g.pendingProps,null===e?pa(g):Rr=e,fr.current=null}function pa(g){var e=g;do{var I=e.alternate;if(g=e.return,0===(32768&e.flags)){if(null!==(I=To(I,e,kr)))return void(Rr=I)}else{if(null!==(I=jo(I,e)))return I.flags&=32767,void(Rr=I);if(null===g)return Hr=6,void(Rr=null);g.flags|=32768,g.subtreeFlags=0,g.deletions=null}if(null!==(e=e.sibling))return void(Rr=e);Rr=e=g}while(null!==e);0===Hr&&(Hr=5)}function Ga(g,e,I){var t=ye,n=Vr.transition;try{Vr.transition=null,ye=1,function(g,e,I,t){do{ha()}while(null!==jr);if(0!==(6&vr))throw Error(C(327));I=g.finishedWork;var n=g.finishedLanes;if(null===I)return null;if(g.finishedWork=null,g.finishedLanes=0,I===g.current)throw Error(C(177));g.callbackNode=null,g.callbackPriority=0;var l=I.lanes|I.childLanes;if(function(g,e){var I=g.pendingLanes&~e;g.pendingLanes=e,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=e,g.mutableReadLanes&=e,g.entangledLanes&=e,e=g.entanglements;var t=g.eventTimes;for(g=g.expirationTimes;0<I;){var n=31-le(I),C=1<<n;e[n]=0,t[n]=-1,g[n]=-1,I&=~C}}(g,l),g===Xr&&(Rr=Xr=null,Jr=0),0===(2064&I.subtreeFlags)&&0===(2064&I.flags)||Tr||(Tr=!0,Xa(ee,(function(){return ha(),null}))),l=0!==(15990&I.flags),0!==(15990&I.subtreeFlags)||l){l=Vr.transition,Vr.transition=null;var o=ye;ye=1;var r=vr;vr|=4,fr.current=null,function(g,e){if($t=Qe,At(g=it())){if("selectionStart"in g)var I={start:g.selectionStart,end:g.selectionEnd};else g:{var t=(I=(I=g.ownerDocument)&&I.defaultView||window).getSelection&&I.getSelection();if(t&&0!==t.rangeCount){I=t.anchorNode;var n=t.anchorOffset,l=t.focusNode;t=t.focusOffset;try{I.nodeType,l.nodeType}catch(G){I=null;break g}var o=0,r=-1,a=-1,c=0,i=0,A=g,u=null;e:for(;;){for(var d;A!==I||0!==n&&3!==A.nodeType||(r=o+n),A!==l||0!==t&&3!==A.nodeType||(a=o+t),3===A.nodeType&&(o+=A.nodeValue.length),null!==(d=A.firstChild);)u=A,A=d;for(;;){if(A===g)break e;if(u===I&&++c===n&&(r=o),u===l&&++i===t&&(a=o),null!==(d=A.nextSibling))break;u=(A=u).parentNode}A=d}I=-1===r||-1===a?null:{start:r,end:a}}else I=null}I=I||{start:0,end:0}}else I=null;for(gn={focusedElem:g,selectionRange:I},Qe=!1,_o=e;null!==_o;)if(g=(e=_o).child,0!==(1028&e.subtreeFlags)&&null!==g)g.return=e,_o=g;else for(;null!==_o;){e=_o;try{var s=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==s){var b=s.memoizedProps,m=s.memoizedState,Z=e.stateNode,y=Z.getSnapshotBeforeUpdate(e.elementType===e.type?b:eo(e.type,b),m);Z.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var p=e.stateNode.containerInfo;1===p.nodeType?p.textContent="":9===p.nodeType&&p.documentElement&&p.removeChild(p.documentElement);break;default:throw Error(C(163))}}catch(G){Sa(e,e.return,G)}if(null!==(g=e.sibling)){g.return=e.return,_o=g;break}_o=e.return}s=er,er=!1}(g,I),br(I,g),ut(gn),Qe=!!$t,gn=$t=null,g.current=I,Zr(I,g,n),Pg(),vr=r,ye=o,Vr.transition=l}else g.current=I;if(Tr&&(Tr=!1,jr=g,Or=n),l=g.pendingLanes,0===l&&(Dr=null),function(g){if(Ce&&"function"===typeof Ce.onCommitFiberRoot)try{Ce.onCommitFiberRoot(ne,g,void 0,128===(128&g.current.flags))}catch(e){}}(I.stateNode),ta(g,qg()),null!==e)for(t=g.onRecoverableError,I=0;I<e.length;I++)n=e[I],t(n.value,{componentStack:n.stack,digest:n.digest});if(Qr)throw Qr=!1,g=Lr,Lr=null,g;0!==(1&Or)&&0!==g.tag&&ha(),l=g.pendingLanes,0!==(1&l)?g===qr?Pr++:(Pr=0,qr=g):Pr=0,zn()}(g,e,I,t)}finally{Vr.transition=n,ye=t}return null}function ha(){if(null!==jr){var g=pe(Or),e=Vr.transition,I=ye;try{if(Vr.transition=null,ye=16>g?16:g,null===jr)var t=!1;else{if(g=jr,jr=null,Or=0,0!==(6&vr))throw Error(C(331));var n=vr;for(vr|=4,_o=g.current;null!==_o;){var l=_o,o=l.child;if(0!==(16&_o.flags)){var r=l.deletions;if(null!==r){for(var a=0;a<r.length;a++){var c=r[a];for(_o=c;null!==_o;){var i=_o;switch(i.tag){case 0:case 11:case 15:Ir(8,i,l)}var A=i.child;if(null!==A)A.return=i,_o=A;else for(;null!==_o;){var u=(i=_o).sibling,d=i.return;if(Cr(i),i===c){_o=null;break}if(null!==u){u.return=d,_o=u;break}_o=d}}}var s=l.alternate;if(null!==s){var b=s.child;if(null!==b){s.child=null;do{var m=b.sibling;b.sibling=null,b=m}while(null!==b)}}_o=l}}if(0!==(2064&l.subtreeFlags)&&null!==o)o.return=l,_o=o;else g:for(;null!==_o;){if(0!==(2048&(l=_o).flags))switch(l.tag){case 0:case 11:case 15:Ir(9,l,l.return)}var Z=l.sibling;if(null!==Z){Z.return=l.return,_o=Z;break g}_o=l.return}}var y=g.current;for(_o=y;null!==_o;){var p=(o=_o).child;if(0!==(2064&o.subtreeFlags)&&null!==p)p.return=o,_o=p;else g:for(o=y;null!==_o;){if(0!==(2048&(r=_o).flags))try{switch(r.tag){case 0:case 11:case 15:tr(9,r)}}catch(h){Sa(r,r.return,h)}if(r===o){_o=null;break g}var G=r.sibling;if(null!==G){G.return=r.return,_o=G;break g}_o=r.return}}if(vr=n,zn(),Ce&&"function"===typeof Ce.onPostCommitFiberRoot)try{Ce.onPostCommitFiberRoot(ne,g)}catch(h){}t=!0}return t}finally{ye=I,Vr.transition=e}}return!1}function Ba(g,e,I){g=xC(g,e=Ao(0,e=ro(I,e),1),1),e=ga(),null!==g&&(me(g,1,e),ta(g,e))}function Sa(g,e,I){if(3===g.tag)Ba(g,g,I);else for(;null!==e;){if(3===e.tag){Ba(e,g,I);break}if(1===e.tag){var t=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof t.componentDidCatch&&(null===Dr||!Dr.has(t))){e=xC(e,g=uo(e,g=ro(I,g),1),1),g=ga(),null!==e&&(me(e,1,g),ta(e,g));break}}e=e.return}}function Wa(g,e,I){var t=g.pingCache;null!==t&&t.delete(e),e=ga(),g.pingedLanes|=g.suspendedLanes&I,Xr===g&&(Jr&I)===I&&(4===Hr||3===Hr&&(130023424&Jr)===Jr&&500>qg()-Mr?Aa(g,0):Fr|=I),ta(g,e)}function fa(g,e){0===e&&(0===(1&g.mode)?e=1:(e=ce,0===(130023424&(ce<<=1))&&(ce=4194304)));var I=ga();null!==(g=HC(g,e))&&(me(g,e,I),ta(g,I))}function Va(g){var e=g.memoizedState,I=0;null!==e&&(I=e.retryLane),fa(g,I)}function va(g,e){var I=0;switch(g.tag){case 13:var t=g.stateNode,n=g.memoizedState;null!==n&&(I=n.retryLane);break;case 19:t=g.stateNode;break;default:throw Error(C(314))}null!==t&&t.delete(e),fa(g,I)}function Xa(g,e){return Tg(g,e)}function Ra(g,e,I,t){this.tag=g,this.key=I,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=t,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ja(g,e,I,t){return new Ra(g,e,I,t)}function ka(g){return!(!(g=g.prototype)||!g.isReactComponent)}function Ya(g,e){var I=g.alternate;return null===I?((I=Ja(g.tag,e,g.key,g.mode)).elementType=g.elementType,I.type=g.type,I.stateNode=g.stateNode,I.alternate=g,g.alternate=I):(I.pendingProps=e,I.type=g.type,I.flags=0,I.subtreeFlags=0,I.deletions=null),I.flags=14680064&g.flags,I.childLanes=g.childLanes,I.lanes=g.lanes,I.child=g.child,I.memoizedProps=g.memoizedProps,I.memoizedState=g.memoizedState,I.updateQueue=g.updateQueue,e=g.dependencies,I.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},I.sibling=g.sibling,I.index=g.index,I.ref=g.ref,I}function Ha(g,e,I,t,n,l){var o=2;if(t=g,"function"===typeof g)ka(g)&&(o=1);else if("string"===typeof g)o=5;else g:switch(g){case B:return wa(I.children,n,l,e);case S:o=8,n|=8;break;case W:return(g=Ja(12,I,e,2|n)).elementType=W,g.lanes=l,g;case X:return(g=Ja(13,I,e,n)).elementType=X,g.lanes=l,g;case R:return(g=Ja(19,I,e,n)).elementType=R,g.lanes=l,g;case Y:return Na(I,n,l,e);default:if("object"===typeof g&&null!==g)switch(g.$$typeof){case f:o=10;break g;case V:o=9;break g;case v:o=11;break g;case J:o=14;break g;case k:o=16,t=null;break g}throw Error(C(130,null==g?g:typeof g,""))}return(e=Ja(o,I,e,n)).elementType=g,e.type=t,e.lanes=l,e}function wa(g,e,I,t){return(g=Ja(7,g,t,e)).lanes=I,g}function Na(g,e,I,t){return(g=Ja(22,g,t,e)).elementType=Y,g.lanes=I,g.stateNode={isHidden:!1},g}function Ka(g,e,I){return(g=Ja(6,g,null,e)).lanes=I,g}function Fa(g,e,I){return(e=Ja(4,null!==g.children?g.children:[],g.key,e)).lanes=I,e.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},e}function xa(g,e,I,t,n){this.tag=e,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=be(0),this.expirationTimes=be(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=be(0),this.identifierPrefix=t,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Ea(g,e,I,t,n,C,l,o,r){return g=new xa(g,e,I,o,r),1===e?(e=1,!0===C&&(e|=8)):e=0,C=Ja(3,null,null,e),g.current=C,C.stateNode=g,C.memoizedState={element:t,isDehydrated:I,cache:null,transitions:null,pendingSuspenseBoundaries:null},NC(C),g}function Ma(g){if(!g)return Vn;g:{if(zg(g=g._reactInternals)!==g||1!==g.tag)throw Error(C(170));var e=g;do{switch(e.tag){case 3:e=e.stateNode.context;break g;case 1:if(kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break g}}e=e.return}while(null!==e);throw Error(C(171))}if(1===g.tag){var I=g.type;if(kn(I))return wn(g,I,e)}return e}function za(g,e,I,t,n,C,l,o,r){return(g=Ea(I,t,!0,g,0,C,0,o,r)).context=Ma(null),I=g.current,(C=FC(t=ga(),n=ea(I))).callback=void 0!==e&&null!==e?e:null,xC(I,C,n),g.current.lanes=n,me(g,n,t),ta(g,t),g}function Ua(g,e,I,t){var n=e.current,C=ga(),l=ea(n);return I=Ma(I),null===e.context?e.context=I:e.pendingContext=I,(e=FC(C,l)).payload={element:g},null!==(t=void 0===t?null:t)&&(e.callback=t),null!==(g=xC(n,e,l))&&(Ia(g,n,l,C),EC(g,n,l)),l}function Qa(g){return(g=g.current).child?(g.child.tag,g.child.stateNode):null}function La(g,e){if(null!==(g=g.memoizedState)&&null!==g.dehydrated){var I=g.retryLane;g.retryLane=0!==I&&I<e?I:e}}function Da(g,e){La(g,e),(g=g.alternate)&&La(g,e)}Br=function(g,e,I){if(null!==g)if(g.memoizedProps!==e.pendingProps||Xn.current)yo=!0;else{if(0===(g.lanes&I)&&0===(128&e.flags))return yo=!1,function(g,e,I){switch(e.tag){case 3:Xo(e),uC();break;case 5:qC(e);break;case 1:kn(e.type)&&Nn(e);break;case 4:OC(e,e.stateNode.containerInfo);break;case 10:var t=e.type._context,n=e.memoizedProps.value;fn(hC,t._currentValue),t._currentValue=n;break;case 13:if(null!==(t=e.memoizedState))return null!==t.dehydrated?(fn($C,1&$C.current),e.flags|=128,null):0!==(I&e.child.childLanes)?Ko(g,e,I):(fn($C,1&$C.current),null!==(g=Qo(g,e,I))?g.sibling:null);fn($C,1&$C.current);break;case 19:if(t=0!==(I&e.childLanes),0!==(128&g.flags)){if(t)return zo(g,e,I);e.flags|=128}if(null!==(n=e.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),fn($C,$C.current),t)break;return null;case 22:case 23:return e.lanes=0,So(g,e,I)}return Qo(g,e,I)}(g,e,I);yo=0!==(131072&g.flags)}else yo=!1,nC&&0!==(1048576&e.flags)&&$n(e,Dn,e.index);switch(e.lanes=0,e.tag){case 2:var t=e.type;Uo(g,e),g=e.pendingProps;var n=Jn(e,vn.current);XC(e,I),n=sl(null,e,t,g,n,I);var l=bl();return e.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kn(t)?(l=!0,Nn(e)):l=!1,e.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,NC(e),n.updater=to,e.stateNode=n,n._reactInternals=e,oo(e,t,g,I),e=vo(null,e,t,!0,l,I)):(e.tag=0,nC&&l&&gC(e),po(null,e,n,I),e=e.child),e;case 16:t=e.elementType;g:{switch(Uo(g,e),g=e.pendingProps,t=(n=t._init)(t._payload),e.type=t,n=e.tag=function(g){if("function"===typeof g)return ka(g)?1:0;if(void 0!==g&&null!==g){if((g=g.$$typeof)===v)return 11;if(g===J)return 14}return 2}(t),g=eo(t,g),n){case 0:e=fo(null,e,t,g,I);break g;case 1:e=Vo(null,e,t,g,I);break g;case 11:e=Go(null,e,t,g,I);break g;case 14:e=ho(null,e,t,eo(t.type,g),I);break g}throw Error(C(306,t,""))}return e;case 0:return t=e.type,n=e.pendingProps,fo(g,e,t,n=e.elementType===t?n:eo(t,n),I);case 1:return t=e.type,n=e.pendingProps,Vo(g,e,t,n=e.elementType===t?n:eo(t,n),I);case 3:g:{if(Xo(e),null===g)throw Error(C(387));t=e.pendingProps,n=(l=e.memoizedState).element,KC(g,e),zC(e,t,null,I);var o=e.memoizedState;if(t=o.element,l.isDehydrated){if(l={element:t,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=l,e.memoizedState=l,256&e.flags){e=Ro(g,e,t,I,n=ro(Error(C(423)),e));break g}if(t!==n){e=Ro(g,e,t,I,n=ro(Error(C(424)),e));break g}for(tC=rn(e.stateNode.containerInfo.firstChild),IC=e,nC=!0,CC=null,I=GC(e,null,t,I),e.child=I;I;)I.flags=-3&I.flags|4096,I=I.sibling}else{if(uC(),t===n){e=Qo(g,e,I);break g}po(g,e,t,I)}e=e.child}return e;case 5:return qC(e),null===g&&aC(e),t=e.type,n=e.pendingProps,l=null!==g?g.memoizedProps:null,o=n.children,en(t,n)?o=null:null!==l&&en(t,l)&&(e.flags|=32),Wo(g,e),po(g,e,o,I),e.child;case 6:return null===g&&aC(e),null;case 13:return Ko(g,e,I);case 4:return OC(e,e.stateNode.containerInfo),t=e.pendingProps,null===g?e.child=pC(e,null,t,I):po(g,e,t,I),e.child;case 11:return t=e.type,n=e.pendingProps,Go(g,e,t,n=e.elementType===t?n:eo(t,n),I);case 7:return po(g,e,e.pendingProps,I),e.child;case 8:case 12:return po(g,e,e.pendingProps.children,I),e.child;case 10:g:{if(t=e.type._context,n=e.pendingProps,l=e.memoizedProps,o=n.value,fn(hC,t._currentValue),t._currentValue=o,null!==l)if(lt(l.value,o)){if(l.children===n.children&&!Xn.current){e=Qo(g,e,I);break g}}else for(null!==(l=e.child)&&(l.return=e);null!==l;){var r=l.dependencies;if(null!==r){o=l.child;for(var a=r.firstContext;null!==a;){if(a.context===t){if(1===l.tag){(a=FC(-1,I&-I)).tag=2;var c=l.updateQueue;if(null!==c){var i=(c=c.shared).pending;null===i?a.next=a:(a.next=i.next,i.next=a),c.pending=a}}l.lanes|=I,null!==(a=l.alternate)&&(a.lanes|=I),vC(l.return,I,e),r.lanes|=I;break}a=a.next}}else if(10===l.tag)o=l.type===e.type?null:l.child;else if(18===l.tag){if(null===(o=l.return))throw Error(C(341));o.lanes|=I,null!==(r=o.alternate)&&(r.lanes|=I),vC(o,I,e),o=l.sibling}else o=l.child;if(null!==o)o.return=l;else for(o=l;null!==o;){if(o===e){o=null;break}if(null!==(l=o.sibling)){l.return=o.return,o=l;break}o=o.return}l=o}po(g,e,n.children,I),e=e.child}return e;case 9:return n=e.type,t=e.pendingProps.children,XC(e,I),t=t(n=RC(n)),e.flags|=1,po(g,e,t,I),e.child;case 14:return n=eo(t=e.type,e.pendingProps),ho(g,e,t,n=eo(t.type,n),I);case 15:return Bo(g,e,e.type,e.pendingProps,I);case 17:return t=e.type,n=e.pendingProps,n=e.elementType===t?n:eo(t,n),Uo(g,e),e.tag=1,kn(t)?(g=!0,Nn(e)):g=!1,XC(e,I),Co(e,t,n),oo(e,t,n,I),vo(null,e,t,!0,g,I);case 19:return zo(g,e,I);case 22:return So(g,e,I)}throw Error(C(156,e.tag))};var Ta="function"===typeof reportError?reportError:function(g){console.error(g)};function ja(g){this._internalRoot=g}function Oa(g){this._internalRoot=g}function Pa(g){return!(!g||1!==g.nodeType&&9!==g.nodeType&&11!==g.nodeType)}function qa(g){return!(!g||1!==g.nodeType&&9!==g.nodeType&&11!==g.nodeType&&(8!==g.nodeType||" react-mount-point-unstable "!==g.nodeValue))}function _a(){}function $a(g,e,I,t,n){var C=I._reactRootContainer;if(C){var l=C;if("function"===typeof n){var o=n;n=function(){var g=Qa(l);o.call(g)}}Ua(e,l,g,n)}else l=function(g,e,I,t,n){if(n){if("function"===typeof t){var C=t;t=function(){var g=Qa(l);C.call(g)}}var l=za(e,t,g,0,null,!1,0,"",_a);return g._reactRootContainer=l,g[dn]=l.current,Mt(8===g.nodeType?g.parentNode:g),ca(),l}for(;n=g.lastChild;)g.removeChild(n);if("function"===typeof t){var o=t;t=function(){var g=Qa(r);o.call(g)}}var r=Ea(g,0,!1,null,0,!1,0,"",_a);return g._reactRootContainer=r,g[dn]=r.current,Mt(8===g.nodeType?g.parentNode:g),ca((function(){Ua(e,r,I,t)})),r}(I,e,g,n,t);return Qa(l)}Oa.prototype.render=ja.prototype.render=function(g){var e=this._internalRoot;if(null===e)throw Error(C(409));Ua(g,e,null,null)},Oa.prototype.unmount=ja.prototype.unmount=function(){var g=this._internalRoot;if(null!==g){this._internalRoot=null;var e=g.containerInfo;ca((function(){Ua(null,g,null,null)})),e[dn]=null}},Oa.prototype.unstable_scheduleHydration=function(g){if(g){var e=Se();g={blockedOn:null,target:g,priority:e};for(var I=0;I<Ye.length&&0!==e&&e<Ye[I].priority;I++);Ye.splice(I,0,g),0===I&&Ke(g)}},Ge=function(g){switch(g.tag){case 3:var e=g.stateNode;if(e.current.memoizedState.isDehydrated){var I=ie(e.pendingLanes);0!==I&&(Ze(e,1|I),ta(e,qg()),0===(6&vr)&&(zr=qg()+500,zn()))}break;case 13:ca((function(){var e=HC(g,1);if(null!==e){var I=ga();Ia(e,g,1,I)}})),Da(g,1)}},he=function(g){if(13===g.tag){var e=HC(g,134217728);if(null!==e)Ia(e,g,134217728,ga());Da(g,134217728)}},Be=function(g){if(13===g.tag){var e=ea(g),I=HC(g,e);if(null!==I)Ia(I,g,e,ga());Da(g,e)}},Se=function(){return ye},We=function(g,e){var I=ye;try{return ye=g,e()}finally{ye=I}},hg=function(g,e,I){switch(e){case"input":if(_(g,I),e=I.name,"radio"===I.type&&null!=e){for(I=g;I.parentNode;)I=I.parentNode;for(I=I.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<I.length;e++){var t=I[e];if(t!==g&&t.form===g.form){var n=Gn(t);if(!n)throw Error(C(90));T(t),_(t,n)}}}break;case"textarea":Cg(g,I);break;case"select":null!=(e=I.value)&&Ig(g,!!I.multiple,e,!1)}},vg=aa,Xg=ca;var gc={usingClientEntryPoint:!1,Events:[yn,pn,Gn,fg,Vg,aa]},ec={findFiberByHostInstance:Zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ic={bundleType:ec.bundleType,version:ec.version,rendererPackageName:ec.rendererPackageName,rendererConfig:ec.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:p.ReactCurrentDispatcher,findHostInstanceByFiber:function(g){return null===(g=Lg(g))?null:g.stateNode},findFiberByHostInstance:ec.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tc.isDisabled&&tc.supportsFiber)try{ne=tc.inject(Ic),Ce=tc}catch(cg){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gc,e.createPortal=function(g,e){var I=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Pa(e))throw Error(C(200));return function(g,e,I){var t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:h,key:null==t?null:""+t,children:g,containerInfo:e,implementation:I}}(g,e,null,I)},e.createRoot=function(g,e){if(!Pa(g))throw Error(C(299));var I=!1,t="",n=Ta;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(I=!0),void 0!==e.identifierPrefix&&(t=e.identifierPrefix),void 0!==e.onRecoverableError&&(n=e.onRecoverableError)),e=Ea(g,1,!1,null,0,I,0,t,n),g[dn]=e.current,Mt(8===g.nodeType?g.parentNode:g),new ja(e)},e.findDOMNode=function(g){if(null==g)return null;if(1===g.nodeType)return g;var e=g._reactInternals;if(void 0===e){if("function"===typeof g.render)throw Error(C(188));throw g=Object.keys(g).join(","),Error(C(268,g))}return g=null===(g=Lg(e))?null:g.stateNode},e.flushSync=function(g){return ca(g)},e.hydrate=function(g,e,I){if(!qa(e))throw Error(C(200));return $a(null,g,e,!0,I)},e.hydrateRoot=function(g,e,I){if(!Pa(g))throw Error(C(405));var t=null!=I&&I.hydratedSources||null,n=!1,l="",o=Ta;if(null!==I&&void 0!==I&&(!0===I.unstable_strictMode&&(n=!0),void 0!==I.identifierPrefix&&(l=I.identifierPrefix),void 0!==I.onRecoverableError&&(o=I.onRecoverableError)),e=za(e,null,g,1,null!=I?I:null,n,0,l,o),g[dn]=e.current,Mt(g),t)for(g=0;g<t.length;g++)n=(n=(I=t[g])._getVersion)(I._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[I,n]:e.mutableSourceEagerHydrationData.push(I,n);return new Oa(e)},e.render=function(g,e,I){if(!qa(e))throw Error(C(200));return $a(null,g,e,!1,I)},e.unmountComponentAtNode=function(g){if(!qa(g))throw Error(C(40));return!!g._reactRootContainer&&(ca((function(){$a(null,null,g,!1,(function(){g._reactRootContainer=null,g[dn]=null}))})),!0)},e.unstable_batchedUpdates=aa,e.unstable_renderSubtreeIntoContainer=function(g,e,I,t){if(!qa(I))throw Error(C(200));if(null==g||void 0===g._reactInternals)throw Error(C(38));return $a(g,e,I,!1,t)},e.version="18.3.1-next-f1338f8080-20240426"},4391:(g,e,I)=>{"use strict";var t=I(7950);e.createRoot=t.createRoot,e.hydrateRoot=t.hydrateRoot},7950:(g,e,I)=>{"use strict";!function g(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(e){console.error(e)}}(),g.exports=I(2730)},9309:function(g,e,I){g.exports=function(g){"use strict";function e(g){if(g&&g.__esModule)return g;var e=Object.create(null);return g&&Object.keys(g).forEach((function(I){if("default"!==I){var t=Object.getOwnPropertyDescriptor(g,I);Object.defineProperty(e,I,t.get?t:{enumerable:!0,get:function(){return g[I]}})}})),e.default=g,Object.freeze(e)}var I=e(g);function t(){return t=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},t.apply(this,arguments)}function n(g,e,I){return e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function C(g){if(Array.isArray(g))return g}function l(g,e){var I=null==g?null:"undefined"!==typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null!=I){var t,n,C=[],l=!0,o=!1;try{for(I=I.call(g);!(l=(t=I.next()).done)&&(C.push(t.value),!e||C.length!==e);l=!0);}catch(r){o=!0,n=r}finally{try{l||null==I.return||I.return()}finally{if(o)throw n}}return C}}function o(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}function r(g,e){if(g){if("string"===typeof g)return o(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);return"Object"===I&&g.constructor&&(I=g.constructor.name),"Map"===I||"Set"===I?Array.from(g):"Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I)?o(g,e):void 0}}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(g,e){return C(g)||l(g,e)||r(g,e)||a()}function i(g,e){if(null==g)return{};var I,t,n={},C=Object.keys(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||(n[I]=g[I]);return n}function A(g,e){if(null==g)return{};var I,t,n=i(g,e);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(n[I]=g[I])}return n}var u={exports:{}},d={exports:{}},s={},b="function"===typeof Symbol&&Symbol.for,m=b?Symbol.for("react.element"):60103,Z=b?Symbol.for("react.portal"):60106,y=b?Symbol.for("react.fragment"):60107,p=b?Symbol.for("react.strict_mode"):60108,G=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,B=b?Symbol.for("react.context"):60110,S=b?Symbol.for("react.async_mode"):60111,W=b?Symbol.for("react.concurrent_mode"):60111,f=b?Symbol.for("react.forward_ref"):60112,V=b?Symbol.for("react.suspense"):60113,v=b?Symbol.for("react.suspense_list"):60120,X=b?Symbol.for("react.memo"):60115,R=b?Symbol.for("react.lazy"):60116,J=b?Symbol.for("react.block"):60121,k=b?Symbol.for("react.fundamental"):60117,Y=b?Symbol.for("react.responder"):60118,H=b?Symbol.for("react.scope"):60119;function w(g){if("object"===typeof g&&null!==g){var e=g.$$typeof;switch(e){case m:switch(g=g.type){case S:case W:case y:case G:case p:case V:return g;default:switch(g=g&&g.$$typeof){case B:case f:case R:case X:case h:return g;default:return e}}case Z:return e}}}function N(g){return w(g)===W}s.AsyncMode=S,s.ConcurrentMode=W,s.ContextConsumer=B,s.ContextProvider=h,s.Element=m,s.ForwardRef=f,s.Fragment=y,s.Lazy=R,s.Memo=X,s.Portal=Z,s.Profiler=G,s.StrictMode=p,s.Suspense=V,s.isAsyncMode=function(g){return N(g)||w(g)===S},s.isConcurrentMode=N,s.isContextConsumer=function(g){return w(g)===B},s.isContextProvider=function(g){return w(g)===h},s.isElement=function(g){return"object"===typeof g&&null!==g&&g.$$typeof===m},s.isForwardRef=function(g){return w(g)===f},s.isFragment=function(g){return w(g)===y},s.isLazy=function(g){return w(g)===R},s.isMemo=function(g){return w(g)===X},s.isPortal=function(g){return w(g)===Z},s.isProfiler=function(g){return w(g)===G},s.isStrictMode=function(g){return w(g)===p},s.isSuspense=function(g){return w(g)===V},s.isValidElementType=function(g){return"string"===typeof g||"function"===typeof g||g===y||g===W||g===G||g===p||g===V||g===v||"object"===typeof g&&null!==g&&(g.$$typeof===R||g.$$typeof===X||g.$$typeof===h||g.$$typeof===B||g.$$typeof===f||g.$$typeof===k||g.$$typeof===Y||g.$$typeof===H||g.$$typeof===J)},s.typeOf=w,d.exports=s;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function K(){try{if(!Object.assign)return!1;var g=new String("abc");if(g[5]="de","5"===Object.getOwnPropertyNames(g)[0])return!1;for(var e={},I=0;I<10;I++)e["_"+String.fromCharCode(I)]=I;var t=Object.getOwnPropertyNames(e).map((function(g){return e[g]}));if("0123456789"!==t.join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(g){n[g]=g})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(C){return!1}}K()&&Object.assign;var F="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function x(g,e,I,t,n){}Function.call.bind(Object.prototype.hasOwnProperty),x.resetWarningCache=function(){},d.exports;var E=F;function M(){}function z(){}z.resetWarningCache=M;var U=function(){function g(g,e,I,t,n,C){if(C!==E){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function e(){return g}g.isRequired=g;var I={array:g,bigint:g,bool:g,func:g,number:g,object:g,string:g,symbol:g,any:g,arrayOf:e,element:g,elementType:g,instanceOf:e,node:g,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:z,resetWarningCache:M};return I.PropTypes=I,I};u.exports=U();var Q=u.exports;function L(g,e){var I=atob(g);if(e){for(var t=new Uint8Array(I.length),n=0,C=I.length;n<C;++n)t[n]=I.charCodeAt(n);return String.fromCharCode.apply(null,new Uint16Array(t.buffer))}return I}function D(g,e,I){var t=void 0===e?null:e,n=L(g,void 0!==I&&I),C=n.indexOf("\n",10)+1,l=n.substring(C)+(t?"//# sourceMappingURL="+t:""),o=new Blob([l],{type:"application/javascript"});return URL.createObjectURL(o)}function T(g,e,I){var t;return function(n){return t=t||D(g,e,I),new Worker(t,n)}}var j=T("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",null,!1),O=["constraints","onError","onLoad","onScan","resolution","qrArea"];function P(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function q(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?P(Object(I),!0).forEach((function(e){n(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):P(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}var _=function(){return new j},$=function(g){g&&(g.getVideoTracks&&g.getAudioTracks?(g.getVideoTracks().forEach((function(e){g.removeTrack(e),e.stop()})),g.getAudioTracks().forEach((function(e){g.removeTrack(e),e.stop()}))):g.stop())},gg=function(g){var e=g.constraints,n=g.onError,C=g.onLoad,l=g.onScan,o=g.resolution,r=g.qrArea,a=A(g,O),i=I.useRef(null),u=I.useRef(null),d=I.useRef(document.createElement("canvas")),s=I.useRef(null),b=I.useRef(),m=c(I.useState(null),2),Z=m[0],y=m[1],p=I.useRef(!1),G=I.useRef();I.useEffect((function(){G.current=_();var g=G.current;return g.onmessage=function(g){l&&l(g.data?q(q({},g.data),{},{canvas:d.current}):null),p.current=!1},function(){g.terminate()}}),[l]);var h=JSON.stringify(r),B=I.useCallback((function(){var g=JSON.parse(h),e=G.current,I=u.current&&u.current.readyState===u.current.HAVE_ENOUGH_DATA;if(!p.current&&I){p.current=!0;var t,n=u.current.videoWidth,C=u.current.videoHeight,l=n>C?n:C,r=Math.floor(o/l*100)/100;C=Math.floor(r*C),n=Math.floor(r*n),d.current.width=n,d.current.height=C,s.current=d.current.getContext("2d"),s.current.drawImage(u.current,0,0,n,C),t=g&&2===g.length&&g[0]>0&&g[1]>0?s.current.getImageData(Math.floor((n-g[0])/2),Math.floor((C-g[1])/2),g[0],g[1]):s.current.getImageData(0,0,n,C),e.postMessage(t)}b.current=requestAnimationFrame(B)}),[o,h]),S=JSON.stringify(e);return I.useEffect((function(){var g=JSON.parse(S),e=!0;return navigator.mediaDevices.getUserMedia(g).then((function(g){if(e){i.current=g;try{u.current&&(u.current.srcObject=g,u.current.setAttribute("playsinline",!0))}catch(I){y(window.URL.createObjectURL(g))}C&&C(),b.current=requestAnimationFrame(B)}else $(g)})).catch((function(g){return e?n(g):null})),function(){cancelAnimationFrame(b.current),e=!1,$(i.current),Z&&window.URL.revokeObjectURL(Z)}}),[B,S,n,C,Z]),I.createElement("video",t({autoPlay:!0,playsInline:!0,src:Z,ref:u},a))};return gg.propTypes={constraints:Q.object,onError:Q.func.isRequired,onLoad:Q.func,onScan:Q.func.isRequired,resolution:Q.number,qrArea:Q.array},gg.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]},gg}(I(5043))},1153:(g,e,I)=>{"use strict";var t=I(5043),n=Symbol.for("react.element"),C=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function a(g,e,I){var t,C={},a=null,c=null;for(t in void 0!==I&&(a=""+I),void 0!==e.key&&(a=""+e.key),void 0!==e.ref&&(c=e.ref),e)l.call(e,t)&&!r.hasOwnProperty(t)&&(C[t]=e[t]);if(g&&g.defaultProps)for(t in e=g.defaultProps)void 0===C[t]&&(C[t]=e[t]);return{$$typeof:n,type:g,key:a,ref:c,props:C,_owner:o.current}}e.jsx=a,e.jsxs=a},4202:(g,e)=>{"use strict";var I=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),r=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),i=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),u=Symbol.iterator;var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s=Object.assign,b={};function m(g,e,I){this.props=g,this.context=e,this.refs=b,this.updater=I||d}function Z(){}function y(g,e,I){this.props=g,this.context=e,this.refs=b,this.updater=I||d}m.prototype.isReactComponent={},m.prototype.setState=function(g,e){if("object"!==typeof g&&"function"!==typeof g&&null!=g)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,g,e,"setState")},m.prototype.forceUpdate=function(g){this.updater.enqueueForceUpdate(this,g,"forceUpdate")},Z.prototype=m.prototype;var p=y.prototype=new Z;p.constructor=y,s(p,m.prototype),p.isPureReactComponent=!0;var G=Array.isArray,h=Object.prototype.hasOwnProperty,B={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function W(g,e,t){var n,C={},l=null,o=null;if(null!=e)for(n in void 0!==e.ref&&(o=e.ref),void 0!==e.key&&(l=""+e.key),e)h.call(e,n)&&!S.hasOwnProperty(n)&&(C[n]=e[n]);var r=arguments.length-2;if(1===r)C.children=t;else if(1<r){for(var a=Array(r),c=0;c<r;c++)a[c]=arguments[c+2];C.children=a}if(g&&g.defaultProps)for(n in r=g.defaultProps)void 0===C[n]&&(C[n]=r[n]);return{$$typeof:I,type:g,key:l,ref:o,props:C,_owner:B.current}}function f(g){return"object"===typeof g&&null!==g&&g.$$typeof===I}var V=/\/+/g;function v(g,e){return"object"===typeof g&&null!==g&&null!=g.key?function(g){var e={"=":"=0",":":"=2"};return"$"+g.replace(/[=:]/g,(function(g){return e[g]}))}(""+g.key):e.toString(36)}function X(g,e,n,C,l){var o=typeof g;"undefined"!==o&&"boolean"!==o||(g=null);var r=!1;if(null===g)r=!0;else switch(o){case"string":case"number":r=!0;break;case"object":switch(g.$$typeof){case I:case t:r=!0}}if(r)return l=l(r=g),g=""===C?"."+v(r,0):C,G(l)?(n="",null!=g&&(n=g.replace(V,"$&/")+"/"),X(l,e,n,"",(function(g){return g}))):null!=l&&(f(l)&&(l=function(g,e){return{$$typeof:I,type:g.type,key:e,ref:g.ref,props:g.props,_owner:g._owner}}(l,n+(!l.key||r&&r.key===l.key?"":(""+l.key).replace(V,"$&/")+"/")+g)),e.push(l)),1;if(r=0,C=""===C?".":C+":",G(g))for(var a=0;a<g.length;a++){var c=C+v(o=g[a],a);r+=X(o,e,n,c,l)}else if(c=function(g){return null===g||"object"!==typeof g?null:"function"===typeof(g=u&&g[u]||g["@@iterator"])?g:null}(g),"function"===typeof c)for(g=c.call(g),a=0;!(o=g.next()).done;)r+=X(o=o.value,e,n,c=C+v(o,a++),l);else if("object"===o)throw e=String(g),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(g).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return r}function R(g,e,I){if(null==g)return g;var t=[],n=0;return X(g,t,"","",(function(g){return e.call(I,g,n++)})),t}function J(g){if(-1===g._status){var e=g._result;(e=e()).then((function(e){0!==g._status&&-1!==g._status||(g._status=1,g._result=e)}),(function(e){0!==g._status&&-1!==g._status||(g._status=2,g._result=e)})),-1===g._status&&(g._status=0,g._result=e)}if(1===g._status)return g._result.default;throw g._result}var k={current:null},Y={transition:null},H={ReactCurrentDispatcher:k,ReactCurrentBatchConfig:Y,ReactCurrentOwner:B};function w(){throw Error("act(...) is not supported in production builds of React.")}e.Children={map:R,forEach:function(g,e,I){R(g,(function(){e.apply(this,arguments)}),I)},count:function(g){var e=0;return R(g,(function(){e++})),e},toArray:function(g){return R(g,(function(g){return g}))||[]},only:function(g){if(!f(g))throw Error("React.Children.only expected to receive a single React element child.");return g}},e.Component=m,e.Fragment=n,e.Profiler=l,e.PureComponent=y,e.StrictMode=C,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,e.act=w,e.cloneElement=function(g,e,t){if(null===g||void 0===g)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+g+".");var n=s({},g.props),C=g.key,l=g.ref,o=g._owner;if(null!=e){if(void 0!==e.ref&&(l=e.ref,o=B.current),void 0!==e.key&&(C=""+e.key),g.type&&g.type.defaultProps)var r=g.type.defaultProps;for(a in e)h.call(e,a)&&!S.hasOwnProperty(a)&&(n[a]=void 0===e[a]&&void 0!==r?r[a]:e[a])}var a=arguments.length-2;if(1===a)n.children=t;else if(1<a){r=Array(a);for(var c=0;c<a;c++)r[c]=arguments[c+2];n.children=r}return{$$typeof:I,type:g.type,key:C,ref:l,props:n,_owner:o}},e.createContext=function(g){return(g={$$typeof:r,_currentValue:g,_currentValue2:g,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:g},g.Consumer=g},e.createElement=W,e.createFactory=function(g){var e=W.bind(null,g);return e.type=g,e},e.createRef=function(){return{current:null}},e.forwardRef=function(g){return{$$typeof:a,render:g}},e.isValidElement=f,e.lazy=function(g){return{$$typeof:A,_payload:{_status:-1,_result:g},_init:J}},e.memo=function(g,e){return{$$typeof:i,type:g,compare:void 0===e?null:e}},e.startTransition=function(g){var e=Y.transition;Y.transition={};try{g()}finally{Y.transition=e}},e.unstable_act=w,e.useCallback=function(g,e){return k.current.useCallback(g,e)},e.useContext=function(g){return k.current.useContext(g)},e.useDebugValue=function(){},e.useDeferredValue=function(g){return k.current.useDeferredValue(g)},e.useEffect=function(g,e){return k.current.useEffect(g,e)},e.useId=function(){return k.current.useId()},e.useImperativeHandle=function(g,e,I){return k.current.useImperativeHandle(g,e,I)},e.useInsertionEffect=function(g,e){return k.current.useInsertionEffect(g,e)},e.useLayoutEffect=function(g,e){return k.current.useLayoutEffect(g,e)},e.useMemo=function(g,e){return k.current.useMemo(g,e)},e.useReducer=function(g,e,I){return k.current.useReducer(g,e,I)},e.useRef=function(g){return k.current.useRef(g)},e.useState=function(g){return k.current.useState(g)},e.useSyncExternalStore=function(g,e,I){return k.current.useSyncExternalStore(g,e,I)},e.useTransition=function(){return k.current.useTransition()},e.version="18.3.1"},5043:(g,e,I)=>{"use strict";g.exports=I(4202)},579:(g,e,I)=>{"use strict";g.exports=I(1153)},6378:(g,e)=>{"use strict";var I,t=Symbol.for("react.element"),n=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.server_context"),i=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),s=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen");function m(g){if("object"===typeof g&&null!==g){var e=g.$$typeof;switch(e){case t:switch(g=g.type){case C:case o:case l:case A:case u:return g;default:switch(g=g&&g.$$typeof){case c:case a:case i:case s:case d:case r:return g;default:return e}}case n:return e}}}I=Symbol.for("react.module.reference"),e.isFragment=function(g){return m(g)===C}},9062:(g,e,I)=>{"use strict";g.exports=I(6378)},7234:(g,e)=>{"use strict";function I(g,e){var I=g.length;g.push(e);g:for(;0<I;){var t=I-1>>>1,n=g[t];if(!(0<C(n,e)))break g;g[t]=e,g[I]=n,I=t}}function t(g){return 0===g.length?null:g[0]}function n(g){if(0===g.length)return null;var e=g[0],I=g.pop();if(I!==e){g[0]=I;g:for(var t=0,n=g.length,l=n>>>1;t<l;){var o=2*(t+1)-1,r=g[o],a=o+1,c=g[a];if(0>C(r,I))a<n&&0>C(c,r)?(g[t]=c,g[a]=I,t=a):(g[t]=r,g[o]=I,t=o);else{if(!(a<n&&0>C(c,I)))break g;g[t]=c,g[a]=I,t=a}}}return e}function C(g,e){var I=g.sortIndex-e.sortIndex;return 0!==I?I:g.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,r=o.now();e.unstable_now=function(){return o.now()-r}}var a=[],c=[],i=1,A=null,u=3,d=!1,s=!1,b=!1,m="function"===typeof setTimeout?setTimeout:null,Z="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function p(g){for(var e=t(c);null!==e;){if(null===e.callback)n(c);else{if(!(e.startTime<=g))break;n(c),e.sortIndex=e.expirationTime,I(a,e)}e=t(c)}}function G(g){if(b=!1,p(g),!s)if(null!==t(a))s=!0,Y(h);else{var e=t(c);null!==e&&H(G,e.startTime-g)}}function h(g,I){s=!1,b&&(b=!1,Z(f),f=-1),d=!0;var C=u;try{for(p(I),A=t(a);null!==A&&(!(A.expirationTime>I)||g&&!X());){var l=A.callback;if("function"===typeof l){A.callback=null,u=A.priorityLevel;var o=l(A.expirationTime<=I);I=e.unstable_now(),"function"===typeof o?A.callback=o:A===t(a)&&n(a),p(I)}else n(a);A=t(a)}if(null!==A)var r=!0;else{var i=t(c);null!==i&&H(G,i.startTime-I),r=!1}return r}finally{A=null,u=C,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var B,S=!1,W=null,f=-1,V=5,v=-1;function X(){return!(e.unstable_now()-v<V)}function R(){if(null!==W){var g=e.unstable_now();v=g;var I=!0;try{I=W(!0,g)}finally{I?B():(S=!1,W=null)}}else S=!1}if("function"===typeof y)B=function(){y(R)};else if("undefined"!==typeof MessageChannel){var J=new MessageChannel,k=J.port2;J.port1.onmessage=R,B=function(){k.postMessage(null)}}else B=function(){m(R,0)};function Y(g){W=g,S||(S=!0,B())}function H(g,I){f=m((function(){g(e.unstable_now())}),I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(g){g.callback=null},e.unstable_continueExecution=function(){s||d||(s=!0,Y(h))},e.unstable_forceFrameRate=function(g){0>g||125<g?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<g?Math.floor(1e3/g):5},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_getFirstCallbackNode=function(){return t(a)},e.unstable_next=function(g){switch(u){case 1:case 2:case 3:var e=3;break;default:e=u}var I=u;u=e;try{return g()}finally{u=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(g,e){switch(g){case 1:case 2:case 3:case 4:case 5:break;default:g=3}var I=u;u=g;try{return e()}finally{u=I}},e.unstable_scheduleCallback=function(g,n,C){var l=e.unstable_now();switch("object"===typeof C&&null!==C?C="number"===typeof(C=C.delay)&&0<C?l+C:l:C=l,g){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return g={id:i++,callback:n,priorityLevel:g,startTime:C,expirationTime:o=C+o,sortIndex:-1},C>l?(g.sortIndex=C,I(c,g),null===t(a)&&g===t(c)&&(b?(Z(f),f=-1):b=!0,H(G,C-l))):(g.sortIndex=o,I(a,g),s||d||(s=!0,Y(h))),g},e.unstable_shouldYield=X,e.unstable_wrapCallback=function(g){var e=u;return function(){var I=u;u=e;try{return g.apply(this,arguments)}finally{u=I}}}},8853:(g,e,I)=>{"use strict";g.exports=I(7234)}},e={};function I(t){var n=e[t];if(void 0!==n)return n.exports;var C=e[t]={id:t,loaded:!1,exports:{}};return g[t].call(C.exports,C,C.exports,I),C.loaded=!0,C.exports}I.m=g,I.n=g=>{var e=g&&g.__esModule?()=>g.default:()=>g;return I.d(e,{a:e}),e},(()=>{var g,e=Object.getPrototypeOf?g=>Object.getPrototypeOf(g):g=>g.__proto__;I.t=function(t,n){if(1&n&&(t=this(t)),8&n)return t;if("object"===typeof t&&t){if(4&n&&t.__esModule)return t;if(16&n&&"function"===typeof t.then)return t}var C=Object.create(null);I.r(C);var l={};g=g||[null,e({}),e([]),e(e)];for(var o=2&n&&t;"object"==typeof o&&!~g.indexOf(o);o=e(o))Object.getOwnPropertyNames(o).forEach((g=>l[g]=()=>t[g]));return l.default=()=>t,I.d(C,l),C}})(),I.d=(g,e)=>{for(var t in e)I.o(e,t)&&!I.o(g,t)&&Object.defineProperty(g,t,{enumerable:!0,get:e[t]})},I.f={},I.e=g=>Promise.all(Object.keys(I.f).reduce(((e,t)=>(I.f[t](g,e),e)),[])),I.u=g=>"static/js/"+g+".6fc33b34.chunk.js",I.miniCssF=g=>{},I.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(g){if("object"===typeof window)return window}}(),I.o=(g,e)=>Object.prototype.hasOwnProperty.call(g,e),(()=>{var g={},e="capstone:";I.l=(t,n,C,l)=>{if(g[t])g[t].push(n);else{var o,r;if(void 0!==C)for(var a=document.getElementsByTagName("script"),c=0;c<a.length;c++){var i=a[c];if(i.getAttribute("src")==t||i.getAttribute("data-webpack")==e+C){o=i;break}}o||(r=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,I.nc&&o.setAttribute("nonce",I.nc),o.setAttribute("data-webpack",e+C),o.src=t),g[t]=[n];var A=(e,I)=>{o.onerror=o.onload=null,clearTimeout(u);var n=g[t];if(delete g[t],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((g=>g(I))),e)return e(I)},u=setTimeout(A.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=A.bind(null,o.onerror),o.onload=A.bind(null,o.onload),r&&document.head.appendChild(o)}}})(),I.r=g=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},I.nmd=g=>(g.paths=[],g.children||(g.children=[]),g),I.p="/",(()=>{var g={792:0};I.f.j=(e,t)=>{var n=I.o(g,e)?g[e]:void 0;if(0!==n)if(n)t.push(n[2]);else{var C=new Promise(((I,t)=>n=g[e]=[I,t]));t.push(n[2]=C);var l=I.p+I.u(e),o=new Error;I.l(l,(t=>{if(I.o(g,e)&&(0!==(n=g[e])&&(g[e]=void 0),n)){var C=t&&("load"===t.type?"missing":t.type),l=t&&t.target&&t.target.src;o.message="Loading chunk "+e+" failed.\n("+C+": "+l+")",o.name="ChunkLoadError",o.type=C,o.request=l,n[1](o)}}),"chunk-"+e,e)}};var e=(e,t)=>{var n,C,l=t[0],o=t[1],r=t[2],a=0;if(l.some((e=>0!==g[e]))){for(n in o)I.o(o,n)&&(I.m[n]=o[n]);if(r)r(I)}for(e&&e(t);a<l.length;a++)C=l[a],I.o(g,C)&&g[C]&&g[C][0](),g[C]=0},t=self.webpackChunkcapstone=self.webpackChunkcapstone||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))})(),(()=>{"use strict";var g={};I.r(g),I.d(g,{hasBrowserEnv:()=>He,hasStandardBrowserEnv:()=>Ne,hasStandardBrowserWebWorkerEnv:()=>Ke,navigator:()=>we,origin:()=>Fe});var e={};I.r(e),I.d(e,{scaleBand:()=>Or,scaleDiverging:()=>fd,scaleDivergingLog:()=>Vd,scaleDivergingPow:()=>Xd,scaleDivergingSqrt:()=>Rd,scaleDivergingSymlog:()=>vd,scaleIdentity:()=>pi,scaleImplicit:()=>Tr,scaleLinear:()=>yi,scaleLog:()=>Xi,scaleOrdinal:()=>jr,scalePoint:()=>qr,scalePow:()=>Fi,scaleQuantile:()=>Pi,scaleQuantize:()=>qi,scaleRadial:()=>Mi,scaleSequential:()=>yd,scaleSequentialLog:()=>pd,scaleSequentialPow:()=>hd,scaleSequentialQuantile:()=>Sd,scaleSequentialSqrt:()=>Bd,scaleSequentialSymlog:()=>Gd,scaleSqrt:()=>xi,scaleSymlog:()=>Yi,scaleThreshold:()=>_i,scaleTime:()=>sd,scaleUtc:()=>bd,tickFormat:()=>mi});var t,n=I(5043),C=I.t(n,2),l=I(4391);function o(){return o=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},o.apply(this,arguments)}!function(g){g.Pop="POP",g.Push="PUSH",g.Replace="REPLACE"}(t||(t={}));const r="popstate";function a(g,e){if(!1===g||null===g||"undefined"===typeof g)throw new Error(e)}function c(g,e){if(!g){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(I){}}}function i(g,e){return{usr:g.state,key:g.key,idx:e}}function A(g,e,I,t){return void 0===I&&(I=null),o({pathname:"string"===typeof g?g:g.pathname,search:"",hash:""},"string"===typeof e?d(e):e,{state:I,key:e&&e.key||t||Math.random().toString(36).substr(2,8)})}function u(g){let{pathname:e="/",search:I="",hash:t=""}=g;return I&&"?"!==I&&(e+="?"===I.charAt(0)?I:"?"+I),t&&"#"!==t&&(e+="#"===t.charAt(0)?t:"#"+t),e}function d(g){let e={};if(g){let I=g.indexOf("#");I>=0&&(e.hash=g.substr(I),g=g.substr(0,I));let t=g.indexOf("?");t>=0&&(e.search=g.substr(t),g=g.substr(0,t)),g&&(e.pathname=g)}return e}function s(g,e,I,n){void 0===n&&(n={});let{window:C=document.defaultView,v5Compat:l=!1}=n,c=C.history,d=t.Pop,s=null,b=m();function m(){return(c.state||{idx:null}).idx}function Z(){d=t.Pop;let g=m(),e=null==g?null:g-b;b=g,s&&s({action:d,location:p.location,delta:e})}function y(g){let e="null"!==C.location.origin?C.location.origin:C.location.href,I="string"===typeof g?g:u(g);return I=I.replace(/ $/,"%20"),a(e,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,e)}null==b&&(b=0,c.replaceState(o({},c.state,{idx:b}),""));let p={get action(){return d},get location(){return g(C,c)},listen(g){if(s)throw new Error("A history only accepts one active listener");return C.addEventListener(r,Z),s=g,()=>{C.removeEventListener(r,Z),s=null}},createHref:g=>e(C,g),createURL:y,encodeLocation(g){let e=y(g);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(g,e){d=t.Push;let n=A(p.location,g,e);I&&I(n,g),b=m()+1;let o=i(n,b),r=p.createHref(n);try{c.pushState(o,"",r)}catch(a){if(a instanceof DOMException&&"DataCloneError"===a.name)throw a;C.location.assign(r)}l&&s&&s({action:d,location:p.location,delta:1})},replace:function(g,e){d=t.Replace;let n=A(p.location,g,e);I&&I(n,g),b=m();let C=i(n,b),o=p.createHref(n);c.replaceState(C,"",o),l&&s&&s({action:d,location:p.location,delta:0})},go:g=>c.go(g)};return p}var b;!function(g){g.data="data",g.deferred="deferred",g.redirect="redirect",g.error="error"}(b||(b={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function m(g,e,I){return void 0===I&&(I="/"),Z(g,e,I,!1)}function Z(g,e,I,t){let n=k(("string"===typeof e?d(e):e).pathname||"/",I);if(null==n)return null;let C=y(g);!function(g){g.sort(((g,e)=>g.score!==e.score?e.score-g.score:function(g,e){let I=g.length===e.length&&g.slice(0,-1).every(((g,I)=>g===e[I]));return I?g[g.length-1]-e[e.length-1]:0}(g.routesMeta.map((g=>g.childrenIndex)),e.routesMeta.map((g=>g.childrenIndex)))))}(C);let l=null;for(let o=0;null==l&&o<C.length;++o){let g=J(n);l=X(C[o],g,t)}return l}function y(g,e,I,t){void 0===e&&(e=[]),void 0===I&&(I=[]),void 0===t&&(t="");let n=(g,n,C)=>{let l={relativePath:void 0===C?g.path||"":C,caseSensitive:!0===g.caseSensitive,childrenIndex:n,route:g};l.relativePath.startsWith("/")&&(a(l.relativePath.startsWith(t),'Absolute route path "'+l.relativePath+'" nested under path "'+t+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),l.relativePath=l.relativePath.slice(t.length));let o=K([t,l.relativePath]),r=I.concat(l);g.children&&g.children.length>0&&(a(!0!==g.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),y(g.children,e,r,o)),(null!=g.path||g.index)&&e.push({path:o,score:v(o,g.index),routesMeta:r})};return g.forEach(((g,e)=>{var I;if(""!==g.path&&null!=(I=g.path)&&I.includes("?"))for(let t of p(g.path))n(g,e,t);else n(g,e)})),e}function p(g){let e=g.split("/");if(0===e.length)return[];let[I,...t]=e,n=I.endsWith("?"),C=I.replace(/\?$/,"");if(0===t.length)return n?[C,""]:[C];let l=p(t.join("/")),o=[];return o.push(...l.map((g=>""===g?C:[C,g].join("/")))),n&&o.push(...l),o.map((e=>g.startsWith("/")&&""===e?"/":e))}const G=/^:[\w-]+$/,h=3,B=2,S=1,W=10,f=-2,V=g=>"*"===g;function v(g,e){let I=g.split("/"),t=I.length;return I.some(V)&&(t+=f),e&&(t+=B),I.filter((g=>!V(g))).reduce(((g,e)=>g+(G.test(e)?h:""===e?S:W)),t)}function X(g,e,I){void 0===I&&(I=!1);let{routesMeta:t}=g,n={},C="/",l=[];for(let o=0;o<t.length;++o){let g=t[o],r=o===t.length-1,a="/"===C?e:e.slice(C.length)||"/",c=R({path:g.relativePath,caseSensitive:g.caseSensitive,end:r},a),i=g.route;if(!c&&r&&I&&!t[t.length-1].route.index&&(c=R({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},a)),!c)return null;Object.assign(n,c.params),l.push({params:n,pathname:K([C,c.pathname]),pathnameBase:F(K([C,c.pathnameBase])),route:i}),"/"!==c.pathnameBase&&(C=K([C,c.pathnameBase]))}return l}function R(g,e){"string"===typeof g&&(g={path:g,caseSensitive:!1,end:!0});let[I,t]=function(g,e,I){void 0===e&&(e=!1);void 0===I&&(I=!0);c("*"===g||!g.endsWith("*")||g.endsWith("/*"),'Route path "'+g+'" will be treated as if it were "'+g.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+g.replace(/\*$/,"/*")+'".');let t=[],n="^"+g.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((g,e,I)=>(t.push({paramName:e,isOptional:null!=I}),I?"/?([^\\/]+)?":"/([^\\/]+)")));g.endsWith("*")?(t.push({paramName:"*"}),n+="*"===g||"/*"===g?"(.*)$":"(?:\\/(.+)|\\/*)$"):I?n+="\\/*$":""!==g&&"/"!==g&&(n+="(?:(?=\\/|$))");let C=new RegExp(n,e?void 0:"i");return[C,t]}(g.path,g.caseSensitive,g.end),n=e.match(I);if(!n)return null;let C=n[0],l=C.replace(/(.)\/+$/,"$1"),o=n.slice(1),r=t.reduce(((g,e,I)=>{let{paramName:t,isOptional:n}=e;if("*"===t){let g=o[I]||"";l=C.slice(0,C.length-g.length).replace(/(.)\/+$/,"$1")}const r=o[I];return g[t]=n&&!r?void 0:(r||"").replace(/%2F/g,"/"),g}),{});return{params:r,pathname:C,pathnameBase:l,pattern:g}}function J(g){try{return g.split("/").map((g=>decodeURIComponent(g).replace(/\//g,"%2F"))).join("/")}catch(e){return c(!1,'The URL path "'+g+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),g}}function k(g,e){if("/"===e)return g;if(!g.toLowerCase().startsWith(e.toLowerCase()))return null;let I=e.endsWith("/")?e.length-1:e.length,t=g.charAt(I);return t&&"/"!==t?null:g.slice(I)||"/"}function Y(g,e,I,t){return"Cannot include a '"+g+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(t)+"].  Please separate it out to the `to."+I+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function H(g){return g.filter(((g,e)=>0===e||g.route.path&&g.route.path.length>0))}function w(g,e){let I=H(g);return e?I.map(((g,e)=>e===I.length-1?g.pathname:g.pathnameBase)):I.map((g=>g.pathnameBase))}function N(g,e,I,t){let n;void 0===t&&(t=!1),"string"===typeof g?n=d(g):(n=o({},g),a(!n.pathname||!n.pathname.includes("?"),Y("?","pathname","search",n)),a(!n.pathname||!n.pathname.includes("#"),Y("#","pathname","hash",n)),a(!n.search||!n.search.includes("#"),Y("#","search","hash",n)));let C,l=""===g||""===n.pathname,r=l?"/":n.pathname;if(null==r)C=I;else{let g=e.length-1;if(!t&&r.startsWith("..")){let e=r.split("/");for(;".."===e[0];)e.shift(),g-=1;n.pathname=e.join("/")}C=g>=0?e[g]:"/"}let c=function(g,e){void 0===e&&(e="/");let{pathname:I,search:t="",hash:n=""}="string"===typeof g?d(g):g,C=I?I.startsWith("/")?I:function(g,e){let I=e.replace(/\/+$/,"").split("/");return g.split("/").forEach((g=>{".."===g?I.length>1&&I.pop():"."!==g&&I.push(g)})),I.length>1?I.join("/"):"/"}(I,e):e;return{pathname:C,search:x(t),hash:E(n)}}(n,C),i=r&&"/"!==r&&r.endsWith("/"),A=(l||"."===r)&&I.endsWith("/");return c.pathname.endsWith("/")||!i&&!A||(c.pathname+="/"),c}const K=g=>g.join("/").replace(/\/\/+/g,"/"),F=g=>g.replace(/\/+$/,"").replace(/^\/*/,"/"),x=g=>g&&"?"!==g?g.startsWith("?")?g:"?"+g:"",E=g=>g&&"#"!==g?g.startsWith("#")?g:"#"+g:"";Error;function M(g){return null!=g&&"number"===typeof g.status&&"string"===typeof g.statusText&&"boolean"===typeof g.internal&&"data"in g}const z=["post","put","patch","delete"],U=(new Set(z),["get",...z]);new Set(U),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Q(){return Q=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},Q.apply(this,arguments)}const L=n.createContext(null);const D=n.createContext(null);const T=n.createContext(null);const j=n.createContext(null);const O=n.createContext({outlet:null,matches:[],isDataRoute:!1});const P=n.createContext(null);function q(){return null!=n.useContext(j)}function _(){return q()||a(!1),n.useContext(j).location}function $(g){n.useContext(T).static||n.useLayoutEffect(g)}function gg(){let{isDataRoute:g}=n.useContext(O);return g?function(){let{router:g}=ag(og.UseNavigateStable),e=ig(rg.UseNavigateStable),I=n.useRef(!1);return $((()=>{I.current=!0})),n.useCallback((function(t,n){void 0===n&&(n={}),I.current&&("number"===typeof t?g.navigate(t):g.navigate(t,Q({fromRouteId:e},n)))}),[g,e])}():function(){q()||a(!1);let g=n.useContext(L),{basename:e,future:I,navigator:t}=n.useContext(T),{matches:C}=n.useContext(O),{pathname:l}=_(),o=JSON.stringify(w(C,I.v7_relativeSplatPath)),r=n.useRef(!1);$((()=>{r.current=!0}));let c=n.useCallback((function(I,n){if(void 0===n&&(n={}),!r.current)return;if("number"===typeof I)return void t.go(I);let C=N(I,JSON.parse(o),l,"path"===n.relative);null==g&&"/"!==e&&(C.pathname="/"===C.pathname?e:K([e,C.pathname])),(n.replace?t.replace:t.push)(C,n.state,n)}),[e,t,o,l,g]);return c}()}function eg(g,e,I,C){q()||a(!1);let{navigator:l}=n.useContext(T),{matches:o}=n.useContext(O),r=o[o.length-1],c=r?r.params:{},i=(r&&r.pathname,r?r.pathnameBase:"/");r&&r.route;let A,u=_();if(e){var s;let g="string"===typeof e?d(e):e;"/"===i||(null==(s=g.pathname)?void 0:s.startsWith(i))||a(!1),A=g}else A=u;let b=A.pathname||"/",Z=b;if("/"!==i){let g=i.replace(/^\//,"").split("/");Z="/"+b.replace(/^\//,"").split("/").slice(g.length).join("/")}let y=m(g,{pathname:Z});let p=lg(y&&y.map((g=>Object.assign({},g,{params:Object.assign({},c,g.params),pathname:K([i,l.encodeLocation?l.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:"/"===g.pathnameBase?i:K([i,l.encodeLocation?l.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])}))),o,I,C);return e&&p?n.createElement(j.Provider,{value:{location:Q({pathname:"/",search:"",hash:"",state:null,key:"default"},A),navigationType:t.Pop}},p):p}function Ig(){let g=function(){var g;let e=n.useContext(P),I=cg(rg.UseRouteError),t=ig(rg.UseRouteError);if(void 0!==e)return e;return null==(g=I.errors)?void 0:g[t]}(),e=M(g)?g.status+" "+g.statusText:g instanceof Error?g.message:JSON.stringify(g),I=g instanceof Error?g.stack:null,t="rgba(200,200,200, 0.5)",C={padding:"0.5rem",backgroundColor:t};return n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},e),I?n.createElement("pre",{style:C},I):null,null)}const tg=n.createElement(Ig,null);class ng extends n.Component{constructor(g){super(g),this.state={location:g.location,revalidation:g.revalidation,error:g.error}}static getDerivedStateFromError(g){return{error:g}}static getDerivedStateFromProps(g,e){return e.location!==g.location||"idle"!==e.revalidation&&"idle"===g.revalidation?{error:g.error,location:g.location,revalidation:g.revalidation}:{error:void 0!==g.error?g.error:e.error,location:e.location,revalidation:g.revalidation||e.revalidation}}componentDidCatch(g,e){console.error("React Router caught the following error during render",g,e)}render(){return void 0!==this.state.error?n.createElement(O.Provider,{value:this.props.routeContext},n.createElement(P.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Cg(g){let{routeContext:e,match:I,children:t}=g,C=n.useContext(L);return C&&C.static&&C.staticContext&&(I.route.errorElement||I.route.ErrorBoundary)&&(C.staticContext._deepestRenderedBoundaryId=I.route.id),n.createElement(O.Provider,{value:e},t)}function lg(g,e,I,t){var C;if(void 0===e&&(e=[]),void 0===I&&(I=null),void 0===t&&(t=null),null==g){var l;if(!I)return null;if(I.errors)g=I.matches;else{if(!(null!=(l=t)&&l.v7_partialHydration&&0===e.length&&!I.initialized&&I.matches.length>0))return null;g=I.matches}}let o=g,r=null==(C=I)?void 0:C.errors;if(null!=r){let g=o.findIndex((g=>g.route.id&&void 0!==(null==r?void 0:r[g.route.id])));g>=0||a(!1),o=o.slice(0,Math.min(o.length,g+1))}let c=!1,i=-1;if(I&&t&&t.v7_partialHydration)for(let n=0;n<o.length;n++){let g=o[n];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(i=n),g.route.id){let{loaderData:e,errors:t}=I,n=g.route.loader&&void 0===e[g.route.id]&&(!t||void 0===t[g.route.id]);if(g.route.lazy||n){c=!0,o=i>=0?o.slice(0,i+1):[o[0]];break}}}return o.reduceRight(((g,t,C)=>{let l,a=!1,A=null,u=null;var d;I&&(l=r&&t.route.id?r[t.route.id]:void 0,A=t.route.errorElement||tg,c&&(i<0&&0===C?(d="route-fallback",!1||Ag[d]||(Ag[d]=!0),a=!0,u=null):i===C&&(a=!0,u=t.route.hydrateFallbackElement||null)));let s=e.concat(o.slice(0,C+1)),b=()=>{let e;return e=l?A:a?u:t.route.Component?n.createElement(t.route.Component,null):t.route.element?t.route.element:g,n.createElement(Cg,{match:t,routeContext:{outlet:g,matches:s,isDataRoute:null!=I},children:e})};return I&&(t.route.ErrorBoundary||t.route.errorElement||0===C)?n.createElement(ng,{location:I.location,revalidation:I.revalidation,component:A,error:l,children:b(),routeContext:{outlet:null,matches:s,isDataRoute:!0}}):b()}),null)}var og=function(g){return g.UseBlocker="useBlocker",g.UseRevalidator="useRevalidator",g.UseNavigateStable="useNavigate",g}(og||{}),rg=function(g){return g.UseBlocker="useBlocker",g.UseLoaderData="useLoaderData",g.UseActionData="useActionData",g.UseRouteError="useRouteError",g.UseNavigation="useNavigation",g.UseRouteLoaderData="useRouteLoaderData",g.UseMatches="useMatches",g.UseRevalidator="useRevalidator",g.UseNavigateStable="useNavigate",g.UseRouteId="useRouteId",g}(rg||{});function ag(g){let e=n.useContext(L);return e||a(!1),e}function cg(g){let e=n.useContext(D);return e||a(!1),e}function ig(g){let e=function(){let g=n.useContext(O);return g||a(!1),g}(),I=e.matches[e.matches.length-1];return I.route.id||a(!1),I.route.id}const Ag={};C.startTransition;function ug(g){let{to:e,replace:I,state:t,relative:C}=g;q()||a(!1);let{future:l,static:o}=n.useContext(T),{matches:r}=n.useContext(O),{pathname:c}=_(),i=gg(),A=N(e,w(r,l.v7_relativeSplatPath),c,"path"===C),u=JSON.stringify(A);return n.useEffect((()=>i(JSON.parse(u),{replace:I,state:t,relative:C})),[i,u,C,I,t]),null}function dg(g){a(!1)}function sg(g){let{basename:e="/",children:I=null,location:C,navigationType:l=t.Pop,navigator:o,static:r=!1,future:c}=g;q()&&a(!1);let i=e.replace(/^\/*/,"/"),A=n.useMemo((()=>({basename:i,navigator:o,static:r,future:Q({v7_relativeSplatPath:!1},c)})),[i,c,o,r]);"string"===typeof C&&(C=d(C));let{pathname:u="/",search:s="",hash:b="",state:m=null,key:Z="default"}=C,y=n.useMemo((()=>{let g=k(u,i);return null==g?null:{location:{pathname:g,search:s,hash:b,state:m,key:Z},navigationType:l}}),[i,u,s,b,m,Z,l]);return null==y?null:n.createElement(T.Provider,{value:A},n.createElement(j.Provider,{children:I,value:y}))}function bg(g){let{children:e,location:I}=g;return eg(mg(e),I)}new Promise((()=>{}));n.Component;function mg(g,e){void 0===e&&(e=[]);let I=[];return n.Children.forEach(g,((g,t)=>{if(!n.isValidElement(g))return;let C=[...e,t];if(g.type===n.Fragment)return void I.push.apply(I,mg(g.props.children,C));g.type!==dg&&a(!1),g.props.index&&g.props.children&&a(!1);let l={id:g.props.id||C.join("-"),caseSensitive:g.props.caseSensitive,element:g.props.element,Component:g.props.Component,index:g.props.index,path:g.props.path,loader:g.props.loader,action:g.props.action,errorElement:g.props.errorElement,ErrorBoundary:g.props.ErrorBoundary,hasErrorBoundary:null!=g.props.ErrorBoundary||null!=g.props.errorElement,shouldRevalidate:g.props.shouldRevalidate,handle:g.props.handle,lazy:g.props.lazy};g.props.children&&(l.children=mg(g.props.children,C)),I.push(l)})),I}var Zg=I(7950),yg=I.t(Zg,2);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(Ch){}new Map;const pg=C.startTransition;yg.flushSync,C.useId;function Gg(g){let{basename:e,children:I,future:t,window:C}=g,l=n.useRef();var o;null==l.current&&(l.current=(void 0===(o={window:C,v5Compat:!0})&&(o={}),s((function(g,e){let{pathname:I,search:t,hash:n}=g.location;return A("",{pathname:I,search:t,hash:n},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(g,e){return"string"===typeof e?e:u(e)}),null,o)));let r=l.current,[a,c]=n.useState({action:r.action,location:r.location}),{v7_startTransition:i}=t||{},d=n.useCallback((g=>{i&&pg?pg((()=>c(g))):c(g)}),[c,i]);return n.useLayoutEffect((()=>r.listen(d)),[r,d]),n.createElement(sg,{basename:e,children:I,location:a.location,navigationType:a.action,navigator:r,future:t})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var hg,Bg;(function(g){g.UseScrollRestoration="useScrollRestoration",g.UseSubmit="useSubmit",g.UseSubmitFetcher="useSubmitFetcher",g.UseFetcher="useFetcher",g.useViewTransitionState="useViewTransitionState"})(hg||(hg={})),function(g){g.UseFetcher="useFetcher",g.UseFetchers="useFetchers",g.UseScrollRestoration="useScrollRestoration"}(Bg||(Bg={}));var Sg=I(579);const Wg=(0,n.createContext)(),fg=g=>{let{children:e}=g;const[I,t]=(0,n.useState)(!1),[C,l]=(0,n.useState)(!1);return(0,Sg.jsx)(Wg.Provider,{value:{isAuthenticated:I,login:()=>t(!0),logout:()=>t(!1),isPaymentSuccessful:C,setIsPaymentSuccessful:l},children:e})},Vg=()=>(0,n.useContext)(Wg),vg=()=>{const[g,e]=(0,n.useState)(""),[I,t]=(0,n.useState)(""),C=gg(),{login:l}=Vg();return(0,Sg.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-200",children:(0,Sg.jsxs)("div",{className:"w-full max-w-xs p-6 bg-white rounded-lg shadow-md",children:[(0,Sg.jsx)("h2",{className:"mb-6 text-2xl font-bold text-center",children:"Login"}),(0,Sg.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await fetch("https://bloodlinksbn.azurewebsites.net/api/bloodBank/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:g,password:I})}),t=await e.json();if(200===e.status){const{bbName:g}=t;sessionStorage.setItem("bbName",g),l(),C("/dashboard")}else alert(t.message)}catch(t){console.error("Error during login:",t),alert("An error occurred during login: "+t.message)}},children:[(0,Sg.jsxs)("div",{className:"mb-4",children:[(0,Sg.jsx)("label",{className:"block mb-2 text-sm font-medium",children:"Email:"}),(0,Sg.jsx)("input",{type:"email",value:g,onChange:g=>e(g.target.value),required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,Sg.jsxs)("div",{className:"mb-4",children:[(0,Sg.jsx)("label",{className:"block mb-2 text-sm font-medium",children:"Password:"}),(0,Sg.jsx)("input",{type:"password",value:I,onChange:g=>t(g.target.value),required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,Sg.jsx)("button",{type:"submit",className:"w-full px-4 py-2 text-white bg-blue-600 rounded hover:bg-blue-700",children:"Login"})]})]})})};function Xg(g,e){return function(){return g.apply(e,arguments)}}const{toString:Rg}=Object.prototype,{getPrototypeOf:Jg}=Object,kg=(Yg=Object.create(null),g=>{const e=Rg.call(g);return Yg[e]||(Yg[e]=e.slice(8,-1).toLowerCase())});var Yg;const Hg=g=>(g=g.toLowerCase(),e=>kg(e)===g),wg=g=>e=>typeof e===g,{isArray:Ng}=Array,Kg=wg("undefined");const Fg=Hg("ArrayBuffer");const xg=wg("string"),Eg=wg("function"),Mg=wg("number"),zg=g=>null!==g&&"object"===typeof g,Ug=g=>{if("object"!==kg(g))return!1;const e=Jg(g);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in g)&&!(Symbol.iterator in g)},Qg=Hg("Date"),Lg=Hg("File"),Dg=Hg("Blob"),Tg=Hg("FileList"),jg=Hg("URLSearchParams"),[Og,Pg,qg,_g]=["ReadableStream","Request","Response","Headers"].map(Hg);function $g(g,e){let I,t,{allOwnKeys:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==g&&"undefined"!==typeof g)if("object"!==typeof g&&(g=[g]),Ng(g))for(I=0,t=g.length;I<t;I++)e.call(null,g[I],I,g);else{const t=n?Object.getOwnPropertyNames(g):Object.keys(g),C=t.length;let l;for(I=0;I<C;I++)l=t[I],e.call(null,g[l],l,g)}}function ge(g,e){e=e.toLowerCase();const I=Object.keys(g);let t,n=I.length;for(;n-- >0;)if(t=I[n],e===t.toLowerCase())return t;return null}const ee="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Ie=g=>!Kg(g)&&g!==ee;const te=(ne="undefined"!==typeof Uint8Array&&Jg(Uint8Array),g=>ne&&g instanceof ne);var ne;const Ce=Hg("HTMLFormElement"),le=(g=>{let{hasOwnProperty:e}=g;return(g,I)=>e.call(g,I)})(Object.prototype),oe=Hg("RegExp"),re=(g,e)=>{const I=Object.getOwnPropertyDescriptors(g),t={};$g(I,((I,n)=>{let C;!1!==(C=e(I,n,g))&&(t[n]=C||I)})),Object.defineProperties(g,t)},ae="abcdefghijklmnopqrstuvwxyz",ce="0123456789",ie={DIGIT:ce,ALPHA:ae,ALPHA_DIGIT:ae+ae.toUpperCase()+ce};const Ae=Hg("AsyncFunction"),ue=((g,e)=>{return g?setImmediate:e?(I=`axios@${Math.random()}`,t=[],ee.addEventListener("message",(g=>{let{source:e,data:n}=g;e===ee&&n===I&&t.length&&t.shift()()}),!1),g=>{t.push(g),ee.postMessage(I,"*")}):g=>setTimeout(g);var I,t})("function"===typeof setImmediate,Eg(ee.postMessage)),de="undefined"!==typeof queueMicrotask?queueMicrotask.bind(ee):"undefined"!==typeof process&&process.nextTick||ue,se={isArray:Ng,isArrayBuffer:Fg,isBuffer:function(g){return null!==g&&!Kg(g)&&null!==g.constructor&&!Kg(g.constructor)&&Eg(g.constructor.isBuffer)&&g.constructor.isBuffer(g)},isFormData:g=>{let e;return g&&("function"===typeof FormData&&g instanceof FormData||Eg(g.append)&&("formdata"===(e=kg(g))||"object"===e&&Eg(g.toString)&&"[object FormData]"===g.toString()))},isArrayBufferView:function(g){let e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(g):g&&g.buffer&&Fg(g.buffer),e},isString:xg,isNumber:Mg,isBoolean:g=>!0===g||!1===g,isObject:zg,isPlainObject:Ug,isReadableStream:Og,isRequest:Pg,isResponse:qg,isHeaders:_g,isUndefined:Kg,isDate:Qg,isFile:Lg,isBlob:Dg,isRegExp:oe,isFunction:Eg,isStream:g=>zg(g)&&Eg(g.pipe),isURLSearchParams:jg,isTypedArray:te,isFileList:Tg,forEach:$g,merge:function g(){const{caseless:e}=Ie(this)&&this||{},I={},t=(t,n)=>{const C=e&&ge(I,n)||n;Ug(I[C])&&Ug(t)?I[C]=g(I[C],t):Ug(t)?I[C]=g({},t):Ng(t)?I[C]=t.slice():I[C]=t};for(let n=0,C=arguments.length;n<C;n++)arguments[n]&&$g(arguments[n],t);return I},extend:function(g,e,I){let{allOwnKeys:t}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return $g(e,((e,t)=>{I&&Eg(e)?g[t]=Xg(e,I):g[t]=e}),{allOwnKeys:t}),g},trim:g=>g.trim?g.trim():g.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:g=>(65279===g.charCodeAt(0)&&(g=g.slice(1)),g),inherits:(g,e,I,t)=>{g.prototype=Object.create(e.prototype,t),g.prototype.constructor=g,Object.defineProperty(g,"super",{value:e.prototype}),I&&Object.assign(g.prototype,I)},toFlatObject:(g,e,I,t)=>{let n,C,l;const o={};if(e=e||{},null==g)return e;do{for(n=Object.getOwnPropertyNames(g),C=n.length;C-- >0;)l=n[C],t&&!t(l,g,e)||o[l]||(e[l]=g[l],o[l]=!0);g=!1!==I&&Jg(g)}while(g&&(!I||I(g,e))&&g!==Object.prototype);return e},kindOf:kg,kindOfTest:Hg,endsWith:(g,e,I)=>{g=String(g),(void 0===I||I>g.length)&&(I=g.length),I-=e.length;const t=g.indexOf(e,I);return-1!==t&&t===I},toArray:g=>{if(!g)return null;if(Ng(g))return g;let e=g.length;if(!Mg(e))return null;const I=new Array(e);for(;e-- >0;)I[e]=g[e];return I},forEachEntry:(g,e)=>{const I=(g&&g[Symbol.iterator]).call(g);let t;for(;(t=I.next())&&!t.done;){const I=t.value;e.call(g,I[0],I[1])}},matchAll:(g,e)=>{let I;const t=[];for(;null!==(I=g.exec(e));)t.push(I);return t},isHTMLForm:Ce,hasOwnProperty:le,hasOwnProp:le,reduceDescriptors:re,freezeMethods:g=>{re(g,((e,I)=>{if(Eg(g)&&-1!==["arguments","caller","callee"].indexOf(I))return!1;const t=g[I];Eg(t)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+I+"'")}))}))},toObjectSet:(g,e)=>{const I={},t=g=>{g.forEach((g=>{I[g]=!0}))};return Ng(g)?t(g):t(String(g).split(e)),I},toCamelCase:g=>g.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(g,e,I){return e.toUpperCase()+I})),noop:()=>{},toFiniteNumber:(g,e)=>null!=g&&Number.isFinite(g=+g)?g:e,findKey:ge,global:ee,isContextDefined:Ie,ALPHABET:ie,generateString:function(){let g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.ALPHA_DIGIT,I="";const{length:t}=e;for(;g--;)I+=e[Math.random()*t|0];return I},isSpecCompliantForm:function(g){return!!(g&&Eg(g.append)&&"FormData"===g[Symbol.toStringTag]&&g[Symbol.iterator])},toJSONObject:g=>{const e=new Array(10),I=(g,t)=>{if(zg(g)){if(e.indexOf(g)>=0)return;if(!("toJSON"in g)){e[t]=g;const n=Ng(g)?[]:{};return $g(g,((g,e)=>{const C=I(g,t+1);!Kg(C)&&(n[e]=C)})),e[t]=void 0,n}}return g};return I(g,0)},isAsyncFn:Ae,isThenable:g=>g&&(zg(g)||Eg(g))&&Eg(g.then)&&Eg(g.catch),setImmediate:ue,asap:de};function be(g,e,I,t,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=g,this.name="AxiosError",e&&(this.code=e),I&&(this.config=I),t&&(this.request=t),n&&(this.response=n,this.status=n.status?n.status:null)}se.inherits(be,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:se.toJSONObject(this.config),code:this.code,status:this.status}}});const me=be.prototype,Ze={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((g=>{Ze[g]={value:g}})),Object.defineProperties(be,Ze),Object.defineProperty(me,"isAxiosError",{value:!0}),be.from=(g,e,I,t,n,C)=>{const l=Object.create(me);return se.toFlatObject(g,l,(function(g){return g!==Error.prototype}),(g=>"isAxiosError"!==g)),be.call(l,g.message,e,I,t,n),l.cause=g,l.name=g.name,C&&Object.assign(l,C),l};const ye=be;function pe(g){return se.isPlainObject(g)||se.isArray(g)}function Ge(g){return se.endsWith(g,"[]")?g.slice(0,-2):g}function he(g,e,I){return g?g.concat(e).map((function(g,e){return g=Ge(g),!I&&e?"["+g+"]":g})).join(I?".":""):e}const Be=se.toFlatObject(se,{},null,(function(g){return/^is[A-Z]/.test(g)}));const Se=function(g,e,I){if(!se.isObject(g))throw new TypeError("target must be an object");e=e||new FormData;const t=(I=se.toFlatObject(I,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(g,e){return!se.isUndefined(e[g])}))).metaTokens,n=I.visitor||a,C=I.dots,l=I.indexes,o=(I.Blob||"undefined"!==typeof Blob&&Blob)&&se.isSpecCompliantForm(e);if(!se.isFunction(n))throw new TypeError("visitor must be a function");function r(g){if(null===g)return"";if(se.isDate(g))return g.toISOString();if(!o&&se.isBlob(g))throw new ye("Blob is not supported. Use a Buffer instead.");return se.isArrayBuffer(g)||se.isTypedArray(g)?o&&"function"===typeof Blob?new Blob([g]):Buffer.from(g):g}function a(g,I,n){let o=g;if(g&&!n&&"object"===typeof g)if(se.endsWith(I,"{}"))I=t?I:I.slice(0,-2),g=JSON.stringify(g);else if(se.isArray(g)&&function(g){return se.isArray(g)&&!g.some(pe)}(g)||(se.isFileList(g)||se.endsWith(I,"[]"))&&(o=se.toArray(g)))return I=Ge(I),o.forEach((function(g,t){!se.isUndefined(g)&&null!==g&&e.append(!0===l?he([I],t,C):null===l?I:I+"[]",r(g))})),!1;return!!pe(g)||(e.append(he(n,I,C),r(g)),!1)}const c=[],i=Object.assign(Be,{defaultVisitor:a,convertValue:r,isVisitable:pe});if(!se.isObject(g))throw new TypeError("data must be an object");return function g(I,t){if(!se.isUndefined(I)){if(-1!==c.indexOf(I))throw Error("Circular reference detected in "+t.join("."));c.push(I),se.forEach(I,(function(I,C){!0===(!(se.isUndefined(I)||null===I)&&n.call(e,I,se.isString(C)?C.trim():C,t,i))&&g(I,t?t.concat(C):[C])})),c.pop()}}(g),e};function We(g){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(g).replace(/[!'()~]|%20|%00/g,(function(g){return e[g]}))}function fe(g,e){this._pairs=[],g&&Se(g,this,e)}const Ve=fe.prototype;Ve.append=function(g,e){this._pairs.push([g,e])},Ve.toString=function(g){const e=g?function(e){return g.call(this,e,We)}:We;return this._pairs.map((function(g){return e(g[0])+"="+e(g[1])}),"").join("&")};const ve=fe;function Xe(g){return encodeURIComponent(g).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Re(g,e,I){if(!e)return g;const t=I&&I.encode||Xe,n=I&&I.serialize;let C;if(C=n?n(e,I):se.isURLSearchParams(e)?e.toString():new ve(e,I).toString(t),C){const e=g.indexOf("#");-1!==e&&(g=g.slice(0,e)),g+=(-1===g.indexOf("?")?"?":"&")+C}return g}const Je=class{constructor(){this.handlers=[]}use(g,e,I){return this.handlers.push({fulfilled:g,rejected:e,synchronous:!!I&&I.synchronous,runWhen:I?I.runWhen:null}),this.handlers.length-1}eject(g){this.handlers[g]&&(this.handlers[g]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(g){se.forEach(this.handlers,(function(e){null!==e&&g(e)}))}},ke={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ye={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ve,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},He="undefined"!==typeof window&&"undefined"!==typeof document,we="object"===typeof navigator&&navigator||void 0,Ne=He&&(!we||["ReactNative","NativeScript","NS"].indexOf(we.product)<0),Ke="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Fe=He&&window.location.href||"http://localhost",xe={...g,...Ye};const Ee=function(g){function e(g,I,t,n){let C=g[n++];if("__proto__"===C)return!0;const l=Number.isFinite(+C),o=n>=g.length;if(C=!C&&se.isArray(t)?t.length:C,o)return se.hasOwnProp(t,C)?t[C]=[t[C],I]:t[C]=I,!l;t[C]&&se.isObject(t[C])||(t[C]=[]);return e(g,I,t[C],n)&&se.isArray(t[C])&&(t[C]=function(g){const e={},I=Object.keys(g);let t;const n=I.length;let C;for(t=0;t<n;t++)C=I[t],e[C]=g[C];return e}(t[C])),!l}if(se.isFormData(g)&&se.isFunction(g.entries)){const I={};return se.forEachEntry(g,((g,t)=>{e(function(g){return se.matchAll(/\w+|\[(\w*)]/g,g).map((g=>"[]"===g[0]?"":g[1]||g[0]))}(g),t,I,0)})),I}return null};const Me={transitional:ke,adapter:["xhr","http","fetch"],transformRequest:[function(g,e){const I=e.getContentType()||"",t=I.indexOf("application/json")>-1,n=se.isObject(g);n&&se.isHTMLForm(g)&&(g=new FormData(g));if(se.isFormData(g))return t?JSON.stringify(Ee(g)):g;if(se.isArrayBuffer(g)||se.isBuffer(g)||se.isStream(g)||se.isFile(g)||se.isBlob(g)||se.isReadableStream(g))return g;if(se.isArrayBufferView(g))return g.buffer;if(se.isURLSearchParams(g))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),g.toString();let C;if(n){if(I.indexOf("application/x-www-form-urlencoded")>-1)return function(g,e){return Se(g,new xe.classes.URLSearchParams,Object.assign({visitor:function(g,e,I,t){return xe.isNode&&se.isBuffer(g)?(this.append(e,g.toString("base64")),!1):t.defaultVisitor.apply(this,arguments)}},e))}(g,this.formSerializer).toString();if((C=se.isFileList(g))||I.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return Se(C?{"files[]":g}:g,e&&new e,this.formSerializer)}}return n||t?(e.setContentType("application/json",!1),function(g,e,I){if(se.isString(g))try{return(e||JSON.parse)(g),se.trim(g)}catch(Ch){if("SyntaxError"!==Ch.name)throw Ch}return(I||JSON.stringify)(g)}(g)):g}],transformResponse:[function(g){const e=this.transitional||Me.transitional,I=e&&e.forcedJSONParsing,t="json"===this.responseType;if(se.isResponse(g)||se.isReadableStream(g))return g;if(g&&se.isString(g)&&(I&&!this.responseType||t)){const I=!(e&&e.silentJSONParsing)&&t;try{return JSON.parse(g)}catch(Ch){if(I){if("SyntaxError"===Ch.name)throw ye.from(Ch,ye.ERR_BAD_RESPONSE,this,null,this.response);throw Ch}}}return g}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xe.classes.FormData,Blob:xe.classes.Blob},validateStatus:function(g){return g>=200&&g<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};se.forEach(["delete","get","head","post","put","patch"],(g=>{Me.headers[g]={}}));const ze=Me,Ue=se.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Qe=Symbol("internals");function Le(g){return g&&String(g).trim().toLowerCase()}function De(g){return!1===g||null==g?g:se.isArray(g)?g.map(De):String(g)}function Te(g,e,I,t,n){return se.isFunction(t)?t.call(this,e,I):(n&&(e=I),se.isString(e)?se.isString(t)?-1!==e.indexOf(t):se.isRegExp(t)?t.test(e):void 0:void 0)}class je{constructor(g){g&&this.set(g)}set(g,e,I){const t=this;function n(g,e,I){const n=Le(e);if(!n)throw new Error("header name must be a non-empty string");const C=se.findKey(t,n);(!C||void 0===t[C]||!0===I||void 0===I&&!1!==t[C])&&(t[C||e]=De(g))}const C=(g,e)=>se.forEach(g,((g,I)=>n(g,I,e)));if(se.isPlainObject(g)||g instanceof this.constructor)C(g,e);else if(se.isString(g)&&(g=g.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(g.trim()))C((g=>{const e={};let I,t,n;return g&&g.split("\n").forEach((function(g){n=g.indexOf(":"),I=g.substring(0,n).trim().toLowerCase(),t=g.substring(n+1).trim(),!I||e[I]&&Ue[I]||("set-cookie"===I?e[I]?e[I].push(t):e[I]=[t]:e[I]=e[I]?e[I]+", "+t:t)})),e})(g),e);else if(se.isHeaders(g))for(const[l,o]of g.entries())n(o,l,I);else null!=g&&n(e,g,I);return this}get(g,e){if(g=Le(g)){const I=se.findKey(this,g);if(I){const g=this[I];if(!e)return g;if(!0===e)return function(g){const e=Object.create(null),I=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let t;for(;t=I.exec(g);)e[t[1]]=t[2];return e}(g);if(se.isFunction(e))return e.call(this,g,I);if(se.isRegExp(e))return e.exec(g);throw new TypeError("parser must be boolean|regexp|function")}}}has(g,e){if(g=Le(g)){const I=se.findKey(this,g);return!(!I||void 0===this[I]||e&&!Te(0,this[I],I,e))}return!1}delete(g,e){const I=this;let t=!1;function n(g){if(g=Le(g)){const n=se.findKey(I,g);!n||e&&!Te(0,I[n],n,e)||(delete I[n],t=!0)}}return se.isArray(g)?g.forEach(n):n(g),t}clear(g){const e=Object.keys(this);let I=e.length,t=!1;for(;I--;){const n=e[I];g&&!Te(0,this[n],n,g,!0)||(delete this[n],t=!0)}return t}normalize(g){const e=this,I={};return se.forEach(this,((t,n)=>{const C=se.findKey(I,n);if(C)return e[C]=De(t),void delete e[n];const l=g?function(g){return g.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((g,e,I)=>e.toUpperCase()+I))}(n):String(n).trim();l!==n&&delete e[n],e[l]=De(t),I[l]=!0})),this}concat(){for(var g=arguments.length,e=new Array(g),I=0;I<g;I++)e[I]=arguments[I];return this.constructor.concat(this,...e)}toJSON(g){const e=Object.create(null);return se.forEach(this,((I,t)=>{null!=I&&!1!==I&&(e[t]=g&&se.isArray(I)?I.join(", "):I)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((g=>{let[e,I]=g;return e+": "+I})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(g){return g instanceof this?g:new this(g)}static concat(g){const e=new this(g);for(var I=arguments.length,t=new Array(I>1?I-1:0),n=1;n<I;n++)t[n-1]=arguments[n];return t.forEach((g=>e.set(g))),e}static accessor(g){const e=(this[Qe]=this[Qe]={accessors:{}}).accessors,I=this.prototype;function t(g){const t=Le(g);e[t]||(!function(g,e){const I=se.toCamelCase(" "+e);["get","set","has"].forEach((t=>{Object.defineProperty(g,t+I,{value:function(g,I,n){return this[t].call(this,e,g,I,n)},configurable:!0})}))}(I,g),e[t]=!0)}return se.isArray(g)?g.forEach(t):t(g),this}}je.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),se.reduceDescriptors(je.prototype,((g,e)=>{let{value:I}=g,t=e[0].toUpperCase()+e.slice(1);return{get:()=>I,set(g){this[t]=g}}})),se.freezeMethods(je);const Oe=je;function Pe(g,e){const I=this||ze,t=e||I,n=Oe.from(t.headers);let C=t.data;return se.forEach(g,(function(g){C=g.call(I,C,n.normalize(),e?e.status:void 0)})),n.normalize(),C}function qe(g){return!(!g||!g.__CANCEL__)}function _e(g,e,I){ye.call(this,null==g?"canceled":g,ye.ERR_CANCELED,e,I),this.name="CanceledError"}se.inherits(_e,ye,{__CANCEL__:!0});const $e=_e;function gI(g,e,I){const t=I.config.validateStatus;I.status&&t&&!t(I.status)?e(new ye("Request failed with status code "+I.status,[ye.ERR_BAD_REQUEST,ye.ERR_BAD_RESPONSE][Math.floor(I.status/100)-4],I.config,I.request,I)):g(I)}const eI=function(g,e){g=g||10;const I=new Array(g),t=new Array(g);let n,C=0,l=0;return e=void 0!==e?e:1e3,function(o){const r=Date.now(),a=t[l];n||(n=r),I[C]=o,t[C]=r;let c=l,i=0;for(;c!==C;)i+=I[c++],c%=g;if(C=(C+1)%g,C===l&&(l=(l+1)%g),r-n<e)return;const A=a&&r-a;return A?Math.round(1e3*i/A):void 0}};const II=function(g,e){let I,t,n=0,C=1e3/e;const l=function(e){let C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();n=C,I=null,t&&(clearTimeout(t),t=null),g.apply(null,e)};return[function(){const g=Date.now(),e=g-n;for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];e>=C?l(r,g):(I=r,t||(t=setTimeout((()=>{t=null,l(I)}),C-e)))},()=>I&&l(I)]},tI=function(g,e){let I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,t=0;const n=eI(50,250);return II((I=>{const C=I.loaded,l=I.lengthComputable?I.total:void 0,o=C-t,r=n(o);t=C;g({loaded:C,total:l,progress:l?C/l:void 0,bytes:o,rate:r||void 0,estimated:r&&l&&C<=l?(l-C)/r:void 0,event:I,lengthComputable:null!=l,[e?"download":"upload"]:!0})}),I)},nI=(g,e)=>{const I=null!=g;return[t=>e[0]({lengthComputable:I,total:g,loaded:t}),e[1]]},CI=g=>function(){for(var e=arguments.length,I=new Array(e),t=0;t<e;t++)I[t]=arguments[t];return se.asap((()=>g(...I)))},lI=xe.hasStandardBrowserEnv?function(){const g=xe.navigator&&/(msie|trident)/i.test(xe.navigator.userAgent),e=document.createElement("a");let I;function t(I){let t=I;return g&&(e.setAttribute("href",t),t=e.href),e.setAttribute("href",t),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return I=t(window.location.href),function(g){const e=se.isString(g)?t(g):g;return e.protocol===I.protocol&&e.host===I.host}}():function(){return!0},oI=xe.hasStandardBrowserEnv?{write(g,e,I,t,n,C){const l=[g+"="+encodeURIComponent(e)];se.isNumber(I)&&l.push("expires="+new Date(I).toGMTString()),se.isString(t)&&l.push("path="+t),se.isString(n)&&l.push("domain="+n),!0===C&&l.push("secure"),document.cookie=l.join("; ")},read(g){const e=document.cookie.match(new RegExp("(^|;\\s*)("+g+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(g){this.write(g,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function rI(g,e){return g&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(g,e){return e?g.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):g}(g,e):e}const aI=g=>g instanceof Oe?{...g}:g;function cI(g,e){e=e||{};const I={};function t(g,e,I){return se.isPlainObject(g)&&se.isPlainObject(e)?se.merge.call({caseless:I},g,e):se.isPlainObject(e)?se.merge({},e):se.isArray(e)?e.slice():e}function n(g,e,I){return se.isUndefined(e)?se.isUndefined(g)?void 0:t(void 0,g,I):t(g,e,I)}function C(g,e){if(!se.isUndefined(e))return t(void 0,e)}function l(g,e){return se.isUndefined(e)?se.isUndefined(g)?void 0:t(void 0,g):t(void 0,e)}function o(I,n,C){return C in e?t(I,n):C in g?t(void 0,I):void 0}const r={url:C,method:C,data:C,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(g,e)=>n(aI(g),aI(e),!0)};return se.forEach(Object.keys(Object.assign({},g,e)),(function(t){const C=r[t]||n,l=C(g[t],e[t],t);se.isUndefined(l)&&C!==o||(I[t]=l)})),I}const iI=g=>{const e=cI({},g);let I,{data:t,withXSRFToken:n,xsrfHeaderName:C,xsrfCookieName:l,headers:o,auth:r}=e;if(e.headers=o=Oe.from(o),e.url=Re(rI(e.baseURL,e.url),g.params,g.paramsSerializer),r&&o.set("Authorization","Basic "+btoa((r.username||"")+":"+(r.password?unescape(encodeURIComponent(r.password)):""))),se.isFormData(t))if(xe.hasStandardBrowserEnv||xe.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(I=o.getContentType())){const[g,...e]=I?I.split(";").map((g=>g.trim())).filter(Boolean):[];o.setContentType([g||"multipart/form-data",...e].join("; "))}if(xe.hasStandardBrowserEnv&&(n&&se.isFunction(n)&&(n=n(e)),n||!1!==n&&lI(e.url))){const g=C&&l&&oI.read(l);g&&o.set(C,g)}return e},AI="undefined"!==typeof XMLHttpRequest&&function(g){return new Promise((function(e,I){const t=iI(g);let n=t.data;const C=Oe.from(t.headers).normalize();let l,o,r,a,c,{responseType:i,onUploadProgress:A,onDownloadProgress:u}=t;function d(){a&&a(),c&&c(),t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}let s=new XMLHttpRequest;function b(){if(!s)return;const t=Oe.from("getAllResponseHeaders"in s&&s.getAllResponseHeaders());gI((function(g){e(g),d()}),(function(g){I(g),d()}),{data:i&&"text"!==i&&"json"!==i?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:t,config:g,request:s}),s=null}s.open(t.method.toUpperCase(),t.url,!0),s.timeout=t.timeout,"onloadend"in s?s.onloadend=b:s.onreadystatechange=function(){s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))&&setTimeout(b)},s.onabort=function(){s&&(I(new ye("Request aborted",ye.ECONNABORTED,g,s)),s=null)},s.onerror=function(){I(new ye("Network Error",ye.ERR_NETWORK,g,s)),s=null},s.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const n=t.transitional||ke;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),I(new ye(e,n.clarifyTimeoutError?ye.ETIMEDOUT:ye.ECONNABORTED,g,s)),s=null},void 0===n&&C.setContentType(null),"setRequestHeader"in s&&se.forEach(C.toJSON(),(function(g,e){s.setRequestHeader(e,g)})),se.isUndefined(t.withCredentials)||(s.withCredentials=!!t.withCredentials),i&&"json"!==i&&(s.responseType=t.responseType),u&&([r,c]=tI(u,!0),s.addEventListener("progress",r)),A&&s.upload&&([o,a]=tI(A),s.upload.addEventListener("progress",o),s.upload.addEventListener("loadend",a)),(t.cancelToken||t.signal)&&(l=e=>{s&&(I(!e||e.type?new $e(null,g,s):e),s.abort(),s=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const m=function(g){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(g);return e&&e[1]||""}(t.url);m&&-1===xe.protocols.indexOf(m)?I(new ye("Unsupported protocol "+m+":",ye.ERR_BAD_REQUEST,g)):s.send(n||null)}))},uI=(g,e)=>{const{length:I}=g=g?g.filter(Boolean):[];if(e||I){let I,t=new AbortController;const n=function(g){if(!I){I=!0,l();const e=g instanceof Error?g:this.reason;t.abort(e instanceof ye?e:new $e(e instanceof Error?e.message:e))}};let C=e&&setTimeout((()=>{C=null,n(new ye(`timeout ${e} of ms exceeded`,ye.ETIMEDOUT))}),e);const l=()=>{g&&(C&&clearTimeout(C),C=null,g.forEach((g=>{g.unsubscribe?g.unsubscribe(n):g.removeEventListener("abort",n)})),g=null)};g.forEach((g=>g.addEventListener("abort",n)));const{signal:o}=t;return o.unsubscribe=()=>se.asap(l),o}},dI=function*(g,e){let I=g.byteLength;if(!e||I<e)return void(yield g);let t,n=0;for(;n<I;)t=n+e,yield g.slice(n,t),n=t},sI=async function*(g){if(g[Symbol.asyncIterator])return void(yield*g);const e=g.getReader();try{for(;;){const{done:g,value:I}=await e.read();if(g)break;yield I}}finally{await e.cancel()}},bI=(g,e,I,t)=>{const n=async function*(g,e){for await(const I of sI(g))yield*dI(I,e)}(g,e);let C,l=0,o=g=>{C||(C=!0,t&&t(g))};return new ReadableStream({async pull(g){try{const{done:e,value:t}=await n.next();if(e)return o(),void g.close();let C=t.byteLength;if(I){let g=l+=C;I(g)}g.enqueue(new Uint8Array(t))}catch(e){throw o(e),e}},cancel:g=>(o(g),n.return())},{highWaterMark:2})},mI="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,ZI=mI&&"function"===typeof ReadableStream,yI=mI&&("function"===typeof TextEncoder?(pI=new TextEncoder,g=>pI.encode(g)):async g=>new Uint8Array(await new Response(g).arrayBuffer()));var pI;const GI=function(g){try{for(var e=arguments.length,I=new Array(e>1?e-1:0),t=1;t<e;t++)I[t-1]=arguments[t];return!!g(...I)}catch(Ch){return!1}},hI=ZI&&GI((()=>{let g=!1;const e=new Request(xe.origin,{body:new ReadableStream,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!e})),BI=ZI&&GI((()=>se.isReadableStream(new Response("").body))),SI={stream:BI&&(g=>g.body)};var WI;mI&&(WI=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((g=>{!SI[g]&&(SI[g]=se.isFunction(WI[g])?e=>e[g]():(e,I)=>{throw new ye(`Response type '${g}' is not supported`,ye.ERR_NOT_SUPPORT,I)})})));const fI=async(g,e)=>{const I=se.toFiniteNumber(g.getContentLength());return null==I?(async g=>{if(null==g)return 0;if(se.isBlob(g))return g.size;if(se.isSpecCompliantForm(g)){const e=new Request(xe.origin,{method:"POST",body:g});return(await e.arrayBuffer()).byteLength}return se.isArrayBufferView(g)||se.isArrayBuffer(g)?g.byteLength:(se.isURLSearchParams(g)&&(g+=""),se.isString(g)?(await yI(g)).byteLength:void 0)})(e):I},VI=mI&&(async g=>{let{url:e,method:I,data:t,signal:n,cancelToken:C,timeout:l,onDownloadProgress:o,onUploadProgress:r,responseType:a,headers:c,withCredentials:i="same-origin",fetchOptions:A}=iI(g);a=a?(a+"").toLowerCase():"text";let u,d=uI([n,C&&C.toAbortSignal()],l);const s=d&&d.unsubscribe&&(()=>{d.unsubscribe()});let b;try{if(r&&hI&&"get"!==I&&"head"!==I&&0!==(b=await fI(c,t))){let g,I=new Request(e,{method:"POST",body:t,duplex:"half"});if(se.isFormData(t)&&(g=I.headers.get("content-type"))&&c.setContentType(g),I.body){const[g,e]=nI(b,tI(CI(r)));t=bI(I.body,65536,g,e)}}se.isString(i)||(i=i?"include":"omit");const n="credentials"in Request.prototype;u=new Request(e,{...A,signal:d,method:I.toUpperCase(),headers:c.normalize().toJSON(),body:t,duplex:"half",credentials:n?i:void 0});let C=await fetch(u);const l=BI&&("stream"===a||"response"===a);if(BI&&(o||l&&s)){const g={};["status","statusText","headers"].forEach((e=>{g[e]=C[e]}));const e=se.toFiniteNumber(C.headers.get("content-length")),[I,t]=o&&nI(e,tI(CI(o),!0))||[];C=new Response(bI(C.body,65536,I,(()=>{t&&t(),s&&s()})),g)}a=a||"text";let m=await SI[se.findKey(SI,a)||"text"](C,g);return!l&&s&&s(),await new Promise(((e,I)=>{gI(e,I,{data:m,headers:Oe.from(C.headers),status:C.status,statusText:C.statusText,config:g,request:u})}))}catch(m){if(s&&s(),m&&"TypeError"===m.name&&/fetch/i.test(m.message))throw Object.assign(new ye("Network Error",ye.ERR_NETWORK,g,u),{cause:m.cause||m});throw ye.from(m,m&&m.code,g,u)}}),vI={http:null,xhr:AI,fetch:VI};se.forEach(vI,((g,e)=>{if(g){try{Object.defineProperty(g,"name",{value:e})}catch(Ch){}Object.defineProperty(g,"adapterName",{value:e})}}));const XI=g=>`- ${g}`,RI=g=>se.isFunction(g)||null===g||!1===g,JI=g=>{g=se.isArray(g)?g:[g];const{length:e}=g;let I,t;const n={};for(let C=0;C<e;C++){let e;if(I=g[C],t=I,!RI(I)&&(t=vI[(e=String(I)).toLowerCase()],void 0===t))throw new ye(`Unknown adapter '${e}'`);if(t)break;n[e||"#"+C]=t}if(!t){const g=Object.entries(n).map((g=>{let[e,I]=g;return`adapter ${e} `+(!1===I?"is not supported by the environment":"is not available in the build")}));let I=e?g.length>1?"since :\n"+g.map(XI).join("\n"):" "+XI(g[0]):"as no adapter specified";throw new ye("There is no suitable adapter to dispatch the request "+I,"ERR_NOT_SUPPORT")}return t};function kI(g){if(g.cancelToken&&g.cancelToken.throwIfRequested(),g.signal&&g.signal.aborted)throw new $e(null,g)}function YI(g){kI(g),g.headers=Oe.from(g.headers),g.data=Pe.call(g,g.transformRequest),-1!==["post","put","patch"].indexOf(g.method)&&g.headers.setContentType("application/x-www-form-urlencoded",!1);return JI(g.adapter||ze.adapter)(g).then((function(e){return kI(g),e.data=Pe.call(g,g.transformResponse,e),e.headers=Oe.from(e.headers),e}),(function(e){return qe(e)||(kI(g),e&&e.response&&(e.response.data=Pe.call(g,g.transformResponse,e.response),e.response.headers=Oe.from(e.response.headers))),Promise.reject(e)}))}const HI="1.7.7",wI={};["object","boolean","number","function","string","symbol"].forEach(((g,e)=>{wI[g]=function(I){return typeof I===g||"a"+(e<1?"n ":" ")+g}}));const NI={};wI.transitional=function(g,e,I){function t(g,e){return"[Axios v1.7.7] Transitional option '"+g+"'"+e+(I?". "+I:"")}return(I,n,C)=>{if(!1===g)throw new ye(t(n," has been removed"+(e?" in "+e:"")),ye.ERR_DEPRECATED);return e&&!NI[n]&&(NI[n]=!0,console.warn(t(n," has been deprecated since v"+e+" and will be removed in the near future"))),!g||g(I,n,C)}};const KI={assertOptions:function(g,e,I){if("object"!==typeof g)throw new ye("options must be an object",ye.ERR_BAD_OPTION_VALUE);const t=Object.keys(g);let n=t.length;for(;n-- >0;){const C=t[n],l=e[C];if(l){const e=g[C],I=void 0===e||l(e,C,g);if(!0!==I)throw new ye("option "+C+" must be "+I,ye.ERR_BAD_OPTION_VALUE)}else if(!0!==I)throw new ye("Unknown option "+C,ye.ERR_BAD_OPTION)}},validators:wI},FI=KI.validators;class xI{constructor(g){this.defaults=g,this.interceptors={request:new Je,response:new Je}}async request(g,e){try{return await this._request(g,e)}catch(I){if(I instanceof Error){let g;Error.captureStackTrace?Error.captureStackTrace(g={}):g=new Error;const e=g.stack?g.stack.replace(/^.+\n/,""):"";try{I.stack?e&&!String(I.stack).endsWith(e.replace(/^.+\n.+\n/,""))&&(I.stack+="\n"+e):I.stack=e}catch(Ch){}}throw I}}_request(g,e){"string"===typeof g?(e=e||{}).url=g:e=g||{},e=cI(this.defaults,e);const{transitional:I,paramsSerializer:t,headers:n}=e;void 0!==I&&KI.assertOptions(I,{silentJSONParsing:FI.transitional(FI.boolean),forcedJSONParsing:FI.transitional(FI.boolean),clarifyTimeoutError:FI.transitional(FI.boolean)},!1),null!=t&&(se.isFunction(t)?e.paramsSerializer={serialize:t}:KI.assertOptions(t,{encode:FI.function,serialize:FI.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let C=n&&se.merge(n.common,n[e.method]);n&&se.forEach(["delete","get","head","post","put","patch","common"],(g=>{delete n[g]})),e.headers=Oe.concat(C,n);const l=[];let o=!0;this.interceptors.request.forEach((function(g){"function"===typeof g.runWhen&&!1===g.runWhen(e)||(o=o&&g.synchronous,l.unshift(g.fulfilled,g.rejected))}));const r=[];let a;this.interceptors.response.forEach((function(g){r.push(g.fulfilled,g.rejected)}));let c,i=0;if(!o){const g=[YI.bind(this),void 0];for(g.unshift.apply(g,l),g.push.apply(g,r),c=g.length,a=Promise.resolve(e);i<c;)a=a.then(g[i++],g[i++]);return a}c=l.length;let A=e;for(i=0;i<c;){const g=l[i++],e=l[i++];try{A=g(A)}catch(u){e.call(this,u);break}}try{a=YI.call(this,A)}catch(u){return Promise.reject(u)}for(i=0,c=r.length;i<c;)a=a.then(r[i++],r[i++]);return a}getUri(g){return Re(rI((g=cI(this.defaults,g)).baseURL,g.url),g.params,g.paramsSerializer)}}se.forEach(["delete","get","head","options"],(function(g){xI.prototype[g]=function(e,I){return this.request(cI(I||{},{method:g,url:e,data:(I||{}).data}))}})),se.forEach(["post","put","patch"],(function(g){function e(e){return function(I,t,n){return this.request(cI(n||{},{method:g,headers:e?{"Content-Type":"multipart/form-data"}:{},url:I,data:t}))}}xI.prototype[g]=e(),xI.prototype[g+"Form"]=e(!0)}));const EI=xI;class MI{constructor(g){if("function"!==typeof g)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(g){e=g}));const I=this;this.promise.then((g=>{if(!I._listeners)return;let e=I._listeners.length;for(;e-- >0;)I._listeners[e](g);I._listeners=null})),this.promise.then=g=>{let e;const t=new Promise((g=>{I.subscribe(g),e=g})).then(g);return t.cancel=function(){I.unsubscribe(e)},t},g((function(g,t,n){I.reason||(I.reason=new $e(g,t,n),e(I.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(g){this.reason?g(this.reason):this._listeners?this._listeners.push(g):this._listeners=[g]}unsubscribe(g){if(!this._listeners)return;const e=this._listeners.indexOf(g);-1!==e&&this._listeners.splice(e,1)}toAbortSignal(){const g=new AbortController,e=e=>{g.abort(e)};return this.subscribe(e),g.signal.unsubscribe=()=>this.unsubscribe(e),g.signal}static source(){let g;const e=new MI((function(e){g=e}));return{token:e,cancel:g}}}const zI=MI;const UI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(UI).forEach((g=>{let[e,I]=g;UI[I]=e}));const QI=UI;const LI=function g(e){const I=new EI(e),t=Xg(EI.prototype.request,I);return se.extend(t,EI.prototype,I,{allOwnKeys:!0}),se.extend(t,I,null,{allOwnKeys:!0}),t.create=function(I){return g(cI(e,I))},t}(ze);LI.Axios=EI,LI.CanceledError=$e,LI.CancelToken=zI,LI.isCancel=qe,LI.VERSION=HI,LI.toFormData=Se,LI.AxiosError=ye,LI.Cancel=LI.CanceledError,LI.all=function(g){return Promise.all(g)},LI.spread=function(g){return function(e){return g.apply(null,e)}},LI.isAxiosError=function(g){return se.isObject(g)&&!0===g.isAxiosError},LI.mergeConfig=cI,LI.AxiosHeaders=Oe,LI.formToJSON=g=>Ee(se.isHTMLForm(g)?new FormData(g):g),LI.getAdapter=JI,LI.HttpStatusCode=QI,LI.default=LI;const DI=LI,TI="https://bloodlinksbn.azurewebsites.net/api",jI=async g=>await DI.delete(`${TI}/userController/delete-request`,{data:{id:g}});var OI=I(9309),PI=I.n(OI);const qI=g=>{let{onAdd:e}=g;const[I,t]=(0,n.useState)(""),[C,l]=(0,n.useState)(""),[o]=(0,n.useState)(1),[r,a]=(0,n.useState)(""),[c,i]=(0,n.useState)(null),[A,u]=(0,n.useState)(!1),[d,s]=(0,n.useState)({message:"",type:""});(0,n.useEffect)((()=>{const g=new Date,e=new Date(g.setDate(g.getDate()+15));a(e.toISOString().split("T")[0])}),[]);const b=async g=>{try{console.log("Submitting blood unit:",g);const I=await(g=>DI.post(`${TI}/bloodunits/add`,g))(g);200===I.status?(console.log("Successfully added blood unit:",I.data),e(g),Z(),m("Blood unit added successfully!","success")):400===I.status&&(console.error("Failed to add blood unit:",I.status),m("Invalid submission. Please check your input.","error"),Z())}catch(I){console.error("Error adding blood unit:",I),m("Invalid submission. Please check your input BID.","error"),Z()}},m=(g,e)=>{s({message:g,type:e}),setTimeout((()=>{s({message:"",type:""})}),3e3)},Z=()=>{t(""),l("")};return(0,Sg.jsxs)("div",{children:[d.message&&(0,Sg.jsx)("div",{className:"p-4 mb-4 text-white rounded "+("success"===d.type?"bg-green-500":"bg-red-500"),children:d.message}),(0,Sg.jsxs)("form",{onSubmit:g=>{g.preventDefault();const e=sessionStorage.getItem("bbName");b({bloodType:I,bid:C,bbName:e,quantity:o,expirationDate:r})},className:"bg-white p-6 rounded shadow mb-4",children:[(0,Sg.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Add Blood Unit"}),(0,Sg.jsxs)("div",{className:"mb-4",children:[(0,Sg.jsx)("label",{className:"block mb-2",children:"Blood Group"}),(0,Sg.jsxs)("select",{value:I,onChange:g=>t(g.target.value),required:!0,className:"w-full px-3 py-2 border rounded",children:[(0,Sg.jsx)("option",{value:"",children:"Select Blood Group"}),(0,Sg.jsx)("option",{value:"A+",children:"A+"}),(0,Sg.jsx)("option",{value:"A-",children:"A-"}),(0,Sg.jsx)("option",{value:"B+",children:"B+"}),(0,Sg.jsx)("option",{value:"B-",children:"B-"}),(0,Sg.jsx)("option",{value:"AB+",children:"AB+"}),(0,Sg.jsx)("option",{value:"AB-",children:"AB-"}),(0,Sg.jsx)("option",{value:"O+",children:"O+"}),(0,Sg.jsx)("option",{value:"O-",children:"O-"})]})]}),(0,Sg.jsxs)("div",{className:"mb-4",children:[(0,Sg.jsx)("label",{className:"block mb-2",children:"BID"}),(0,Sg.jsx)("input",{type:"text",value:C,onChange:g=>l(g.target.value),required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,Sg.jsxs)("div",{className:"flex space-x-2 mt-4",children:[(0,Sg.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded hover:bg-blue-700",children:"Add Blood Unit"}),(0,Sg.jsx)("button",{type:"button",onClick:()=>u(!A),className:"flex-1 bg-green-600 text-white py-2 rounded hover:bg-green-700",children:A?"Hide QR Scanner":"Scan QR"})]})]}),A&&(0,Sg.jsxs)("div",{className:"bg-white p-6 rounded shadow",children:[(0,Sg.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Scan QR Code"}),(0,Sg.jsx)(PI(),{delay:300,onError:g=>{console.error("QR Scanner Error:",g.message),i(g.message)},onScan:g=>{if(g)try{const e=JSON.parse(g.text);if(e.bid&&e.bloodType){l(e.bid),t(e.bloodType),i(null),u(!1);const g=sessionStorage.getItem("bbName"),I={bloodType:e.bloodType,bid:e.bid,bbName:g,quantity:o,expirationDate:r};b(I)}else i("Invalid QR code data")}catch(e){i("Error parsing QR code data")}},style:{width:"100%"}}),c&&(0,Sg.jsx)("p",{className:"text-red-500",children:c})]})]})},_I=g=>{let{onPay:e}=g;const I=gg(),{setIsPaymentSuccessful:t}=Vg(),[C,l]=(0,n.useState)({patientName:"",patientNumber:"",bid:"",bloodType:"",amount:"",bbName:sessionStorage.getItem("bbName")||""}),[o,r]=(0,n.useState)(!1),[a,c]=(0,n.useState)(null),[i,A]=(0,n.useState)({message:"",type:""}),u=(g,e)=>{A({message:g,type:e}),setTimeout((()=>{A({message:"",type:""})}),3e3)},d=()=>{l({patientName:"",patientNumber:"",bid:"",bloodType:"",amount:"",bbName:sessionStorage.getItem("bbName")||""})};return(0,Sg.jsxs)("div",{children:[i.message&&(0,Sg.jsx)("div",{className:"p-4 mb-4 text-white rounded "+("success"===i.type?"bg-green-500":"bg-red-500"),children:i.message}),(0,Sg.jsxs)("form",{onSubmit:async g=>{g.preventDefault();try{const g=await(g=>DI.post(`${TI}/bills/payment`,g))(C);if(console.log("Payment Response:",g),200===g.status){u("Payment processed successfully!","success"),e(C),d(),t(!0);const g=(new Date).toLocaleDateString();I("/receipt",{state:{paymentDetails:C,date:g}})}else u("Failed to process payment. Please check your details.","error")}catch(n){console.error("Payment error:",n),u("An error occurred while processing the payment.","error")}},className:"bg-white p-6 rounded shadow",children:[(0,Sg.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Make Payment"}),(0,Sg.jsxs)("div",{className:"mb-4",children:[(0,Sg.jsx)("label",{className:"block mb-2",children:"Patient Name"}),(0,Sg.jsx)("input",{type:"text",value:C.patientName,onChange:g=>l({...C,patientName:g.target.value}),required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,Sg.jsxs)("div",{className:"mb-4",children:[(0,Sg.jsx)("label",{className:"block mb-2",children:"Patient Number"}),(0,Sg.jsx)("input",{type:"tel",value:C.patientNumber,onChange:g=>l({...C,patientNumber:g.target.value}),required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,Sg.jsxs)("div",{className:"mb-4",children:[(0,Sg.jsx)("label",{className:"block mb-2",children:"Amount"}),(0,Sg.jsx)("input",{type:"number",value:C.amount,onChange:g=>l({...C,amount:g.target.value}),required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,Sg.jsxs)("div",{className:"mb-4",children:[(0,Sg.jsx)("label",{className:"block mb-2",children:"BID"}),(0,Sg.jsx)("input",{type:"text",value:C.bid,readOnly:!0,className:"w-full px-3 py-2 border rounded bg-gray-200"})]}),(0,Sg.jsxs)("div",{className:"flex space-x-2 mt-4",children:[(0,Sg.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded hover:bg-blue-700",children:"Make Payment"}),(0,Sg.jsx)("button",{type:"button",onClick:()=>r(!o),className:"flex-1 bg-green-600 text-white py-2 rounded hover:bg-green-700",children:o?"Hide QR Scanner":"Scan QR"})]})]}),o&&(0,Sg.jsxs)("div",{className:"bg-white p-6 rounded shadow",children:[(0,Sg.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Scan QR Code"}),(0,Sg.jsx)(PI(),{delay:300,onError:g=>{console.error("QR Scanner Error:",g.message),c(g.message)},onScan:g=>{if(g)try{const e=JSON.parse(g.text);e.bid&&e.bloodType?(l({...C,bid:e.bid,bloodType:e.bloodType}),c(null),r(!1)):c("Invalid QR code data")}catch(e){c("Error parsing QR code data")}},style:{width:"100%"}}),a&&(0,Sg.jsx)("p",{className:"text-red-500",children:a})]})]})};var $I=I(9686),gt=I.n($I),et=I(1629),It=I.n(et),tt=I(6604),nt=I.n(tt),Ct=I(3097),lt=I.n(Ct),ot=I(7424),rt=I.n(ot),at=I(9889),ct=I.n(at);function it(g){var e,I,t="";if("string"==typeof g||"number"==typeof g)t+=g;else if("object"==typeof g)if(Array.isArray(g)){var n=g.length;for(e=0;e<n;e++)g[e]&&(I=it(g[e]))&&(t&&(t+=" "),t+=I)}else for(I in g)g[I]&&(t&&(t+=" "),t+=I);return t}const At=function(){for(var g,e,I=0,t="",n=arguments.length;I<n;I++)(g=arguments[I])&&(e=it(g))&&(t&&(t+=" "),t+=e);return t};var ut="Invariant failed";function dt(g,e){if(!g)throw new Error(ut)}var st=I(620),bt=I.n(st),mt=I(6686),Zt=I.n(mt),yt=I(9062),pt=I(5268),Gt=I.n(pt),ht=I(9160),Bt=I.n(ht),St=function(g){return 0===g?0:g>0?1:-1},Wt=function(g){return bt()(g)&&g.indexOf("%")===g.length-1},ft=function(g){return Bt()(g)&&!Gt()(g)},Vt=function(g){return ft(g)||bt()(g)},vt=0,Xt=function(g){var e=++vt;return"".concat(g||"").concat(e)},Rt=function(g,e){var I,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!ft(g)&&!bt()(g))return t;if(Wt(g)){var C=g.indexOf("%");I=e*parseFloat(g.slice(0,C))/100}else I=+g;return Gt()(I)&&(I=t),n&&I>e&&(I=e),I},Jt=function(g){if(!g)return null;var e=Object.keys(g);return e&&e.length?g[e[0]]:null},kt=function(g,e){return ft(g)&&ft(e)?function(I){return g+I*(e-g)}:function(){return e}};function Yt(g,e,I){return g&&g.length?g.find((function(g){return g&&("function"===typeof e?e(g):lt()(g,e))===I})):null}function Ht(g,e){for(var I in g)if({}.hasOwnProperty.call(g,I)&&(!{}.hasOwnProperty.call(e,I)||g[I]!==e[I]))return!1;for(var t in e)if({}.hasOwnProperty.call(e,t)&&!{}.hasOwnProperty.call(g,t))return!1;return!0}function wt(g){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},wt(g)}var Nt=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Kt=["points","pathLength"],Ft={svg:["viewBox","children"],polygon:Kt,polyline:Kt},xt=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Et=function(g,e){if(!g||"function"===typeof g||"boolean"===typeof g)return null;var I=g;if((0,n.isValidElement)(g)&&(I=g.props),!Zt()(I))return null;var t={};return Object.keys(I).forEach((function(g){xt.includes(g)&&(t[g]=e||function(e){return I[g](I,e)})})),t},Mt=function(g,e,I){if(!Zt()(g)||"object"!==wt(g))return null;var t=null;return Object.keys(g).forEach((function(n){var C=g[n];xt.includes(n)&&"function"===typeof C&&(t||(t={}),t[n]=function(g,e,I){return function(t){return g(e,I,t),null}}(C,e,I))})),t},zt=["children"],Ut=["children"];function Qt(g,e){if(null==g)return{};var I,t,n=function(g,e){if(null==g)return{};var I={};for(var t in g)if(Object.prototype.hasOwnProperty.call(g,t)){if(e.indexOf(t)>=0)continue;I[t]=g[t]}return I}(g,e);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(n[I]=g[I])}return n}var Lt={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},Dt=function(g){return"string"===typeof g?g:g?g.displayName||g.name||"Component":""},Tt=null,jt=null,Ot=function g(e){if(e===Tt&&Array.isArray(jt))return jt;var I=[];return n.Children.forEach(e,(function(e){gt()(e)||((0,yt.isFragment)(e)?I=I.concat(g(e.props.children)):I.push(e))})),jt=I,Tt=e,I};function Pt(g,e){var I=[],t=[];return t=Array.isArray(e)?e.map((function(g){return Dt(g)})):[Dt(e)],Ot(g).forEach((function(g){var e=lt()(g,"type.displayName")||lt()(g,"type.name");-1!==t.indexOf(e)&&I.push(g)})),I}function qt(g,e){var I=Pt(g,e);return I&&I[0]}var _t=function(g){if(!g||!g.props)return!1;var e=g.props,I=e.width,t=e.height;return!(!ft(I)||I<=0||!ft(t)||t<=0)},$t=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],gn=function(g){return g&&g.type&&bt()(g.type)&&$t.indexOf(g.type)>=0},en=function(g,e,I){if(!g||"function"===typeof g||"boolean"===typeof g)return null;var t=g;if((0,n.isValidElement)(g)&&(t=g.props),!Zt()(t))return null;var C={};return Object.keys(t).forEach((function(g){var n;(function(g,e,I,t){var n,C=null!==(n=null===Ft||void 0===Ft?void 0:Ft[t])&&void 0!==n?n:[];return!It()(g)&&(t&&C.includes(e)||Nt.includes(e))||I&&xt.includes(e)})(null===(n=t)||void 0===n?void 0:n[g],g,e,I)&&(C[g]=t[g])})),C},In=function g(e,I){if(e===I)return!0;var t=n.Children.count(e);if(t!==n.Children.count(I))return!1;if(0===t)return!0;if(1===t)return tn(Array.isArray(e)?e[0]:e,Array.isArray(I)?I[0]:I);for(var C=0;C<t;C++){var l=e[C],o=I[C];if(Array.isArray(l)||Array.isArray(o)){if(!g(l,o))return!1}else if(!tn(l,o))return!1}return!0},tn=function(g,e){if(gt()(g)&&gt()(e))return!0;if(!gt()(g)&&!gt()(e)){var I=g.props||{},t=I.children,n=Qt(I,zt),C=e.props||{},l=C.children,o=Qt(C,Ut);return t&&l?Ht(n,o)&&In(t,l):!t&&!l&&Ht(n,o)}return!1},nn=function(g,e){var I=[],t={};return Ot(g).forEach((function(g,n){if(gn(g))I.push(g);else if(g){var C=Dt(g.type),l=e[C]||{},o=l.handler,r=l.once;if(o&&(!r||!t[C])){var a=o(g,C,n);I.push(a),t[C]=!0}}})),I},Cn=["children","width","height","viewBox","className","style","title","desc"];function ln(){return ln=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},ln.apply(this,arguments)}function on(g,e){if(null==g)return{};var I,t,n=function(g,e){if(null==g)return{};var I={};for(var t in g)if(Object.prototype.hasOwnProperty.call(g,t)){if(e.indexOf(t)>=0)continue;I[t]=g[t]}return I}(g,e);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(n[I]=g[I])}return n}function rn(g){var e=g.children,I=g.width,t=g.height,C=g.viewBox,l=g.className,o=g.style,r=g.title,a=g.desc,c=on(g,Cn),i=C||{width:I,height:t,x:0,y:0},A=At("recharts-surface",l);return n.createElement("svg",ln({},en(c,!0,"svg"),{className:A,width:I,height:t,style:o,viewBox:"".concat(i.x," ").concat(i.y," ").concat(i.width," ").concat(i.height)}),n.createElement("title",null,r),n.createElement("desc",null,a),e)}var an=["children","className"];function cn(){return cn=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},cn.apply(this,arguments)}function An(g,e){if(null==g)return{};var I,t,n=function(g,e){if(null==g)return{};var I={};for(var t in g)if(Object.prototype.hasOwnProperty.call(g,t)){if(e.indexOf(t)>=0)continue;I[t]=g[t]}return I}(g,e);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(n[I]=g[I])}return n}var un=n.forwardRef((function(g,e){var I=g.children,t=g.className,C=An(g,an),l=At("recharts-layer",t);return n.createElement("g",cn({className:l},en(C,!0),{ref:e}),I)}));function dn(g){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},dn(g)}function sn(){return sn=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},sn.apply(this,arguments)}function bn(g,e){return function(g){if(Array.isArray(g))return g}(g)||function(g,e){var I=null==g?null:"undefined"!=typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null!=I){var t,n,C,l,o=[],r=!0,a=!1;try{if(C=(I=I.call(g)).next,0===e){if(Object(I)!==I)return;r=!1}else for(;!(r=(t=C.call(I)).done)&&(o.push(t.value),o.length!==e);r=!0);}catch(g){a=!0,n=g}finally{try{if(!r&&null!=I.return&&(l=I.return(),Object(l)!==l))return}finally{if(a)throw n}}return o}}(g,e)||function(g,e){if(!g)return;if("string"===typeof g)return mn(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);"Object"===I&&g.constructor&&(I=g.constructor.name);if("Map"===I||"Set"===I)return Array.from(g);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return mn(g,e)}(g,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mn(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}function Zn(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function yn(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?Zn(Object(I),!0).forEach((function(e){pn(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):Zn(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function pn(g,e,I){return e=function(g){var e=function(g,e){if("object"!=dn(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=dn(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==dn(e)?e:e+""}(e),e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function Gn(g){return Array.isArray(g)&&Vt(g[0])&&Vt(g[1])?g.join(" ~ "):g}var hn=function(g){var e=g.separator,I=void 0===e?" : ":e,t=g.contentStyle,C=void 0===t?{}:t,l=g.itemStyle,o=void 0===l?{}:l,r=g.labelStyle,a=void 0===r?{}:r,c=g.payload,i=g.formatter,A=g.itemSorter,u=g.wrapperClassName,d=g.labelClassName,s=g.label,b=g.labelFormatter,m=g.accessibilityLayer,Z=void 0!==m&&m,y=yn({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},C),p=yn({margin:0},a),G=!gt()(s),h=G?s:"",B=At("recharts-default-tooltip",u),S=At("recharts-tooltip-label",d);G&&b&&void 0!==c&&null!==c&&(h=b(s,c));var W=Z?{role:"status","aria-live":"assertive"}:{};return n.createElement("div",sn({className:B,style:y},W),n.createElement("p",{className:S,style:p},n.isValidElement(h)?h:"".concat(h)),function(){if(c&&c.length){var g=(A?rt()(c,A):c).map((function(g,e){if("none"===g.type)return null;var t=yn({display:"block",paddingTop:4,paddingBottom:4,color:g.color||"#000"},o),C=g.formatter||i||Gn,l=g.value,r=g.name,a=l,A=r;if(C&&null!=a&&null!=A){var u=C(l,r,g,e,c);if(Array.isArray(u)){var d=bn(u,2);a=d[0],A=d[1]}else a=u}return n.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(e),style:t},Vt(A)?n.createElement("span",{className:"recharts-tooltip-item-name"},A):null,Vt(A)?n.createElement("span",{className:"recharts-tooltip-item-separator"},I):null,n.createElement("span",{className:"recharts-tooltip-item-value"},a),n.createElement("span",{className:"recharts-tooltip-item-unit"},g.unit||""))}));return n.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},g)}return null}())};function Bn(g){return Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},Bn(g)}function Sn(g,e,I){return e=function(g){var e=function(g,e){if("object"!=Bn(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=Bn(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==Bn(e)?e:e+""}(e),e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}var Wn="recharts-tooltip-wrapper",fn={visibility:"hidden"};function Vn(g){var e=g.coordinate,I=g.translateX,t=g.translateY;return At(Wn,Sn(Sn(Sn(Sn({},"".concat(Wn,"-right"),ft(I)&&e&&ft(e.x)&&I>=e.x),"".concat(Wn,"-left"),ft(I)&&e&&ft(e.x)&&I<e.x),"".concat(Wn,"-bottom"),ft(t)&&e&&ft(e.y)&&t>=e.y),"".concat(Wn,"-top"),ft(t)&&e&&ft(e.y)&&t<e.y))}function vn(g){var e=g.allowEscapeViewBox,I=g.coordinate,t=g.key,n=g.offsetTopLeft,C=g.position,l=g.reverseDirection,o=g.tooltipDimension,r=g.viewBox,a=g.viewBoxDimension;if(C&&ft(C[t]))return C[t];var c=I[t]-o-n,i=I[t]+n;return e[t]?l[t]?c:i:l[t]?c<r[t]?Math.max(i,r[t]):Math.max(c,r[t]):i+o>r[t]+a?Math.max(c,r[t]):Math.max(i,r[t])}function Xn(g){return Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},Xn(g)}function Rn(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function Jn(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?Rn(Object(I),!0).forEach((function(e){Kn(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):Rn(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function kn(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,Fn(t.key),t)}}function Yn(g,e,I){return e=wn(e),function(g,e){if(e&&("object"===Xn(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(g)}(g,Hn()?Reflect.construct(e,I||[],wn(g).constructor):e.apply(g,I))}function Hn(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(g){}return(Hn=function(){return!!g})()}function wn(g){return wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},wn(g)}function Nn(g,e){return Nn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,e){return g.__proto__=e,g},Nn(g,e)}function Kn(g,e,I){return(e=Fn(e))in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function Fn(g){var e=function(g,e){if("object"!=Xn(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=Xn(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==Xn(e)?e:e+""}var xn=function(g){function e(){var g;!function(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var I=arguments.length,t=new Array(I),n=0;n<I;n++)t[n]=arguments[n];return Kn(g=Yn(this,e,[].concat(t)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Kn(g,"handleKeyDown",(function(e){var I,t,n,C;"Escape"===e.key&&g.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(I=null===(t=g.props.coordinate)||void 0===t?void 0:t.x)&&void 0!==I?I:0,y:null!==(n=null===(C=g.props.coordinate)||void 0===C?void 0:C.y)&&void 0!==n?n:0}})})),g}return function(g,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(e&&e.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),e&&Nn(g,e)}(e,g),I=e,(t=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var g=this.wrapperNode.getBoundingClientRect();(Math.abs(g.width-this.state.lastBoundingBox.width)>1||Math.abs(g.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:g.width,height:g.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var g,e;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(g=this.props.coordinate)||void 0===g?void 0:g.x)===this.state.dismissedAtCoordinate.x&&(null===(e=this.props.coordinate)||void 0===e?void 0:e.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var g=this,e=this.props,I=e.active,t=e.allowEscapeViewBox,C=e.animationDuration,l=e.animationEasing,o=e.children,r=e.coordinate,a=e.hasPayload,c=e.isAnimationActive,i=e.offset,A=e.position,u=e.reverseDirection,d=e.useTranslate3d,s=e.viewBox,b=e.wrapperStyle,m=function(g){var e,I,t=g.allowEscapeViewBox,n=g.coordinate,C=g.offsetTopLeft,l=g.position,o=g.reverseDirection,r=g.tooltipBox,a=g.useTranslate3d,c=g.viewBox;return{cssProperties:r.height>0&&r.width>0&&n?function(g){var e=g.translateX,I=g.translateY;return{transform:g.useTranslate3d?"translate3d(".concat(e,"px, ").concat(I,"px, 0)"):"translate(".concat(e,"px, ").concat(I,"px)")}}({translateX:e=vn({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:C,position:l,reverseDirection:o,tooltipDimension:r.width,viewBox:c,viewBoxDimension:c.width}),translateY:I=vn({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:C,position:l,reverseDirection:o,tooltipDimension:r.height,viewBox:c,viewBoxDimension:c.height}),useTranslate3d:a}):fn,cssClasses:Vn({translateX:e,translateY:I,coordinate:n})}}({allowEscapeViewBox:t,coordinate:r,offsetTopLeft:i,position:A,reverseDirection:u,tooltipBox:this.state.lastBoundingBox,useTranslate3d:d,viewBox:s}),Z=m.cssClasses,y=m.cssProperties,p=Jn(Jn({transition:c&&I?"transform ".concat(C,"ms ").concat(l):void 0},y),{},{pointerEvents:"none",visibility:!this.state.dismissed&&I&&a?"visible":"hidden",position:"absolute",top:0,left:0},b);return n.createElement("div",{tabIndex:-1,className:Z,style:p,ref:function(e){g.wrapperNode=e}},o)}}])&&kn(I.prototype,t),C&&kn(I,C),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,t,C}(n.PureComponent),En={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(g){return En[g]},set:function(g,e){if("string"===typeof g)En[g]=e;else{var I=Object.keys(g);I&&I.length&&I.forEach((function(e){En[e]=g[e]}))}}},Mn=I(977),zn=I.n(Mn);function Un(g,e,I){return!0===e?zn()(g,I):It()(e)?zn()(g,e):g}function Qn(g){return Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},Qn(g)}function Ln(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function Dn(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?Ln(Object(I),!0).forEach((function(e){_n(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):Ln(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function Tn(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,$n(t.key),t)}}function jn(g,e,I){return e=Pn(e),function(g,e){if(e&&("object"===Qn(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(g)}(g,On()?Reflect.construct(e,I||[],Pn(g).constructor):e.apply(g,I))}function On(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(g){}return(On=function(){return!!g})()}function Pn(g){return Pn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},Pn(g)}function qn(g,e){return qn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,e){return g.__proto__=e,g},qn(g,e)}function _n(g,e,I){return(e=$n(e))in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function $n(g){var e=function(g,e){if("object"!=Qn(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=Qn(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==Qn(e)?e:e+""}function gC(g){return g.dataKey}var eC=function(g){function e(){return function(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),jn(this,e,arguments)}return function(g,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(e&&e.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),e&&qn(g,e)}(e,g),I=e,(t=[{key:"render",value:function(){var g=this,e=this.props,I=e.active,t=e.allowEscapeViewBox,C=e.animationDuration,l=e.animationEasing,o=e.content,r=e.coordinate,a=e.filterNull,c=e.isAnimationActive,i=e.offset,A=e.payload,u=e.payloadUniqBy,d=e.position,s=e.reverseDirection,b=e.useTranslate3d,m=e.viewBox,Z=e.wrapperStyle,y=null!==A&&void 0!==A?A:[];a&&y.length&&(y=Un(A.filter((function(e){return null!=e.value&&(!0!==e.hide||g.props.includeHidden)})),u,gC));var p=y.length>0;return n.createElement(xn,{allowEscapeViewBox:t,animationDuration:C,animationEasing:l,isAnimationActive:c,active:I,coordinate:r,hasPayload:p,offset:i,position:d,reverseDirection:s,useTranslate3d:b,viewBox:m,wrapperStyle:Z},function(g,e){return n.isValidElement(g)?n.cloneElement(g,e):"function"===typeof g?n.createElement(g,e):n.createElement(hn,e)}(o,Dn(Dn({},this.props),{},{payload:y})))}}])&&Tn(I.prototype,t),C&&Tn(I,C),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,t,C}(n.PureComponent);_n(eC,"displayName","Tooltip"),_n(eC,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!En.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var IC=function(g,e){for(var I=arguments.length,t=new Array(I>2?I-2:0),n=2;n<I;n++)t[n-2]=arguments[n]},tC=I(643),nC=I.n(tC);Math.abs,Math.atan2;const CC=Math.cos,lC=(Math.max,Math.min,Math.sin),oC=Math.sqrt,rC=Math.PI,aC=2*rC;const cC={draw(g,e){const I=oC(e/rC);g.moveTo(I,0),g.arc(0,0,I,0,aC)}},iC={draw(g,e){const I=oC(e/5)/2;g.moveTo(-3*I,-I),g.lineTo(-I,-I),g.lineTo(-I,-3*I),g.lineTo(I,-3*I),g.lineTo(I,-I),g.lineTo(3*I,-I),g.lineTo(3*I,I),g.lineTo(I,I),g.lineTo(I,3*I),g.lineTo(-I,3*I),g.lineTo(-I,I),g.lineTo(-3*I,I),g.closePath()}},AC=oC(1/3),uC=2*AC,dC={draw(g,e){const I=oC(e/uC),t=I*AC;g.moveTo(0,-I),g.lineTo(t,0),g.lineTo(0,I),g.lineTo(-t,0),g.closePath()}},sC={draw(g,e){const I=oC(e),t=-I/2;g.rect(t,t,I,I)}},bC=lC(rC/10)/lC(7*rC/10),mC=lC(aC/10)*bC,ZC=-CC(aC/10)*bC,yC={draw(g,e){const I=oC(.8908130915292852*e),t=mC*I,n=ZC*I;g.moveTo(0,-I),g.lineTo(t,n);for(let C=1;C<5;++C){const e=aC*C/5,l=CC(e),o=lC(e);g.lineTo(o*I,-l*I),g.lineTo(l*t-o*n,o*t+l*n)}g.closePath()}},pC=oC(3),GC={draw(g,e){const I=-oC(e/(3*pC));g.moveTo(0,2*I),g.lineTo(-pC*I,-I),g.lineTo(pC*I,-I),g.closePath()}},hC=-.5,BC=oC(3)/2,SC=1/oC(12),WC=3*(SC/2+1),fC={draw(g,e){const I=oC(e/WC),t=I/2,n=I*SC,C=t,l=I*SC+I,o=-C,r=l;g.moveTo(t,n),g.lineTo(C,l),g.lineTo(o,r),g.lineTo(hC*t-BC*n,BC*t+hC*n),g.lineTo(hC*C-BC*l,BC*C+hC*l),g.lineTo(hC*o-BC*r,BC*o+hC*r),g.lineTo(hC*t+BC*n,hC*n-BC*t),g.lineTo(hC*C+BC*l,hC*l-BC*C),g.lineTo(hC*o+BC*r,hC*r-BC*o),g.closePath()}};function VC(g){return function(){return g}}const vC=Math.PI,XC=2*vC,RC=1e-6,JC=XC-RC;function kC(g){this._+=g[0];for(let e=1,I=g.length;e<I;++e)this._+=arguments[e]+g[e]}class YC{constructor(g){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==g?kC:function(g){let e=Math.floor(g);if(!(e>=0))throw new Error(`invalid digits: ${g}`);if(e>15)return kC;const I=10**e;return function(g){this._+=g[0];for(let e=1,t=g.length;e<t;++e)this._+=Math.round(arguments[e]*I)/I+g[e]}}(g)}moveTo(g,e){this._append`M${this._x0=this._x1=+g},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(g,e){this._append`L${this._x1=+g},${this._y1=+e}`}quadraticCurveTo(g,e,I,t){this._append`Q${+g},${+e},${this._x1=+I},${this._y1=+t}`}bezierCurveTo(g,e,I,t,n,C){this._append`C${+g},${+e},${+I},${+t},${this._x1=+n},${this._y1=+C}`}arcTo(g,e,I,t,n){if(g=+g,e=+e,I=+I,t=+t,(n=+n)<0)throw new Error(`negative radius: ${n}`);let C=this._x1,l=this._y1,o=I-g,r=t-e,a=C-g,c=l-e,i=a*a+c*c;if(null===this._x1)this._append`M${this._x1=g},${this._y1=e}`;else if(i>RC)if(Math.abs(c*o-r*a)>RC&&n){let A=I-C,u=t-l,d=o*o+r*r,s=A*A+u*u,b=Math.sqrt(d),m=Math.sqrt(i),Z=n*Math.tan((vC-Math.acos((d+i-s)/(2*b*m)))/2),y=Z/m,p=Z/b;Math.abs(y-1)>RC&&this._append`L${g+y*a},${e+y*c}`,this._append`A${n},${n},0,0,${+(c*A>a*u)},${this._x1=g+p*o},${this._y1=e+p*r}`}else this._append`L${this._x1=g},${this._y1=e}`;else;}arc(g,e,I,t,n,C){if(g=+g,e=+e,C=!!C,(I=+I)<0)throw new Error(`negative radius: ${I}`);let l=I*Math.cos(t),o=I*Math.sin(t),r=g+l,a=e+o,c=1^C,i=C?t-n:n-t;null===this._x1?this._append`M${r},${a}`:(Math.abs(this._x1-r)>RC||Math.abs(this._y1-a)>RC)&&this._append`L${r},${a}`,I&&(i<0&&(i=i%XC+XC),i>JC?this._append`A${I},${I},0,1,${c},${g-l},${e-o}A${I},${I},0,1,${c},${this._x1=r},${this._y1=a}`:i>RC&&this._append`A${I},${I},0,${+(i>=vC)},${c},${this._x1=g+I*Math.cos(n)},${this._y1=e+I*Math.sin(n)}`)}rect(g,e,I,t){this._append`M${this._x0=this._x1=+g},${this._y0=this._y1=+e}h${I=+I}v${+t}h${-I}Z`}toString(){return this._}}function HC(g){let e=3;return g.digits=function(I){if(!arguments.length)return e;if(null==I)e=null;else{const g=Math.floor(I);if(!(g>=0))throw new RangeError(`invalid digits: ${I}`);e=g}return g},()=>new YC(e)}oC(3),oC(3);function wC(g){return wC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},wC(g)}var NC=["type","size","sizeType"];function KC(){return KC=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},KC.apply(this,arguments)}function FC(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function xC(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?FC(Object(I),!0).forEach((function(e){EC(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):FC(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function EC(g,e,I){return e=function(g){var e=function(g,e){if("object"!=wC(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=wC(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==wC(e)?e:e+""}(e),e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function MC(g,e){if(null==g)return{};var I,t,n=function(g,e){if(null==g)return{};var I={};for(var t in g)if(Object.prototype.hasOwnProperty.call(g,t)){if(e.indexOf(t)>=0)continue;I[t]=g[t]}return I}(g,e);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(n[I]=g[I])}return n}var zC={symbolCircle:cC,symbolCross:iC,symbolDiamond:dC,symbolSquare:sC,symbolStar:yC,symbolTriangle:GC,symbolWye:fC},UC=Math.PI/180,QC=function(g){var e=g.type,I=void 0===e?"circle":e,t=g.size,C=void 0===t?64:t,l=g.sizeType,o=void 0===l?"area":l,r=xC(xC({},MC(g,NC)),{},{type:I,size:C,sizeType:o}),a=r.className,c=r.cx,i=r.cy,A=en(r,!0);return c===+c&&i===+i&&C===+C?n.createElement("path",KC({},A,{className:At("recharts-symbols",a),transform:"translate(".concat(c,", ").concat(i,")"),d:function(){var g=function(g){var e="symbol".concat(nC()(g));return zC[e]||cC}(I),e=function(g,e){let I=null,t=HC(n);function n(){let n;if(I||(I=n=t()),g.apply(this,arguments).draw(I,+e.apply(this,arguments)),n)return I=null,n+""||null}return g="function"===typeof g?g:VC(g||cC),e="function"===typeof e?e:VC(void 0===e?64:+e),n.type=function(e){return arguments.length?(g="function"===typeof e?e:VC(e),n):g},n.size=function(g){return arguments.length?(e="function"===typeof g?g:VC(+g),n):e},n.context=function(g){return arguments.length?(I=null==g?null:g,n):I},n}().type(g).size(function(g,e,I){if("area"===e)return g;switch(I){case"cross":return 5*g*g/9;case"diamond":return.5*g*g/Math.sqrt(3);case"square":return g*g;case"star":var t=18*UC;return 1.25*g*g*(Math.tan(t)-Math.tan(2*t)*Math.pow(Math.tan(t),2));case"triangle":return Math.sqrt(3)*g*g/4;case"wye":return(21-10*Math.sqrt(3))*g*g/8;default:return Math.PI*g*g/4}}(C,o,I));return e()}()})):null};function LC(g){return LC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},LC(g)}function DC(){return DC=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},DC.apply(this,arguments)}function TC(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function jC(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,gl(t.key),t)}}function OC(g,e,I){return e=qC(e),function(g,e){if(e&&("object"===LC(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(g)}(g,PC()?Reflect.construct(e,I||[],qC(g).constructor):e.apply(g,I))}function PC(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(g){}return(PC=function(){return!!g})()}function qC(g){return qC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},qC(g)}function _C(g,e){return _C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,e){return g.__proto__=e,g},_C(g,e)}function $C(g,e,I){return(e=gl(e))in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function gl(g){var e=function(g,e){if("object"!=LC(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=LC(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==LC(e)?e:e+""}QC.registerSymbol=function(g,e){zC["symbol".concat(nC()(g))]=e};var el=32,Il=function(g){function e(){return function(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),OC(this,e,arguments)}return function(g,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(e&&e.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),e&&_C(g,e)}(e,g),I=e,t=[{key:"renderIcon",value:function(g){var e=this.props.inactiveColor,I=16,t=el/6,C=el/3,l=g.inactive?e:g.color;if("plainline"===g.type)return n.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:g.payload.strokeDasharray,x1:0,y1:I,x2:el,y2:I,className:"recharts-legend-icon"});if("line"===g.type)return n.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(I,"h").concat(C,"\n            A").concat(t,",").concat(t,",0,1,1,").concat(2*C,",").concat(I,"\n            H").concat(el,"M").concat(2*C,",").concat(I,"\n            A").concat(t,",").concat(t,",0,1,1,").concat(C,",").concat(I),className:"recharts-legend-icon"});if("rect"===g.type)return n.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(4,"h").concat(el,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(n.isValidElement(g.legendIcon)){var o=function(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?TC(Object(I),!0).forEach((function(e){$C(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):TC(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}({},g);return delete o.legendIcon,n.cloneElement(g.legendIcon,o)}return n.createElement(QC,{fill:l,cx:I,cy:I,size:el,sizeType:"diameter",type:g.type})}},{key:"renderItems",value:function(){var g=this,e=this.props,I=e.payload,t=e.iconSize,C=e.layout,l=e.formatter,o=e.inactiveColor,r={x:0,y:0,width:el,height:el},a={display:"horizontal"===C?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return I.map((function(e,I){var C=e.formatter||l,i=At($C($C({"recharts-legend-item":!0},"legend-item-".concat(I),!0),"inactive",e.inactive));if("none"===e.type)return null;var A=It()(e.value)?null:e.value;IC(!It()(e.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var u=e.inactive?o:e.color;return n.createElement("li",DC({className:i,style:a,key:"legend-item-".concat(I)},Mt(g.props,e,I)),n.createElement(rn,{width:t,height:t,viewBox:r,style:c},g.renderIcon(e)),n.createElement("span",{className:"recharts-legend-item-text",style:{color:u}},C?C(A,e,I):A))}))}},{key:"render",value:function(){var g=this.props,e=g.payload,I=g.layout,t=g.align;if(!e||!e.length)return null;var C={padding:0,margin:0,textAlign:"horizontal"===I?t:"left"};return n.createElement("ul",{className:"recharts-default-legend",style:C},this.renderItems())}}],t&&jC(I.prototype,t),C&&jC(I,C),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,t,C}(n.PureComponent);function tl(g){return tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},tl(g)}$C(Il,"displayName","Legend"),$C(Il,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var nl=["ref"];function Cl(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function ll(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?Cl(Object(I),!0).forEach((function(e){Al(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):Cl(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function ol(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,ul(t.key),t)}}function rl(g,e,I){return e=cl(e),function(g,e){if(e&&("object"===tl(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(g)}(g,al()?Reflect.construct(e,I||[],cl(g).constructor):e.apply(g,I))}function al(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(g){}return(al=function(){return!!g})()}function cl(g){return cl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},cl(g)}function il(g,e){return il=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,e){return g.__proto__=e,g},il(g,e)}function Al(g,e,I){return(e=ul(e))in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function ul(g){var e=function(g,e){if("object"!=tl(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=tl(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==tl(e)?e:e+""}function dl(g,e){if(null==g)return{};var I,t,n=function(g,e){if(null==g)return{};var I={};for(var t in g)if(Object.prototype.hasOwnProperty.call(g,t)){if(e.indexOf(t)>=0)continue;I[t]=g[t]}return I}(g,e);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(n[I]=g[I])}return n}function sl(g){return g.value}var bl=function(g){function e(){var g;!function(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var I=arguments.length,t=new Array(I),n=0;n<I;n++)t[n]=arguments[n];return Al(g=rl(this,e,[].concat(t)),"lastBoundingBox",{width:-1,height:-1}),g}return function(g,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(e&&e.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),e&&il(g,e)}(e,g),I=e,C=[{key:"getWithHeight",value:function(g,e){var I=ll(ll({},this.defaultProps),g.props).layout;return"vertical"===I&&ft(g.props.height)?{height:g.props.height}:"horizontal"===I?{width:g.props.width||e}:null}}],(t=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var g=this.wrapperNode.getBoundingClientRect();return g.height=this.wrapperNode.offsetHeight,g.width=this.wrapperNode.offsetWidth,g}return null}},{key:"updateBBox",value:function(){var g=this.props.onBBoxUpdate,e=this.getBBox();e?(Math.abs(e.width-this.lastBoundingBox.width)>1||Math.abs(e.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=e.width,this.lastBoundingBox.height=e.height,g&&g(e)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,g&&g(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ll({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(g){var e,I,t=this.props,n=t.layout,C=t.align,l=t.verticalAlign,o=t.margin,r=t.chartWidth,a=t.chartHeight;return g&&(void 0!==g.left&&null!==g.left||void 0!==g.right&&null!==g.right)||(e="center"===C&&"vertical"===n?{left:((r||0)-this.getBBoxSnapshot().width)/2}:"right"===C?{right:o&&o.right||0}:{left:o&&o.left||0}),g&&(void 0!==g.top&&null!==g.top||void 0!==g.bottom&&null!==g.bottom)||(I="middle"===l?{top:((a||0)-this.getBBoxSnapshot().height)/2}:"bottom"===l?{bottom:o&&o.bottom||0}:{top:o&&o.top||0}),ll(ll({},e),I)}},{key:"render",value:function(){var g=this,e=this.props,I=e.content,t=e.width,C=e.height,l=e.wrapperStyle,o=e.payloadUniqBy,r=e.payload,a=ll(ll({position:"absolute",width:t||"auto",height:C||"auto"},this.getDefaultPosition(l)),l);return n.createElement("div",{className:"recharts-legend-wrapper",style:a,ref:function(e){g.wrapperNode=e}},function(g,e){if(n.isValidElement(g))return n.cloneElement(g,e);if("function"===typeof g)return n.createElement(g,e);e.ref;var I=dl(e,nl);return n.createElement(Il,I)}(I,ll(ll({},this.props),{},{payload:Un(r,o,sl)})))}}])&&ol(I.prototype,t),C&&ol(I,C),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,t,C}(n.PureComponent);function ml(){return ml=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},ml.apply(this,arguments)}Al(bl,"displayName","Legend"),Al(bl,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Zl=function(g){var e=g.cx,I=g.cy,t=g.r,C=g.className,l=At("recharts-dot",C);return e===+e&&I===+I&&t===+t?n.createElement("circle",ml({},en(g,!1),Et(g),{className:l,cx:e,cy:I,r:t})):null},yl=I(5173),pl=I.n(yl),Gl=Object.getOwnPropertyNames,hl=Object.getOwnPropertySymbols,Bl=Object.prototype.hasOwnProperty;function Sl(g,e){return function(I,t,n){return g(I,t,n)&&e(I,t,n)}}function Wl(g){return function(e,I,t){if(!e||!I||"object"!==typeof e||"object"!==typeof I)return g(e,I,t);var n=t.cache,C=n.get(e),l=n.get(I);if(C&&l)return C===I&&l===e;n.set(e,I),n.set(I,e);var o=g(e,I,t);return n.delete(e),n.delete(I),o}}function fl(g){return Gl(g).concat(hl(g))}var Vl=Object.hasOwn||function(g,e){return Bl.call(g,e)};function vl(g,e){return g||e?g===e:g===e||g!==g&&e!==e}var Xl="_owner",Rl=Object.getOwnPropertyDescriptor,Jl=Object.keys;function kl(g,e,I){var t=g.length;if(e.length!==t)return!1;for(;t-- >0;)if(!I.equals(g[t],e[t],t,t,g,e,I))return!1;return!0}function Yl(g,e){return vl(g.getTime(),e.getTime())}function Hl(g,e,I){if(g.size!==e.size)return!1;for(var t,n,C={},l=g.entries(),o=0;(t=l.next())&&!t.done;){for(var r=e.entries(),a=!1,c=0;(n=r.next())&&!n.done;){var i=t.value,A=i[0],u=i[1],d=n.value,s=d[0],b=d[1];a||C[c]||!(a=I.equals(A,s,o,c,g,e,I)&&I.equals(u,b,A,s,g,e,I))||(C[c]=!0),c++}if(!a)return!1;o++}return!0}function wl(g,e,I){var t,n=Jl(g),C=n.length;if(Jl(e).length!==C)return!1;for(;C-- >0;){if((t=n[C])===Xl&&(g.$$typeof||e.$$typeof)&&g.$$typeof!==e.$$typeof)return!1;if(!Vl(e,t)||!I.equals(g[t],e[t],t,t,g,e,I))return!1}return!0}function Nl(g,e,I){var t,n,C,l=fl(g),o=l.length;if(fl(e).length!==o)return!1;for(;o-- >0;){if((t=l[o])===Xl&&(g.$$typeof||e.$$typeof)&&g.$$typeof!==e.$$typeof)return!1;if(!Vl(e,t))return!1;if(!I.equals(g[t],e[t],t,t,g,e,I))return!1;if(n=Rl(g,t),C=Rl(e,t),(n||C)&&(!n||!C||n.configurable!==C.configurable||n.enumerable!==C.enumerable||n.writable!==C.writable))return!1}return!0}function Kl(g,e){return vl(g.valueOf(),e.valueOf())}function Fl(g,e){return g.source===e.source&&g.flags===e.flags}function xl(g,e,I){if(g.size!==e.size)return!1;for(var t,n,C={},l=g.values();(t=l.next())&&!t.done;){for(var o=e.values(),r=!1,a=0;(n=o.next())&&!n.done;)r||C[a]||!(r=I.equals(t.value,n.value,t.value,n.value,g,e,I))||(C[a]=!0),a++;if(!r)return!1}return!0}function El(g,e){var I=g.length;if(e.length!==I)return!1;for(;I-- >0;)if(g[I]!==e[I])return!1;return!0}var Ml=Array.isArray,zl="function"===typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,Ul=Object.assign,Ql=Object.prototype.toString.call.bind(Object.prototype.toString);var Ll=Dl();Dl({strict:!0}),Dl({circular:!0}),Dl({circular:!0,strict:!0}),Dl({createInternalComparator:function(){return vl}}),Dl({strict:!0,createInternalComparator:function(){return vl}}),Dl({circular:!0,createInternalComparator:function(){return vl}}),Dl({circular:!0,createInternalComparator:function(){return vl},strict:!0});function Dl(g){void 0===g&&(g={});var e,I=g.circular,t=void 0!==I&&I,n=g.createInternalComparator,C=g.createState,l=g.strict,o=void 0!==l&&l,r=function(g){var e=g.circular,I=g.createCustomConfig,t=g.strict,n={areArraysEqual:t?Nl:kl,areDatesEqual:Yl,areMapsEqual:t?Sl(Hl,Nl):Hl,areObjectsEqual:t?Nl:wl,arePrimitiveWrappersEqual:Kl,areRegExpsEqual:Fl,areSetsEqual:t?Sl(xl,Nl):xl,areTypedArraysEqual:t?Nl:El};if(I&&(n=Ul({},n,I(n))),e){var C=Wl(n.areArraysEqual),l=Wl(n.areMapsEqual),o=Wl(n.areObjectsEqual),r=Wl(n.areSetsEqual);n=Ul({},n,{areArraysEqual:C,areMapsEqual:l,areObjectsEqual:o,areSetsEqual:r})}return n}(g),a=function(g){var e=g.areArraysEqual,I=g.areDatesEqual,t=g.areMapsEqual,n=g.areObjectsEqual,C=g.arePrimitiveWrappersEqual,l=g.areRegExpsEqual,o=g.areSetsEqual,r=g.areTypedArraysEqual;return function(g,a,c){if(g===a)return!0;if(null==g||null==a||"object"!==typeof g||"object"!==typeof a)return g!==g&&a!==a;var i=g.constructor;if(i!==a.constructor)return!1;if(i===Object)return n(g,a,c);if(Ml(g))return e(g,a,c);if(null!=zl&&zl(g))return r(g,a,c);if(i===Date)return I(g,a,c);if(i===RegExp)return l(g,a,c);if(i===Map)return t(g,a,c);if(i===Set)return o(g,a,c);var A=Ql(g);return"[object Date]"===A?I(g,a,c):"[object RegExp]"===A?l(g,a,c):"[object Map]"===A?t(g,a,c):"[object Set]"===A?o(g,a,c):"[object Object]"===A?"function"!==typeof g.then&&"function"!==typeof a.then&&n(g,a,c):"[object Arguments]"===A?n(g,a,c):("[object Boolean]"===A||"[object Number]"===A||"[object String]"===A)&&C(g,a,c)}}(r),c=n?n(a):(e=a,function(g,I,t,n,C,l,o){return e(g,I,o)});return function(g){var e=g.circular,I=g.comparator,t=g.createState,n=g.equals,C=g.strict;if(t)return function(g,l){var o=t(),r=o.cache,a=void 0===r?e?new WeakMap:void 0:r,c=o.meta;return I(g,l,{cache:a,equals:n,meta:c,strict:C})};if(e)return function(g,e){return I(g,e,{cache:new WeakMap,equals:n,meta:void 0,strict:C})};var l={cache:void 0,equals:n,meta:void 0,strict:C};return function(g,e){return I(g,e,l)}}({circular:t,comparator:a,createState:C,equals:c,strict:o})}function Tl(g){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,I=-1;requestAnimationFrame((function t(n){I<0&&(I=n),n-I>e?(g(n),I=-1):function(g){"undefined"!==typeof requestAnimationFrame&&requestAnimationFrame(g)}(t)}))}function jl(g){return jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},jl(g)}function Ol(g){return function(g){if(Array.isArray(g))return g}(g)||function(g){if("undefined"!==typeof Symbol&&null!=g[Symbol.iterator]||null!=g["@@iterator"])return Array.from(g)}(g)||function(g,e){if(!g)return;if("string"===typeof g)return Pl(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);"Object"===I&&g.constructor&&(I=g.constructor.name);if("Map"===I||"Set"===I)return Array.from(g);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return Pl(g,e)}(g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pl(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}function ql(){var g=function(){return null},e=!1,I=function I(t){if(!e){if(Array.isArray(t)){if(!t.length)return;var n=Ol(t),C=n[0],l=n.slice(1);return"number"===typeof C?void Tl(I.bind(null,l),C):(I(C),void Tl(I.bind(null,l)))}"object"===jl(t)&&g(t),"function"===typeof t&&t()}};return{stop:function(){e=!0},start:function(g){e=!1,I(g)},subscribe:function(e){return g=e,function(){g=function(){return null}}}}}function _l(g){return _l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_l(g)}function $l(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function go(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?$l(Object(I),!0).forEach((function(e){eo(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):$l(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function eo(g,e,I){return e=function(g){var e=function(g,e){if("object"!==_l(g)||null===g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!==_l(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"===_l(e)?e:String(e)}(e),e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}var Io=function(g){return g},to=function(g,e){return Object.keys(e).reduce((function(I,t){return go(go({},I),{},eo({},t,g(t,e[t])))}),{})},no=function(g,e,I){return g.map((function(g){return"".concat((t=g,t.replace(/([A-Z])/g,(function(g){return"-".concat(g.toLowerCase())})))," ").concat(e,"ms ").concat(I);var t})).join(",")};function Co(g,e){return function(g){if(Array.isArray(g))return g}(g)||function(g,e){var I=null==g?null:"undefined"!=typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null!=I){var t,n,C,l,o=[],r=!0,a=!1;try{if(C=(I=I.call(g)).next,0===e){if(Object(I)!==I)return;r=!1}else for(;!(r=(t=C.call(I)).done)&&(o.push(t.value),o.length!==e);r=!0);}catch(g){a=!0,n=g}finally{try{if(!r&&null!=I.return&&(l=I.return(),Object(l)!==l))return}finally{if(a)throw n}}return o}}(g,e)||oo(g,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lo(g){return function(g){if(Array.isArray(g))return ro(g)}(g)||function(g){if("undefined"!==typeof Symbol&&null!=g[Symbol.iterator]||null!=g["@@iterator"])return Array.from(g)}(g)||oo(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oo(g,e){if(g){if("string"===typeof g)return ro(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);return"Object"===I&&g.constructor&&(I=g.constructor.name),"Map"===I||"Set"===I?Array.from(g):"Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I)?ro(g,e):void 0}}function ro(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}var ao=1e-4,co=function(g,e){return[0,3*g,3*e-6*g,3*g-3*e+1]},io=function(g,e){return g.map((function(g,I){return g*Math.pow(e,I)})).reduce((function(g,e){return g+e}))},Ao=function(g,e){return function(I){var t=co(g,e);return io(t,I)}},uo=function(){for(var g=arguments.length,e=new Array(g),I=0;I<g;I++)e[I]=arguments[I];var t=e[0],n=e[1],C=e[2],l=e[3];if(1===e.length)switch(e[0]){case"linear":t=0,n=0,C=1,l=1;break;case"ease":t=.25,n=.1,C=.25,l=1;break;case"ease-in":t=.42,n=0,C=1,l=1;break;case"ease-out":t=.42,n=0,C=.58,l=1;break;case"ease-in-out":t=0,n=0,C=.58,l=1;break;default:var o=e[0].split("(");if("cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length){var r=Co(o[1].split(")")[0].split(",").map((function(g){return parseFloat(g)})),4);t=r[0],n=r[1],C=r[2],l=r[3]}}[t,C,n,l].every((function(g){return"number"===typeof g&&g>=0&&g<=1}));var a,c,i=Ao(t,C),A=Ao(n,l),u=(a=t,c=C,function(g){var e=co(a,c),I=[].concat(lo(e.map((function(g,e){return g*e})).slice(1)),[0]);return io(I,g)}),d=function(g){return g>1?1:g<0?0:g},s=function(g){for(var e=g>1?1:g,I=e,t=0;t<8;++t){var n=i(I)-e,C=u(I);if(Math.abs(n-e)<ao||C<ao)return A(I);I=d(I-n/C)}return A(I)};return s.isStepper=!1,s},so=function(){for(var g=arguments.length,e=new Array(g),I=0;I<g;I++)e[I]=arguments[I];var t=e[0];if("string"===typeof t)switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return uo(t);case"spring":return function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=g.stiff,I=void 0===e?100:e,t=g.damping,n=void 0===t?8:t,C=g.dt,l=void 0===C?17:C,o=function(g,e,t){var C=t+(-(g-e)*I-t*n)*l/1e3,o=t*l/1e3+g;return Math.abs(o-e)<ao&&Math.abs(C)<ao?[e,0]:[o,C]};return o.isStepper=!0,o.dt=l,o}();default:if("cubic-bezier"===t.split("(")[0])return uo(t)}return"function"===typeof t?t:null};function bo(g){return bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},bo(g)}function mo(g){return function(g){if(Array.isArray(g))return Bo(g)}(g)||function(g){if("undefined"!==typeof Symbol&&null!=g[Symbol.iterator]||null!=g["@@iterator"])return Array.from(g)}(g)||ho(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zo(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function yo(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?Zo(Object(I),!0).forEach((function(e){po(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):Zo(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function po(g,e,I){return e=function(g){var e=function(g,e){if("object"!==bo(g)||null===g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!==bo(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"===bo(e)?e:String(e)}(e),e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function Go(g,e){return function(g){if(Array.isArray(g))return g}(g)||function(g,e){var I=null==g?null:"undefined"!=typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null!=I){var t,n,C,l,o=[],r=!0,a=!1;try{if(C=(I=I.call(g)).next,0===e){if(Object(I)!==I)return;r=!1}else for(;!(r=(t=C.call(I)).done)&&(o.push(t.value),o.length!==e);r=!0);}catch(g){a=!0,n=g}finally{try{if(!r&&null!=I.return&&(l=I.return(),Object(l)!==l))return}finally{if(a)throw n}}return o}}(g,e)||ho(g,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ho(g,e){if(g){if("string"===typeof g)return Bo(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);return"Object"===I&&g.constructor&&(I=g.constructor.name),"Map"===I||"Set"===I?Array.from(g):"Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I)?Bo(g,e):void 0}}function Bo(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}var So=function(g,e,I){return g+(e-g)*I},Wo=function(g){return g.from!==g.to},fo=function g(e,I,t){var n=to((function(g,I){if(Wo(I)){var t=Go(e(I.from,I.to,I.velocity),2),n=t[0],C=t[1];return yo(yo({},I),{},{from:n,velocity:C})}return I}),I);return t<1?to((function(g,e){return Wo(e)?yo(yo({},e),{},{velocity:So(e.velocity,n[g].velocity,t),from:So(e.from,n[g].from,t)}):e}),I):g(e,n,t-1)};const Vo=function(g,e,I,t,n){var C,l,o,r,a=(C=g,l=e,[Object.keys(C),Object.keys(l)].reduce((function(g,e){return g.filter((function(g){return e.includes(g)}))}))),c=a.reduce((function(I,t){return yo(yo({},I),{},po({},t,[g[t],e[t]]))}),{}),i=a.reduce((function(I,t){return yo(yo({},I),{},po({},t,{from:g[t],velocity:0,to:e[t]}))}),{}),A=-1,u=function(){return null};return u=I.isStepper?function(t){o||(o=t);var C=(t-o)/I.dt;i=fo(I,i,C),n(yo(yo(yo({},g),e),to((function(g,e){return e.from}),i))),o=t,Object.values(i).filter(Wo).length&&(A=requestAnimationFrame(u))}:function(C){r||(r=C);var l=(C-r)/t,o=to((function(g,e){return So.apply(void 0,mo(e).concat([I(l)]))}),c);if(n(yo(yo(yo({},g),e),o)),l<1)A=requestAnimationFrame(u);else{var a=to((function(g,e){return So.apply(void 0,mo(e).concat([I(1)]))}),c);n(yo(yo(yo({},g),e),a))}},function(){return requestAnimationFrame(u),function(){cancelAnimationFrame(A)}}};function vo(g){return vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},vo(g)}var Xo=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Ro(g,e){if(null==g)return{};var I,t,n=function(g,e){if(null==g)return{};var I,t,n={},C=Object.keys(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||(n[I]=g[I]);return n}(g,e);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(n[I]=g[I])}return n}function Jo(g){return function(g){if(Array.isArray(g))return ko(g)}(g)||function(g){if("undefined"!==typeof Symbol&&null!=g[Symbol.iterator]||null!=g["@@iterator"])return Array.from(g)}(g)||function(g,e){if(!g)return;if("string"===typeof g)return ko(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);"Object"===I&&g.constructor&&(I=g.constructor.name);if("Map"===I||"Set"===I)return Array.from(g);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return ko(g,e)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ko(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}function Yo(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function Ho(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?Yo(Object(I),!0).forEach((function(e){wo(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):Yo(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function wo(g,e,I){return(e=Ko(e))in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function No(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,Ko(t.key),t)}}function Ko(g){var e=function(g,e){if("object"!==vo(g)||null===g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!==vo(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"===vo(e)?e:String(e)}function Fo(g,e){return Fo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,e){return g.__proto__=e,g},Fo(g,e)}function xo(g){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Ch){return!1}}();return function(){var I,t=zo(g);if(e){var n=zo(this).constructor;I=Reflect.construct(t,arguments,n)}else I=t.apply(this,arguments);return Eo(this,I)}}function Eo(g,e){if(e&&("object"===vo(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Mo(g)}function Mo(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function zo(g){return zo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},zo(g)}var Uo=function(g){!function(g,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(e&&e.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),e&&Fo(g,e)}(l,g);var e,I,t,C=xo(l);function l(g,e){var I;!function(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var t=(I=C.call(this,g,e)).props,n=t.isActive,o=t.attributeName,r=t.from,a=t.to,c=t.steps,i=t.children,A=t.duration;if(I.handleStyleChange=I.handleStyleChange.bind(Mo(I)),I.changeStyle=I.changeStyle.bind(Mo(I)),!n||A<=0)return I.state={style:{}},"function"===typeof i&&(I.state={style:a}),Eo(I);if(c&&c.length)I.state={style:c[0].style};else if(r){if("function"===typeof i)return I.state={style:r},Eo(I);I.state={style:o?wo({},o,r):r}}else I.state={style:{}};return I}return e=l,(I=[{key:"componentDidMount",value:function(){var g=this.props,e=g.isActive,I=g.canBegin;this.mounted=!0,e&&I&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(g){var e=this.props,I=e.isActive,t=e.canBegin,n=e.attributeName,C=e.shouldReAnimate,l=e.to,o=e.from,r=this.state.style;if(t)if(I){if(!(Ll(g.to,l)&&g.canBegin&&g.isActive)){var a=!g.canBegin||!g.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var c=a||C?o:g.to;if(this.state&&r){var i={style:n?wo({},n,c):c};(n&&r[n]!==c||!n&&r!==c)&&this.setState(i)}this.runAnimation(Ho(Ho({},this.props),{},{from:c,begin:0}))}}else{var A={style:n?wo({},n,l):l};this.state&&r&&(n&&r[n]!==l||!n&&r!==l)&&this.setState(A)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var g=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),g&&g()}},{key:"handleStyleChange",value:function(g){this.changeStyle(g)}},{key:"changeStyle",value:function(g){this.mounted&&this.setState({style:g})}},{key:"runJSAnimation",value:function(g){var e=this,I=g.from,t=g.to,n=g.duration,C=g.easing,l=g.begin,o=g.onAnimationEnd,r=g.onAnimationStart,a=Vo(I,t,so(C),n,this.changeStyle);this.manager.start([r,l,function(){e.stopJSAnimation=a()},n,o])}},{key:"runStepAnimation",value:function(g){var e=this,I=g.steps,t=g.begin,n=g.onAnimationStart,C=I[0],l=C.style,o=C.duration,r=void 0===o?0:o;return this.manager.start([n].concat(Jo(I.reduce((function(g,t,n){if(0===n)return g;var C=t.duration,l=t.easing,o=void 0===l?"ease":l,r=t.style,a=t.properties,c=t.onAnimationEnd,i=n>0?I[n-1]:t,A=a||Object.keys(r);if("function"===typeof o||"spring"===o)return[].concat(Jo(g),[e.runJSAnimation.bind(e,{from:i.style,to:r,duration:C,easing:o}),C]);var u=no(A,C,o),d=Ho(Ho(Ho({},i.style),r),{},{transition:u});return[].concat(Jo(g),[d,C,c]).filter(Io)}),[l,Math.max(r,t)])),[g.onAnimationEnd]))}},{key:"runAnimation",value:function(g){this.manager||(this.manager=ql());var e=g.begin,I=g.duration,t=g.attributeName,n=g.to,C=g.easing,l=g.onAnimationStart,o=g.onAnimationEnd,r=g.steps,a=g.children,c=this.manager;if(this.unSubscribe=c.subscribe(this.handleStyleChange),"function"!==typeof C&&"function"!==typeof a&&"spring"!==C)if(r.length>1)this.runStepAnimation(g);else{var i=t?wo({},t,n):n,A=no(Object.keys(i),I,C);c.start([l,e,Ho(Ho({},i),{},{transition:A}),I,o])}else this.runJSAnimation(g)}},{key:"render",value:function(){var g=this.props,e=g.children,I=(g.begin,g.duration),t=(g.attributeName,g.easing,g.isActive),C=(g.steps,g.from,g.to,g.canBegin,g.onAnimationEnd,g.shouldReAnimate,g.onAnimationReStart,Ro(g,Xo)),l=n.Children.count(e),o=this.state.style;if("function"===typeof e)return e(o);if(!t||0===l||I<=0)return e;var r=function(g){var e=g.props,I=e.style,t=void 0===I?{}:I,l=e.className;return(0,n.cloneElement)(g,Ho(Ho({},C),{},{style:Ho(Ho({},t),o),className:l}))};return 1===l?r(n.Children.only(e)):n.createElement("div",null,n.Children.map(e,(function(g){return r(g)})))}}])&&No(e.prototype,I),t&&No(e,t),Object.defineProperty(e,"prototype",{writable:!1}),l}(n.PureComponent);Uo.displayName="Animate",Uo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},Uo.propTypes={from:pl().oneOfType([pl().object,pl().string]),to:pl().oneOfType([pl().object,pl().string]),attributeName:pl().string,duration:pl().number,begin:pl().number,easing:pl().oneOfType([pl().string,pl().func]),steps:pl().arrayOf(pl().shape({duration:pl().number.isRequired,style:pl().object.isRequired,easing:pl().oneOfType([pl().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),pl().func]),properties:pl().arrayOf("string"),onAnimationEnd:pl().func})),children:pl().oneOfType([pl().node,pl().func]),isActive:pl().bool,canBegin:pl().bool,onAnimationEnd:pl().func,shouldReAnimate:pl().bool,onAnimationStart:pl().func,onAnimationReStart:pl().func};const Qo=Uo;function Lo(g,e){if(null==g)return{};var I={};for(var t in g)if({}.hasOwnProperty.call(g,t)){if(e.includes(t))continue;I[t]=g[t]}return I}function Do(){return Do=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)({}).hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},Do.apply(null,arguments)}function To(g,e){return To=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,e){return g.__proto__=e,g},To(g,e)}function jo(g,e){g.prototype=Object.create(e.prototype),g.prototype.constructor=g,To(g,e)}const Oo=n.createContext(null);function Po(g,e){var I=Object.create(null);return g&&n.Children.map(g,(function(g){return g})).forEach((function(g){I[g.key]=function(g){return e&&(0,n.isValidElement)(g)?e(g):g}(g)})),I}function qo(g,e,I){return null!=I[e]?I[e]:g.props[e]}function _o(g,e,I){var t=Po(g.children),C=function(g,e){function I(I){return I in e?e[I]:g[I]}g=g||{},e=e||{};var t,n=Object.create(null),C=[];for(var l in g)l in e?C.length&&(n[l]=C,C=[]):C.push(l);var o={};for(var r in e){if(n[r])for(t=0;t<n[r].length;t++){var a=n[r][t];o[n[r][t]]=I(a)}o[r]=I(r)}for(t=0;t<C.length;t++)o[C[t]]=I(C[t]);return o}(e,t);return Object.keys(C).forEach((function(l){var o=C[l];if((0,n.isValidElement)(o)){var r=l in e,a=l in t,c=e[l],i=(0,n.isValidElement)(c)&&!c.props.in;!a||r&&!i?a||!r||i?a&&r&&(0,n.isValidElement)(c)&&(C[l]=(0,n.cloneElement)(o,{onExited:I.bind(null,o),in:c.props.in,exit:qo(o,"exit",g),enter:qo(o,"enter",g)})):C[l]=(0,n.cloneElement)(o,{in:!1}):C[l]=(0,n.cloneElement)(o,{onExited:I.bind(null,o),in:!0,exit:qo(o,"exit",g),enter:qo(o,"enter",g)})}})),C}var $o=Object.values||function(g){return Object.keys(g).map((function(e){return g[e]}))},gr=function(g){function e(e,I){var t,n=(t=g.call(this,e,I)||this).handleExited.bind(function(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(t));return t.state={contextValue:{isMounting:!0},handleExited:n,firstRender:!0},t}jo(e,g);var I=e.prototype;return I.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},I.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(g,e){var I,t,C=e.children,l=e.handleExited;return{children:e.firstRender?(I=g,t=l,Po(I.children,(function(g){return(0,n.cloneElement)(g,{onExited:t.bind(null,g),in:!0,appear:qo(g,"appear",I),enter:qo(g,"enter",I),exit:qo(g,"exit",I)})}))):_o(g,C,l),firstRender:!1}},I.handleExited=function(g,e){var I=Po(this.props.children);g.key in I||(g.props.onExited&&g.props.onExited(e),this.mounted&&this.setState((function(e){var I=Do({},e.children);return delete I[g.key],{children:I}})))},I.render=function(){var g=this.props,e=g.component,I=g.childFactory,t=Lo(g,["component","childFactory"]),C=this.state.contextValue,l=$o(this.state.children).map(I);return delete t.appear,delete t.enter,delete t.exit,null===e?n.createElement(Oo.Provider,{value:C},l):n.createElement(Oo.Provider,{value:C},n.createElement(e,t,l))},e}(n.Component);gr.propTypes={},gr.defaultProps={component:"div",childFactory:function(g){return g}};const er=gr,Ir=!1;var tr="unmounted",nr="exited",Cr="entering",lr="entered",or="exiting",rr=function(g){function e(e,I){var t;t=g.call(this,e,I)||this;var n,C=I&&!I.isMounting?e.enter:e.appear;return t.appearStatus=null,e.in?C?(n=nr,t.appearStatus=Cr):n=lr:n=e.unmountOnExit||e.mountOnEnter?tr:nr,t.state={status:n},t.nextCallback=null,t}jo(e,g),e.getDerivedStateFromProps=function(g,e){return g.in&&e.status===tr?{status:nr}:null};var I=e.prototype;return I.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},I.componentDidUpdate=function(g){var e=null;if(g!==this.props){var I=this.state.status;this.props.in?I!==Cr&&I!==lr&&(e=Cr):I!==Cr&&I!==lr||(e=or)}this.updateStatus(!1,e)},I.componentWillUnmount=function(){this.cancelNextCallback()},I.getTimeouts=function(){var g,e,I,t=this.props.timeout;return g=e=I=t,null!=t&&"number"!==typeof t&&(g=t.exit,e=t.enter,I=void 0!==t.appear?t.appear:e),{exit:g,enter:e,appear:I}},I.updateStatus=function(g,e){if(void 0===g&&(g=!1),null!==e)if(this.cancelNextCallback(),e===Cr){if(this.props.unmountOnExit||this.props.mountOnEnter){var I=this.props.nodeRef?this.props.nodeRef.current:Zg.findDOMNode(this);I&&function(g){g.scrollTop}(I)}this.performEnter(g)}else this.performExit();else this.props.unmountOnExit&&this.state.status===nr&&this.setState({status:tr})},I.performEnter=function(g){var e=this,I=this.props.enter,t=this.context?this.context.isMounting:g,n=this.props.nodeRef?[t]:[Zg.findDOMNode(this),t],C=n[0],l=n[1],o=this.getTimeouts(),r=t?o.appear:o.enter;!g&&!I||Ir?this.safeSetState({status:lr},(function(){e.props.onEntered(C)})):(this.props.onEnter(C,l),this.safeSetState({status:Cr},(function(){e.props.onEntering(C,l),e.onTransitionEnd(r,(function(){e.safeSetState({status:lr},(function(){e.props.onEntered(C,l)}))}))})))},I.performExit=function(){var g=this,e=this.props.exit,I=this.getTimeouts(),t=this.props.nodeRef?void 0:Zg.findDOMNode(this);e&&!Ir?(this.props.onExit(t),this.safeSetState({status:or},(function(){g.props.onExiting(t),g.onTransitionEnd(I.exit,(function(){g.safeSetState({status:nr},(function(){g.props.onExited(t)}))}))}))):this.safeSetState({status:nr},(function(){g.props.onExited(t)}))},I.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},I.safeSetState=function(g,e){e=this.setNextCallback(e),this.setState(g,e)},I.setNextCallback=function(g){var e=this,I=!0;return this.nextCallback=function(t){I&&(I=!1,e.nextCallback=null,g(t))},this.nextCallback.cancel=function(){I=!1},this.nextCallback},I.onTransitionEnd=function(g,e){this.setNextCallback(e);var I=this.props.nodeRef?this.props.nodeRef.current:Zg.findDOMNode(this),t=null==g&&!this.props.addEndListener;if(I&&!t){if(this.props.addEndListener){var n=this.props.nodeRef?[this.nextCallback]:[I,this.nextCallback],C=n[0],l=n[1];this.props.addEndListener(C,l)}null!=g&&setTimeout(this.nextCallback,g)}else setTimeout(this.nextCallback,0)},I.render=function(){var g=this.state.status;if(g===tr)return null;var e=this.props,I=e.children,t=(e.in,e.mountOnEnter,e.unmountOnExit,e.appear,e.enter,e.exit,e.timeout,e.addEndListener,e.onEnter,e.onEntering,e.onEntered,e.onExit,e.onExiting,e.onExited,e.nodeRef,Lo(e,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return n.createElement(Oo.Provider,{value:null},"function"===typeof I?I(g,t):n.cloneElement(n.Children.only(I),t))},e}(n.Component);function ar(){}rr.contextType=Oo,rr.propTypes={},rr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ar,onEntering:ar,onEntered:ar,onExit:ar,onExiting:ar,onExited:ar},rr.UNMOUNTED=tr,rr.EXITED=nr,rr.ENTERING=Cr,rr.ENTERED=lr,rr.EXITING=or;const cr=rr;var ir=["children","appearOptions","enterOptions","leaveOptions"];function Ar(g){return Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},Ar(g)}function ur(){return ur=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},ur.apply(this,arguments)}function dr(g,e){if(null==g)return{};var I,t,n=function(g,e){if(null==g)return{};var I,t,n={},C=Object.keys(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||(n[I]=g[I]);return n}(g,e);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(n[I]=g[I])}return n}function sr(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function br(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?sr(Object(I),!0).forEach((function(e){hr(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):sr(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function mr(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,Br(t.key),t)}}function Zr(g,e){return Zr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,e){return g.__proto__=e,g},Zr(g,e)}function yr(g){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Ch){return!1}}();return function(){var I,t=Gr(g);if(e){var n=Gr(this).constructor;I=Reflect.construct(t,arguments,n)}else I=t.apply(this,arguments);return function(g,e){if(e&&("object"===Ar(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return pr(g)}(this,I)}}function pr(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function Gr(g){return Gr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},Gr(g)}function hr(g,e,I){return(e=Br(e))in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function Br(g){var e=function(g,e){if("object"!==Ar(g)||null===g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!==Ar(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"===Ar(e)?e:String(e)}var Sr=function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=g.steps,I=g.duration;return e&&e.length?e.reduce((function(g,e){return g+(Number.isFinite(e.duration)&&e.duration>0?e.duration:0)}),0):Number.isFinite(I)?I:0},Wr=function(g){!function(g,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(e&&e.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),e&&Zr(g,e)}(l,g);var e,I,t,C=yr(l);function l(){var g;return function(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),hr(pr(g=C.call(this)),"handleEnter",(function(e,I){var t=g.props,n=t.appearOptions,C=t.enterOptions;g.handleStyleActive(I?n:C)})),hr(pr(g),"handleExit",(function(){var e=g.props.leaveOptions;g.handleStyleActive(e)})),g.state={isActive:!1},g}return e=l,(I=[{key:"handleStyleActive",value:function(g){if(g){var e=g.onAnimationEnd?function(){g.onAnimationEnd()}:null;this.setState(br(br({},g),{},{onAnimationEnd:e,isActive:!0}))}}},{key:"parseTimeout",value:function(){var g=this.props,e=g.appearOptions,I=g.enterOptions,t=g.leaveOptions;return Sr(e)+Sr(I)+Sr(t)}},{key:"render",value:function(){var g=this,e=this.props,I=e.children,t=(e.appearOptions,e.enterOptions,e.leaveOptions,dr(e,ir));return n.createElement(cr,ur({},t,{onEnter:this.handleEnter,onExit:this.handleExit,timeout:this.parseTimeout()}),(function(){return n.createElement(Qo,g.state,n.Children.only(I))}))}}])&&mr(e.prototype,I),t&&mr(e,t),Object.defineProperty(e,"prototype",{writable:!1}),l}(n.Component);Wr.propTypes={appearOptions:pl().object,enterOptions:pl().object,leaveOptions:pl().object,children:pl().element};const fr=Wr;function Vr(g){var e=g.component,I=g.children,t=g.appear,C=g.enter,l=g.leave;return n.createElement(er,{component:e},n.Children.map(I,(function(g,e){return n.createElement(fr,{appearOptions:t,enterOptions:C,leaveOptions:l,key:"child-".concat(e)},g)})))}Vr.propTypes={appear:pl().object,enter:pl().object,leave:pl().object,children:pl().oneOfType([pl().array,pl().element]),component:pl().any},Vr.defaultProps={component:"span"};const vr=Qo;function Xr(g){return Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},Xr(g)}function Rr(){return Rr=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},Rr.apply(this,arguments)}function Jr(g,e){return function(g){if(Array.isArray(g))return g}(g)||function(g,e){var I=null==g?null:"undefined"!=typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null!=I){var t,n,C,l,o=[],r=!0,a=!1;try{if(C=(I=I.call(g)).next,0===e){if(Object(I)!==I)return;r=!1}else for(;!(r=(t=C.call(I)).done)&&(o.push(t.value),o.length!==e);r=!0);}catch(g){a=!0,n=g}finally{try{if(!r&&null!=I.return&&(l=I.return(),Object(l)!==l))return}finally{if(a)throw n}}return o}}(g,e)||function(g,e){if(!g)return;if("string"===typeof g)return kr(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);"Object"===I&&g.constructor&&(I=g.constructor.name);if("Map"===I||"Set"===I)return Array.from(g);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return kr(g,e)}(g,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kr(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}function Yr(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function Hr(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?Yr(Object(I),!0).forEach((function(e){wr(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):Yr(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function wr(g,e,I){return e=function(g){var e=function(g,e){if("object"!=Xr(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=Xr(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==Xr(e)?e:e+""}(e),e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}var Nr=function(g,e,I,t,n){var C,l=Math.min(Math.abs(I)/2,Math.abs(t)/2),o=t>=0?1:-1,r=I>=0?1:-1,a=t>=0&&I>=0||t<0&&I<0?1:0;if(l>0&&n instanceof Array){for(var c=[0,0,0,0],i=0;i<4;i++)c[i]=n[i]>l?l:n[i];C="M".concat(g,",").concat(e+o*c[0]),c[0]>0&&(C+="A ".concat(c[0],",").concat(c[0],",0,0,").concat(a,",").concat(g+r*c[0],",").concat(e)),C+="L ".concat(g+I-r*c[1],",").concat(e),c[1]>0&&(C+="A ".concat(c[1],",").concat(c[1],",0,0,").concat(a,",\n        ").concat(g+I,",").concat(e+o*c[1])),C+="L ".concat(g+I,",").concat(e+t-o*c[2]),c[2]>0&&(C+="A ".concat(c[2],",").concat(c[2],",0,0,").concat(a,",\n        ").concat(g+I-r*c[2],",").concat(e+t)),C+="L ".concat(g+r*c[3],",").concat(e+t),c[3]>0&&(C+="A ".concat(c[3],",").concat(c[3],",0,0,").concat(a,",\n        ").concat(g,",").concat(e+t-o*c[3])),C+="Z"}else if(l>0&&n===+n&&n>0){var A=Math.min(l,n);C="M ".concat(g,",").concat(e+o*A,"\n            A ").concat(A,",").concat(A,",0,0,").concat(a,",").concat(g+r*A,",").concat(e,"\n            L ").concat(g+I-r*A,",").concat(e,"\n            A ").concat(A,",").concat(A,",0,0,").concat(a,",").concat(g+I,",").concat(e+o*A,"\n            L ").concat(g+I,",").concat(e+t-o*A,"\n            A ").concat(A,",").concat(A,",0,0,").concat(a,",").concat(g+I-r*A,",").concat(e+t,"\n            L ").concat(g+r*A,",").concat(e+t,"\n            A ").concat(A,",").concat(A,",0,0,").concat(a,",").concat(g,",").concat(e+t-o*A," Z")}else C="M ".concat(g,",").concat(e," h ").concat(I," v ").concat(t," h ").concat(-I," Z");return C},Kr=function(g,e){if(!g||!e)return!1;var I=g.x,t=g.y,n=e.x,C=e.y,l=e.width,o=e.height;if(Math.abs(l)>0&&Math.abs(o)>0){var r=Math.min(n,n+l),a=Math.max(n,n+l),c=Math.min(C,C+o),i=Math.max(C,C+o);return I>=r&&I<=a&&t>=c&&t<=i}return!1},Fr={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},xr=function(g){var e=Hr(Hr({},Fr),g),I=(0,n.useRef)(),t=Jr((0,n.useState)(-1),2),C=t[0],l=t[1];(0,n.useEffect)((function(){if(I.current&&I.current.getTotalLength)try{var g=I.current.getTotalLength();g&&l(g)}catch(e){}}),[]);var o=e.x,r=e.y,a=e.width,c=e.height,i=e.radius,A=e.className,u=e.animationEasing,d=e.animationDuration,s=e.animationBegin,b=e.isAnimationActive,m=e.isUpdateAnimationActive;if(o!==+o||r!==+r||a!==+a||c!==+c||0===a||0===c)return null;var Z=At("recharts-rectangle",A);return m?n.createElement(vr,{canBegin:C>0,from:{width:a,height:c,x:o,y:r},to:{width:a,height:c,x:o,y:r},duration:d,animationEasing:u,isActive:m},(function(g){var t=g.width,l=g.height,o=g.x,r=g.y;return n.createElement(vr,{canBegin:C>0,from:"0px ".concat(-1===C?1:C,"px"),to:"".concat(C,"px 0px"),attributeName:"strokeDasharray",begin:s,duration:d,isActive:b,easing:u},n.createElement("path",Rr({},en(e,!0),{className:Z,d:Nr(o,r,t,l,i),ref:I})))})):n.createElement("path",Rr({},en(e,!0),{className:Z,d:Nr(o,r,a,c,i)}))};function Er(g,e){switch(arguments.length){case 0:break;case 1:this.range(g);break;default:this.range(e).domain(g)}return this}function Mr(g,e){switch(arguments.length){case 0:break;case 1:"function"===typeof g?this.interpolator(g):this.range(g);break;default:this.domain(g),"function"===typeof e?this.interpolator(e):this.range(e)}return this}class zr extends Map{constructor(g){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dr;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=g)for(const[I,t]of g)this.set(I,t)}get(g){return super.get(Ur(this,g))}has(g){return super.has(Ur(this,g))}set(g,e){return super.set(Qr(this,g),e)}delete(g){return super.delete(Lr(this,g))}}Set;function Ur(g,e){let{_intern:I,_key:t}=g;const n=t(e);return I.has(n)?I.get(n):e}function Qr(g,e){let{_intern:I,_key:t}=g;const n=t(e);return I.has(n)?I.get(n):(I.set(n,e),e)}function Lr(g,e){let{_intern:I,_key:t}=g;const n=t(e);return I.has(n)&&(e=I.get(n),I.delete(n)),e}function Dr(g){return null!==g&&"object"===typeof g?g.valueOf():g}const Tr=Symbol("implicit");function jr(){var g=new zr,e=[],I=[],t=Tr;function n(n){let C=g.get(n);if(void 0===C){if(t!==Tr)return t;g.set(n,C=e.push(n)-1)}return I[C%I.length]}return n.domain=function(I){if(!arguments.length)return e.slice();e=[],g=new zr;for(const t of I)g.has(t)||g.set(t,e.push(t)-1);return n},n.range=function(g){return arguments.length?(I=Array.from(g),n):I.slice()},n.unknown=function(g){return arguments.length?(t=g,n):t},n.copy=function(){return jr(e,I).unknown(t)},Er.apply(n,arguments),n}function Or(){var g,e,I=jr().unknown(void 0),t=I.domain,n=I.range,C=0,l=1,o=!1,r=0,a=0,c=.5;function i(){var I=t().length,i=l<C,A=i?l:C,u=i?C:l;g=(u-A)/Math.max(1,I-r+2*a),o&&(g=Math.floor(g)),A+=(u-A-g*(I-r))*c,e=g*(1-r),o&&(A=Math.round(A),e=Math.round(e));var d=function(g,e,I){g=+g,e=+e,I=(n=arguments.length)<2?(e=g,g=0,1):n<3?1:+I;for(var t=-1,n=0|Math.max(0,Math.ceil((e-g)/I)),C=new Array(n);++t<n;)C[t]=g+t*I;return C}(I).map((function(e){return A+g*e}));return n(i?d.reverse():d)}return delete I.unknown,I.domain=function(g){return arguments.length?(t(g),i()):t()},I.range=function(g){return arguments.length?([C,l]=g,C=+C,l=+l,i()):[C,l]},I.rangeRound=function(g){return[C,l]=g,C=+C,l=+l,o=!0,i()},I.bandwidth=function(){return e},I.step=function(){return g},I.round=function(g){return arguments.length?(o=!!g,i()):o},I.padding=function(g){return arguments.length?(r=Math.min(1,a=+g),i()):r},I.paddingInner=function(g){return arguments.length?(r=Math.min(1,g),i()):r},I.paddingOuter=function(g){return arguments.length?(a=+g,i()):a},I.align=function(g){return arguments.length?(c=Math.max(0,Math.min(1,g)),i()):c},I.copy=function(){return Or(t(),[C,l]).round(o).paddingInner(r).paddingOuter(a).align(c)},Er.apply(i(),arguments)}function Pr(g){var e=g.copy;return g.padding=g.paddingOuter,delete g.paddingInner,delete g.paddingOuter,g.copy=function(){return Pr(e())},g}function qr(){return Pr(Or.apply(null,arguments).paddingInner(1))}function _r(g){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_r(g)}function $r(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function ga(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?$r(Object(I),!0).forEach((function(e){ea(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):$r(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function ea(g,e,I){return e=function(g){var e=function(g,e){if("object"!=_r(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=_r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==_r(e)?e:e+""}(e),e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}var Ia={widthCache:{},cacheCount:0},ta={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},na="recharts_measurement_span";var Ca=function(g){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===g||null===g||En.isSsr)return{width:0,height:0};var I=function(g){var e=ga({},g);return Object.keys(e).forEach((function(g){e[g]||delete e[g]})),e}(e),t=JSON.stringify({text:g,copyStyle:I});if(Ia.widthCache[t])return Ia.widthCache[t];try{var n=document.getElementById(na);n||((n=document.createElement("span")).setAttribute("id",na),n.setAttribute("aria-hidden","true"),document.body.appendChild(n));var C=ga(ga({},ta),I);Object.assign(n.style,C),n.textContent="".concat(g);var l=n.getBoundingClientRect(),o={width:l.width,height:l.height};return Ia.widthCache[t]=o,++Ia.cacheCount>2e3&&(Ia.cacheCount=0,Ia.widthCache={}),o}catch(Ch){return{width:0,height:0}}};function la(g){return la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},la(g)}function oa(g,e){return function(g){if(Array.isArray(g))return g}(g)||function(g,e){var I=null==g?null:"undefined"!=typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null!=I){var t,n,C,l,o=[],r=!0,a=!1;try{if(C=(I=I.call(g)).next,0===e){if(Object(I)!==I)return;r=!1}else for(;!(r=(t=C.call(I)).done)&&(o.push(t.value),o.length!==e);r=!0);}catch(g){a=!0,n=g}finally{try{if(!r&&null!=I.return&&(l=I.return(),Object(l)!==l))return}finally{if(a)throw n}}return o}}(g,e)||function(g,e){if(!g)return;if("string"===typeof g)return ra(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);"Object"===I&&g.constructor&&(I=g.constructor.name);if("Map"===I||"Set"===I)return Array.from(g);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return ra(g,e)}(g,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ra(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}function aa(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,ca(t.key),t)}}function ca(g){var e=function(g,e){if("object"!=la(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=la(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==la(e)?e:e+""}var ia=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Aa=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ua=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,da=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,sa={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},ba=Object.keys(sa),ma="NaN";var Za=function(){function g(e,I){!function(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),this.num=e,this.unit=I,this.num=e,this.unit=I,Number.isNaN(e)&&(this.unit=""),""===I||ua.test(I)||(this.num=NaN,this.unit=""),ba.includes(I)&&(this.num=function(g,e){return g*sa[e]}(e,I),this.unit="px")}return e=g,t=[{key:"parse",value:function(e){var I,t=oa(null!==(I=da.exec(e))&&void 0!==I?I:[],3),n=t[1],C=t[2];return new g(parseFloat(n),null!==C&&void 0!==C?C:"")}}],(I=[{key:"add",value:function(e){return this.unit!==e.unit?new g(NaN,""):new g(this.num+e.num,this.unit)}},{key:"subtract",value:function(e){return this.unit!==e.unit?new g(NaN,""):new g(this.num-e.num,this.unit)}},{key:"multiply",value:function(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new g(NaN,""):new g(this.num*e.num,this.unit||e.unit)}},{key:"divide",value:function(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new g(NaN,""):new g(this.num/e.num,this.unit||e.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&aa(e.prototype,I),t&&aa(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,I,t}();function ya(g){if(g.includes(ma))return ma;for(var e=g;e.includes("*")||e.includes("/");){var I,t=oa(null!==(I=ia.exec(e))&&void 0!==I?I:[],4),n=t[1],C=t[2],l=t[3],o=Za.parse(null!==n&&void 0!==n?n:""),r=Za.parse(null!==l&&void 0!==l?l:""),a="*"===C?o.multiply(r):o.divide(r);if(a.isNaN())return ma;e=e.replace(ia,a.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,i=oa(null!==(c=Aa.exec(e))&&void 0!==c?c:[],4),A=i[1],u=i[2],d=i[3],s=Za.parse(null!==A&&void 0!==A?A:""),b=Za.parse(null!==d&&void 0!==d?d:""),m="+"===u?s.add(b):s.subtract(b);if(m.isNaN())return ma;e=e.replace(Aa,m.toString())}return e}var pa=/\(([^()]*)\)/;function Ga(g){var e=g.replace(/\s+/g,"");return e=function(g){for(var e=g;e.includes("(");){var I=oa(pa.exec(e),2)[1];e=e.replace(pa,ya(I))}return e}(e),e=ya(e)}function ha(g){var e=function(g){try{return Ga(g)}catch(Ch){return ma}}(g.slice(5,-1));return e===ma?"":e}var Ba=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Sa=["dx","dy","angle","className","breakAll"];function Wa(){return Wa=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},Wa.apply(this,arguments)}function fa(g,e){if(null==g)return{};var I,t,n=function(g,e){if(null==g)return{};var I={};for(var t in g)if(Object.prototype.hasOwnProperty.call(g,t)){if(e.indexOf(t)>=0)continue;I[t]=g[t]}return I}(g,e);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(n[I]=g[I])}return n}function Va(g,e){return function(g){if(Array.isArray(g))return g}(g)||function(g,e){var I=null==g?null:"undefined"!=typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null!=I){var t,n,C,l,o=[],r=!0,a=!1;try{if(C=(I=I.call(g)).next,0===e){if(Object(I)!==I)return;r=!1}else for(;!(r=(t=C.call(I)).done)&&(o.push(t.value),o.length!==e);r=!0);}catch(g){a=!0,n=g}finally{try{if(!r&&null!=I.return&&(l=I.return(),Object(l)!==l))return}finally{if(a)throw n}}return o}}(g,e)||function(g,e){if(!g)return;if("string"===typeof g)return va(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);"Object"===I&&g.constructor&&(I=g.constructor.name);if("Map"===I||"Set"===I)return Array.from(g);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return va(g,e)}(g,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function va(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}var Xa=/[ \f\n\r\t\v\u2028\u2029]+/,Ra=function(g){var e=g.children,I=g.breakAll,t=g.style;try{var n=[];return gt()(e)||(n=I?e.toString().split(""):e.toString().split(Xa)),{wordsWithComputedWidth:n.map((function(g){return{word:g,width:Ca(g,t).width}})),spaceWidth:I?0:Ca("\xa0",t).width}}catch(Ch){return null}},Ja=function(g){return[{words:gt()(g)?[]:g.toString().split(Xa)}]},ka=function(g){var e=g.width,I=g.scaleToFit,t=g.children,n=g.style,C=g.breakAll,l=g.maxLines;if((e||I)&&!En.isSsr){var o=Ra({breakAll:C,children:t,style:n});return o?function(g,e,I,t,n){var C=g.maxLines,l=g.children,o=g.style,r=g.breakAll,a=ft(C),c=l,i=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(g,e){var C=e.word,l=e.width,o=g[g.length-1];if(o&&(null==t||n||o.width+l+I<Number(t)))o.words.push(C),o.width+=l+I;else{var r={words:[C],width:l};g.push(r)}return g}),[])},A=i(e);if(!a)return A;for(var u,d=function(g){var e=c.slice(0,g),I=Ra({breakAll:r,style:o,children:e+"\u2026"}).wordsWithComputedWidth,n=i(I),l=n.length>C||function(g){return g.reduce((function(g,e){return g.width>e.width?g:e}))}(n).width>Number(t);return[l,n]},s=0,b=c.length-1,m=0;s<=b&&m<=c.length-1;){var Z=Math.floor((s+b)/2),y=Va(d(Z-1),2),p=y[0],G=y[1],h=Va(d(Z),1)[0];if(p||h||(s=Z+1),p&&h&&(b=Z-1),!p&&h){u=G;break}m++}return u||A}({breakAll:C,children:t,maxLines:l,style:n},o.wordsWithComputedWidth,o.spaceWidth,e,I):Ja(t)}return Ja(t)},Ya="#808080",Ha=function(g){var e=g.x,I=void 0===e?0:e,t=g.y,C=void 0===t?0:t,l=g.lineHeight,o=void 0===l?"1em":l,r=g.capHeight,a=void 0===r?"0.71em":r,c=g.scaleToFit,i=void 0!==c&&c,A=g.textAnchor,u=void 0===A?"start":A,d=g.verticalAnchor,s=void 0===d?"end":d,b=g.fill,m=void 0===b?Ya:b,Z=fa(g,Ba),y=(0,n.useMemo)((function(){return ka({breakAll:Z.breakAll,children:Z.children,maxLines:Z.maxLines,scaleToFit:i,style:Z.style,width:Z.width})}),[Z.breakAll,Z.children,Z.maxLines,i,Z.style,Z.width]),p=Z.dx,G=Z.dy,h=Z.angle,B=Z.className,S=Z.breakAll,W=fa(Z,Sa);if(!Vt(I)||!Vt(C))return null;var f,V=I+(ft(p)?p:0),v=C+(ft(G)?G:0);switch(s){case"start":f=ha("calc(".concat(a,")"));break;case"middle":f=ha("calc(".concat((y.length-1)/2," * -").concat(o," + (").concat(a," / 2))"));break;default:f=ha("calc(".concat(y.length-1," * -").concat(o,")"))}var X=[];if(i){var R=y[0].width,J=Z.width;X.push("scale(".concat((ft(J)?J/R:1)/R,")"))}return h&&X.push("rotate(".concat(h,", ").concat(V,", ").concat(v,")")),X.length&&(W.transform=X.join(" ")),n.createElement("text",Wa({},en(W,!0),{x:V,y:v,className:At("recharts-text",B),textAnchor:u,fill:m.includes("url")?Ya:m}),y.map((function(g,e){var I=g.words.join(S?"":" ");return n.createElement("tspan",{x:V,dy:0===e?f:o,key:"".concat(I,"-").concat(e)},I)})))};const wa=Math.sqrt(50),Na=Math.sqrt(10),Ka=Math.sqrt(2);function Fa(g,e,I){const t=(e-g)/Math.max(0,I),n=Math.floor(Math.log10(t)),C=t/Math.pow(10,n),l=C>=wa?10:C>=Na?5:C>=Ka?2:1;let o,r,a;return n<0?(a=Math.pow(10,-n)/l,o=Math.round(g*a),r=Math.round(e*a),o/a<g&&++o,r/a>e&&--r,a=-a):(a=Math.pow(10,n)*l,o=Math.round(g/a),r=Math.round(e/a),o*a<g&&++o,r*a>e&&--r),r<o&&.5<=I&&I<2?Fa(g,e,2*I):[o,r,a]}function xa(g,e,I){if(!((I=+I)>0))return[];if((g=+g)===(e=+e))return[g];const t=e<g,[n,C,l]=t?Fa(e,g,I):Fa(g,e,I);if(!(C>=n))return[];const o=C-n+1,r=new Array(o);if(t)if(l<0)for(let a=0;a<o;++a)r[a]=(C-a)/-l;else for(let a=0;a<o;++a)r[a]=(C-a)*l;else if(l<0)for(let a=0;a<o;++a)r[a]=(n+a)/-l;else for(let a=0;a<o;++a)r[a]=(n+a)*l;return r}function Ea(g,e,I){return Fa(g=+g,e=+e,I=+I)[2]}function Ma(g,e,I){I=+I;const t=(e=+e)<(g=+g),n=t?Ea(e,g,I):Ea(g,e,I);return(t?-1:1)*(n<0?1/-n:n)}function za(g,e){return null==g||null==e?NaN:g<e?-1:g>e?1:g>=e?0:NaN}function Ua(g,e){return null==g||null==e?NaN:e<g?-1:e>g?1:e>=g?0:NaN}function Qa(g){let e,I,t;function n(g,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g.length;if(n<C){if(0!==e(t,t))return C;do{const e=n+C>>>1;I(g[e],t)<0?n=e+1:C=e}while(n<C)}return n}return 2!==g.length?(e=za,I=(e,I)=>za(g(e),I),t=(e,I)=>g(e)-I):(e=g===za||g===Ua?g:La,I=g,t=g),{left:n,center:function(g,e){let I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const C=n(g,e,I,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:g.length)-1);return C>I&&t(g[C-1],e)>-t(g[C],e)?C-1:C},right:function(g,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g.length;if(n<C){if(0!==e(t,t))return C;do{const e=n+C>>>1;I(g[e],t)<=0?n=e+1:C=e}while(n<C)}return n}}}function La(){return 0}function Da(g){return null===g?NaN:+g}const Ta=Qa(za),ja=Ta.right,Oa=(Ta.left,Qa(Da).center,ja);function Pa(g,e,I){g.prototype=e.prototype=I,I.constructor=g}function qa(g,e){var I=Object.create(g.prototype);for(var t in e)I[t]=e[t];return I}function _a(){}var $a=.7,gc=1/$a,ec="\\s*([+-]?\\d+)\\s*",Ic="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nc=/^#([0-9a-f]{3,8})$/,Cc=new RegExp(`^rgb\\(${ec},${ec},${ec}\\)$`),lc=new RegExp(`^rgb\\(${tc},${tc},${tc}\\)$`),oc=new RegExp(`^rgba\\(${ec},${ec},${ec},${Ic}\\)$`),rc=new RegExp(`^rgba\\(${tc},${tc},${tc},${Ic}\\)$`),ac=new RegExp(`^hsl\\(${Ic},${tc},${tc}\\)$`),cc=new RegExp(`^hsla\\(${Ic},${tc},${tc},${Ic}\\)$`),ic={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ac(){return this.rgb().formatHex()}function uc(){return this.rgb().formatRgb()}function dc(g){var e,I;return g=(g+"").trim().toLowerCase(),(e=nc.exec(g))?(I=e[1].length,e=parseInt(e[1],16),6===I?sc(e):3===I?new Zc(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===I?bc(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===I?bc(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Cc.exec(g))?new Zc(e[1],e[2],e[3],1):(e=lc.exec(g))?new Zc(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=oc.exec(g))?bc(e[1],e[2],e[3],e[4]):(e=rc.exec(g))?bc(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ac.exec(g))?Sc(e[1],e[2]/100,e[3]/100,1):(e=cc.exec(g))?Sc(e[1],e[2]/100,e[3]/100,e[4]):ic.hasOwnProperty(g)?sc(ic[g]):"transparent"===g?new Zc(NaN,NaN,NaN,0):null}function sc(g){return new Zc(g>>16&255,g>>8&255,255&g,1)}function bc(g,e,I,t){return t<=0&&(g=e=I=NaN),new Zc(g,e,I,t)}function mc(g,e,I,t){return 1===arguments.length?((n=g)instanceof _a||(n=dc(n)),n?new Zc((n=n.rgb()).r,n.g,n.b,n.opacity):new Zc):new Zc(g,e,I,null==t?1:t);var n}function Zc(g,e,I,t){this.r=+g,this.g=+e,this.b=+I,this.opacity=+t}function yc(){return`#${Bc(this.r)}${Bc(this.g)}${Bc(this.b)}`}function pc(){const g=Gc(this.opacity);return`${1===g?"rgb(":"rgba("}${hc(this.r)}, ${hc(this.g)}, ${hc(this.b)}${1===g?")":`, ${g})`}`}function Gc(g){return isNaN(g)?1:Math.max(0,Math.min(1,g))}function hc(g){return Math.max(0,Math.min(255,Math.round(g)||0))}function Bc(g){return((g=hc(g))<16?"0":"")+g.toString(16)}function Sc(g,e,I,t){return t<=0?g=e=I=NaN:I<=0||I>=1?g=e=NaN:e<=0&&(g=NaN),new fc(g,e,I,t)}function Wc(g){if(g instanceof fc)return new fc(g.h,g.s,g.l,g.opacity);if(g instanceof _a||(g=dc(g)),!g)return new fc;if(g instanceof fc)return g;var e=(g=g.rgb()).r/255,I=g.g/255,t=g.b/255,n=Math.min(e,I,t),C=Math.max(e,I,t),l=NaN,o=C-n,r=(C+n)/2;return o?(l=e===C?(I-t)/o+6*(I<t):I===C?(t-e)/o+2:(e-I)/o+4,o/=r<.5?C+n:2-C-n,l*=60):o=r>0&&r<1?0:l,new fc(l,o,r,g.opacity)}function fc(g,e,I,t){this.h=+g,this.s=+e,this.l=+I,this.opacity=+t}function Vc(g){return(g=(g||0)%360)<0?g+360:g}function vc(g){return Math.max(0,Math.min(1,g||0))}function Xc(g,e,I){return 255*(g<60?e+(I-e)*g/60:g<180?I:g<240?e+(I-e)*(240-g)/60:e)}function Rc(g,e,I,t,n){var C=g*g,l=C*g;return((1-3*g+3*C-l)*e+(4-6*C+3*l)*I+(1+3*g+3*C-3*l)*t+l*n)/6}Pa(_a,dc,{copy(g){return Object.assign(new this.constructor,this,g)},displayable(){return this.rgb().displayable()},hex:Ac,formatHex:Ac,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Wc(this).formatHsl()},formatRgb:uc,toString:uc}),Pa(Zc,mc,qa(_a,{brighter(g){return g=null==g?gc:Math.pow(gc,g),new Zc(this.r*g,this.g*g,this.b*g,this.opacity)},darker(g){return g=null==g?$a:Math.pow($a,g),new Zc(this.r*g,this.g*g,this.b*g,this.opacity)},rgb(){return this},clamp(){return new Zc(hc(this.r),hc(this.g),hc(this.b),Gc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yc,formatHex:yc,formatHex8:function(){return`#${Bc(this.r)}${Bc(this.g)}${Bc(this.b)}${Bc(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:pc,toString:pc})),Pa(fc,(function(g,e,I,t){return 1===arguments.length?Wc(g):new fc(g,e,I,null==t?1:t)}),qa(_a,{brighter(g){return g=null==g?gc:Math.pow(gc,g),new fc(this.h,this.s,this.l*g,this.opacity)},darker(g){return g=null==g?$a:Math.pow($a,g),new fc(this.h,this.s,this.l*g,this.opacity)},rgb(){var g=this.h%360+360*(this.h<0),e=isNaN(g)||isNaN(this.s)?0:this.s,I=this.l,t=I+(I<.5?I:1-I)*e,n=2*I-t;return new Zc(Xc(g>=240?g-240:g+120,n,t),Xc(g,n,t),Xc(g<120?g+240:g-120,n,t),this.opacity)},clamp(){return new fc(Vc(this.h),vc(this.s),vc(this.l),Gc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const g=Gc(this.opacity);return`${1===g?"hsl(":"hsla("}${Vc(this.h)}, ${100*vc(this.s)}%, ${100*vc(this.l)}%${1===g?")":`, ${g})`}`}}));const Jc=g=>()=>g;function kc(g,e){return function(I){return g+I*e}}function Yc(g){return 1===(g=+g)?Hc:function(e,I){return I-e?function(g,e,I){return g=Math.pow(g,I),e=Math.pow(e,I)-g,I=1/I,function(t){return Math.pow(g+t*e,I)}}(e,I,g):Jc(isNaN(e)?I:e)}}function Hc(g,e){var I=e-g;return I?kc(g,I):Jc(isNaN(g)?e:g)}const wc=function g(e){var I=Yc(e);function t(g,e){var t=I((g=mc(g)).r,(e=mc(e)).r),n=I(g.g,e.g),C=I(g.b,e.b),l=Hc(g.opacity,e.opacity);return function(e){return g.r=t(e),g.g=n(e),g.b=C(e),g.opacity=l(e),g+""}}return t.gamma=g,t}(1);function Nc(g){return function(e){var I,t,n=e.length,C=new Array(n),l=new Array(n),o=new Array(n);for(I=0;I<n;++I)t=mc(e[I]),C[I]=t.r||0,l[I]=t.g||0,o[I]=t.b||0;return C=g(C),l=g(l),o=g(o),t.opacity=1,function(g){return t.r=C(g),t.g=l(g),t.b=o(g),t+""}}}Nc((function(g){var e=g.length-1;return function(I){var t=I<=0?I=0:I>=1?(I=1,e-1):Math.floor(I*e),n=g[t],C=g[t+1],l=t>0?g[t-1]:2*n-C,o=t<e-1?g[t+2]:2*C-n;return Rc((I-t/e)*e,l,n,C,o)}})),Nc((function(g){var e=g.length;return function(I){var t=Math.floor(((I%=1)<0?++I:I)*e),n=g[(t+e-1)%e],C=g[t%e],l=g[(t+1)%e],o=g[(t+2)%e];return Rc((I-t/e)*e,n,C,l,o)}}));function Kc(g,e){var I,t=e?e.length:0,n=g?Math.min(t,g.length):0,C=new Array(n),l=new Array(t);for(I=0;I<n;++I)C[I]=Lc(g[I],e[I]);for(;I<t;++I)l[I]=e[I];return function(g){for(I=0;I<n;++I)l[I]=C[I](g);return l}}function Fc(g,e){var I=new Date;return g=+g,e=+e,function(t){return I.setTime(g*(1-t)+e*t),I}}function xc(g,e){return g=+g,e=+e,function(I){return g*(1-I)+e*I}}function Ec(g,e){var I,t={},n={};for(I in null!==g&&"object"===typeof g||(g={}),null!==e&&"object"===typeof e||(e={}),e)I in g?t[I]=Lc(g[I],e[I]):n[I]=e[I];return function(g){for(I in t)n[I]=t[I](g);return n}}var Mc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zc=new RegExp(Mc.source,"g");function Uc(g,e){var I,t,n,C=Mc.lastIndex=zc.lastIndex=0,l=-1,o=[],r=[];for(g+="",e+="";(I=Mc.exec(g))&&(t=zc.exec(e));)(n=t.index)>C&&(n=e.slice(C,n),o[l]?o[l]+=n:o[++l]=n),(I=I[0])===(t=t[0])?o[l]?o[l]+=t:o[++l]=t:(o[++l]=null,r.push({i:l,x:xc(I,t)})),C=zc.lastIndex;return C<e.length&&(n=e.slice(C),o[l]?o[l]+=n:o[++l]=n),o.length<2?r[0]?function(g){return function(e){return g(e)+""}}(r[0].x):function(g){return function(){return g}}(e):(e=r.length,function(g){for(var I,t=0;t<e;++t)o[(I=r[t]).i]=I.x(g);return o.join("")})}function Qc(g,e){e||(e=[]);var I,t=g?Math.min(e.length,g.length):0,n=e.slice();return function(C){for(I=0;I<t;++I)n[I]=g[I]*(1-C)+e[I]*C;return n}}function Lc(g,e){var I,t,n=typeof e;return null==e||"boolean"===n?Jc(e):("number"===n?xc:"string"===n?(I=dc(e))?(e=I,wc):Uc:e instanceof dc?wc:e instanceof Date?Fc:(t=e,!ArrayBuffer.isView(t)||t instanceof DataView?Array.isArray(e)?Kc:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?Ec:xc:Qc))(g,e)}function Dc(g,e){return g=+g,e=+e,function(I){return Math.round(g*(1-I)+e*I)}}function Tc(g){return+g}var jc=[0,1];function Oc(g){return g}function Pc(g,e){return(e-=g=+g)?function(I){return(I-g)/e}:(I=isNaN(e)?NaN:.5,function(){return I});var I}function qc(g,e,I){var t=g[0],n=g[1],C=e[0],l=e[1];return n<t?(t=Pc(n,t),C=I(l,C)):(t=Pc(t,n),C=I(C,l)),function(g){return C(t(g))}}function _c(g,e,I){var t=Math.min(g.length,e.length)-1,n=new Array(t),C=new Array(t),l=-1;for(g[t]<g[0]&&(g=g.slice().reverse(),e=e.slice().reverse());++l<t;)n[l]=Pc(g[l],g[l+1]),C[l]=I(e[l],e[l+1]);return function(e){var I=Oa(g,e,1,t)-1;return C[I](n[I](e))}}function $c(g,e){return e.domain(g.domain()).range(g.range()).interpolate(g.interpolate()).clamp(g.clamp()).unknown(g.unknown())}function gi(){var g,e,I,t,n,C,l=jc,o=jc,r=Lc,a=Oc;function c(){var g=Math.min(l.length,o.length);return a!==Oc&&(a=function(g,e){var I;return g>e&&(I=g,g=e,e=I),function(I){return Math.max(g,Math.min(e,I))}}(l[0],l[g-1])),t=g>2?_c:qc,n=C=null,i}function i(e){return null==e||isNaN(e=+e)?I:(n||(n=t(l.map(g),o,r)))(g(a(e)))}return i.invert=function(I){return a(e((C||(C=t(o,l.map(g),xc)))(I)))},i.domain=function(g){return arguments.length?(l=Array.from(g,Tc),c()):l.slice()},i.range=function(g){return arguments.length?(o=Array.from(g),c()):o.slice()},i.rangeRound=function(g){return o=Array.from(g),r=Dc,c()},i.clamp=function(g){return arguments.length?(a=!!g||Oc,c()):a!==Oc},i.interpolate=function(g){return arguments.length?(r=g,c()):r},i.unknown=function(g){return arguments.length?(I=g,i):I},function(I,t){return g=I,e=t,c()}}function ei(){return gi()(Oc,Oc)}var Ii,ti=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ni(g){if(!(e=ti.exec(g)))throw new Error("invalid format: "+g);var e;return new Ci({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Ci(g){this.fill=void 0===g.fill?" ":g.fill+"",this.align=void 0===g.align?">":g.align+"",this.sign=void 0===g.sign?"-":g.sign+"",this.symbol=void 0===g.symbol?"":g.symbol+"",this.zero=!!g.zero,this.width=void 0===g.width?void 0:+g.width,this.comma=!!g.comma,this.precision=void 0===g.precision?void 0:+g.precision,this.trim=!!g.trim,this.type=void 0===g.type?"":g.type+""}function li(g,e){if((I=(g=e?g.toExponential(e-1):g.toExponential()).indexOf("e"))<0)return null;var I,t=g.slice(0,I);return[t.length>1?t[0]+t.slice(2):t,+g.slice(I+1)]}function oi(g){return(g=li(Math.abs(g)))?g[1]:NaN}function ri(g,e){var I=li(g,e);if(!I)return g+"";var t=I[0],n=I[1];return n<0?"0."+new Array(-n).join("0")+t:t.length>n+1?t.slice(0,n+1)+"."+t.slice(n+1):t+new Array(n-t.length+2).join("0")}ni.prototype=Ci.prototype,Ci.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const ai={"%":(g,e)=>(100*g).toFixed(e),b:g=>Math.round(g).toString(2),c:g=>g+"",d:function(g){return Math.abs(g=Math.round(g))>=1e21?g.toLocaleString("en").replace(/,/g,""):g.toString(10)},e:(g,e)=>g.toExponential(e),f:(g,e)=>g.toFixed(e),g:(g,e)=>g.toPrecision(e),o:g=>Math.round(g).toString(8),p:(g,e)=>ri(100*g,e),r:ri,s:function(g,e){var I=li(g,e);if(!I)return g+"";var t=I[0],n=I[1],C=n-(Ii=3*Math.max(-8,Math.min(8,Math.floor(n/3))))+1,l=t.length;return C===l?t:C>l?t+new Array(C-l+1).join("0"):C>0?t.slice(0,C)+"."+t.slice(C):"0."+new Array(1-C).join("0")+li(g,Math.max(0,e+C-1))[0]},X:g=>Math.round(g).toString(16).toUpperCase(),x:g=>Math.round(g).toString(16)};function ci(g){return g}var ii,Ai,ui,di=Array.prototype.map,si=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function bi(g){var e,I,t=void 0===g.grouping||void 0===g.thousands?ci:(e=di.call(g.grouping,Number),I=g.thousands+"",function(g,t){for(var n=g.length,C=[],l=0,o=e[0],r=0;n>0&&o>0&&(r+o+1>t&&(o=Math.max(1,t-r)),C.push(g.substring(n-=o,n+o)),!((r+=o+1)>t));)o=e[l=(l+1)%e.length];return C.reverse().join(I)}),n=void 0===g.currency?"":g.currency[0]+"",C=void 0===g.currency?"":g.currency[1]+"",l=void 0===g.decimal?".":g.decimal+"",o=void 0===g.numerals?ci:function(g){return function(e){return e.replace(/[0-9]/g,(function(e){return g[+e]}))}}(di.call(g.numerals,String)),r=void 0===g.percent?"%":g.percent+"",a=void 0===g.minus?"\u2212":g.minus+"",c=void 0===g.nan?"NaN":g.nan+"";function i(g){var e=(g=ni(g)).fill,I=g.align,i=g.sign,A=g.symbol,u=g.zero,d=g.width,s=g.comma,b=g.precision,m=g.trim,Z=g.type;"n"===Z?(s=!0,Z="g"):ai[Z]||(void 0===b&&(b=12),m=!0,Z="g"),(u||"0"===e&&"="===I)&&(u=!0,e="0",I="=");var y="$"===A?n:"#"===A&&/[boxX]/.test(Z)?"0"+Z.toLowerCase():"",p="$"===A?C:/[%p]/.test(Z)?r:"",G=ai[Z],h=/[defgprs%]/.test(Z);function B(g){var n,C,r,A=y,B=p;if("c"===Z)B=G(g)+B,g="";else{var S=(g=+g)<0||1/g<0;if(g=isNaN(g)?c:G(Math.abs(g),b),m&&(g=function(g){g:for(var e,I=g.length,t=1,n=-1;t<I;++t)switch(g[t]){case".":n=e=t;break;case"0":0===n&&(n=t),e=t;break;default:if(!+g[t])break g;n>0&&(n=0)}return n>0?g.slice(0,n)+g.slice(e+1):g}(g)),S&&0===+g&&"+"!==i&&(S=!1),A=(S?"("===i?i:a:"-"===i||"("===i?"":i)+A,B=("s"===Z?si[8+Ii/3]:"")+B+(S&&"("===i?")":""),h)for(n=-1,C=g.length;++n<C;)if(48>(r=g.charCodeAt(n))||r>57){B=(46===r?l+g.slice(n+1):g.slice(n))+B,g=g.slice(0,n);break}}s&&!u&&(g=t(g,1/0));var W=A.length+g.length+B.length,f=W<d?new Array(d-W+1).join(e):"";switch(s&&u&&(g=t(f+g,f.length?d-B.length:1/0),f=""),I){case"<":g=A+g+B+f;break;case"=":g=A+f+g+B;break;case"^":g=f.slice(0,W=f.length>>1)+A+g+B+f.slice(W);break;default:g=f+A+g+B}return o(g)}return b=void 0===b?6:/[gprs]/.test(Z)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b)),B.toString=function(){return g+""},B}return{format:i,formatPrefix:function(g,e){var I=i(((g=ni(g)).type="f",g)),t=3*Math.max(-8,Math.min(8,Math.floor(oi(e)/3))),n=Math.pow(10,-t),C=si[8+t/3];return function(g){return I(n*g)+C}}}}function mi(g,e,I,t){var n,C=Ma(g,e,I);switch((t=ni(null==t?",f":t)).type){case"s":var l=Math.max(Math.abs(g),Math.abs(e));return null!=t.precision||isNaN(n=function(g,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(oi(e)/3)))-oi(Math.abs(g)))}(C,l))||(t.precision=n),ui(t,l);case"":case"e":case"g":case"p":case"r":null!=t.precision||isNaN(n=function(g,e){return g=Math.abs(g),e=Math.abs(e)-g,Math.max(0,oi(e)-oi(g))+1}(C,Math.max(Math.abs(g),Math.abs(e))))||(t.precision=n-("e"===t.type));break;case"f":case"%":null!=t.precision||isNaN(n=function(g){return Math.max(0,-oi(Math.abs(g)))}(C))||(t.precision=n-2*("%"===t.type))}return Ai(t)}function Zi(g){var e=g.domain;return g.ticks=function(g){var I=e();return xa(I[0],I[I.length-1],null==g?10:g)},g.tickFormat=function(g,I){var t=e();return mi(t[0],t[t.length-1],null==g?10:g,I)},g.nice=function(I){null==I&&(I=10);var t,n,C=e(),l=0,o=C.length-1,r=C[l],a=C[o],c=10;for(a<r&&(n=r,r=a,a=n,n=l,l=o,o=n);c-- >0;){if((n=Ea(r,a,I))===t)return C[l]=r,C[o]=a,e(C);if(n>0)r=Math.floor(r/n)*n,a=Math.ceil(a/n)*n;else{if(!(n<0))break;r=Math.ceil(r*n)/n,a=Math.floor(a*n)/n}t=n}return g},g}function yi(){var g=ei();return g.copy=function(){return $c(g,yi())},Er.apply(g,arguments),Zi(g)}function pi(g){var e;function I(g){return null==g||isNaN(g=+g)?e:g}return I.invert=I,I.domain=I.range=function(e){return arguments.length?(g=Array.from(e,Tc),I):g.slice()},I.unknown=function(g){return arguments.length?(e=g,I):e},I.copy=function(){return pi(g).unknown(e)},g=arguments.length?Array.from(g,Tc):[0,1],Zi(I)}function Gi(g,e){var I,t=0,n=(g=g.slice()).length-1,C=g[t],l=g[n];return l<C&&(I=t,t=n,n=I,I=C,C=l,l=I),g[t]=e.floor(C),g[n]=e.ceil(l),g}function hi(g){return Math.log(g)}function Bi(g){return Math.exp(g)}function Si(g){return-Math.log(-g)}function Wi(g){return-Math.exp(-g)}function fi(g){return isFinite(g)?+("1e"+g):g<0?0:g}function Vi(g){return(e,I)=>-g(-e,I)}function vi(g){const e=g(hi,Bi),I=e.domain;let t,n,C=10;function l(){return t=function(g){return g===Math.E?Math.log:10===g&&Math.log10||2===g&&Math.log2||(g=Math.log(g),e=>Math.log(e)/g)}(C),n=function(g){return 10===g?fi:g===Math.E?Math.exp:e=>Math.pow(g,e)}(C),I()[0]<0?(t=Vi(t),n=Vi(n),g(Si,Wi)):g(hi,Bi),e}return e.base=function(g){return arguments.length?(C=+g,l()):C},e.domain=function(g){return arguments.length?(I(g),l()):I()},e.ticks=g=>{const e=I();let l=e[0],o=e[e.length-1];const r=o<l;r&&([l,o]=[o,l]);let a,c,i=t(l),A=t(o);const u=null==g?10:+g;let d=[];if(!(C%1)&&A-i<u){if(i=Math.floor(i),A=Math.ceil(A),l>0){for(;i<=A;++i)for(a=1;a<C;++a)if(c=i<0?a/n(-i):a*n(i),!(c<l)){if(c>o)break;d.push(c)}}else for(;i<=A;++i)for(a=C-1;a>=1;--a)if(c=i>0?a/n(-i):a*n(i),!(c<l)){if(c>o)break;d.push(c)}2*d.length<u&&(d=xa(l,o,u))}else d=xa(i,A,Math.min(A-i,u)).map(n);return r?d.reverse():d},e.tickFormat=(g,I)=>{if(null==g&&(g=10),null==I&&(I=10===C?"s":","),"function"!==typeof I&&(C%1||null!=(I=ni(I)).precision||(I.trim=!0),I=Ai(I)),g===1/0)return I;const l=Math.max(1,C*g/e.ticks().length);return g=>{let e=g/n(Math.round(t(g)));return e*C<C-.5&&(e*=C),e<=l?I(g):""}},e.nice=()=>I(Gi(I(),{floor:g=>n(Math.floor(t(g))),ceil:g=>n(Math.ceil(t(g)))})),e}function Xi(){const g=vi(gi()).domain([1,10]);return g.copy=()=>$c(g,Xi()).base(g.base()),Er.apply(g,arguments),g}function Ri(g){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/g))}}function Ji(g){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*g}}function ki(g){var e=1,I=g(Ri(e),Ji(e));return I.constant=function(I){return arguments.length?g(Ri(e=+I),Ji(e)):e},Zi(I)}function Yi(){var g=ki(gi());return g.copy=function(){return $c(g,Yi()).constant(g.constant())},Er.apply(g,arguments)}function Hi(g){return function(e){return e<0?-Math.pow(-e,g):Math.pow(e,g)}}function wi(g){return g<0?-Math.sqrt(-g):Math.sqrt(g)}function Ni(g){return g<0?-g*g:g*g}function Ki(g){var e=g(Oc,Oc),I=1;return e.exponent=function(e){return arguments.length?1===(I=+e)?g(Oc,Oc):.5===I?g(wi,Ni):g(Hi(I),Hi(1/I)):I},Zi(e)}function Fi(){var g=Ki(gi());return g.copy=function(){return $c(g,Fi()).exponent(g.exponent())},Er.apply(g,arguments),g}function xi(){return Fi.apply(null,arguments).exponent(.5)}function Ei(g){return Math.sign(g)*g*g}function Mi(){var g,e=ei(),I=[0,1],t=!1;function n(I){var n=function(g){return Math.sign(g)*Math.sqrt(Math.abs(g))}(e(I));return isNaN(n)?g:t?Math.round(n):n}return n.invert=function(g){return e.invert(Ei(g))},n.domain=function(g){return arguments.length?(e.domain(g),n):e.domain()},n.range=function(g){return arguments.length?(e.range((I=Array.from(g,Tc)).map(Ei)),n):I.slice()},n.rangeRound=function(g){return n.range(g).round(!0)},n.round=function(g){return arguments.length?(t=!!g,n):t},n.clamp=function(g){return arguments.length?(e.clamp(g),n):e.clamp()},n.unknown=function(e){return arguments.length?(g=e,n):g},n.copy=function(){return Mi(e.domain(),I).round(t).clamp(e.clamp()).unknown(g)},Er.apply(n,arguments),Zi(n)}function zi(g,e){let I;if(void 0===e)for(const t of g)null!=t&&(I<t||void 0===I&&t>=t)&&(I=t);else{let t=-1;for(let n of g)null!=(n=e(n,++t,g))&&(I<n||void 0===I&&n>=n)&&(I=n)}return I}function Ui(g,e){let I;if(void 0===e)for(const t of g)null!=t&&(I>t||void 0===I&&t>=t)&&(I=t);else{let t=-1;for(let n of g)null!=(n=e(n,++t,g))&&(I>n||void 0===I&&n>=n)&&(I=n)}return I}function Qi(){let g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:za;if(g===za)return Li;if("function"!==typeof g)throw new TypeError("compare is not a function");return(e,I)=>{const t=g(e,I);return t||0===t?t:(0===g(I,I))-(0===g(e,e))}}function Li(g,e){return(null==g||!(g>=g))-(null==e||!(e>=e))||(g<e?-1:g>e?1:0)}function Di(g,e){let I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,n=arguments.length>4?arguments[4]:void 0;if(e=Math.floor(e),I=Math.floor(Math.max(0,I)),t=Math.floor(Math.min(g.length-1,t)),!(I<=e&&e<=t))return g;for(n=void 0===n?Li:Qi(n);t>I;){if(t-I>600){const C=t-I+1,l=e-I+1,o=Math.log(C),r=.5*Math.exp(2*o/3),a=.5*Math.sqrt(o*r*(C-r)/C)*(l-C/2<0?-1:1);Di(g,e,Math.max(I,Math.floor(e-l*r/C+a)),Math.min(t,Math.floor(e+(C-l)*r/C+a)),n)}const C=g[e];let l=I,o=t;for(Ti(g,I,e),n(g[t],C)>0&&Ti(g,I,t);l<o;){for(Ti(g,l,o),++l,--o;n(g[l],C)<0;)++l;for(;n(g[o],C)>0;)--o}0===n(g[I],C)?Ti(g,I,o):(++o,Ti(g,o,t)),o<=e&&(I=o+1),e<=o&&(t=o-1)}return g}function Ti(g,e,I){const t=g[e];g[e]=g[I],g[I]=t}function ji(g,e,I){if(g=Float64Array.from(function*(g,e){if(void 0===e)for(let I of g)null!=I&&(I=+I)>=I&&(yield I);else{let I=-1;for(let t of g)null!=(t=e(t,++I,g))&&(t=+t)>=t&&(yield t)}}(g,I)),(t=g.length)&&!isNaN(e=+e)){if(e<=0||t<2)return Ui(g);if(e>=1)return zi(g);var t,n=(t-1)*e,C=Math.floor(n),l=zi(Di(g,C).subarray(0,C+1));return l+(Ui(g.subarray(C+1))-l)*(n-C)}}function Oi(g,e){let I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Da;if((t=g.length)&&!isNaN(e=+e)){if(e<=0||t<2)return+I(g[0],0,g);if(e>=1)return+I(g[t-1],t-1,g);var t,n=(t-1)*e,C=Math.floor(n),l=+I(g[C],C,g);return l+(+I(g[C+1],C+1,g)-l)*(n-C)}}function Pi(){var g,e=[],I=[],t=[];function n(){var g=0,n=Math.max(1,I.length);for(t=new Array(n-1);++g<n;)t[g-1]=Oi(e,g/n);return C}function C(e){return null==e||isNaN(e=+e)?g:I[Oa(t,e)]}return C.invertExtent=function(g){var n=I.indexOf(g);return n<0?[NaN,NaN]:[n>0?t[n-1]:e[0],n<t.length?t[n]:e[e.length-1]]},C.domain=function(g){if(!arguments.length)return e.slice();e=[];for(let I of g)null==I||isNaN(I=+I)||e.push(I);return e.sort(za),n()},C.range=function(g){return arguments.length?(I=Array.from(g),n()):I.slice()},C.unknown=function(e){return arguments.length?(g=e,C):g},C.quantiles=function(){return t.slice()},C.copy=function(){return Pi().domain(e).range(I).unknown(g)},Er.apply(C,arguments)}function qi(){var g,e=0,I=1,t=1,n=[.5],C=[0,1];function l(e){return null!=e&&e<=e?C[Oa(n,e,0,t)]:g}function o(){var g=-1;for(n=new Array(t);++g<t;)n[g]=((g+1)*I-(g-t)*e)/(t+1);return l}return l.domain=function(g){return arguments.length?([e,I]=g,e=+e,I=+I,o()):[e,I]},l.range=function(g){return arguments.length?(t=(C=Array.from(g)).length-1,o()):C.slice()},l.invertExtent=function(g){var l=C.indexOf(g);return l<0?[NaN,NaN]:l<1?[e,n[0]]:l>=t?[n[t-1],I]:[n[l-1],n[l]]},l.unknown=function(e){return arguments.length?(g=e,l):l},l.thresholds=function(){return n.slice()},l.copy=function(){return qi().domain([e,I]).range(C).unknown(g)},Er.apply(Zi(l),arguments)}function _i(){var g,e=[.5],I=[0,1],t=1;function n(n){return null!=n&&n<=n?I[Oa(e,n,0,t)]:g}return n.domain=function(g){return arguments.length?(e=Array.from(g),t=Math.min(e.length,I.length-1),n):e.slice()},n.range=function(g){return arguments.length?(I=Array.from(g),t=Math.min(e.length,I.length-1),n):I.slice()},n.invertExtent=function(g){var t=I.indexOf(g);return[e[t-1],e[t]]},n.unknown=function(e){return arguments.length?(g=e,n):g},n.copy=function(){return _i().domain(e).range(I).unknown(g)},Er.apply(n,arguments)}ii=bi({thousands:",",grouping:[3],currency:["$",""]}),Ai=ii.format,ui=ii.formatPrefix;const $i=1e3,gA=6e4,eA=36e5,IA=864e5,tA=6048e5,nA=2592e6,CA=31536e6,lA=new Date,oA=new Date;function rA(g,e,I,t){function n(e){return g(e=0===arguments.length?new Date:new Date(+e)),e}return n.floor=e=>(g(e=new Date(+e)),e),n.ceil=I=>(g(I=new Date(I-1)),e(I,1),g(I),I),n.round=g=>{const e=n(g),I=n.ceil(g);return g-e<I-g?e:I},n.offset=(g,I)=>(e(g=new Date(+g),null==I?1:Math.floor(I)),g),n.range=(I,t,C)=>{const l=[];if(I=n.ceil(I),C=null==C?1:Math.floor(C),!(I<t)||!(C>0))return l;let o;do{l.push(o=new Date(+I)),e(I,C),g(I)}while(o<I&&I<t);return l},n.filter=I=>rA((e=>{if(e>=e)for(;g(e),!I(e);)e.setTime(e-1)}),((g,t)=>{if(g>=g)if(t<0)for(;++t<=0;)for(;e(g,-1),!I(g););else for(;--t>=0;)for(;e(g,1),!I(g););})),I&&(n.count=(e,t)=>(lA.setTime(+e),oA.setTime(+t),g(lA),g(oA),Math.floor(I(lA,oA))),n.every=g=>(g=Math.floor(g),isFinite(g)&&g>0?g>1?n.filter(t?e=>t(e)%g===0:e=>n.count(0,e)%g===0):n:null)),n}const aA=rA((()=>{}),((g,e)=>{g.setTime(+g+e)}),((g,e)=>e-g));aA.every=g=>(g=Math.floor(g),isFinite(g)&&g>0?g>1?rA((e=>{e.setTime(Math.floor(e/g)*g)}),((e,I)=>{e.setTime(+e+I*g)}),((e,I)=>(I-e)/g)):aA:null);aA.range;const cA=rA((g=>{g.setTime(g-g.getMilliseconds())}),((g,e)=>{g.setTime(+g+e*$i)}),((g,e)=>(e-g)/$i),(g=>g.getUTCSeconds())),iA=(cA.range,rA((g=>{g.setTime(g-g.getMilliseconds()-g.getSeconds()*$i)}),((g,e)=>{g.setTime(+g+e*gA)}),((g,e)=>(e-g)/gA),(g=>g.getMinutes()))),AA=(iA.range,rA((g=>{g.setUTCSeconds(0,0)}),((g,e)=>{g.setTime(+g+e*gA)}),((g,e)=>(e-g)/gA),(g=>g.getUTCMinutes()))),uA=(AA.range,rA((g=>{g.setTime(g-g.getMilliseconds()-g.getSeconds()*$i-g.getMinutes()*gA)}),((g,e)=>{g.setTime(+g+e*eA)}),((g,e)=>(e-g)/eA),(g=>g.getHours()))),dA=(uA.range,rA((g=>{g.setUTCMinutes(0,0,0)}),((g,e)=>{g.setTime(+g+e*eA)}),((g,e)=>(e-g)/eA),(g=>g.getUTCHours()))),sA=(dA.range,rA((g=>g.setHours(0,0,0,0)),((g,e)=>g.setDate(g.getDate()+e)),((g,e)=>(e-g-(e.getTimezoneOffset()-g.getTimezoneOffset())*gA)/IA),(g=>g.getDate()-1))),bA=(sA.range,rA((g=>{g.setUTCHours(0,0,0,0)}),((g,e)=>{g.setUTCDate(g.getUTCDate()+e)}),((g,e)=>(e-g)/IA),(g=>g.getUTCDate()-1))),mA=(bA.range,rA((g=>{g.setUTCHours(0,0,0,0)}),((g,e)=>{g.setUTCDate(g.getUTCDate()+e)}),((g,e)=>(e-g)/IA),(g=>Math.floor(g/IA))));mA.range;function ZA(g){return rA((e=>{e.setDate(e.getDate()-(e.getDay()+7-g)%7),e.setHours(0,0,0,0)}),((g,e)=>{g.setDate(g.getDate()+7*e)}),((g,e)=>(e-g-(e.getTimezoneOffset()-g.getTimezoneOffset())*gA)/tA))}const yA=ZA(0),pA=ZA(1),GA=ZA(2),hA=ZA(3),BA=ZA(4),SA=ZA(5),WA=ZA(6);yA.range,pA.range,GA.range,hA.range,BA.range,SA.range,WA.range;function fA(g){return rA((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-g)%7),e.setUTCHours(0,0,0,0)}),((g,e)=>{g.setUTCDate(g.getUTCDate()+7*e)}),((g,e)=>(e-g)/tA))}const VA=fA(0),vA=fA(1),XA=fA(2),RA=fA(3),JA=fA(4),kA=fA(5),YA=fA(6),HA=(VA.range,vA.range,XA.range,RA.range,JA.range,kA.range,YA.range,rA((g=>{g.setDate(1),g.setHours(0,0,0,0)}),((g,e)=>{g.setMonth(g.getMonth()+e)}),((g,e)=>e.getMonth()-g.getMonth()+12*(e.getFullYear()-g.getFullYear())),(g=>g.getMonth()))),wA=(HA.range,rA((g=>{g.setUTCDate(1),g.setUTCHours(0,0,0,0)}),((g,e)=>{g.setUTCMonth(g.getUTCMonth()+e)}),((g,e)=>e.getUTCMonth()-g.getUTCMonth()+12*(e.getUTCFullYear()-g.getUTCFullYear())),(g=>g.getUTCMonth()))),NA=(wA.range,rA((g=>{g.setMonth(0,1),g.setHours(0,0,0,0)}),((g,e)=>{g.setFullYear(g.getFullYear()+e)}),((g,e)=>e.getFullYear()-g.getFullYear()),(g=>g.getFullYear())));NA.every=g=>isFinite(g=Math.floor(g))&&g>0?rA((e=>{e.setFullYear(Math.floor(e.getFullYear()/g)*g),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,I)=>{e.setFullYear(e.getFullYear()+I*g)})):null;NA.range;const KA=rA((g=>{g.setUTCMonth(0,1),g.setUTCHours(0,0,0,0)}),((g,e)=>{g.setUTCFullYear(g.getUTCFullYear()+e)}),((g,e)=>e.getUTCFullYear()-g.getUTCFullYear()),(g=>g.getUTCFullYear()));KA.every=g=>isFinite(g=Math.floor(g))&&g>0?rA((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/g)*g),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,I)=>{e.setUTCFullYear(e.getUTCFullYear()+I*g)})):null;KA.range;function FA(g,e,I,t,n,C){const l=[[cA,1,$i],[cA,5,5e3],[cA,15,15e3],[cA,30,3e4],[C,1,gA],[C,5,3e5],[C,15,9e5],[C,30,18e5],[n,1,eA],[n,3,108e5],[n,6,216e5],[n,12,432e5],[t,1,IA],[t,2,1728e5],[I,1,tA],[e,1,nA],[e,3,7776e6],[g,1,CA]];function o(e,I,t){const n=Math.abs(I-e)/t,C=Qa((g=>{let[,,e]=g;return e})).right(l,n);if(C===l.length)return g.every(Ma(e/CA,I/CA,t));if(0===C)return aA.every(Math.max(Ma(e,I,t),1));const[o,r]=l[n/l[C-1][2]<l[C][2]/n?C-1:C];return o.every(r)}return[function(g,e,I){const t=e<g;t&&([g,e]=[e,g]);const n=I&&"function"===typeof I.range?I:o(g,e,I),C=n?n.range(g,+e+1):[];return t?C.reverse():C},o]}const[xA,EA]=FA(KA,wA,VA,mA,dA,AA),[MA,zA]=FA(NA,HA,yA,sA,uA,iA);function UA(g){if(0<=g.y&&g.y<100){var e=new Date(-1,g.m,g.d,g.H,g.M,g.S,g.L);return e.setFullYear(g.y),e}return new Date(g.y,g.m,g.d,g.H,g.M,g.S,g.L)}function QA(g){if(0<=g.y&&g.y<100){var e=new Date(Date.UTC(-1,g.m,g.d,g.H,g.M,g.S,g.L));return e.setUTCFullYear(g.y),e}return new Date(Date.UTC(g.y,g.m,g.d,g.H,g.M,g.S,g.L))}function LA(g,e,I){return{y:g,m:e,d:I,H:0,M:0,S:0,L:0}}var DA,TA,jA,OA={"-":"",_:" ",0:"0"},PA=/^\s*\d+/,qA=/^%/,_A=/[\\^$*+?|[\]().{}]/g;function $A(g,e,I){var t=g<0?"-":"",n=(t?-g:g)+"",C=n.length;return t+(C<I?new Array(I-C+1).join(e)+n:n)}function gu(g){return g.replace(_A,"\\$&")}function eu(g){return new RegExp("^(?:"+g.map(gu).join("|")+")","i")}function Iu(g){return new Map(g.map(((g,e)=>[g.toLowerCase(),e])))}function tu(g,e,I){var t=PA.exec(e.slice(I,I+1));return t?(g.w=+t[0],I+t[0].length):-1}function nu(g,e,I){var t=PA.exec(e.slice(I,I+1));return t?(g.u=+t[0],I+t[0].length):-1}function Cu(g,e,I){var t=PA.exec(e.slice(I,I+2));return t?(g.U=+t[0],I+t[0].length):-1}function lu(g,e,I){var t=PA.exec(e.slice(I,I+2));return t?(g.V=+t[0],I+t[0].length):-1}function ou(g,e,I){var t=PA.exec(e.slice(I,I+2));return t?(g.W=+t[0],I+t[0].length):-1}function ru(g,e,I){var t=PA.exec(e.slice(I,I+4));return t?(g.y=+t[0],I+t[0].length):-1}function au(g,e,I){var t=PA.exec(e.slice(I,I+2));return t?(g.y=+t[0]+(+t[0]>68?1900:2e3),I+t[0].length):-1}function cu(g,e,I){var t=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(I,I+6));return t?(g.Z=t[1]?0:-(t[2]+(t[3]||"00")),I+t[0].length):-1}function iu(g,e,I){var t=PA.exec(e.slice(I,I+1));return t?(g.q=3*t[0]-3,I+t[0].length):-1}function Au(g,e,I){var t=PA.exec(e.slice(I,I+2));return t?(g.m=t[0]-1,I+t[0].length):-1}function uu(g,e,I){var t=PA.exec(e.slice(I,I+2));return t?(g.d=+t[0],I+t[0].length):-1}function du(g,e,I){var t=PA.exec(e.slice(I,I+3));return t?(g.m=0,g.d=+t[0],I+t[0].length):-1}function su(g,e,I){var t=PA.exec(e.slice(I,I+2));return t?(g.H=+t[0],I+t[0].length):-1}function bu(g,e,I){var t=PA.exec(e.slice(I,I+2));return t?(g.M=+t[0],I+t[0].length):-1}function mu(g,e,I){var t=PA.exec(e.slice(I,I+2));return t?(g.S=+t[0],I+t[0].length):-1}function Zu(g,e,I){var t=PA.exec(e.slice(I,I+3));return t?(g.L=+t[0],I+t[0].length):-1}function yu(g,e,I){var t=PA.exec(e.slice(I,I+6));return t?(g.L=Math.floor(t[0]/1e3),I+t[0].length):-1}function pu(g,e,I){var t=qA.exec(e.slice(I,I+1));return t?I+t[0].length:-1}function Gu(g,e,I){var t=PA.exec(e.slice(I));return t?(g.Q=+t[0],I+t[0].length):-1}function hu(g,e,I){var t=PA.exec(e.slice(I));return t?(g.s=+t[0],I+t[0].length):-1}function Bu(g,e){return $A(g.getDate(),e,2)}function Su(g,e){return $A(g.getHours(),e,2)}function Wu(g,e){return $A(g.getHours()%12||12,e,2)}function fu(g,e){return $A(1+sA.count(NA(g),g),e,3)}function Vu(g,e){return $A(g.getMilliseconds(),e,3)}function vu(g,e){return Vu(g,e)+"000"}function Xu(g,e){return $A(g.getMonth()+1,e,2)}function Ru(g,e){return $A(g.getMinutes(),e,2)}function Ju(g,e){return $A(g.getSeconds(),e,2)}function ku(g){var e=g.getDay();return 0===e?7:e}function Yu(g,e){return $A(yA.count(NA(g)-1,g),e,2)}function Hu(g){var e=g.getDay();return e>=4||0===e?BA(g):BA.ceil(g)}function wu(g,e){return g=Hu(g),$A(BA.count(NA(g),g)+(4===NA(g).getDay()),e,2)}function Nu(g){return g.getDay()}function Ku(g,e){return $A(pA.count(NA(g)-1,g),e,2)}function Fu(g,e){return $A(g.getFullYear()%100,e,2)}function xu(g,e){return $A((g=Hu(g)).getFullYear()%100,e,2)}function Eu(g,e){return $A(g.getFullYear()%1e4,e,4)}function Mu(g,e){var I=g.getDay();return $A((g=I>=4||0===I?BA(g):BA.ceil(g)).getFullYear()%1e4,e,4)}function zu(g){var e=g.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+$A(e/60|0,"0",2)+$A(e%60,"0",2)}function Uu(g,e){return $A(g.getUTCDate(),e,2)}function Qu(g,e){return $A(g.getUTCHours(),e,2)}function Lu(g,e){return $A(g.getUTCHours()%12||12,e,2)}function Du(g,e){return $A(1+bA.count(KA(g),g),e,3)}function Tu(g,e){return $A(g.getUTCMilliseconds(),e,3)}function ju(g,e){return Tu(g,e)+"000"}function Ou(g,e){return $A(g.getUTCMonth()+1,e,2)}function Pu(g,e){return $A(g.getUTCMinutes(),e,2)}function qu(g,e){return $A(g.getUTCSeconds(),e,2)}function _u(g){var e=g.getUTCDay();return 0===e?7:e}function $u(g,e){return $A(VA.count(KA(g)-1,g),e,2)}function gd(g){var e=g.getUTCDay();return e>=4||0===e?JA(g):JA.ceil(g)}function ed(g,e){return g=gd(g),$A(JA.count(KA(g),g)+(4===KA(g).getUTCDay()),e,2)}function Id(g){return g.getUTCDay()}function td(g,e){return $A(vA.count(KA(g)-1,g),e,2)}function nd(g,e){return $A(g.getUTCFullYear()%100,e,2)}function Cd(g,e){return $A((g=gd(g)).getUTCFullYear()%100,e,2)}function ld(g,e){return $A(g.getUTCFullYear()%1e4,e,4)}function od(g,e){var I=g.getUTCDay();return $A((g=I>=4||0===I?JA(g):JA.ceil(g)).getUTCFullYear()%1e4,e,4)}function rd(){return"+0000"}function ad(){return"%"}function cd(g){return+g}function id(g){return Math.floor(+g/1e3)}function Ad(g){return new Date(g)}function ud(g){return g instanceof Date?+g:+new Date(+g)}function dd(g,e,I,t,n,C,l,o,r,a){var c=ei(),i=c.invert,A=c.domain,u=a(".%L"),d=a(":%S"),s=a("%I:%M"),b=a("%I %p"),m=a("%a %d"),Z=a("%b %d"),y=a("%B"),p=a("%Y");function G(g){return(r(g)<g?u:o(g)<g?d:l(g)<g?s:C(g)<g?b:t(g)<g?n(g)<g?m:Z:I(g)<g?y:p)(g)}return c.invert=function(g){return new Date(i(g))},c.domain=function(g){return arguments.length?A(Array.from(g,ud)):A().map(Ad)},c.ticks=function(e){var I=A();return g(I[0],I[I.length-1],null==e?10:e)},c.tickFormat=function(g,e){return null==e?G:a(e)},c.nice=function(g){var I=A();return g&&"function"===typeof g.range||(g=e(I[0],I[I.length-1],null==g?10:g)),g?A(Gi(I,g)):c},c.copy=function(){return $c(c,dd(g,e,I,t,n,C,l,o,r,a))},c}function sd(){return Er.apply(dd(MA,zA,NA,HA,yA,sA,uA,iA,cA,TA).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function bd(){return Er.apply(dd(xA,EA,KA,wA,VA,bA,dA,AA,cA,jA).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function md(){var g,e,I,t,n,C=0,l=1,o=Oc,r=!1;function a(e){return null==e||isNaN(e=+e)?n:o(0===I?.5:(e=(t(e)-g)*I,r?Math.max(0,Math.min(1,e)):e))}function c(g){return function(e){var I,t;return arguments.length?([I,t]=e,o=g(I,t),a):[o(0),o(1)]}}return a.domain=function(n){return arguments.length?([C,l]=n,g=t(C=+C),e=t(l=+l),I=g===e?0:1/(e-g),a):[C,l]},a.clamp=function(g){return arguments.length?(r=!!g,a):r},a.interpolator=function(g){return arguments.length?(o=g,a):o},a.range=c(Lc),a.rangeRound=c(Dc),a.unknown=function(g){return arguments.length?(n=g,a):n},function(n){return t=n,g=n(C),e=n(l),I=g===e?0:1/(e-g),a}}function Zd(g,e){return e.domain(g.domain()).interpolator(g.interpolator()).clamp(g.clamp()).unknown(g.unknown())}function yd(){var g=Zi(md()(Oc));return g.copy=function(){return Zd(g,yd())},Mr.apply(g,arguments)}function pd(){var g=vi(md()).domain([1,10]);return g.copy=function(){return Zd(g,pd()).base(g.base())},Mr.apply(g,arguments)}function Gd(){var g=ki(md());return g.copy=function(){return Zd(g,Gd()).constant(g.constant())},Mr.apply(g,arguments)}function hd(){var g=Ki(md());return g.copy=function(){return Zd(g,hd()).exponent(g.exponent())},Mr.apply(g,arguments)}function Bd(){return hd.apply(null,arguments).exponent(.5)}function Sd(){var g=[],e=Oc;function I(I){if(null!=I&&!isNaN(I=+I))return e((Oa(g,I,1)-1)/(g.length-1))}return I.domain=function(e){if(!arguments.length)return g.slice();g=[];for(let I of e)null==I||isNaN(I=+I)||g.push(I);return g.sort(za),I},I.interpolator=function(g){return arguments.length?(e=g,I):e},I.range=function(){return g.map(((I,t)=>e(t/(g.length-1))))},I.quantiles=function(e){return Array.from({length:e+1},((I,t)=>ji(g,t/e)))},I.copy=function(){return Sd(e).domain(g)},Mr.apply(I,arguments)}function Wd(){var g,e,I,t,n,C,l,o=0,r=.5,a=1,c=1,i=Oc,A=!1;function u(g){return isNaN(g=+g)?l:(g=.5+((g=+C(g))-e)*(c*g<c*e?t:n),i(A?Math.max(0,Math.min(1,g)):g))}function d(g){return function(e){var I,t,n;return arguments.length?([I,t,n]=e,i=function(g,e){void 0===e&&(e=g,g=Lc);for(var I=0,t=e.length-1,n=e[0],C=new Array(t<0?0:t);I<t;)C[I]=g(n,n=e[++I]);return function(g){var e=Math.max(0,Math.min(t-1,Math.floor(g*=t)));return C[e](g-e)}}(g,[I,t,n]),u):[i(0),i(.5),i(1)]}}return u.domain=function(l){return arguments.length?([o,r,a]=l,g=C(o=+o),e=C(r=+r),I=C(a=+a),t=g===e?0:.5/(e-g),n=e===I?0:.5/(I-e),c=e<g?-1:1,u):[o,r,a]},u.clamp=function(g){return arguments.length?(A=!!g,u):A},u.interpolator=function(g){return arguments.length?(i=g,u):i},u.range=d(Lc),u.rangeRound=d(Dc),u.unknown=function(g){return arguments.length?(l=g,u):l},function(l){return C=l,g=l(o),e=l(r),I=l(a),t=g===e?0:.5/(e-g),n=e===I?0:.5/(I-e),c=e<g?-1:1,u}}function fd(){var g=Zi(Wd()(Oc));return g.copy=function(){return Zd(g,fd())},Mr.apply(g,arguments)}function Vd(){var g=vi(Wd()).domain([.1,1,10]);return g.copy=function(){return Zd(g,Vd()).base(g.base())},Mr.apply(g,arguments)}function vd(){var g=ki(Wd());return g.copy=function(){return Zd(g,vd()).constant(g.constant())},Mr.apply(g,arguments)}function Xd(){var g=Ki(Wd());return g.copy=function(){return Zd(g,Xd()).exponent(g.exponent())},Mr.apply(g,arguments)}function Rd(){return Xd.apply(null,arguments).exponent(.5)}function Jd(g,e){if((n=g.length)>1)for(var I,t,n,C=1,l=g[e[0]],o=l.length;C<n;++C)for(t=l,l=g[e[C]],I=0;I<o;++I)l[I][1]+=l[I][0]=isNaN(t[I][1])?t[I][0]:t[I][1]}!function(g){DA=function(g){var e=g.dateTime,I=g.date,t=g.time,n=g.periods,C=g.days,l=g.shortDays,o=g.months,r=g.shortMonths,a=eu(n),c=Iu(n),i=eu(C),A=Iu(C),u=eu(l),d=Iu(l),s=eu(o),b=Iu(o),m=eu(r),Z=Iu(r),y={a:function(g){return l[g.getDay()]},A:function(g){return C[g.getDay()]},b:function(g){return r[g.getMonth()]},B:function(g){return o[g.getMonth()]},c:null,d:Bu,e:Bu,f:vu,g:xu,G:Mu,H:Su,I:Wu,j:fu,L:Vu,m:Xu,M:Ru,p:function(g){return n[+(g.getHours()>=12)]},q:function(g){return 1+~~(g.getMonth()/3)},Q:cd,s:id,S:Ju,u:ku,U:Yu,V:wu,w:Nu,W:Ku,x:null,X:null,y:Fu,Y:Eu,Z:zu,"%":ad},p={a:function(g){return l[g.getUTCDay()]},A:function(g){return C[g.getUTCDay()]},b:function(g){return r[g.getUTCMonth()]},B:function(g){return o[g.getUTCMonth()]},c:null,d:Uu,e:Uu,f:ju,g:Cd,G:od,H:Qu,I:Lu,j:Du,L:Tu,m:Ou,M:Pu,p:function(g){return n[+(g.getUTCHours()>=12)]},q:function(g){return 1+~~(g.getUTCMonth()/3)},Q:cd,s:id,S:qu,u:_u,U:$u,V:ed,w:Id,W:td,x:null,X:null,y:nd,Y:ld,Z:rd,"%":ad},G={a:function(g,e,I){var t=u.exec(e.slice(I));return t?(g.w=d.get(t[0].toLowerCase()),I+t[0].length):-1},A:function(g,e,I){var t=i.exec(e.slice(I));return t?(g.w=A.get(t[0].toLowerCase()),I+t[0].length):-1},b:function(g,e,I){var t=m.exec(e.slice(I));return t?(g.m=Z.get(t[0].toLowerCase()),I+t[0].length):-1},B:function(g,e,I){var t=s.exec(e.slice(I));return t?(g.m=b.get(t[0].toLowerCase()),I+t[0].length):-1},c:function(g,I,t){return S(g,e,I,t)},d:uu,e:uu,f:yu,g:au,G:ru,H:su,I:su,j:du,L:Zu,m:Au,M:bu,p:function(g,e,I){var t=a.exec(e.slice(I));return t?(g.p=c.get(t[0].toLowerCase()),I+t[0].length):-1},q:iu,Q:Gu,s:hu,S:mu,u:nu,U:Cu,V:lu,w:tu,W:ou,x:function(g,e,t){return S(g,I,e,t)},X:function(g,e,I){return S(g,t,e,I)},y:au,Y:ru,Z:cu,"%":pu};function h(g,e){return function(I){var t,n,C,l=[],o=-1,r=0,a=g.length;for(I instanceof Date||(I=new Date(+I));++o<a;)37===g.charCodeAt(o)&&(l.push(g.slice(r,o)),null!=(n=OA[t=g.charAt(++o)])?t=g.charAt(++o):n="e"===t?" ":"0",(C=e[t])&&(t=C(I,n)),l.push(t),r=o+1);return l.push(g.slice(r,o)),l.join("")}}function B(g,e){return function(I){var t,n,C=LA(1900,void 0,1);if(S(C,g,I+="",0)!=I.length)return null;if("Q"in C)return new Date(C.Q);if("s"in C)return new Date(1e3*C.s+("L"in C?C.L:0));if(e&&!("Z"in C)&&(C.Z=0),"p"in C&&(C.H=C.H%12+12*C.p),void 0===C.m&&(C.m="q"in C?C.q:0),"V"in C){if(C.V<1||C.V>53)return null;"w"in C||(C.w=1),"Z"in C?(n=(t=QA(LA(C.y,0,1))).getUTCDay(),t=n>4||0===n?vA.ceil(t):vA(t),t=bA.offset(t,7*(C.V-1)),C.y=t.getUTCFullYear(),C.m=t.getUTCMonth(),C.d=t.getUTCDate()+(C.w+6)%7):(n=(t=UA(LA(C.y,0,1))).getDay(),t=n>4||0===n?pA.ceil(t):pA(t),t=sA.offset(t,7*(C.V-1)),C.y=t.getFullYear(),C.m=t.getMonth(),C.d=t.getDate()+(C.w+6)%7)}else("W"in C||"U"in C)&&("w"in C||(C.w="u"in C?C.u%7:"W"in C?1:0),n="Z"in C?QA(LA(C.y,0,1)).getUTCDay():UA(LA(C.y,0,1)).getDay(),C.m=0,C.d="W"in C?(C.w+6)%7+7*C.W-(n+5)%7:C.w+7*C.U-(n+6)%7);return"Z"in C?(C.H+=C.Z/100|0,C.M+=C.Z%100,QA(C)):UA(C)}}function S(g,e,I,t){for(var n,C,l=0,o=e.length,r=I.length;l<o;){if(t>=r)return-1;if(37===(n=e.charCodeAt(l++))){if(n=e.charAt(l++),!(C=G[n in OA?e.charAt(l++):n])||(t=C(g,I,t))<0)return-1}else if(n!=I.charCodeAt(t++))return-1}return t}return y.x=h(I,y),y.X=h(t,y),y.c=h(e,y),p.x=h(I,p),p.X=h(t,p),p.c=h(e,p),{format:function(g){var e=h(g+="",y);return e.toString=function(){return g},e},parse:function(g){var e=B(g+="",!1);return e.toString=function(){return g},e},utcFormat:function(g){var e=h(g+="",p);return e.toString=function(){return g},e},utcParse:function(g){var e=B(g+="",!0);return e.toString=function(){return g},e}}}(g),TA=DA.format,DA.parse,jA=DA.utcFormat,DA.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Array.prototype.slice;function kd(g){return"object"===typeof g&&"length"in g?g:Array.from(g)}function Yd(g){for(var e=g.length,I=new Array(e);--e>=0;)I[e]=e;return I}function Hd(g,e){return g[e]}function wd(g){const e=[];return e.key=g,e}var Nd=I(539),Kd=I.n(Nd),Fd=I(6745),xd=I.n(Fd),Ed=I(3538),Md=I.n(Ed),zd=I(9853),Ud=I.n(zd),Qd=I(8210),Ld=I.n(Qd);function Dd(g){return function(g){if(Array.isArray(g))return Td(g)}(g)||function(g){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(g))return Array.from(g)}(g)||function(g,e){if(!g)return;if("string"===typeof g)return Td(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);"Object"===I&&g.constructor&&(I=g.constructor.name);if("Map"===I||"Set"===I)return Array.from(g);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return Td(g,e)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Td(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}var jd=function(g){return g},Od={"@@functional/placeholder":!0},Pd=function(g){return g===Od},qd=function(g){return function e(){return 0===arguments.length||1===arguments.length&&Pd(arguments.length<=0?void 0:arguments[0])?e:g.apply(void 0,arguments)}},_d=function g(e,I){return 1===e?I:qd((function(){for(var t=arguments.length,n=new Array(t),C=0;C<t;C++)n[C]=arguments[C];var l=n.filter((function(g){return g!==Od})).length;return l>=e?I.apply(void 0,n):g(e-l,qd((function(){for(var g=arguments.length,e=new Array(g),t=0;t<g;t++)e[t]=arguments[t];var C=n.map((function(g){return Pd(g)?e.shift():g}));return I.apply(void 0,Dd(C).concat(e))})))}))},$d=function(g){return _d(g.length,g)},gs=function(g,e){for(var I=[],t=g;t<e;++t)I[t-g]=t;return I},es=$d((function(g,e){return Array.isArray(e)?e.map(g):Object.keys(e).map((function(g){return e[g]})).map(g)})),Is=function(){for(var g=arguments.length,e=new Array(g),I=0;I<g;I++)e[I]=arguments[I];if(!e.length)return jd;var t=e.reverse(),n=t[0],C=t.slice(1);return function(){return C.reduce((function(g,e){return e(g)}),n.apply(void 0,arguments))}},ts=function(g){return Array.isArray(g)?g.reverse():g.split("").reverse.join("")},ns=function(g){var e=null,I=null;return function(){for(var t=arguments.length,n=new Array(t),C=0;C<t;C++)n[C]=arguments[C];return e&&n.every((function(g,I){return g===e[I]}))?I:(e=n,I=g.apply(void 0,n))}};var Cs=$d((function(g,e,I){var t=+g;return t+I*(+e-t)})),ls=$d((function(g,e,I){var t=e-+g;return(I-g)/(t=t||1/0)})),os=$d((function(g,e,I){var t=e-+g;return t=t||1/0,Math.max(0,Math.min(1,(I-g)/t))}));const rs={rangeStep:function(g,e,I){for(var t=new(Ld())(g),n=0,C=[];t.lt(e)&&n<1e5;)C.push(t.toNumber()),t=t.add(I),n++;return C},getDigitCount:function(g){return 0===g?1:Math.floor(new(Ld())(g).abs().log(10).toNumber())+1},interpolateNumber:Cs,uninterpolateNumber:ls,uninterpolateTruncation:os};function as(g){return function(g){if(Array.isArray(g))return As(g)}(g)||function(g){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(g))return Array.from(g)}(g)||is(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cs(g,e){return function(g){if(Array.isArray(g))return g}(g)||function(g,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(g)))return;var I=[],t=!0,n=!1,C=void 0;try{for(var l,o=g[Symbol.iterator]();!(t=(l=o.next()).done)&&(I.push(l.value),!e||I.length!==e);t=!0);}catch(r){n=!0,C=r}finally{try{t||null==o.return||o.return()}finally{if(n)throw C}}return I}(g,e)||is(g,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function is(g,e){if(g){if("string"===typeof g)return As(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);return"Object"===I&&g.constructor&&(I=g.constructor.name),"Map"===I||"Set"===I?Array.from(g):"Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I)?As(g,e):void 0}}function As(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}function us(g){var e=cs(g,2),I=e[0],t=e[1],n=I,C=t;return I>t&&(n=t,C=I),[n,C]}function ds(g,e,I){if(g.lte(0))return new(Ld())(0);var t=rs.getDigitCount(g.toNumber()),n=new(Ld())(10).pow(t),C=g.div(n),l=1!==t?.05:.1,o=new(Ld())(Math.ceil(C.div(l).toNumber())).add(I).mul(l).mul(n);return e?o:new(Ld())(Math.ceil(o))}function ss(g,e,I){var t=1,n=new(Ld())(g);if(!n.isint()&&I){var C=Math.abs(g);C<1?(t=new(Ld())(10).pow(rs.getDigitCount(g)-1),n=new(Ld())(Math.floor(n.div(t).toNumber())).mul(t)):C>1&&(n=new(Ld())(Math.floor(g)))}else 0===g?n=new(Ld())(Math.floor((e-1)/2)):I||(n=new(Ld())(Math.floor(g)));var l=Math.floor((e-1)/2);return Is(es((function(g){return n.add(new(Ld())(g-l).mul(t)).toNumber()})),gs)(0,e)}function bs(g,e,I,t){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((e-g)/(I-1)))return{step:new(Ld())(0),tickMin:new(Ld())(0),tickMax:new(Ld())(0)};var C,l=ds(new(Ld())(e).sub(g).div(I-1),t,n);C=g<=0&&e>=0?new(Ld())(0):(C=new(Ld())(g).add(e).div(2)).sub(new(Ld())(C).mod(l));var o=Math.ceil(C.sub(g).div(l).toNumber()),r=Math.ceil(new(Ld())(e).sub(C).div(l).toNumber()),a=o+r+1;return a>I?bs(g,e,I,t,n+1):(a<I&&(r=e>0?r+(I-a):r,o=e>0?o:o+(I-a)),{step:l,tickMin:C.sub(new(Ld())(o).mul(l)),tickMax:C.add(new(Ld())(r).mul(l))})}var ms=ns((function(g){var e=cs(g,2),I=e[0],t=e[1],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,C=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=Math.max(n,2),o=cs(us([I,t]),2),r=o[0],a=o[1];if(r===-1/0||a===1/0){var c=a===1/0?[r].concat(as(gs(0,n-1).map((function(){return 1/0})))):[].concat(as(gs(0,n-1).map((function(){return-1/0}))),[a]);return I>t?ts(c):c}if(r===a)return ss(r,n,C);var i=bs(r,a,l,C),A=i.step,u=i.tickMin,d=i.tickMax,s=rs.rangeStep(u,d.add(new(Ld())(.1).mul(A)),A);return I>t?ts(s):s})),Zs=(ns((function(g){var e=cs(g,2),I=e[0],t=e[1],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,C=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=Math.max(n,2),o=cs(us([I,t]),2),r=o[0],a=o[1];if(r===-1/0||a===1/0)return[I,t];if(r===a)return ss(r,n,C);var c=ds(new(Ld())(a).sub(r).div(l-1),C,0),i=Is(es((function(g){return new(Ld())(r).add(new(Ld())(g).mul(c)).toNumber()})),gs)(0,l).filter((function(g){return g>=r&&g<=a}));return I>t?ts(i):i})),ns((function(g,e){var I=cs(g,2),t=I[0],n=I[1],C=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=cs(us([t,n]),2),o=l[0],r=l[1];if(o===-1/0||r===1/0)return[t,n];if(o===r)return[o];var a=Math.max(e,2),c=ds(new(Ld())(r).sub(o).div(a-1),C,0),i=[].concat(as(rs.rangeStep(new(Ld())(o),new(Ld())(r).sub(new(Ld())(.99).mul(c)),c)),[r]);return t>n?ts(i):i}))),ys=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function ps(g){return ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},ps(g)}function Gs(){return Gs=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},Gs.apply(this,arguments)}function hs(g,e){return function(g){if(Array.isArray(g))return g}(g)||function(g,e){var I=null==g?null:"undefined"!=typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null!=I){var t,n,C,l,o=[],r=!0,a=!1;try{if(C=(I=I.call(g)).next,0===e){if(Object(I)!==I)return;r=!1}else for(;!(r=(t=C.call(I)).done)&&(o.push(t.value),o.length!==e);r=!0);}catch(g){a=!0,n=g}finally{try{if(!r&&null!=I.return&&(l=I.return(),Object(l)!==l))return}finally{if(a)throw n}}return o}}(g,e)||function(g,e){if(!g)return;if("string"===typeof g)return Bs(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);"Object"===I&&g.constructor&&(I=g.constructor.name);if("Map"===I||"Set"===I)return Array.from(g);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return Bs(g,e)}(g,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bs(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}function Ss(g,e){if(null==g)return{};var I,t,n=function(g,e){if(null==g)return{};var I={};for(var t in g)if(Object.prototype.hasOwnProperty.call(g,t)){if(e.indexOf(t)>=0)continue;I[t]=g[t]}return I}(g,e);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(n[I]=g[I])}return n}function Ws(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,Js(t.key),t)}}function fs(g,e,I){return e=vs(e),function(g,e){if(e&&("object"===ps(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(g)}(g,Vs()?Reflect.construct(e,I||[],vs(g).constructor):e.apply(g,I))}function Vs(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(g){}return(Vs=function(){return!!g})()}function vs(g){return vs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},vs(g)}function Xs(g,e){return Xs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,e){return g.__proto__=e,g},Xs(g,e)}function Rs(g,e,I){return(e=Js(e))in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function Js(g){var e=function(g,e){if("object"!=ps(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=ps(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==ps(e)?e:e+""}var ks=function(g){function e(){return function(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),fs(this,e,arguments)}return function(g,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(e&&e.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),e&&Xs(g,e)}(e,g),I=e,t=[{key:"render",value:function(){var g=this.props,e=g.offset,I=g.layout,t=g.width,C=g.dataKey,l=g.data,o=g.dataPointFormatter,r=g.xAxis,a=g.yAxis,c=Ss(g,ys),i=en(c,!1);"x"===this.props.direction&&"number"!==r.type&&dt(!1);var A=l.map((function(g){var l=o(g,C),c=l.x,A=l.y,u=l.value,d=l.errorVal;if(!d)return null;var s,b,m=[];if(Array.isArray(d)){var Z=hs(d,2);s=Z[0],b=Z[1]}else s=b=d;if("vertical"===I){var y=r.scale,p=A+e,G=p+t,h=p-t,B=y(u-s),S=y(u+b);m.push({x1:S,y1:G,x2:S,y2:h}),m.push({x1:B,y1:p,x2:S,y2:p}),m.push({x1:B,y1:G,x2:B,y2:h})}else if("horizontal"===I){var W=a.scale,f=c+e,V=f-t,v=f+t,X=W(u-s),R=W(u+b);m.push({x1:V,y1:R,x2:v,y2:R}),m.push({x1:f,y1:X,x2:f,y2:R}),m.push({x1:V,y1:X,x2:v,y2:X})}return n.createElement(un,Gs({className:"recharts-errorBar",key:"bar-".concat(m.map((function(g){return"".concat(g.x1,"-").concat(g.x2,"-").concat(g.y1,"-").concat(g.y2)})))},i),m.map((function(g){return n.createElement("line",Gs({},g,{key:"line-".concat(g.x1,"-").concat(g.x2,"-").concat(g.y1,"-").concat(g.y2)}))})))}));return n.createElement(un,{className:"recharts-errorBars"},A)}}],t&&Ws(I.prototype,t),C&&Ws(I,C),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,t,C}(n.Component);function Ys(g){return Ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},Ys(g)}function Hs(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function ws(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?Hs(Object(I),!0).forEach((function(e){Ns(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):Hs(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function Ns(g,e,I){return e=function(g){var e=function(g,e){if("object"!=Ys(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=Ys(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==Ys(e)?e:e+""}(e),e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}Rs(ks,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),Rs(ks,"displayName","ErrorBar");var Ks=function(g){var e=g.children,I=g.formattedGraphicalItems,t=g.legendWidth,n=g.legendContent,C=qt(e,bl);if(!C)return null;var l,o=bl.defaultProps,r=void 0!==o?ws(ws({},o),C.props):{};return l=C.props&&C.props.payload?C.props&&C.props.payload:"children"===n?(I||[]).reduce((function(g,e){var I=e.item,t=e.props,n=t.sectors||t.data||[];return g.concat(n.map((function(g){return{type:C.props.iconType||I.props.legendType,value:g.name,color:g.fill,payload:g}})))}),[]):(I||[]).map((function(g){var e=g.item,I=e.type.defaultProps,t=void 0!==I?ws(ws({},I),e.props):{},n=t.dataKey,C=t.name,l=t.legendType;return{inactive:t.hide,dataKey:n,type:r.iconType||l||"square",color:Ds(e),value:C||n,payload:t}})),ws(ws(ws({},r),bl.getWithHeight(C,t)),{},{payload:l,item:C})};function Fs(g){return Fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},Fs(g)}function xs(g){return function(g){if(Array.isArray(g))return Es(g)}(g)||function(g){if("undefined"!==typeof Symbol&&null!=g[Symbol.iterator]||null!=g["@@iterator"])return Array.from(g)}(g)||function(g,e){if(!g)return;if("string"===typeof g)return Es(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);"Object"===I&&g.constructor&&(I=g.constructor.name);if("Map"===I||"Set"===I)return Array.from(g);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return Es(g,e)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Es(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}function Ms(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function zs(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?Ms(Object(I),!0).forEach((function(e){Us(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):Ms(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function Us(g,e,I){return e=function(g){var e=function(g,e){if("object"!=Fs(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=Fs(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==Fs(e)?e:e+""}(e),e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function Qs(g,e,I){return gt()(g)||gt()(e)?I:Vt(e)?lt()(g,e,I):It()(e)?e(g):I}function Ls(g,e,I,t){var n=Md()(g,(function(g){return Qs(g,e)}));if("number"===I){var C=n.filter((function(g){return ft(g)||parseFloat(g)}));return C.length?[xd()(C),Kd()(C)]:[1/0,-1/0]}return(t?n.filter((function(g){return!gt()(g)})):n).map((function(g){return Vt(g)||g instanceof Date?g:""}))}var Ds=function(g){var e,I,t=g.type.displayName,n=null!==(e=g.type)&&void 0!==e&&e.defaultProps?zs(zs({},g.type.defaultProps),g.props):g.props,C=n.stroke,l=n.fill;switch(t){case"Line":I=C;break;case"Area":case"Radar":I=C&&"none"!==C?C:l;break;default:I=l}return I},Ts=function(g,e,I,t,n){var C=Pt(e.props.children,ks).filter((function(g){return function(g,e,I){return!!gt()(e)||("horizontal"===g?"yAxis"===e:"vertical"===g||"x"===I?"xAxis"===e:"y"!==I||"yAxis"===e)}(t,n,g.props.direction)}));if(C&&C.length){var l=C.map((function(g){return g.props.dataKey}));return g.reduce((function(g,e){var t=Qs(e,I);if(gt()(t))return g;var n=Array.isArray(t)?[xd()(t),Kd()(t)]:[t,t],C=l.reduce((function(g,I){var t=Qs(e,I,0),C=n[0]-Math.abs(Array.isArray(t)?t[0]:t),l=n[1]+Math.abs(Array.isArray(t)?t[1]:t);return[Math.min(C,g[0]),Math.max(l,g[1])]}),[1/0,-1/0]);return[Math.min(C[0],g[0]),Math.max(C[1],g[1])]}),[1/0,-1/0])}return null},js=function(g,e,I,t,n){var C=e.map((function(e){var C=e.props.dataKey;return"number"===I&&C&&Ts(g,e,C,t)||Ls(g,C,I,n)}));if("number"===I)return C.reduce((function(g,e){return[Math.min(g[0],e[0]),Math.max(g[1],e[1])]}),[1/0,-1/0]);var l={};return C.reduce((function(g,e){for(var I=0,t=e.length;I<t;I++)l[e[I]]||(l[e[I]]=!0,g.push(e[I]));return g}),[])},Os=function(g,e){return"horizontal"===g&&"xAxis"===e||"vertical"===g&&"yAxis"===e||"centric"===g&&"angleAxis"===e||"radial"===g&&"radiusAxis"===e},Ps=function(g,e,I){if(!g)return null;var t=g.scale,n=g.duplicateDomain,C=g.type,l=g.range,o="scaleBand"===g.realScaleType?t.bandwidth()/2:2,r=(e||I)&&"category"===C&&t.bandwidth?t.bandwidth()/o:0;return r="angleAxis"===g.axisType&&(null===l||void 0===l?void 0:l.length)>=2?2*St(l[0]-l[1])*r:r,e&&(g.ticks||g.niceTicks)?(g.ticks||g.niceTicks).map((function(g){var e=n?n.indexOf(g):g;return{coordinate:t(e)+r,value:g,offset:r}})).filter((function(g){return!Gt()(g.coordinate)})):g.isCategorical&&g.categoricalDomain?g.categoricalDomain.map((function(g,e){return{coordinate:t(g)+r,value:g,index:e,offset:r}})):t.ticks&&!I?t.ticks(g.tickCount).map((function(g){return{coordinate:t(g)+r,value:g,offset:r}})):t.domain().map((function(g,e){return{coordinate:t(g)+r,value:n?n[g]:g,index:e,offset:r}}))},qs=new WeakMap,_s=function(g,e){if("function"!==typeof e)return g;qs.has(g)||qs.set(g,new WeakMap);var I=qs.get(g);if(I.has(e))return I.get(e);var t=function(){g.apply(void 0,arguments),e.apply(void 0,arguments)};return I.set(e,t),t},$s=1e-4,gb={sign:function(g){var e=g.length;if(!(e<=0))for(var I=0,t=g[0].length;I<t;++I)for(var n=0,C=0,l=0;l<e;++l){var o=Gt()(g[l][I][1])?g[l][I][0]:g[l][I][1];o>=0?(g[l][I][0]=n,g[l][I][1]=n+o,n=g[l][I][1]):(g[l][I][0]=C,g[l][I][1]=C+o,C=g[l][I][1])}},expand:function(g,e){if((t=g.length)>0){for(var I,t,n,C=0,l=g[0].length;C<l;++C){for(n=I=0;I<t;++I)n+=g[I][C][1]||0;if(n)for(I=0;I<t;++I)g[I][C][1]/=n}Jd(g,e)}},none:Jd,silhouette:function(g,e){if((I=g.length)>0){for(var I,t=0,n=g[e[0]],C=n.length;t<C;++t){for(var l=0,o=0;l<I;++l)o+=g[l][t][1]||0;n[t][1]+=n[t][0]=-o/2}Jd(g,e)}},wiggle:function(g,e){if((n=g.length)>0&&(t=(I=g[e[0]]).length)>0){for(var I,t,n,C=0,l=1;l<t;++l){for(var o=0,r=0,a=0;o<n;++o){for(var c=g[e[o]],i=c[l][1]||0,A=(i-(c[l-1][1]||0))/2,u=0;u<o;++u){var d=g[e[u]];A+=(d[l][1]||0)-(d[l-1][1]||0)}r+=i,a+=A*i}I[l-1][1]+=I[l-1][0]=C,r&&(C-=a/r)}I[l-1][1]+=I[l-1][0]=C,Jd(g,e)}},positive:function(g){var e=g.length;if(!(e<=0))for(var I=0,t=g[0].length;I<t;++I)for(var n=0,C=0;C<e;++C){var l=Gt()(g[C][I][1])?g[C][I][0]:g[C][I][1];l>=0?(g[C][I][0]=n,g[C][I][1]=n+l,n=g[C][I][1]):(g[C][I][0]=0,g[C][I][1]=0)}}},eb=function(g,e,I){var t=e.map((function(g){return g.props.dataKey})),n=gb[I],C=function(){var g=VC([]),e=Yd,I=Jd,t=Hd;function n(n){var C,l,o=Array.from(g.apply(this,arguments),wd),r=o.length,a=-1;for(const g of n)for(C=0,++a;C<r;++C)(o[C][a]=[0,+t(g,o[C].key,a,n)]).data=g;for(C=0,l=kd(e(o));C<r;++C)o[l[C]].index=C;return I(o,l),o}return n.keys=function(e){return arguments.length?(g="function"===typeof e?e:VC(Array.from(e)),n):g},n.value=function(g){return arguments.length?(t="function"===typeof g?g:VC(+g),n):t},n.order=function(g){return arguments.length?(e=null==g?Yd:"function"===typeof g?g:VC(Array.from(g)),n):e},n.offset=function(g){return arguments.length?(I=null==g?Jd:g,n):I},n}().keys(t).value((function(g,e){return+Qs(g,e,0)})).order(Yd).offset(n);return C(g)};var Ib=function(g,e,I){return Object.keys(g).reduce((function(t,n){var C=g[n].stackedData.reduce((function(g,t){var n=function(g){return g.reduce((function(g,e){return[xd()(e.concat([g[0]]).filter(ft)),Kd()(e.concat([g[1]]).filter(ft))]}),[1/0,-1/0])}(t.slice(e,I+1));return[Math.min(g[0],n[0]),Math.max(g[1],n[1])]}),[1/0,-1/0]);return[Math.min(C[0],t[0]),Math.max(C[1],t[1])]}),[1/0,-1/0]).map((function(g){return g===1/0||g===-1/0?0:g}))},tb=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nb=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Cb=function(g,e,I){if(It()(g))return g(e,I);if(!Array.isArray(g))return e;var t=[];if(ft(g[0]))t[0]=I?g[0]:Math.min(g[0],e[0]);else if(tb.test(g[0])){var n=+tb.exec(g[0])[1];t[0]=e[0]-n}else It()(g[0])?t[0]=g[0](e[0]):t[0]=e[0];if(ft(g[1]))t[1]=I?g[1]:Math.max(g[1],e[1]);else if(nb.test(g[1])){var C=+nb.exec(g[1])[1];t[1]=e[1]+C}else It()(g[1])?t[1]=g[1](e[1]):t[1]=e[1];return t},lb=function(g,e,I){if(g&&g.scale&&g.scale.bandwidth){var t=g.scale.bandwidth();if(!I||t>0)return t}if(g&&e&&e.length>=2){for(var n=rt()(e,(function(g){return g.coordinate})),C=1/0,l=1,o=n.length;l<o;l++){var r=n[l],a=n[l-1];C=Math.min((r.coordinate||0)-(a.coordinate||0),C)}return C===1/0?0:C}return I?void 0:0},ob=function(g,e,I){return g&&g.length?Ud()(g,lt()(I,"type.defaultProps.domain"))?e:g:e},rb=function(g,e){var I=g.type.defaultProps?zs(zs({},g.type.defaultProps),g.props):g.props,t=I.dataKey,n=I.name,C=I.unit,l=I.formatter,o=I.tooltipType,r=I.chartType,a=I.hide;return zs(zs({},en(g,!1)),{},{dataKey:t,unit:C,formatter:l,name:n||t,color:Ds(g),value:Qs(e,t),type:o,payload:e,chartType:r,hide:a})};function ab(g){return ab="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},ab(g)}function cb(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function ib(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?cb(Object(I),!0).forEach((function(e){Ab(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):cb(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function Ab(g,e,I){return e=function(g){var e=function(g,e){if("object"!=ab(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=ab(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==ab(e)?e:e+""}(e),e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}var ub=["Webkit","Moz","O","ms"];function db(g){return db="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},db(g)}function sb(){return sb=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},sb.apply(this,arguments)}function bb(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function mb(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?bb(Object(I),!0).forEach((function(e){Bb(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):bb(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function Zb(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,Sb(t.key),t)}}function yb(g,e,I){return e=Gb(e),function(g,e){if(e&&("object"===db(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(g)}(g,pb()?Reflect.construct(e,I||[],Gb(g).constructor):e.apply(g,I))}function pb(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(g){}return(pb=function(){return!!g})()}function Gb(g){return Gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},Gb(g)}function hb(g,e){return hb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,e){return g.__proto__=e,g},hb(g,e)}function Bb(g,e,I){return(e=Sb(e))in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function Sb(g){var e=function(g,e){if("object"!=db(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=db(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==db(e)?e:e+""}var Wb=function(g){return g.changedTouches&&!!g.changedTouches.length},fb=function(g){function e(g){var I;return function(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Bb(I=yb(this,e,[g]),"handleDrag",(function(g){I.leaveTimer&&(clearTimeout(I.leaveTimer),I.leaveTimer=null),I.state.isTravellerMoving?I.handleTravellerMove(g):I.state.isSlideMoving&&I.handleSlideDrag(g)})),Bb(I,"handleTouchMove",(function(g){null!=g.changedTouches&&g.changedTouches.length>0&&I.handleDrag(g.changedTouches[0])})),Bb(I,"handleDragEnd",(function(){I.setState({isTravellerMoving:!1,isSlideMoving:!1},(function(){var g=I.props,e=g.endIndex,t=g.onDragEnd,n=g.startIndex;null===t||void 0===t||t({endIndex:e,startIndex:n})})),I.detachDragEndListener()})),Bb(I,"handleLeaveWrapper",(function(){(I.state.isTravellerMoving||I.state.isSlideMoving)&&(I.leaveTimer=window.setTimeout(I.handleDragEnd,I.props.leaveTimeOut))})),Bb(I,"handleEnterSlideOrTraveller",(function(){I.setState({isTextActive:!0})})),Bb(I,"handleLeaveSlideOrTraveller",(function(){I.setState({isTextActive:!1})})),Bb(I,"handleSlideDragStart",(function(g){var e=Wb(g)?g.changedTouches[0]:g;I.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:e.pageX}),I.attachDragEndListener()})),I.travellerDragStartHandlers={startX:I.handleTravellerDragStart.bind(I,"startX"),endX:I.handleTravellerDragStart.bind(I,"endX")},I.state={},I}return function(g,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(e&&e.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),e&&hb(g,e)}(e,g),I=e,t=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(g){var I=g.startX,t=g.endX,n=this.state.scaleValues,C=this.props,l=C.gap,o=C.data.length-1,r=Math.min(I,t),a=Math.max(I,t),c=e.getIndexInRange(n,r),i=e.getIndexInRange(n,a);return{startIndex:c-c%l,endIndex:i===o?o:i-i%l}}},{key:"getTextOfTick",value:function(g){var e=this.props,I=e.data,t=e.tickFormatter,n=e.dataKey,C=Qs(I[g],n,g);return It()(t)?t(C,g):C}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(g){var e=this.state,I=e.slideMoveStartX,t=e.startX,n=e.endX,C=this.props,l=C.x,o=C.width,r=C.travellerWidth,a=C.startIndex,c=C.endIndex,i=C.onChange,A=g.pageX-I;A>0?A=Math.min(A,l+o-r-n,l+o-r-t):A<0&&(A=Math.max(A,l-t,l-n));var u=this.getIndex({startX:t+A,endX:n+A});u.startIndex===a&&u.endIndex===c||!i||i(u),this.setState({startX:t+A,endX:n+A,slideMoveStartX:g.pageX})}},{key:"handleTravellerDragStart",value:function(g,e){var I=Wb(e)?e.changedTouches[0]:e;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:g,brushMoveStartX:I.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(g){var e=this.state,I=e.brushMoveStartX,t=e.movingTravellerId,n=e.endX,C=e.startX,l=this.state[t],o=this.props,r=o.x,a=o.width,c=o.travellerWidth,i=o.onChange,A=o.gap,u=o.data,d={startX:this.state.startX,endX:this.state.endX},s=g.pageX-I;s>0?s=Math.min(s,r+a-c-l):s<0&&(s=Math.max(s,r-l)),d[t]=l+s;var b=this.getIndex(d),m=b.startIndex,Z=b.endIndex;this.setState(Bb(Bb({},t,l+s),"brushMoveStartX",g.pageX),(function(){i&&function(){var g=u.length-1;return"startX"===t&&(n>C?m%A===0:Z%A===0)||n<C&&Z===g||"endX"===t&&(n>C?Z%A===0:m%A===0)||n>C&&Z===g}()&&i(b)}))}},{key:"handleTravellerMoveKeyboard",value:function(g,e){var I=this,t=this.state,n=t.scaleValues,C=t.startX,l=t.endX,o=this.state[e],r=n.indexOf(o);if(-1!==r){var a=r+g;if(!(-1===a||a>=n.length)){var c=n[a];"startX"===e&&c>=l||"endX"===e&&c<=C||this.setState(Bb({},e,c),(function(){I.props.onChange(I.getIndex({startX:I.state.startX,endX:I.state.endX}))}))}}}},{key:"renderBackground",value:function(){var g=this.props,e=g.x,I=g.y,t=g.width,C=g.height,l=g.fill,o=g.stroke;return n.createElement("rect",{stroke:o,fill:l,x:e,y:I,width:t,height:C})}},{key:"renderPanorama",value:function(){var g=this.props,e=g.x,I=g.y,t=g.width,C=g.height,l=g.data,o=g.children,r=g.padding,a=n.Children.only(o);return a?n.cloneElement(a,{x:e,y:I,width:t,height:C,margin:r,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(g,I){var t,C,l=this,o=this.props,r=o.y,a=o.travellerWidth,c=o.height,i=o.traveller,A=o.ariaLabel,u=o.data,d=o.startIndex,s=o.endIndex,b=Math.max(g,this.props.x),m=mb(mb({},en(this.props,!1)),{},{x:b,y:r,width:a,height:c}),Z=A||"Min value: ".concat(null===(t=u[d])||void 0===t?void 0:t.name,", Max value: ").concat(null===(C=u[s])||void 0===C?void 0:C.name);return n.createElement(un,{tabIndex:0,role:"slider","aria-label":Z,"aria-valuenow":g,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[I],onTouchStart:this.travellerDragStartHandlers[I],onKeyDown:function(g){["ArrowLeft","ArrowRight"].includes(g.key)&&(g.preventDefault(),g.stopPropagation(),l.handleTravellerMoveKeyboard("ArrowRight"===g.key?1:-1,I))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(i,m))}},{key:"renderSlide",value:function(g,e){var I=this.props,t=I.y,C=I.height,l=I.stroke,o=I.travellerWidth,r=Math.min(g,e)+o,a=Math.max(Math.abs(e-g)-o,0);return n.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:r,y:t,width:a,height:C})}},{key:"renderText",value:function(){var g=this.props,e=g.startIndex,I=g.endIndex,t=g.y,C=g.height,l=g.travellerWidth,o=g.stroke,r=this.state,a=r.startX,c=r.endX,i={pointerEvents:"none",fill:o};return n.createElement(un,{className:"recharts-brush-texts"},n.createElement(Ha,sb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(a,c)-5,y:t+C/2},i),this.getTextOfTick(e)),n.createElement(Ha,sb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(a,c)+l+5,y:t+C/2},i),this.getTextOfTick(I)))}},{key:"render",value:function(){var g=this.props,e=g.data,I=g.className,t=g.children,C=g.x,l=g.y,o=g.width,r=g.height,a=g.alwaysShowText,c=this.state,i=c.startX,A=c.endX,u=c.isTextActive,d=c.isSlideMoving,s=c.isTravellerMoving,b=c.isTravellerFocused;if(!e||!e.length||!ft(C)||!ft(l)||!ft(o)||!ft(r)||o<=0||r<=0)return null;var m=At("recharts-brush",I),Z=1===n.Children.count(t),y=function(g,e){if(!g)return null;var I=g.replace(/(\w)/,(function(g){return g.toUpperCase()})),t=ub.reduce((function(g,t){return ib(ib({},g),{},Ab({},t+I,e))}),{});return t[g]=e,t}("userSelect","none");return n.createElement(un,{className:m,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:y},this.renderBackground(),Z&&this.renderPanorama(),this.renderSlide(i,A),this.renderTravellerLayer(i,"startX"),this.renderTravellerLayer(A,"endX"),(u||d||s||b||a)&&this.renderText())}}],C=[{key:"renderDefaultTraveller",value:function(g){var e=g.x,I=g.y,t=g.width,C=g.height,l=g.stroke,o=Math.floor(I+C/2)-1;return n.createElement(n.Fragment,null,n.createElement("rect",{x:e,y:I,width:t,height:C,fill:l,stroke:"none"}),n.createElement("line",{x1:e+1,y1:o,x2:e+t-1,y2:o,fill:"none",stroke:"#fff"}),n.createElement("line",{x1:e+1,y1:o+2,x2:e+t-1,y2:o+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(g,I){return n.isValidElement(g)?n.cloneElement(g,I):It()(g)?g(I):e.renderDefaultTraveller(I)}},{key:"getDerivedStateFromProps",value:function(g,e){var I=g.data,t=g.width,n=g.x,C=g.travellerWidth,l=g.updateId,o=g.startIndex,r=g.endIndex;if(I!==e.prevData||l!==e.prevUpdateId)return mb({prevData:I,prevTravellerWidth:C,prevUpdateId:l,prevX:n,prevWidth:t},I&&I.length?function(g){var e=g.data,I=g.startIndex,t=g.endIndex,n=g.x,C=g.width,l=g.travellerWidth;if(!e||!e.length)return{};var o=e.length,r=qr().domain(nt()(0,o)).range([n,n+C-l]),a=r.domain().map((function(g){return r(g)}));return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:r(I),endX:r(t),scale:r,scaleValues:a}}({data:I,width:t,x:n,travellerWidth:C,startIndex:o,endIndex:r}):{scale:null,scaleValues:null});if(e.scale&&(t!==e.prevWidth||n!==e.prevX||C!==e.prevTravellerWidth)){e.scale.range([n,n+t-C]);var a=e.scale.domain().map((function(g){return e.scale(g)}));return{prevData:I,prevTravellerWidth:C,prevUpdateId:l,prevX:n,prevWidth:t,startX:e.scale(g.startIndex),endX:e.scale(g.endIndex),scaleValues:a}}return null}},{key:"getIndexInRange",value:function(g,e){for(var I=0,t=g.length-1;t-I>1;){var n=Math.floor((I+t)/2);g[n]>e?t=n:I=n}return e>=g[t]?t:I}}],t&&Zb(I.prototype,t),C&&Zb(I,C),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,t,C}(n.PureComponent);function Vb(g){return Vb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},Vb(g)}function vb(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function Xb(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?vb(Object(I),!0).forEach((function(e){Rb(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):vb(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function Rb(g,e,I){return e=function(g){var e=function(g,e){if("object"!=Vb(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=Vb(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==Vb(e)?e:e+""}(e),e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function Jb(g,e){return function(g){if(Array.isArray(g))return g}(g)||function(g,e){var I=null==g?null:"undefined"!=typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null!=I){var t,n,C,l,o=[],r=!0,a=!1;try{if(C=(I=I.call(g)).next,0===e){if(Object(I)!==I)return;r=!1}else for(;!(r=(t=C.call(I)).done)&&(o.push(t.value),o.length!==e);r=!0);}catch(g){a=!0,n=g}finally{try{if(!r&&null!=I.return&&(l=I.return(),Object(l)!==l))return}finally{if(a)throw n}}return o}}(g,e)||function(g,e){if(!g)return;if("string"===typeof g)return kb(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);"Object"===I&&g.constructor&&(I=g.constructor.name);if("Map"===I||"Set"===I)return Array.from(g);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return kb(g,e)}(g,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kb(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}Bb(fb,"displayName","Brush"),Bb(fb,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Yb=Math.PI/180,Hb=function(g){return 180*g/Math.PI},wb=function(g,e,I,t){return{x:g+Math.cos(-Yb*t)*I,y:e+Math.sin(-Yb*t)*I}},Nb=function(g,e){var I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(g-(I.left||0)-(I.right||0)),Math.abs(e-(I.top||0)-(I.bottom||0)))/2},Kb=function(g,e){var I=g.x,t=g.y,n=e.cx,C=e.cy,l=function(g,e){var I=g.x,t=g.y,n=e.x,C=e.y;return Math.sqrt(Math.pow(I-n,2)+Math.pow(t-C,2))}({x:I,y:t},{x:n,y:C});if(l<=0)return{radius:l};var o=(I-n)/l,r=Math.acos(o);return t>C&&(r=2*Math.PI-r),{radius:l,angle:Hb(r),angleInRadian:r}},Fb=function(g,e){var I=e.startAngle,t=e.endAngle,n=Math.floor(I/360),C=Math.floor(t/360);return g+360*Math.min(n,C)},xb=function(g,e){var I=g.x,t=g.y,n=Kb({x:I,y:t},e),C=n.radius,l=n.angle,o=e.innerRadius,r=e.outerRadius;if(C<o||C>r)return!1;if(0===C)return!0;var a,c=function(g){var e=g.startAngle,I=g.endAngle,t=Math.floor(e/360),n=Math.floor(I/360),C=Math.min(t,n);return{startAngle:e-360*C,endAngle:I-360*C}}(e),i=c.startAngle,A=c.endAngle,u=l;if(i<=A){for(;u>A;)u-=360;for(;u<i;)u+=360;a=u>=i&&u<=A}else{for(;u>i;)u-=360;for(;u<A;)u+=360;a=u>=A&&u<=i}return a?Xb(Xb({},e),{},{radius:C,angle:Fb(u,e)}):null},Eb=function(g){return(0,n.isValidElement)(g)||It()(g)||"boolean"===typeof g?"":g.className};function Mb(g){return Mb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},Mb(g)}var zb=["offset"];function Ub(g){return function(g){if(Array.isArray(g))return Qb(g)}(g)||function(g){if("undefined"!==typeof Symbol&&null!=g[Symbol.iterator]||null!=g["@@iterator"])return Array.from(g)}(g)||function(g,e){if(!g)return;if("string"===typeof g)return Qb(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);"Object"===I&&g.constructor&&(I=g.constructor.name);if("Map"===I||"Set"===I)return Array.from(g);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return Qb(g,e)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qb(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}function Lb(g,e){if(null==g)return{};var I,t,n=function(g,e){if(null==g)return{};var I={};for(var t in g)if(Object.prototype.hasOwnProperty.call(g,t)){if(e.indexOf(t)>=0)continue;I[t]=g[t]}return I}(g,e);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(n[I]=g[I])}return n}function Db(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function Tb(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?Db(Object(I),!0).forEach((function(e){jb(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):Db(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function jb(g,e,I){return e=function(g){var e=function(g,e){if("object"!=Mb(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=Mb(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==Mb(e)?e:e+""}(e),e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function Ob(){return Ob=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},Ob.apply(this,arguments)}var Pb=function(g,e,I){var t,C,l=g.position,o=g.viewBox,r=g.offset,a=g.className,c=o,i=c.cx,A=c.cy,u=c.innerRadius,d=c.outerRadius,s=c.startAngle,b=c.endAngle,m=c.clockWise,Z=(u+d)/2,y=function(g,e){return St(e-g)*Math.min(Math.abs(e-g),360)}(s,b),p=y>=0?1:-1;"insideStart"===l?(t=s+p*r,C=m):"insideEnd"===l?(t=b-p*r,C=!m):"end"===l&&(t=b+p*r,C=m),C=y<=0?C:!C;var G=wb(i,A,Z,t),h=wb(i,A,Z,t+359*(C?1:-1)),B="M".concat(G.x,",").concat(G.y,"\n    A").concat(Z,",").concat(Z,",0,1,").concat(C?0:1,",\n    ").concat(h.x,",").concat(h.y),S=gt()(g.id)?Xt("recharts-radial-line-"):g.id;return n.createElement("text",Ob({},I,{dominantBaseline:"central",className:At("recharts-radial-bar-label",a)}),n.createElement("defs",null,n.createElement("path",{id:S,d:B})),n.createElement("textPath",{xlinkHref:"#".concat(S)},e))};function qb(g){var e,I=g.offset,t=Tb({offset:void 0===I?5:I},Lb(g,zb)),C=t.viewBox,l=t.position,o=t.value,r=t.children,a=t.content,c=t.className,i=void 0===c?"":c,A=t.textBreakAll;if(!C||gt()(o)&&gt()(r)&&!(0,n.isValidElement)(a)&&!It()(a))return null;if((0,n.isValidElement)(a))return(0,n.cloneElement)(a,t);if(It()(a)){if(e=(0,n.createElement)(a,t),(0,n.isValidElement)(e))return e}else e=function(g){var e=g.value,I=g.formatter,t=gt()(g.children)?e:g.children;return It()(I)?I(t):t}(t);var u=function(g){return"cx"in g&&ft(g.cx)}(C),d=en(t,!0);if(u&&("insideStart"===l||"insideEnd"===l||"end"===l))return Pb(t,e,d);var s=u?function(g){var e=g.viewBox,I=g.offset,t=g.position,n=e,C=n.cx,l=n.cy,o=n.innerRadius,r=n.outerRadius,a=(n.startAngle+n.endAngle)/2;if("outside"===t){var c=wb(C,l,r+I,a),i=c.x;return{x:i,y:c.y,textAnchor:i>=C?"start":"end",verticalAnchor:"middle"}}if("center"===t)return{x:C,y:l,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===t)return{x:C,y:l,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===t)return{x:C,y:l,textAnchor:"middle",verticalAnchor:"end"};var A=wb(C,l,(o+r)/2,a);return{x:A.x,y:A.y,textAnchor:"middle",verticalAnchor:"middle"}}(t):function(g){var e=g.viewBox,I=g.parentViewBox,t=g.offset,n=g.position,C=e,l=C.x,o=C.y,r=C.width,a=C.height,c=a>=0?1:-1,i=c*t,A=c>0?"end":"start",u=c>0?"start":"end",d=r>=0?1:-1,s=d*t,b=d>0?"end":"start",m=d>0?"start":"end";if("top"===n)return Tb(Tb({},{x:l+r/2,y:o-c*t,textAnchor:"middle",verticalAnchor:A}),I?{height:Math.max(o-I.y,0),width:r}:{});if("bottom"===n)return Tb(Tb({},{x:l+r/2,y:o+a+i,textAnchor:"middle",verticalAnchor:u}),I?{height:Math.max(I.y+I.height-(o+a),0),width:r}:{});if("left"===n){var Z={x:l-s,y:o+a/2,textAnchor:b,verticalAnchor:"middle"};return Tb(Tb({},Z),I?{width:Math.max(Z.x-I.x,0),height:a}:{})}if("right"===n){var y={x:l+r+s,y:o+a/2,textAnchor:m,verticalAnchor:"middle"};return Tb(Tb({},y),I?{width:Math.max(I.x+I.width-y.x,0),height:a}:{})}var p=I?{width:r,height:a}:{};return"insideLeft"===n?Tb({x:l+s,y:o+a/2,textAnchor:m,verticalAnchor:"middle"},p):"insideRight"===n?Tb({x:l+r-s,y:o+a/2,textAnchor:b,verticalAnchor:"middle"},p):"insideTop"===n?Tb({x:l+r/2,y:o+i,textAnchor:"middle",verticalAnchor:u},p):"insideBottom"===n?Tb({x:l+r/2,y:o+a-i,textAnchor:"middle",verticalAnchor:A},p):"insideTopLeft"===n?Tb({x:l+s,y:o+i,textAnchor:m,verticalAnchor:u},p):"insideTopRight"===n?Tb({x:l+r-s,y:o+i,textAnchor:b,verticalAnchor:u},p):"insideBottomLeft"===n?Tb({x:l+s,y:o+a-i,textAnchor:m,verticalAnchor:A},p):"insideBottomRight"===n?Tb({x:l+r-s,y:o+a-i,textAnchor:b,verticalAnchor:A},p):Zt()(n)&&(ft(n.x)||Wt(n.x))&&(ft(n.y)||Wt(n.y))?Tb({x:l+Rt(n.x,r),y:o+Rt(n.y,a),textAnchor:"end",verticalAnchor:"end"},p):Tb({x:l+r/2,y:o+a/2,textAnchor:"middle",verticalAnchor:"middle"},p)}(t);return n.createElement(Ha,Ob({className:At("recharts-label",i)},d,s,{breakAll:A}),e)}qb.displayName="Label";var _b=function(g){var e=g.cx,I=g.cy,t=g.angle,n=g.startAngle,C=g.endAngle,l=g.r,o=g.radius,r=g.innerRadius,a=g.outerRadius,c=g.x,i=g.y,A=g.top,u=g.left,d=g.width,s=g.height,b=g.clockWise,m=g.labelViewBox;if(m)return m;if(ft(d)&&ft(s)){if(ft(c)&&ft(i))return{x:c,y:i,width:d,height:s};if(ft(A)&&ft(u))return{x:A,y:u,width:d,height:s}}return ft(c)&&ft(i)?{x:c,y:i,width:0,height:0}:ft(e)&&ft(I)?{cx:e,cy:I,startAngle:n||t||0,endAngle:C||t||0,innerRadius:r||0,outerRadius:a||o||l||0,clockWise:b}:g.viewBox?g.viewBox:{}};qb.parseViewBox=_b,qb.renderCallByParent=function(g,e){var I=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!g||!g.children&&I&&!g.label)return null;var t=g.children,C=_b(g),l=Pt(t,qb).map((function(g,I){return(0,n.cloneElement)(g,{viewBox:e||C,key:"label-".concat(I)})}));if(!I)return l;var o=function(g,e){return g?!0===g?n.createElement(qb,{key:"label-implicit",viewBox:e}):Vt(g)?n.createElement(qb,{key:"label-implicit",viewBox:e,value:g}):(0,n.isValidElement)(g)?g.type===qb?(0,n.cloneElement)(g,{key:"label-implicit",viewBox:e}):n.createElement(qb,{key:"label-implicit",content:g,viewBox:e}):It()(g)?n.createElement(qb,{key:"label-implicit",content:g,viewBox:e}):Zt()(g)?n.createElement(qb,Ob({viewBox:e},g,{key:"label-implicit"})):null:null}(g.label,e||C);return[o].concat(Ub(l))};var $b=function(g,e){var I=g.alwaysShow,t=g.ifOverflow;return I&&(t="extendDomain"),t===e},gm=I(1733),em=I.n(gm),Im=I(7002),tm=I.n(Im);function nm(g){return nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},nm(g)}function Cm(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,am(t.key),t)}}function lm(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function om(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?lm(Object(I),!0).forEach((function(e){rm(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):lm(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function rm(g,e,I){return(e=am(e))in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function am(g){var e=function(g,e){if("object"!=nm(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=nm(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==nm(e)?e:e+""}var cm=function(g,e){var I=g.x,t=g.y,n=e.x,C=e.y;return{x:Math.min(I,n),y:Math.min(t,C),width:Math.abs(n-I),height:Math.abs(C-t)}},im=function(){function g(e){!function(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),this.scale=e}return e=g,I=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(g){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},I=e.bandAware,t=e.position;if(void 0!==g){if(t)switch(t){case"start":default:return this.scale(g);case"middle":var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(g)+n;case"end":var C=this.bandwidth?this.bandwidth():0;return this.scale(g)+C}if(I){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(g)+l}return this.scale(g)}}},{key:"isInRange",value:function(g){var e=this.range(),I=e[0],t=e[e.length-1];return I<=t?g>=I&&g<=t:g>=t&&g<=I}}],t=[{key:"create",value:function(e){return new g(e)}}],I&&Cm(e.prototype,I),t&&Cm(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,I,t}();rm(im,"EPS",1e-4);var Am=function(g){var e=Object.keys(g).reduce((function(e,I){return om(om({},e),{},rm({},I,im.create(g[I])))}),{});return om(om({},e),{},{apply:function(g){var I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=I.bandAware,n=I.position;return em()(g,(function(g,I){return e[I].apply(g,{bandAware:t,position:n})}))},isInRange:function(g){return tm()(g,(function(g,I){return e[I].isInRange(g)}))}})};function um(){return um=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},um.apply(this,arguments)}function dm(g){return dm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},dm(g)}function sm(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function bm(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?sm(Object(I),!0).forEach((function(e){hm(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):sm(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function mm(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,Bm(t.key),t)}}function Zm(g,e,I){return e=pm(e),function(g,e){if(e&&("object"===dm(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(g)}(g,ym()?Reflect.construct(e,I||[],pm(g).constructor):e.apply(g,I))}function ym(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(g){}return(ym=function(){return!!g})()}function pm(g){return pm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},pm(g)}function Gm(g,e){return Gm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,e){return g.__proto__=e,g},Gm(g,e)}function hm(g,e,I){return(e=Bm(e))in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function Bm(g){var e=function(g,e){if("object"!=dm(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=dm(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==dm(e)?e:e+""}var Sm=function(g){function e(){return function(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Zm(this,e,arguments)}return function(g,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(e&&e.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),e&&Gm(g,e)}(e,g),I=e,t=[{key:"render",value:function(){var g=this.props,I=g.x,t=g.y,C=g.r,l=g.alwaysShow,o=g.clipPathId,r=Vt(I),a=Vt(t);if(IC(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!r||!a)return null;var c=function(g){var e=g.x,I=g.y,t=g.xAxis,n=g.yAxis,C=Am({x:t.scale,y:n.scale}),l=C.apply({x:e,y:I},{bandAware:!0});return $b(g,"discard")&&!C.isInRange(l)?null:l}(this.props);if(!c)return null;var i=c.x,A=c.y,u=this.props,d=u.shape,s=u.className,b=bm(bm({clipPath:$b(this.props,"hidden")?"url(#".concat(o,")"):void 0},en(this.props,!0)),{},{cx:i,cy:A});return n.createElement(un,{className:At("recharts-reference-dot",s)},e.renderDot(d,b),qb.renderCallByParent(this.props,{x:i-C,y:A-C,width:2*C,height:2*C}))}}],t&&mm(I.prototype,t),C&&mm(I,C),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,t,C}(n.Component);hm(Sm,"displayName","ReferenceDot"),hm(Sm,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),hm(Sm,"renderDot",(function(g,e){return n.isValidElement(g)?n.cloneElement(g,e):It()(g)?g(e):n.createElement(Zl,um({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"}))}));var Wm=I(4597),fm=I.n(Wm),Vm=(I(8990),I(5797)),vm=I.n(Vm)()((function(g){return{x:g.left,y:g.top,width:g.width,height:g.height}}),(function(g){return["l",g.left,"t",g.top,"w",g.width,"h",g.height].join("")}));var Xm=(0,n.createContext)(void 0),Rm=(0,n.createContext)(void 0),Jm=(0,n.createContext)(void 0),km=(0,n.createContext)({}),Ym=(0,n.createContext)(void 0),Hm=(0,n.createContext)(0),wm=(0,n.createContext)(0),Nm=function(g){var e=g.state,I=e.xAxisMap,t=e.yAxisMap,C=e.offset,l=g.clipPathId,o=g.children,r=g.width,a=g.height,c=vm(C);return n.createElement(Xm.Provider,{value:I},n.createElement(Rm.Provider,{value:t},n.createElement(km.Provider,{value:C},n.createElement(Jm.Provider,{value:c},n.createElement(Ym.Provider,{value:l},n.createElement(Hm.Provider,{value:a},n.createElement(wm.Provider,{value:r},o)))))))};function Km(g){return Km="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},Km(g)}function Fm(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,Dm(t.key),t)}}function xm(g,e,I){return e=Mm(e),function(g,e){if(e&&("object"===Km(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(g)}(g,Em()?Reflect.construct(e,I||[],Mm(g).constructor):e.apply(g,I))}function Em(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(g){}return(Em=function(){return!!g})()}function Mm(g){return Mm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},Mm(g)}function zm(g,e){return zm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,e){return g.__proto__=e,g},zm(g,e)}function Um(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function Qm(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?Um(Object(I),!0).forEach((function(e){Lm(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):Um(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function Lm(g,e,I){return(e=Dm(e))in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function Dm(g){var e=function(g,e){if("object"!=Km(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=Km(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==Km(e)?e:e+""}function Tm(g,e){return function(g){if(Array.isArray(g))return g}(g)||function(g,e){var I=null==g?null:"undefined"!=typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null!=I){var t,n,C,l,o=[],r=!0,a=!1;try{if(C=(I=I.call(g)).next,0===e){if(Object(I)!==I)return;r=!1}else for(;!(r=(t=C.call(I)).done)&&(o.push(t.value),o.length!==e);r=!0);}catch(g){a=!0,n=g}finally{try{if(!r&&null!=I.return&&(l=I.return(),Object(l)!==l))return}finally{if(a)throw n}}return o}}(g,e)||function(g,e){if(!g)return;if("string"===typeof g)return jm(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);"Object"===I&&g.constructor&&(I=g.constructor.name);if("Map"===I||"Set"===I)return Array.from(g);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return jm(g,e)}(g,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jm(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}function Om(){return Om=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},Om.apply(this,arguments)}function Pm(g){var e=g.x,I=g.y,t=g.segment,C=g.xAxisId,l=g.yAxisId,o=g.shape,r=g.className,a=g.alwaysShow,c=(0,n.useContext)(Ym),i=function(g){var e=(0,n.useContext)(Xm);null==e&&dt(!1);var I=e[g];return null==I&&dt(!1),I}(C),A=function(g){var e=(0,n.useContext)(Rm);null==e&&dt(!1);var I=e[g];return null==I&&dt(!1),I}(l),u=(0,n.useContext)(Jm);if(!c||!u)return null;IC(void 0===a,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=function(g,e,I,t,n,C,l,o,r){var a=n.x,c=n.y,i=n.width,A=n.height;if(I){var u=r.y,d=g.y.apply(u,{position:C});if($b(r,"discard")&&!g.y.isInRange(d))return null;var s=[{x:a+i,y:d},{x:a,y:d}];return"left"===o?s.reverse():s}if(e){var b=r.x,m=g.x.apply(b,{position:C});if($b(r,"discard")&&!g.x.isInRange(m))return null;var Z=[{x:m,y:c+A},{x:m,y:c}];return"top"===l?Z.reverse():Z}if(t){var y=r.segment.map((function(e){return g.apply(e,{position:C})}));return $b(r,"discard")&&fm()(y,(function(e){return!g.isInRange(e)}))?null:y}return null}(Am({x:i.scale,y:A.scale}),Vt(e),Vt(I),t&&2===t.length,u,g.position,i.orientation,A.orientation,g);if(!d)return null;var s=Tm(d,2),b=s[0],m=b.x,Z=b.y,y=s[1],p=y.x,G=y.y,h=Qm(Qm({clipPath:$b(g,"hidden")?"url(#".concat(c,")"):void 0},en(g,!0)),{},{x1:m,y1:Z,x2:p,y2:G});return n.createElement(un,{className:At("recharts-reference-line",r)},function(g,e){return n.isValidElement(g)?n.cloneElement(g,e):It()(g)?g(e):n.createElement("line",Om({},e,{className:"recharts-reference-line-line"}))}(o,h),qb.renderCallByParent(g,function(g){var e=g.x1,I=g.y1,t=g.x2,n=g.y2;return cm({x:e,y:I},{x:t,y:n})}({x1:m,y1:Z,x2:p,y2:G})))}var qm=function(g){function e(){return function(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),xm(this,e,arguments)}return function(g,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(e&&e.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),e&&zm(g,e)}(e,g),I=e,(t=[{key:"render",value:function(){return n.createElement(Pm,this.props)}}])&&Fm(I.prototype,t),C&&Fm(I,C),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,t,C}(n.Component);function _m(){return _m=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},_m.apply(this,arguments)}function $m(g){return $m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},$m(g)}function gZ(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function eZ(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?gZ(Object(I),!0).forEach((function(e){oZ(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):gZ(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function IZ(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,rZ(t.key),t)}}function tZ(g,e,I){return e=CZ(e),function(g,e){if(e&&("object"===$m(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(g)}(g,nZ()?Reflect.construct(e,I||[],CZ(g).constructor):e.apply(g,I))}function nZ(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(g){}return(nZ=function(){return!!g})()}function CZ(g){return CZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},CZ(g)}function lZ(g,e){return lZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,e){return g.__proto__=e,g},lZ(g,e)}function oZ(g,e,I){return(e=rZ(e))in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function rZ(g){var e=function(g,e){if("object"!=$m(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=$m(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==$m(e)?e:e+""}Lm(qm,"displayName","ReferenceLine"),Lm(qm,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var aZ=function(g){function e(){return function(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),tZ(this,e,arguments)}return function(g,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(e&&e.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),e&&lZ(g,e)}(e,g),I=e,(t=[{key:"render",value:function(){var g=this.props,I=g.x1,t=g.x2,C=g.y1,l=g.y2,o=g.className,r=g.alwaysShow,a=g.clipPathId;IC(void 0===r,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=Vt(I),i=Vt(t),A=Vt(C),u=Vt(l),d=this.props.shape;if(!c&&!i&&!A&&!u&&!d)return null;var s=function(g,e,I,t,n){var C=n.x1,l=n.x2,o=n.y1,r=n.y2,a=n.xAxis,c=n.yAxis;if(!a||!c)return null;var i=Am({x:a.scale,y:c.scale}),A={x:g?i.x.apply(C,{position:"start"}):i.x.rangeMin,y:I?i.y.apply(o,{position:"start"}):i.y.rangeMin},u={x:e?i.x.apply(l,{position:"end"}):i.x.rangeMax,y:t?i.y.apply(r,{position:"end"}):i.y.rangeMax};return!$b(n,"discard")||i.isInRange(A)&&i.isInRange(u)?cm(A,u):null}(c,i,A,u,this.props);if(!s&&!d)return null;var b=$b(this.props,"hidden")?"url(#".concat(a,")"):void 0;return n.createElement(un,{className:At("recharts-reference-area",o)},e.renderRect(d,eZ(eZ({clipPath:b},en(this.props,!0)),s)),qb.renderCallByParent(this.props,s))}}])&&IZ(I.prototype,t),C&&IZ(I,C),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,t,C}(n.Component);function cZ(g){return function(g){if(Array.isArray(g))return iZ(g)}(g)||function(g){if("undefined"!==typeof Symbol&&null!=g[Symbol.iterator]||null!=g["@@iterator"])return Array.from(g)}(g)||function(g,e){if(!g)return;if("string"===typeof g)return iZ(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);"Object"===I&&g.constructor&&(I=g.constructor.name);if("Map"===I||"Set"===I)return Array.from(g);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return iZ(g,e)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iZ(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}oZ(aZ,"displayName","ReferenceArea"),oZ(aZ,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),oZ(aZ,"renderRect",(function(g,e){return n.isValidElement(g)?n.cloneElement(g,e):It()(g)?g(e):n.createElement(xr,_m({},e,{className:"recharts-reference-area-rect"}))}));var AZ=function(g,e,I,t,n){var C=Pt(g,qm),l=Pt(g,Sm),o=[].concat(cZ(C),cZ(l)),r=Pt(g,aZ),a="".concat(t,"Id"),c=t[0],i=e;if(o.length&&(i=o.reduce((function(g,e){if(e.props[a]===I&&$b(e.props,"extendDomain")&&ft(e.props[c])){var t=e.props[c];return[Math.min(g[0],t),Math.max(g[1],t)]}return g}),i)),r.length){var A="".concat(c,"1"),u="".concat(c,"2");i=r.reduce((function(g,e){if(e.props[a]===I&&$b(e.props,"extendDomain")&&ft(e.props[A])&&ft(e.props[u])){var t=e.props[A],n=e.props[u];return[Math.min(g[0],t,n),Math.max(g[1],t,n)]}return g}),i)}return n&&n.length&&(i=n.reduce((function(g,e){return ft(e)?[Math.min(g[0],e),Math.max(g[1],e)]:g}),i)),i},uZ=I(7283),dZ=new(I.n(uZ)()),sZ="recharts.syncMouseEvents";function bZ(g){return bZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},bZ(g)}function mZ(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,yZ(t.key),t)}}function ZZ(g,e,I){return(e=yZ(e))in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function yZ(g){var e=function(g,e){if("object"!=bZ(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=bZ(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==bZ(e)?e:e+""}var pZ=function(){return g=function g(){!function(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),ZZ(this,"activeIndex",0),ZZ(this,"coordinateList",[]),ZZ(this,"layout","horizontal")},(e=[{key:"setDetails",value:function(g){var e,I=g.coordinateList,t=void 0===I?null:I,n=g.container,C=void 0===n?null:n,l=g.layout,o=void 0===l?null:l,r=g.offset,a=void 0===r?null:r,c=g.mouseHandlerCallback,i=void 0===c?null:c;this.coordinateList=null!==(e=null!==t&&void 0!==t?t:this.coordinateList)&&void 0!==e?e:[],this.container=null!==C&&void 0!==C?C:this.container,this.layout=null!==o&&void 0!==o?o:this.layout,this.offset=null!==a&&void 0!==a?a:this.offset,this.mouseHandlerCallback=null!==i&&void 0!==i?i:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(g){if(0!==this.coordinateList.length)switch(g.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(g){this.activeIndex=g}},{key:"spoofMouse",value:function(){var g,e;if("horizontal"===this.layout&&0!==this.coordinateList.length){var I=this.container.getBoundingClientRect(),t=I.x,n=I.y,C=I.height,l=this.coordinateList[this.activeIndex].coordinate,o=(null===(g=window)||void 0===g?void 0:g.scrollX)||0,r=(null===(e=window)||void 0===e?void 0:e.scrollY)||0,a=t+l+o,c=n+this.offset.top+C/2+r;this.mouseHandlerCallback({pageX:a,pageY:c})}}}])&&mZ(g.prototype,e),I&&mZ(g,I),Object.defineProperty(g,"prototype",{writable:!1}),g;var g,e,I}();var GZ=I(2322),hZ=I.n(GZ),BZ=I(6361),SZ=I.n(BZ);function WZ(g){return WZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},WZ(g)}function fZ(){return fZ=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},fZ.apply(this,arguments)}function VZ(g,e){return function(g){if(Array.isArray(g))return g}(g)||function(g,e){var I=null==g?null:"undefined"!=typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null!=I){var t,n,C,l,o=[],r=!0,a=!1;try{if(C=(I=I.call(g)).next,0===e){if(Object(I)!==I)return;r=!1}else for(;!(r=(t=C.call(I)).done)&&(o.push(t.value),o.length!==e);r=!0);}catch(g){a=!0,n=g}finally{try{if(!r&&null!=I.return&&(l=I.return(),Object(l)!==l))return}finally{if(a)throw n}}return o}}(g,e)||function(g,e){if(!g)return;if("string"===typeof g)return vZ(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);"Object"===I&&g.constructor&&(I=g.constructor.name);if("Map"===I||"Set"===I)return Array.from(g);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return vZ(g,e)}(g,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vZ(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}function XZ(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function RZ(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?XZ(Object(I),!0).forEach((function(e){JZ(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):XZ(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function JZ(g,e,I){return e=function(g){var e=function(g,e){if("object"!=WZ(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=WZ(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==WZ(e)?e:e+""}(e),e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}var kZ=function(g,e,I,t,n){var C,l=I-t;return C="M ".concat(g,",").concat(e),C+="L ".concat(g+I,",").concat(e),C+="L ".concat(g+I-l/2,",").concat(e+n),C+="L ".concat(g+I-l/2-t,",").concat(e+n),C+="L ".concat(g,",").concat(e," Z")},YZ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},HZ=function(g){var e=RZ(RZ({},YZ),g),I=(0,n.useRef)(),t=VZ((0,n.useState)(-1),2),C=t[0],l=t[1];(0,n.useEffect)((function(){if(I.current&&I.current.getTotalLength)try{var g=I.current.getTotalLength();g&&l(g)}catch(e){}}),[]);var o=e.x,r=e.y,a=e.upperWidth,c=e.lowerWidth,i=e.height,A=e.className,u=e.animationEasing,d=e.animationDuration,s=e.animationBegin,b=e.isUpdateAnimationActive;if(o!==+o||r!==+r||a!==+a||c!==+c||i!==+i||0===a&&0===c||0===i)return null;var m=At("recharts-trapezoid",A);return b?n.createElement(vr,{canBegin:C>0,from:{upperWidth:0,lowerWidth:0,height:i,x:o,y:r},to:{upperWidth:a,lowerWidth:c,height:i,x:o,y:r},duration:d,animationEasing:u,isActive:b},(function(g){var t=g.upperWidth,l=g.lowerWidth,o=g.height,r=g.x,a=g.y;return n.createElement(vr,{canBegin:C>0,from:"0px ".concat(-1===C?1:C,"px"),to:"".concat(C,"px 0px"),attributeName:"strokeDasharray",begin:s,duration:d,easing:u},n.createElement("path",fZ({},en(e,!0),{className:m,d:kZ(r,a,t,l,o),ref:I})))})):n.createElement("g",null,n.createElement("path",fZ({},en(e,!0),{className:m,d:kZ(o,r,a,c,i)})))};function wZ(g){return wZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},wZ(g)}function NZ(){return NZ=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},NZ.apply(this,arguments)}function KZ(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function FZ(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?KZ(Object(I),!0).forEach((function(e){xZ(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):KZ(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function xZ(g,e,I){return e=function(g){var e=function(g,e){if("object"!=wZ(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=wZ(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==wZ(e)?e:e+""}(e),e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}var EZ=function(g){var e=g.cx,I=g.cy,t=g.radius,n=g.angle,C=g.sign,l=g.isExternal,o=g.cornerRadius,r=g.cornerIsExternal,a=o*(l?1:-1)+t,c=Math.asin(o/a)/Yb,i=r?n:n+C*c,A=r?n-C*c:n;return{center:wb(e,I,a,i),circleTangency:wb(e,I,t,i),lineTangency:wb(e,I,a*Math.cos(c*Yb),A),theta:c}},MZ=function(g){var e=g.cx,I=g.cy,t=g.innerRadius,n=g.outerRadius,C=g.startAngle,l=function(g,e){return St(e-g)*Math.min(Math.abs(e-g),359.999)}(C,g.endAngle),o=C+l,r=wb(e,I,n,C),a=wb(e,I,n,o),c="M ".concat(r.x,",").concat(r.y,"\n    A ").concat(n,",").concat(n,",0,\n    ").concat(+(Math.abs(l)>180),",").concat(+(C>o),",\n    ").concat(a.x,",").concat(a.y,"\n  ");if(t>0){var i=wb(e,I,t,C),A=wb(e,I,t,o);c+="L ".concat(A.x,",").concat(A.y,"\n            A ").concat(t,",").concat(t,",0,\n            ").concat(+(Math.abs(l)>180),",").concat(+(C<=o),",\n            ").concat(i.x,",").concat(i.y," Z")}else c+="L ".concat(e,",").concat(I," Z");return c},zZ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},UZ=function(g){var e=FZ(FZ({},zZ),g),I=e.cx,t=e.cy,C=e.innerRadius,l=e.outerRadius,o=e.cornerRadius,r=e.forceCornerRadius,a=e.cornerIsExternal,c=e.startAngle,i=e.endAngle,A=e.className;if(l<C||c===i)return null;var u,d=At("recharts-sector",A),s=l-C,b=Rt(o,s,0,!0);return u=b>0&&Math.abs(c-i)<360?function(g){var e=g.cx,I=g.cy,t=g.innerRadius,n=g.outerRadius,C=g.cornerRadius,l=g.forceCornerRadius,o=g.cornerIsExternal,r=g.startAngle,a=g.endAngle,c=St(a-r),i=EZ({cx:e,cy:I,radius:n,angle:r,sign:c,cornerRadius:C,cornerIsExternal:o}),A=i.circleTangency,u=i.lineTangency,d=i.theta,s=EZ({cx:e,cy:I,radius:n,angle:a,sign:-c,cornerRadius:C,cornerIsExternal:o}),b=s.circleTangency,m=s.lineTangency,Z=s.theta,y=o?Math.abs(r-a):Math.abs(r-a)-d-Z;if(y<0)return l?"M ".concat(u.x,",").concat(u.y,"\n        a").concat(C,",").concat(C,",0,0,1,").concat(2*C,",0\n        a").concat(C,",").concat(C,",0,0,1,").concat(2*-C,",0\n      "):MZ({cx:e,cy:I,innerRadius:t,outerRadius:n,startAngle:r,endAngle:a});var p="M ".concat(u.x,",").concat(u.y,"\n    A").concat(C,",").concat(C,",0,0,").concat(+(c<0),",").concat(A.x,",").concat(A.y,"\n    A").concat(n,",").concat(n,",0,").concat(+(y>180),",").concat(+(c<0),",").concat(b.x,",").concat(b.y,"\n    A").concat(C,",").concat(C,",0,0,").concat(+(c<0),",").concat(m.x,",").concat(m.y,"\n  ");if(t>0){var G=EZ({cx:e,cy:I,radius:t,angle:r,sign:c,isExternal:!0,cornerRadius:C,cornerIsExternal:o}),h=G.circleTangency,B=G.lineTangency,S=G.theta,W=EZ({cx:e,cy:I,radius:t,angle:a,sign:-c,isExternal:!0,cornerRadius:C,cornerIsExternal:o}),f=W.circleTangency,V=W.lineTangency,v=W.theta,X=o?Math.abs(r-a):Math.abs(r-a)-S-v;if(X<0&&0===C)return"".concat(p,"L").concat(e,",").concat(I,"Z");p+="L".concat(V.x,",").concat(V.y,"\n      A").concat(C,",").concat(C,",0,0,").concat(+(c<0),",").concat(f.x,",").concat(f.y,"\n      A").concat(t,",").concat(t,",0,").concat(+(X>180),",").concat(+(c>0),",").concat(h.x,",").concat(h.y,"\n      A").concat(C,",").concat(C,",0,0,").concat(+(c<0),",").concat(B.x,",").concat(B.y,"Z")}else p+="L".concat(e,",").concat(I,"Z");return p}({cx:I,cy:t,innerRadius:C,outerRadius:l,cornerRadius:Math.min(b,s/2),forceCornerRadius:r,cornerIsExternal:a,startAngle:c,endAngle:i}):MZ({cx:I,cy:t,innerRadius:C,outerRadius:l,startAngle:c,endAngle:i}),n.createElement("path",NZ({},en(e,!0),{className:d,d:u,role:"img"}))},QZ=["option","shapeType","propTransformer","activeClassName","isActive"];function LZ(g){return LZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},LZ(g)}function DZ(g,e){if(null==g)return{};var I,t,n=function(g,e){if(null==g)return{};var I={};for(var t in g)if(Object.prototype.hasOwnProperty.call(g,t)){if(e.indexOf(t)>=0)continue;I[t]=g[t]}return I}(g,e);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(n[I]=g[I])}return n}function TZ(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function jZ(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?TZ(Object(I),!0).forEach((function(e){OZ(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):TZ(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function OZ(g,e,I){return e=function(g){var e=function(g,e){if("object"!=LZ(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=LZ(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==LZ(e)?e:e+""}(e),e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function PZ(g,e){return jZ(jZ({},e),g)}function qZ(g){var e=g.shapeType,I=g.elementProps;switch(e){case"rectangle":return n.createElement(xr,I);case"trapezoid":return n.createElement(HZ,I);case"sector":return n.createElement(UZ,I);case"symbols":if(function(g){return"symbols"===g}(e))return n.createElement(QC,I);break;default:return null}}function _Z(g){var e,I=g.option,t=g.shapeType,C=g.propTransformer,l=void 0===C?PZ:C,o=g.activeClassName,r=void 0===o?"recharts-active-shape":o,a=g.isActive,c=DZ(g,QZ);if((0,n.isValidElement)(I))e=(0,n.cloneElement)(I,jZ(jZ({},c),function(g){return(0,n.isValidElement)(g)?g.props:g}(I)));else if(It()(I))e=I(c);else if(hZ()(I)&&!SZ()(I)){var i=l(I,c);e=n.createElement(qZ,{shapeType:t,elementProps:i})}else{var A=c;e=n.createElement(qZ,{shapeType:t,elementProps:A})}return a?n.createElement(un,{className:r},e):e}function $Z(g,e){return null!=e&&"trapezoids"in g.props}function gy(g,e){return null!=e&&"sectors"in g.props}function ey(g,e){return null!=e&&"points"in g.props}function Iy(g,e){var I,t,n=g.x===(null===e||void 0===e||null===(I=e.labelViewBox)||void 0===I?void 0:I.x)||g.x===e.x,C=g.y===(null===e||void 0===e||null===(t=e.labelViewBox)||void 0===t?void 0:t.y)||g.y===e.y;return n&&C}function ty(g,e){var I=g.endAngle===e.endAngle,t=g.startAngle===e.startAngle;return I&&t}function ny(g,e){var I=g.x===e.x,t=g.y===e.y,n=g.z===e.z;return I&&t&&n}function Cy(g){var e=g.activeTooltipItem,I=g.graphicalItem,t=g.itemData,n=function(g,e){var I;return $Z(g,e)?I="trapezoids":gy(g,e)?I="sectors":ey(g,e)&&(I="points"),I}(I,e),C=function(g,e){var I,t;return $Z(g,e)?null===(I=e.tooltipPayload)||void 0===I||null===(I=I[0])||void 0===I||null===(I=I.payload)||void 0===I?void 0:I.payload:gy(g,e)?null===(t=e.tooltipPayload)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.payload)||void 0===t?void 0:t.payload:ey(g,e)?e.payload:{}}(I,e),l=t.filter((function(g,t){var l=Ud()(C,g),o=I.props[n].filter((function(g){var t=function(g,e){var I;return $Z(g,e)?I=Iy:gy(g,e)?I=ty:ey(g,e)&&(I=ny),I}(I,e);return t(g,e)})),r=I.props[n].indexOf(o[o.length-1]);return l&&t===r}));return t.indexOf(l[l.length-1])}function ly(){}function oy(g,e,I){g._context.bezierCurveTo((2*g._x0+g._x1)/3,(2*g._y0+g._y1)/3,(g._x0+2*g._x1)/3,(g._y0+2*g._y1)/3,(g._x0+4*g._x1+e)/6,(g._y0+4*g._y1+I)/6)}function ry(g){this._context=g}function ay(g){this._context=g}function cy(g){this._context=g}ry.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:oy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(g,e){switch(g=+g,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(g,e):this._context.moveTo(g,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:oy(this,g,e)}this._x0=this._x1,this._x1=g,this._y0=this._y1,this._y1=e}},ay.prototype={areaStart:ly,areaEnd:ly,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(g,e){switch(g=+g,e=+e,this._point){case 0:this._point=1,this._x2=g,this._y2=e;break;case 1:this._point=2,this._x3=g,this._y3=e;break;case 2:this._point=3,this._x4=g,this._y4=e,this._context.moveTo((this._x0+4*this._x1+g)/6,(this._y0+4*this._y1+e)/6);break;default:oy(this,g,e)}this._x0=this._x1,this._x1=g,this._y0=this._y1,this._y1=e}},cy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(g,e){switch(g=+g,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var I=(this._x0+4*this._x1+g)/6,t=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(I,t):this._context.moveTo(I,t);break;case 3:this._point=4;default:oy(this,g,e)}this._x0=this._x1,this._x1=g,this._y0=this._y1,this._y1=e}};class iy{constructor(g,e){this._context=g,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(g,e){switch(g=+g,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(g,e):this._context.moveTo(g,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+g)/2,this._y0,this._x0,e,g,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,g,this._y0,g,e)}this._x0=g,this._y0=e}}function Ay(g){this._context=g}function uy(g){this._context=g}function dy(g){return new uy(g)}function sy(g){return g<0?-1:1}function by(g,e,I){var t=g._x1-g._x0,n=e-g._x1,C=(g._y1-g._y0)/(t||n<0&&-0),l=(I-g._y1)/(n||t<0&&-0),o=(C*n+l*t)/(t+n);return(sy(C)+sy(l))*Math.min(Math.abs(C),Math.abs(l),.5*Math.abs(o))||0}function my(g,e){var I=g._x1-g._x0;return I?(3*(g._y1-g._y0)/I-e)/2:e}function Zy(g,e,I){var t=g._x0,n=g._y0,C=g._x1,l=g._y1,o=(C-t)/3;g._context.bezierCurveTo(t+o,n+o*e,C-o,l-o*I,C,l)}function yy(g){this._context=g}function py(g){this._context=new Gy(g)}function Gy(g){this._context=g}function hy(g){this._context=g}function By(g){var e,I,t=g.length-1,n=new Array(t),C=new Array(t),l=new Array(t);for(n[0]=0,C[0]=2,l[0]=g[0]+2*g[1],e=1;e<t-1;++e)n[e]=1,C[e]=4,l[e]=4*g[e]+2*g[e+1];for(n[t-1]=2,C[t-1]=7,l[t-1]=8*g[t-1]+g[t],e=1;e<t;++e)I=n[e]/C[e-1],C[e]-=I,l[e]-=I*l[e-1];for(n[t-1]=l[t-1]/C[t-1],e=t-2;e>=0;--e)n[e]=(l[e]-n[e+1])/C[e];for(C[t-1]=(g[t]+n[t-1])/2,e=0;e<t-1;++e)C[e]=2*g[e+1]-n[e+1];return[n,C]}function Sy(g,e){this._context=g,this._t=e}function Wy(g){return g[0]}function fy(g){return g[1]}function Vy(g,e){var I=VC(!0),t=null,n=dy,C=null,l=HC(o);function o(o){var r,a,c,i=(o=kd(o)).length,A=!1;for(null==t&&(C=n(c=l())),r=0;r<=i;++r)!(r<i&&I(a=o[r],r,o))===A&&((A=!A)?C.lineStart():C.lineEnd()),A&&C.point(+g(a,r,o),+e(a,r,o));if(c)return C=null,c+""||null}return g="function"===typeof g?g:void 0===g?Wy:VC(g),e="function"===typeof e?e:void 0===e?fy:VC(e),o.x=function(e){return arguments.length?(g="function"===typeof e?e:VC(+e),o):g},o.y=function(g){return arguments.length?(e="function"===typeof g?g:VC(+g),o):e},o.defined=function(g){return arguments.length?(I="function"===typeof g?g:VC(!!g),o):I},o.curve=function(g){return arguments.length?(n=g,null!=t&&(C=n(t)),o):n},o.context=function(g){return arguments.length?(null==g?t=C=null:C=n(t=g),o):t},o}function vy(g,e,I){var t=null,n=VC(!0),C=null,l=dy,o=null,r=HC(a);function a(a){var c,i,A,u,d,s=(a=kd(a)).length,b=!1,m=new Array(s),Z=new Array(s);for(null==C&&(o=l(d=r())),c=0;c<=s;++c){if(!(c<s&&n(u=a[c],c,a))===b)if(b=!b)i=c,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),A=c-1;A>=i;--A)o.point(m[A],Z[A]);o.lineEnd(),o.areaEnd()}b&&(m[c]=+g(u,c,a),Z[c]=+e(u,c,a),o.point(t?+t(u,c,a):m[c],I?+I(u,c,a):Z[c]))}if(d)return o=null,d+""||null}function c(){return Vy().defined(n).curve(l).context(C)}return g="function"===typeof g?g:void 0===g?Wy:VC(+g),e="function"===typeof e?e:VC(void 0===e?0:+e),I="function"===typeof I?I:void 0===I?fy:VC(+I),a.x=function(e){return arguments.length?(g="function"===typeof e?e:VC(+e),t=null,a):g},a.x0=function(e){return arguments.length?(g="function"===typeof e?e:VC(+e),a):g},a.x1=function(g){return arguments.length?(t=null==g?null:"function"===typeof g?g:VC(+g),a):t},a.y=function(g){return arguments.length?(e="function"===typeof g?g:VC(+g),I=null,a):e},a.y0=function(g){return arguments.length?(e="function"===typeof g?g:VC(+g),a):e},a.y1=function(g){return arguments.length?(I=null==g?null:"function"===typeof g?g:VC(+g),a):I},a.lineX0=a.lineY0=function(){return c().x(g).y(e)},a.lineY1=function(){return c().x(g).y(I)},a.lineX1=function(){return c().x(t).y(e)},a.defined=function(g){return arguments.length?(n="function"===typeof g?g:VC(!!g),a):n},a.curve=function(g){return arguments.length?(l=g,null!=C&&(o=l(C)),a):l},a.context=function(g){return arguments.length?(null==g?C=o=null:o=l(C=g),a):C},a}function Xy(g){return Xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},Xy(g)}function Ry(){return Ry=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},Ry.apply(this,arguments)}function Jy(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function ky(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?Jy(Object(I),!0).forEach((function(e){Yy(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):Jy(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function Yy(g,e,I){return e=function(g){var e=function(g,e){if("object"!=Xy(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=Xy(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==Xy(e)?e:e+""}(e),e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}Ay.prototype={areaStart:ly,areaEnd:ly,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(g,e){g=+g,e=+e,this._point?this._context.lineTo(g,e):(this._point=1,this._context.moveTo(g,e))}},uy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(g,e){switch(g=+g,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(g,e):this._context.moveTo(g,e);break;case 1:this._point=2;default:this._context.lineTo(g,e)}}},yy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Zy(this,this._t0,my(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(g,e){var I=NaN;if(e=+e,(g=+g)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(g,e):this._context.moveTo(g,e);break;case 1:this._point=2;break;case 2:this._point=3,Zy(this,my(this,I=by(this,g,e)),I);break;default:Zy(this,this._t0,I=by(this,g,e))}this._x0=this._x1,this._x1=g,this._y0=this._y1,this._y1=e,this._t0=I}}},(py.prototype=Object.create(yy.prototype)).point=function(g,e){yy.prototype.point.call(this,e,g)},Gy.prototype={moveTo:function(g,e){this._context.moveTo(e,g)},closePath:function(){this._context.closePath()},lineTo:function(g,e){this._context.lineTo(e,g)},bezierCurveTo:function(g,e,I,t,n,C){this._context.bezierCurveTo(e,g,t,I,C,n)}},hy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var g=this._x,e=this._y,I=g.length;if(I)if(this._line?this._context.lineTo(g[0],e[0]):this._context.moveTo(g[0],e[0]),2===I)this._context.lineTo(g[1],e[1]);else for(var t=By(g),n=By(e),C=0,l=1;l<I;++C,++l)this._context.bezierCurveTo(t[0][C],n[0][C],t[1][C],n[1][C],g[l],e[l]);(this._line||0!==this._line&&1===I)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(g,e){this._x.push(+g),this._y.push(+e)}},Sy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(g,e){switch(g=+g,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(g,e):this._context.moveTo(g,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(g,e);else{var I=this._x*(1-this._t)+g*this._t;this._context.lineTo(I,this._y),this._context.lineTo(I,e)}}this._x=g,this._y=e}};var Hy={curveBasisClosed:function(g){return new ay(g)},curveBasisOpen:function(g){return new cy(g)},curveBasis:function(g){return new ry(g)},curveBumpX:function(g){return new iy(g,!0)},curveBumpY:function(g){return new iy(g,!1)},curveLinearClosed:function(g){return new Ay(g)},curveLinear:dy,curveMonotoneX:function(g){return new yy(g)},curveMonotoneY:function(g){return new py(g)},curveNatural:function(g){return new hy(g)},curveStep:function(g){return new Sy(g,.5)},curveStepAfter:function(g){return new Sy(g,1)},curveStepBefore:function(g){return new Sy(g,0)}},wy=function(g){return g.x===+g.x&&g.y===+g.y},Ny=function(g){return g.x},Ky=function(g){return g.y},Fy=function(g){var e,I=g.type,t=void 0===I?"linear":I,n=g.points,C=void 0===n?[]:n,l=g.baseLine,o=g.layout,r=g.connectNulls,a=void 0!==r&&r,c=function(g,e){if(It()(g))return g;var I="curve".concat(nC()(g));return"curveMonotone"!==I&&"curveBump"!==I||!e?Hy[I]||dy:Hy["".concat(I).concat("vertical"===e?"Y":"X")]}(t,o),i=a?C.filter((function(g){return wy(g)})):C;if(Array.isArray(l)){var A=a?l.filter((function(g){return wy(g)})):l,u=i.map((function(g,e){return ky(ky({},g),{},{base:A[e]})}));return(e="vertical"===o?vy().y(Ky).x1(Ny).x0((function(g){return g.base.x})):vy().x(Ny).y1(Ky).y0((function(g){return g.base.y}))).defined(wy).curve(c),e(u)}return(e="vertical"===o&&ft(l)?vy().y(Ky).x1(Ny).x0(l):ft(l)?vy().x(Ny).y1(Ky).y0(l):Vy().x(Ny).y(Ky)).defined(wy).curve(c),e(i)},xy=function(g){var e=g.className,I=g.points,t=g.path,C=g.pathRef;if((!I||!I.length)&&!t)return null;var l=I&&I.length?Fy(g):t;return n.createElement("path",Ry({},en(g,!1),Et(g),{className:At("recharts-curve",e),d:l,ref:C}))};function Ey(g){return Ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},Ey(g)}var My=["x","y","top","left","width","height","className"];function zy(){return zy=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},zy.apply(this,arguments)}function Uy(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function Qy(g,e,I){return e=function(g){var e=function(g,e){if("object"!=Ey(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=Ey(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==Ey(e)?e:e+""}(e),e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function Ly(g,e){if(null==g)return{};var I,t,n=function(g,e){if(null==g)return{};var I={};for(var t in g)if(Object.prototype.hasOwnProperty.call(g,t)){if(e.indexOf(t)>=0)continue;I[t]=g[t]}return I}(g,e);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(n[I]=g[I])}return n}var Dy=function(g,e,I,t,n,C){return"M".concat(g,",").concat(n,"v").concat(t,"M").concat(C,",").concat(e,"h").concat(I)},Ty=function(g){var e=g.x,I=void 0===e?0:e,t=g.y,C=void 0===t?0:t,l=g.top,o=void 0===l?0:l,r=g.left,a=void 0===r?0:r,c=g.width,i=void 0===c?0:c,A=g.height,u=void 0===A?0:A,d=g.className,s=function(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?Uy(Object(I),!0).forEach((function(e){Qy(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):Uy(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}({x:I,y:C,top:o,left:a,width:i,height:u},Ly(g,My));return ft(I)&&ft(C)&&ft(i)&&ft(u)&&ft(o)&&ft(a)?n.createElement("path",zy({},en(s,!0),{className:At("recharts-cross",d),d:Dy(I,C,i,u,o,a)})):null};function jy(g){var e=g.cx,I=g.cy,t=g.radius,n=g.startAngle,C=g.endAngle;return{points:[wb(e,I,t,n),wb(e,I,t,C)],cx:e,cy:I,radius:t,startAngle:n,endAngle:C}}function Oy(g,e,I){var t,n,C,l;if("horizontal"===g)C=t=e.x,n=I.top,l=I.top+I.height;else if("vertical"===g)l=n=e.y,t=I.left,C=I.left+I.width;else if(null!=e.cx&&null!=e.cy){if("centric"!==g)return jy(e);var o=e.cx,r=e.cy,a=e.innerRadius,c=e.outerRadius,i=e.angle,A=wb(o,r,a,i),u=wb(o,r,c,i);t=A.x,n=A.y,C=u.x,l=u.y}return[{x:t,y:n},{x:C,y:l}]}function Py(g){return Py="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},Py(g)}function qy(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function _y(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?qy(Object(I),!0).forEach((function(e){$y(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):qy(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function $y(g,e,I){return e=function(g){var e=function(g,e){if("object"!=Py(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=Py(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==Py(e)?e:e+""}(e),e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function gp(g){var e,I,t,C=g.element,l=g.tooltipEventType,o=g.isActive,r=g.activeCoordinate,a=g.activePayload,c=g.offset,i=g.activeTooltipIndex,A=g.tooltipAxisBandSize,u=g.layout,d=g.chartName,s=null!==(e=C.props.cursor)&&void 0!==e?e:null===(I=C.type.defaultProps)||void 0===I?void 0:I.cursor;if(!C||!s||!o||!r||"ScatterChart"!==d&&"axis"!==l)return null;var b=xy;if("ScatterChart"===d)t=r,b=Ty;else if("BarChart"===d)t=function(g,e,I,t){var n=t/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===g?e.x-n:I.left+.5,y:"horizontal"===g?I.top+.5:e.y-n,width:"horizontal"===g?t:I.width-1,height:"horizontal"===g?I.height-1:t}}(u,r,c,A),b=xr;else if("radial"===u){var m=jy(r),Z=m.cx,y=m.cy,p=m.radius;t={cx:Z,cy:y,startAngle:m.startAngle,endAngle:m.endAngle,innerRadius:p,outerRadius:p},b=UZ}else t={points:Oy(u,r,c)},b=xy;var G=_y(_y(_y(_y({stroke:"#ccc",pointerEvents:"none"},c),t),en(s,!1)),{},{payload:a,payloadIndex:i,className:At("recharts-tooltip-cursor",s.className)});return(0,n.isValidElement)(s)?(0,n.cloneElement)(s,G):(0,n.createElement)(b,G)}var ep=["item"],Ip=["children","className","width","height","style","compact","title","desc"];function tp(g){return tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},tp(g)}function np(){return np=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},np.apply(this,arguments)}function Cp(g,e){return function(g){if(Array.isArray(g))return g}(g)||function(g,e){var I=null==g?null:"undefined"!=typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null!=I){var t,n,C,l,o=[],r=!0,a=!1;try{if(C=(I=I.call(g)).next,0===e){if(Object(I)!==I)return;r=!1}else for(;!(r=(t=C.call(I)).done)&&(o.push(t.value),o.length!==e);r=!0);}catch(g){a=!0,n=g}finally{try{if(!r&&null!=I.return&&(l=I.return(),Object(l)!==l))return}finally{if(a)throw n}}return o}}(g,e)||up(g,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lp(g,e){if(null==g)return{};var I,t,n=function(g,e){if(null==g)return{};var I={};for(var t in g)if(Object.prototype.hasOwnProperty.call(g,t)){if(e.indexOf(t)>=0)continue;I[t]=g[t]}return I}(g,e);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(n[I]=g[I])}return n}function op(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,Zp(t.key),t)}}function rp(g,e,I){return e=cp(e),function(g,e){if(e&&("object"===tp(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(g)}(g,ap()?Reflect.construct(e,I||[],cp(g).constructor):e.apply(g,I))}function ap(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(g){}return(ap=function(){return!!g})()}function cp(g){return cp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},cp(g)}function ip(g,e){return ip=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,e){return g.__proto__=e,g},ip(g,e)}function Ap(g){return function(g){if(Array.isArray(g))return dp(g)}(g)||function(g){if("undefined"!==typeof Symbol&&null!=g[Symbol.iterator]||null!=g["@@iterator"])return Array.from(g)}(g)||up(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function up(g,e){if(g){if("string"===typeof g)return dp(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);return"Object"===I&&g.constructor&&(I=g.constructor.name),"Map"===I||"Set"===I?Array.from(g):"Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I)?dp(g,e):void 0}}function dp(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}function sp(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function bp(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?sp(Object(I),!0).forEach((function(e){mp(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):sp(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function mp(g,e,I){return(e=Zp(e))in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function Zp(g){var e=function(g,e){if("object"!=tp(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=tp(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==tp(e)?e:e+""}var yp={xAxis:["bottom","top"],yAxis:["left","right"]},pp={width:"100%",height:"100%"},Gp={x:0,y:0};function hp(g){return g}var Bp=function(g,e){var I=e.graphicalItems,t=e.dataStartIndex,n=e.dataEndIndex,C=(null!==I&&void 0!==I?I:[]).reduce((function(g,e){var I=e.props.data;return I&&I.length?[].concat(Ap(g),Ap(I)):g}),[]);return C.length>0?C:g&&g.length&&ft(t)&&ft(n)?g.slice(t,n+1):[]};function Sp(g){return"number"===g?[0,"auto"]:void 0}var Wp=function(g,e,I,t){var n=g.graphicalItems,C=g.tooltipAxis,l=Bp(e,g);return I<0||!n||!n.length||I>=l.length?null:n.reduce((function(n,o){var r,a,c=null!==(r=o.props.data)&&void 0!==r?r:e;(c&&g.dataStartIndex+g.dataEndIndex!==0&&g.dataEndIndex-g.dataStartIndex>=I&&(c=c.slice(g.dataStartIndex,g.dataEndIndex+1)),C.dataKey&&!C.allowDuplicatedCategory)?a=Yt(void 0===c?l:c,C.dataKey,t):a=c&&c[I]||l[I];return a?[].concat(Ap(n),[rb(o,a)]):n}),[])},fp=function(g,e,I,t){var n=t||{x:g.chartX,y:g.chartY},C=function(g,e){return"horizontal"===e?g.x:"vertical"===e?g.y:"centric"===e?g.angle:g.radius}(n,I),l=g.orderedTooltipTicks,o=g.tooltipAxis,r=g.tooltipTicks,a=function(g){var e,I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,C=-1,l=null!==(e=null===I||void 0===I?void 0:I.length)&&void 0!==e?e:0;if(l<=1)return 0;if(n&&"angleAxis"===n.axisType&&Math.abs(Math.abs(n.range[1]-n.range[0])-360)<=1e-6)for(var o=n.range,r=0;r<l;r++){var a=r>0?t[r-1].coordinate:t[l-1].coordinate,c=t[r].coordinate,i=r>=l-1?t[0].coordinate:t[r+1].coordinate,A=void 0;if(St(c-a)!==St(i-c)){var u=[];if(St(i-c)===St(o[1]-o[0])){A=i;var d=c+o[1]-o[0];u[0]=Math.min(d,(d+a)/2),u[1]=Math.max(d,(d+a)/2)}else{A=a;var s=i+o[1]-o[0];u[0]=Math.min(c,(s+c)/2),u[1]=Math.max(c,(s+c)/2)}var b=[Math.min(c,(A+c)/2),Math.max(c,(A+c)/2)];if(g>b[0]&&g<=b[1]||g>=u[0]&&g<=u[1]){C=t[r].index;break}}else{var m=Math.min(a,i),Z=Math.max(a,i);if(g>(m+c)/2&&g<=(Z+c)/2){C=t[r].index;break}}}else for(var y=0;y<l;y++)if(0===y&&g<=(I[y].coordinate+I[y+1].coordinate)/2||y>0&&y<l-1&&g>(I[y].coordinate+I[y-1].coordinate)/2&&g<=(I[y].coordinate+I[y+1].coordinate)/2||y===l-1&&g>(I[y].coordinate+I[y-1].coordinate)/2){C=I[y].index;break}return C}(C,l,r,o);if(a>=0&&r){var c=r[a]&&r[a].value,i=Wp(g,e,a,c),A=function(g,e,I,t){var n=e.find((function(g){return g&&g.index===I}));if(n){if("horizontal"===g)return{x:n.coordinate,y:t.y};if("vertical"===g)return{x:t.x,y:n.coordinate};if("centric"===g){var C=n.coordinate,l=t.radius;return bp(bp(bp({},t),wb(t.cx,t.cy,l,C)),{},{angle:C,radius:l})}var o=n.coordinate,r=t.angle;return bp(bp(bp({},t),wb(t.cx,t.cy,o,r)),{},{angle:r,radius:o})}return Gp}(I,l,a,n);return{activeTooltipIndex:a,activeLabel:c,activePayload:i,activeCoordinate:A}}return null},Vp=function(g,e){var I=e.axes,t=e.graphicalItems,n=e.axisType,C=e.axisIdKey,l=e.stackGroups,o=e.dataStartIndex,r=e.dataEndIndex,a=g.layout,c=g.children,i=g.stackOffset,A=Os(a,n);return I.reduce((function(e,I){var u,d=void 0!==I.type.defaultProps?bp(bp({},I.type.defaultProps),I.props):I.props,s=d.type,b=d.dataKey,m=d.allowDataOverflow,Z=d.allowDuplicatedCategory,y=d.scale,p=d.ticks,G=d.includeHidden,h=d[C];if(e[h])return e;var B,S,W,f=Bp(g.data,{graphicalItems:t.filter((function(g){var e;return(C in g.props?g.props[C]:null===(e=g.type.defaultProps)||void 0===e?void 0:e[C])===h})),dataStartIndex:o,dataEndIndex:r}),V=f.length;(function(g,e,I){if("number"===I&&!0===e&&Array.isArray(g)){var t=null===g||void 0===g?void 0:g[0],n=null===g||void 0===g?void 0:g[1];if(t&&n&&ft(t)&&ft(n))return!0}return!1})(d.domain,m,s)&&(B=Cb(d.domain,null,m),!A||"number"!==s&&"auto"===y||(W=Ls(f,b,"category")));var v=Sp(s);if(!B||0===B.length){var X,R=null!==(X=d.domain)&&void 0!==X?X:v;if(b){if(B=Ls(f,b,s),"category"===s&&A){var J=function(g){if(!Array.isArray(g))return!1;for(var e=g.length,I={},t=0;t<e;t++){if(I[g[t]])return!0;I[g[t]]=!0}return!1}(B);Z&&J?(S=B,B=nt()(0,V)):Z||(B=ob(R,B,I).reduce((function(g,e){return g.indexOf(e)>=0?g:[].concat(Ap(g),[e])}),[]))}else if("category"===s)B=Z?B.filter((function(g){return""!==g&&!gt()(g)})):ob(R,B,I).reduce((function(g,e){return g.indexOf(e)>=0||""===e||gt()(e)?g:[].concat(Ap(g),[e])}),[]);else if("number"===s){var k=function(g,e,I,t,n){var C=e.map((function(e){return Ts(g,e,I,n,t)})).filter((function(g){return!gt()(g)}));return C&&C.length?C.reduce((function(g,e){return[Math.min(g[0],e[0]),Math.max(g[1],e[1])]}),[1/0,-1/0]):null}(f,t.filter((function(g){var e,I,t=C in g.props?g.props[C]:null===(e=g.type.defaultProps)||void 0===e?void 0:e[C],n="hide"in g.props?g.props.hide:null===(I=g.type.defaultProps)||void 0===I?void 0:I.hide;return t===h&&(G||!n)})),b,n,a);k&&(B=k)}!A||"number"!==s&&"auto"===y||(W=Ls(f,b,"category"))}else B=A?nt()(0,V):l&&l[h]&&l[h].hasStack&&"number"===s?"expand"===i?[0,1]:Ib(l[h].stackGroups,o,r):js(f,t.filter((function(g){var e=C in g.props?g.props[C]:g.type.defaultProps[C],I="hide"in g.props?g.props.hide:g.type.defaultProps.hide;return e===h&&(G||!I)})),s,a,!0);if("number"===s)B=AZ(c,B,h,n,p),R&&(B=Cb(R,B,m));else if("category"===s&&R){var Y=R;B.every((function(g){return Y.indexOf(g)>=0}))&&(B=Y)}}return bp(bp({},e),{},mp({},h,bp(bp({},d),{},{axisType:n,domain:B,categoricalDomain:W,duplicateDomain:S,originalDomain:null!==(u=d.domain)&&void 0!==u?u:v,isCategorical:A,layout:a})))}),{})},vp=function(g,e){var I=e.axisType,t=void 0===I?"xAxis":I,n=e.AxisComp,C=e.graphicalItems,l=e.stackGroups,o=e.dataStartIndex,r=e.dataEndIndex,a=g.children,c="".concat(t,"Id"),i=Pt(a,n),A={};return i&&i.length?A=Vp(g,{axes:i,graphicalItems:C,axisType:t,axisIdKey:c,stackGroups:l,dataStartIndex:o,dataEndIndex:r}):C&&C.length&&(A=function(g,e){var I=e.graphicalItems,t=e.Axis,n=e.axisType,C=e.axisIdKey,l=e.stackGroups,o=e.dataStartIndex,r=e.dataEndIndex,a=g.layout,c=g.children,i=Bp(g.data,{graphicalItems:I,dataStartIndex:o,dataEndIndex:r}),A=i.length,u=Os(a,n),d=-1;return I.reduce((function(g,e){var s,b=(void 0!==e.type.defaultProps?bp(bp({},e.type.defaultProps),e.props):e.props)[C],m=Sp("number");return g[b]?g:(d++,u?s=nt()(0,A):l&&l[b]&&l[b].hasStack?(s=Ib(l[b].stackGroups,o,r),s=AZ(c,s,b,n)):(s=Cb(m,js(i,I.filter((function(g){var e,I,t=C in g.props?g.props[C]:null===(e=g.type.defaultProps)||void 0===e?void 0:e[C],n="hide"in g.props?g.props.hide:null===(I=g.type.defaultProps)||void 0===I?void 0:I.hide;return t===b&&!n})),"number",a),t.defaultProps.allowDataOverflow),s=AZ(c,s,b,n)),bp(bp({},g),{},mp({},b,bp(bp({axisType:n},t.defaultProps),{},{hide:!0,orientation:lt()(yp,"".concat(n,".").concat(d%2),null),domain:s,originalDomain:m,isCategorical:u,layout:a}))))}),{})}(g,{Axis:n,graphicalItems:C,axisType:t,axisIdKey:c,stackGroups:l,dataStartIndex:o,dataEndIndex:r})),A},Xp=function(g){var e=g.children,I=g.defaultShowTooltip,t=qt(e,fb),n=0,C=0;return g.data&&0!==g.data.length&&(C=g.data.length-1),t&&t.props&&(t.props.startIndex>=0&&(n=t.props.startIndex),t.props.endIndex>=0&&(C=t.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:n,dataEndIndex:C,activeTooltipIndex:-1,isTooltipActive:Boolean(I)}},Rp=function(g){return"horizontal"===g?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===g?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===g?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Jp=function(g,e){var I=g.props,t=(g.graphicalItems,g.xAxisMap),n=void 0===t?{}:t,C=g.yAxisMap,l=void 0===C?{}:C,o=I.width,r=I.height,a=I.children,c=I.margin||{},i=qt(a,fb),A=qt(a,bl),u=Object.keys(l).reduce((function(g,e){var I=l[e],t=I.orientation;return I.mirror||I.hide?g:bp(bp({},g),{},mp({},t,g[t]+I.width))}),{left:c.left||0,right:c.right||0}),d=Object.keys(n).reduce((function(g,e){var I=n[e],t=I.orientation;return I.mirror||I.hide?g:bp(bp({},g),{},mp({},t,lt()(g,"".concat(t))+I.height))}),{top:c.top||0,bottom:c.bottom||0}),s=bp(bp({},d),u),b=s.bottom;i&&(s.bottom+=i.props.height||fb.defaultProps.height),A&&e&&(s=function(g,e,I,t){var n=I.children,C=I.width,l=I.margin,o=C-(l.left||0)-(l.right||0),r=Ks({children:n,legendWidth:o});if(r){var a=t||{},c=a.width,i=a.height,A=r.align,u=r.verticalAlign,d=r.layout;if(("vertical"===d||"horizontal"===d&&"middle"===u)&&"center"!==A&&ft(g[A]))return zs(zs({},g),{},Us({},A,g[A]+(c||0)));if(("horizontal"===d||"vertical"===d&&"center"===A)&&"middle"!==u&&ft(g[u]))return zs(zs({},g),{},Us({},u,g[u]+(i||0)))}return g}(s,0,I,e));var m=o-s.left-s.right,Z=r-s.top-s.bottom;return bp(bp({brushBottom:b},s),{},{width:Math.max(m,0),height:Math.max(Z,0)})},kp=function(g,e){return"xAxis"===e?g[e].width:"yAxis"===e?g[e].height:void 0},Yp=["points","className","baseLinePoints","connectNulls"];function Hp(){return Hp=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},Hp.apply(this,arguments)}function wp(g,e){if(null==g)return{};var I,t,n=function(g,e){if(null==g)return{};var I={};for(var t in g)if(Object.prototype.hasOwnProperty.call(g,t)){if(e.indexOf(t)>=0)continue;I[t]=g[t]}return I}(g,e);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(n[I]=g[I])}return n}function Np(g){return function(g){if(Array.isArray(g))return Kp(g)}(g)||function(g){if("undefined"!==typeof Symbol&&null!=g[Symbol.iterator]||null!=g["@@iterator"])return Array.from(g)}(g)||function(g,e){if(!g)return;if("string"===typeof g)return Kp(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);"Object"===I&&g.constructor&&(I=g.constructor.name);if("Map"===I||"Set"===I)return Array.from(g);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return Kp(g,e)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kp(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}var Fp=function(g){return g&&g.x===+g.x&&g.y===+g.y},xp=function(g,e){var I=function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[[]];return g.forEach((function(g){Fp(g)?e[e.length-1].push(g):e[e.length-1].length>0&&e.push([])})),Fp(g[0])&&e[e.length-1].push(g[0]),e[e.length-1].length<=0&&(e=e.slice(0,-1)),e}(g);e&&(I=[I.reduce((function(g,e){return[].concat(Np(g),Np(e))}),[])]);var t=I.map((function(g){return g.reduce((function(g,e,I){return"".concat(g).concat(0===I?"M":"L").concat(e.x,",").concat(e.y)}),"")})).join("");return 1===I.length?"".concat(t,"Z"):t},Ep=function(g){var e=g.points,I=g.className,t=g.baseLinePoints,C=g.connectNulls,l=wp(g,Yp);if(!e||!e.length)return null;var o=At("recharts-polygon",I);if(t&&t.length){var r=l.stroke&&"none"!==l.stroke,a=function(g,e,I){var t=xp(g,I);return"".concat("Z"===t.slice(-1)?t.slice(0,-1):t,"L").concat(xp(e.reverse(),I).slice(1))}(e,t,C);return n.createElement("g",{className:o},n.createElement("path",Hp({},en(l,!0),{fill:"Z"===a.slice(-1)?l.fill:"none",stroke:"none",d:a})),r?n.createElement("path",Hp({},en(l,!0),{fill:"none",d:xp(e,C)})):null,r?n.createElement("path",Hp({},en(l,!0),{fill:"none",d:xp(t,C)})):null)}var c=xp(e,C);return n.createElement("path",Hp({},en(l,!0),{fill:"Z"===c.slice(-1)?l.fill:"none",className:o,d:c}))};function Mp(g){return Mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},Mp(g)}function zp(){return zp=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},zp.apply(this,arguments)}function Up(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function Qp(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?Up(Object(I),!0).forEach((function(e){Pp(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):Up(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function Lp(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,qp(t.key),t)}}function Dp(g,e,I){return e=jp(e),function(g,e){if(e&&("object"===Mp(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(g)}(g,Tp()?Reflect.construct(e,I||[],jp(g).constructor):e.apply(g,I))}function Tp(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(g){}return(Tp=function(){return!!g})()}function jp(g){return jp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},jp(g)}function Op(g,e){return Op=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,e){return g.__proto__=e,g},Op(g,e)}function Pp(g,e,I){return(e=qp(e))in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function qp(g){var e=function(g,e){if("object"!=Mp(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=Mp(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==Mp(e)?e:e+""}var _p=Math.PI/180,$p=1e-5,gG=function(g){function e(){return function(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Dp(this,e,arguments)}return function(g,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(e&&e.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),e&&Op(g,e)}(e,g),I=e,t=[{key:"getTickLineCoord",value:function(g){var e=this.props,I=e.cx,t=e.cy,n=e.radius,C=e.orientation,l=e.tickSize||8,o=wb(I,t,n,g.coordinate),r=wb(I,t,n+("inner"===C?-1:1)*l,g.coordinate);return{x1:o.x,y1:o.y,x2:r.x,y2:r.y}}},{key:"getTickTextAnchor",value:function(g){var e=this.props.orientation,I=Math.cos(-g.coordinate*_p);return I>$p?"outer"===e?"start":"end":I<-$p?"outer"===e?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var g=this.props,e=g.cx,I=g.cy,t=g.radius,C=g.axisLine,l=g.axisLineType,o=Qp(Qp({},en(this.props,!1)),{},{fill:"none"},en(C,!1));if("circle"===l)return n.createElement(Zl,zp({className:"recharts-polar-angle-axis-line"},o,{cx:e,cy:I,r:t}));var r=this.props.ticks.map((function(g){return wb(e,I,t,g.coordinate)}));return n.createElement(Ep,zp({className:"recharts-polar-angle-axis-line"},o,{points:r}))}},{key:"renderTicks",value:function(){var g=this,I=this.props,t=I.ticks,C=I.tick,l=I.tickLine,o=I.tickFormatter,r=I.stroke,a=en(this.props,!1),c=en(C,!1),i=Qp(Qp({},a),{},{fill:"none"},en(l,!1)),A=t.map((function(I,t){var A=g.getTickLineCoord(I),u=Qp(Qp(Qp({textAnchor:g.getTickTextAnchor(I)},a),{},{stroke:"none",fill:r},c),{},{index:t,payload:I,x:A.x2,y:A.y2});return n.createElement(un,zp({className:At("recharts-polar-angle-axis-tick",Eb(C)),key:"tick-".concat(I.coordinate)},Mt(g.props,I,t)),l&&n.createElement("line",zp({className:"recharts-polar-angle-axis-tick-line"},i,A)),C&&e.renderTickItem(C,u,o?o(I.value,t):I.value))}));return n.createElement(un,{className:"recharts-polar-angle-axis-ticks"},A)}},{key:"render",value:function(){var g=this.props,e=g.ticks,I=g.radius,t=g.axisLine;return I<=0||!e||!e.length?null:n.createElement(un,{className:At("recharts-polar-angle-axis",this.props.className)},t&&this.renderAxisLine(),this.renderTicks())}}],C=[{key:"renderTickItem",value:function(g,e,I){return n.isValidElement(g)?n.cloneElement(g,e):It()(g)?g(e):n.createElement(Ha,zp({},e,{className:"recharts-polar-angle-axis-tick-value"}),I)}}],t&&Lp(I.prototype,t),C&&Lp(I,C),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,t,C}(n.PureComponent);Pp(gG,"displayName","PolarAngleAxis"),Pp(gG,"axisType","angleAxis"),Pp(gG,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var eG=I(2794),IG=I.n(eG),tG=I(9364),nG=I.n(tG),CG=["cx","cy","angle","ticks","axisLine"],lG=["ticks","tick","angle","tickFormatter","stroke"];function oG(g){return oG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},oG(g)}function rG(){return rG=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},rG.apply(this,arguments)}function aG(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function cG(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?aG(Object(I),!0).forEach((function(e){mG(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):aG(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function iG(g,e){if(null==g)return{};var I,t,n=function(g,e){if(null==g)return{};var I={};for(var t in g)if(Object.prototype.hasOwnProperty.call(g,t)){if(e.indexOf(t)>=0)continue;I[t]=g[t]}return I}(g,e);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(n[I]=g[I])}return n}function AG(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,ZG(t.key),t)}}function uG(g,e,I){return e=sG(e),function(g,e){if(e&&("object"===oG(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(g)}(g,dG()?Reflect.construct(e,I||[],sG(g).constructor):e.apply(g,I))}function dG(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(g){}return(dG=function(){return!!g})()}function sG(g){return sG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},sG(g)}function bG(g,e){return bG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,e){return g.__proto__=e,g},bG(g,e)}function mG(g,e,I){return(e=ZG(e))in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function ZG(g){var e=function(g,e){if("object"!=oG(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=oG(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==oG(e)?e:e+""}var yG=function(g){function e(){return function(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),uG(this,e,arguments)}return function(g,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(e&&e.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),e&&bG(g,e)}(e,g),I=e,t=[{key:"getTickValueCoord",value:function(g){var e=g.coordinate,I=this.props,t=I.angle,n=I.cx,C=I.cy;return wb(n,C,e,t)}},{key:"getTickTextAnchor",value:function(){var g;switch(this.props.orientation){case"left":g="end";break;case"right":g="start";break;default:g="middle"}return g}},{key:"getViewBox",value:function(){var g=this.props,e=g.cx,I=g.cy,t=g.angle,n=g.ticks,C=IG()(n,(function(g){return g.coordinate||0}));return{cx:e,cy:I,startAngle:t,endAngle:t,innerRadius:nG()(n,(function(g){return g.coordinate||0})).coordinate||0,outerRadius:C.coordinate||0}}},{key:"renderAxisLine",value:function(){var g=this.props,e=g.cx,I=g.cy,t=g.angle,C=g.ticks,l=g.axisLine,o=iG(g,CG),r=C.reduce((function(g,e){return[Math.min(g[0],e.coordinate),Math.max(g[1],e.coordinate)]}),[1/0,-1/0]),a=wb(e,I,r[0],t),c=wb(e,I,r[1],t),i=cG(cG(cG({},en(o,!1)),{},{fill:"none"},en(l,!1)),{},{x1:a.x,y1:a.y,x2:c.x,y2:c.y});return n.createElement("line",rG({className:"recharts-polar-radius-axis-line"},i))}},{key:"renderTicks",value:function(){var g=this,I=this.props,t=I.ticks,C=I.tick,l=I.angle,o=I.tickFormatter,r=I.stroke,a=iG(I,lG),c=this.getTickTextAnchor(),i=en(a,!1),A=en(C,!1),u=t.map((function(I,t){var a=g.getTickValueCoord(I),u=cG(cG(cG(cG({textAnchor:c,transform:"rotate(".concat(90-l,", ").concat(a.x,", ").concat(a.y,")")},i),{},{stroke:"none",fill:r},A),{},{index:t},a),{},{payload:I});return n.createElement(un,rG({className:At("recharts-polar-radius-axis-tick",Eb(C)),key:"tick-".concat(I.coordinate)},Mt(g.props,I,t)),e.renderTickItem(C,u,o?o(I.value,t):I.value))}));return n.createElement(un,{className:"recharts-polar-radius-axis-ticks"},u)}},{key:"render",value:function(){var g=this.props,e=g.ticks,I=g.axisLine,t=g.tick;return e&&e.length?n.createElement(un,{className:At("recharts-polar-radius-axis",this.props.className)},I&&this.renderAxisLine(),t&&this.renderTicks(),qb.renderCallByParent(this.props,this.getViewBox())):null}}],C=[{key:"renderTickItem",value:function(g,e,I){return n.isValidElement(g)?n.cloneElement(g,e):It()(g)?g(e):n.createElement(Ha,rG({},e,{className:"recharts-polar-radius-axis-tick-value"}),I)}}],t&&AG(I.prototype,t),C&&AG(I,C),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,t,C}(n.PureComponent);mG(yG,"displayName","PolarRadiusAxis"),mG(yG,"axisType","radiusAxis"),mG(yG,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var pG=I(4065),GG=I.n(pG);function hG(g){return hG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},hG(g)}var BG=["valueAccessor"],SG=["data","dataKey","clockWise","id","textBreakAll"];function WG(g){return function(g){if(Array.isArray(g))return fG(g)}(g)||function(g){if("undefined"!==typeof Symbol&&null!=g[Symbol.iterator]||null!=g["@@iterator"])return Array.from(g)}(g)||function(g,e){if(!g)return;if("string"===typeof g)return fG(g,e);var I=Object.prototype.toString.call(g).slice(8,-1);"Object"===I&&g.constructor&&(I=g.constructor.name);if("Map"===I||"Set"===I)return Array.from(g);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return fG(g,e)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fG(g,e){(null==e||e>g.length)&&(e=g.length);for(var I=0,t=new Array(e);I<e;I++)t[I]=g[I];return t}function VG(){return VG=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},VG.apply(this,arguments)}function vG(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function XG(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?vG(Object(I),!0).forEach((function(e){RG(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):vG(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function RG(g,e,I){return e=function(g){var e=function(g,e){if("object"!=hG(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=hG(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==hG(e)?e:e+""}(e),e in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function JG(g,e){if(null==g)return{};var I,t,n=function(g,e){if(null==g)return{};var I={};for(var t in g)if(Object.prototype.hasOwnProperty.call(g,t)){if(e.indexOf(t)>=0)continue;I[t]=g[t]}return I}(g,e);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);for(t=0;t<C.length;t++)I=C[t],e.indexOf(I)>=0||Object.prototype.propertyIsEnumerable.call(g,I)&&(n[I]=g[I])}return n}var kG=function(g){return Array.isArray(g.value)?GG()(g.value):g.value};function YG(g){var e=g.valueAccessor,I=void 0===e?kG:e,t=JG(g,BG),C=t.data,l=t.dataKey,o=t.clockWise,r=t.id,a=t.textBreakAll,c=JG(t,SG);return C&&C.length?n.createElement(un,{className:"recharts-label-list"},C.map((function(g,e){var t=gt()(l)?I(g,e):Qs(g&&g.payload,l),C=gt()(r)?{}:{id:"".concat(r,"-").concat(e)};return n.createElement(qb,VG({},en(g,!0),c,C,{parentViewBox:g.parentViewBox,value:t,textBreakAll:a,viewBox:qb.parseViewBox(gt()(o)?g:XG(XG({},g),{},{clockWise:o})),key:"label-".concat(e),index:e}))}))):null}YG.displayName="LabelList",YG.renderCallByParent=function(g,e){var I=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!g||!g.children&&I&&!g.label)return null;var t=Pt(g.children,YG).map((function(g,I){return(0,n.cloneElement)(g,{data:e,key:"labelList-".concat(I)})}));if(!I)return t;var C=function(g,e){return g?!0===g?n.createElement(YG,{key:"labelList-implicit",data:e}):n.isValidElement(g)||It()(g)?n.createElement(YG,{key:"labelList-implicit",data:e,content:g}):Zt()(g)?n.createElement(YG,VG({data:e},g,{key:"labelList-implicit"})):null:null}(g.label,e);return[C].concat(WG(t))};var HG,wG=function(g){return null};function NG(g){return NG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},NG(g)}function KG(){return KG=Object.assign?Object.assign.bind():function(g){for(var e=1;e<arguments.length;e++){var I=arguments[e];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t])}return g},KG.apply(this,arguments)}function FG(g,e){var I=Object.keys(g);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(g,e).enumerable}))),I.push.apply(I,t)}return I}function xG(g){for(var e=1;e<arguments.length;e++){var I=null!=arguments[e]?arguments[e]:{};e%2?FG(Object(I),!0).forEach((function(e){LG(g,e,I[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(I)):FG(Object(I)).forEach((function(e){Object.defineProperty(g,e,Object.getOwnPropertyDescriptor(I,e))}))}return g}function EG(g,e){for(var I=0;I<e.length;I++){var t=e[I];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,DG(t.key),t)}}function MG(g,e,I){return e=UG(e),function(g,e){if(e&&("object"===NG(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(g)}(g,zG()?Reflect.construct(e,I||[],UG(g).constructor):e.apply(g,I))}function zG(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(g){}return(zG=function(){return!!g})()}function UG(g){return UG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},UG(g)}function QG(g,e){return QG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,e){return g.__proto__=e,g},QG(g,e)}function LG(g,e,I){return(e=DG(e))in g?Object.defineProperty(g,e,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[e]=I,g}function DG(g){var e=function(g,e){if("object"!=NG(g)||!g)return g;var I=g[Symbol.toPrimitive];if(void 0!==I){var t=I.call(g,e||"default");if("object"!=NG(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(g)}(g,"string");return"symbol"==NG(e)?e:e+""}wG.displayName="Cell";var TG=function(g){function e(g){var I;return function(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),LG(I=MG(this,e,[g]),"pieRef",null),LG(I,"sectorRefs",[]),LG(I,"id",Xt("recharts-pie-")),LG(I,"handleAnimationEnd",(function(){var g=I.props.onAnimationEnd;I.setState({isAnimationFinished:!0}),It()(g)&&g()})),LG(I,"handleAnimationStart",(function(){var g=I.props.onAnimationStart;I.setState({isAnimationFinished:!1}),It()(g)&&g()})),I.state={isAnimationFinished:!g.isAnimationActive,prevIsAnimationActive:g.isAnimationActive,prevAnimationId:g.animationId,sectorToFocus:0},I}return function(g,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(e&&e.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),e&&QG(g,e)}(e,g),I=e,C=[{key:"getDerivedStateFromProps",value:function(g,e){return e.prevIsAnimationActive!==g.isAnimationActive?{prevIsAnimationActive:g.isAnimationActive,prevAnimationId:g.animationId,curSectors:g.sectors,prevSectors:[],isAnimationFinished:!0}:g.isAnimationActive&&g.animationId!==e.prevAnimationId?{prevAnimationId:g.animationId,curSectors:g.sectors,prevSectors:e.curSectors,isAnimationFinished:!0}:g.sectors!==e.curSectors?{curSectors:g.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(g,e){return g>e?"start":g<e?"end":"middle"}},{key:"renderLabelLineItem",value:function(g,e,I){if(n.isValidElement(g))return n.cloneElement(g,e);if(It()(g))return g(e);var t=At("recharts-pie-label-line","boolean"!==typeof g?g.className:"");return n.createElement(xy,KG({},e,{key:I,type:"linear",className:t}))}},{key:"renderLabelItem",value:function(g,e,I){if(n.isValidElement(g))return n.cloneElement(g,e);var t=I;if(It()(g)&&(t=g(e),n.isValidElement(t)))return t;var C=At("recharts-pie-label-text","boolean"===typeof g||It()(g)?"":g.className);return n.createElement(Ha,KG({},e,{alignmentBaseline:"middle",className:C}),t)}}],(t=[{key:"isActiveIndex",value:function(g){var e=this.props.activeIndex;return Array.isArray(e)?-1!==e.indexOf(g):g===e}},{key:"hasActiveIndex",value:function(){var g=this.props.activeIndex;return Array.isArray(g)?0!==g.length:g||0===g}},{key:"renderLabels",value:function(g){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var I=this.props,t=I.label,C=I.labelLine,l=I.dataKey,o=I.valueKey,r=en(this.props,!1),a=en(t,!1),c=en(C,!1),i=t&&t.offsetRadius||20,A=g.map((function(g,I){var A=(g.startAngle+g.endAngle)/2,u=wb(g.cx,g.cy,g.outerRadius+i,A),d=xG(xG(xG(xG({},r),g),{},{stroke:"none"},a),{},{index:I,textAnchor:e.getTextAnchor(u.x,g.cx)},u),s=xG(xG(xG(xG({},r),g),{},{fill:"none",stroke:g.fill},c),{},{index:I,points:[wb(g.cx,g.cy,g.outerRadius,A),u]}),b=l;return gt()(l)&&gt()(o)?b="value":gt()(l)&&(b=o),n.createElement(un,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(I)},C&&e.renderLabelLineItem(C,s,"line"),e.renderLabelItem(t,d,Qs(g,b)))}));return n.createElement(un,{className:"recharts-pie-labels"},A)}},{key:"renderSectorsStatically",value:function(g){var e=this,I=this.props,t=I.activeShape,C=I.blendStroke,l=I.inactiveShape;return g.map((function(I,o){if(0===(null===I||void 0===I?void 0:I.startAngle)&&0===(null===I||void 0===I?void 0:I.endAngle)&&1!==g.length)return null;var r=e.isActiveIndex(o),a=l&&e.hasActiveIndex()?l:null,c=r?t:a,i=xG(xG({},I),{},{stroke:C?I.fill:I.stroke,tabIndex:-1});return n.createElement(un,KG({ref:function(g){g&&!e.sectorRefs.includes(g)&&e.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},Mt(e.props,I,o),{key:"sector-".concat(null===I||void 0===I?void 0:I.startAngle,"-").concat(null===I||void 0===I?void 0:I.endAngle,"-").concat(I.midAngle,"-").concat(o)}),n.createElement(_Z,KG({option:c,isActive:r,shapeType:"sector"},i)))}))}},{key:"renderSectorsWithAnimation",value:function(){var g=this,e=this.props,I=e.sectors,t=e.isAnimationActive,C=e.animationBegin,l=e.animationDuration,o=e.animationEasing,r=e.animationId,a=this.state,c=a.prevSectors,i=a.prevIsAnimationActive;return n.createElement(vr,{begin:C,duration:l,isActive:t,easing:o,from:{t:0},to:{t:1},key:"pie-".concat(r,"-").concat(i),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},(function(e){var t=e.t,C=[],l=(I&&I[0]).startAngle;return I.forEach((function(g,e){var I=c&&c[e],n=e>0?lt()(g,"paddingAngle",0):0;if(I){var o=kt(I.endAngle-I.startAngle,g.endAngle-g.startAngle),r=xG(xG({},g),{},{startAngle:l+n,endAngle:l+o(t)+n});C.push(r),l=r.endAngle}else{var a=g.endAngle,i=g.startAngle,A=kt(0,a-i)(t),u=xG(xG({},g),{},{startAngle:l+n,endAngle:l+A+n});C.push(u),l=u.endAngle}})),n.createElement(un,null,g.renderSectorsStatically(C))}))}},{key:"attachKeyboardHandlers",value:function(g){var e=this;g.onkeydown=function(g){if(!g.altKey)switch(g.key){case"ArrowLeft":var I=++e.state.sectorToFocus%e.sectorRefs.length;e.sectorRefs[I].focus(),e.setState({sectorToFocus:I});break;case"ArrowRight":var t=--e.state.sectorToFocus<0?e.sectorRefs.length-1:e.state.sectorToFocus%e.sectorRefs.length;e.sectorRefs[t].focus(),e.setState({sectorToFocus:t});break;case"Escape":e.sectorRefs[e.state.sectorToFocus].blur(),e.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var g=this.props,e=g.sectors,I=g.isAnimationActive,t=this.state.prevSectors;return!(I&&e&&e.length)||t&&Ud()(t,e)?this.renderSectorsStatically(e):this.renderSectorsWithAnimation()}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var g=this,e=this.props,I=e.hide,t=e.sectors,C=e.className,l=e.label,o=e.cx,r=e.cy,a=e.innerRadius,c=e.outerRadius,i=e.isAnimationActive,A=this.state.isAnimationFinished;if(I||!t||!t.length||!ft(o)||!ft(r)||!ft(a)||!ft(c))return null;var u=At("recharts-pie",C);return n.createElement(un,{tabIndex:this.props.rootTabIndex,className:u,ref:function(e){g.pieRef=e}},this.renderSectors(),l&&this.renderLabels(t),qb.renderCallByParent(this.props,null,!1),(!i||A)&&YG.renderCallByParent(this.props,t,!1))}}])&&EG(I.prototype,t),C&&EG(I,C),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,t,C}(n.PureComponent);HG=TG,LG(TG,"displayName","Pie"),LG(TG,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!En.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),LG(TG,"parseDeltaAngle",(function(g,e){return St(e-g)*Math.min(Math.abs(e-g),360)})),LG(TG,"getRealPieData",(function(g){var e=g.data,I=g.children,t=en(g,!1),n=Pt(I,wG);return e&&e.length?e.map((function(g,e){return xG(xG(xG({payload:g},t),g),n&&n[e]&&n[e].props)})):n&&n.length?n.map((function(g){return xG(xG({},t),g.props)})):[]})),LG(TG,"parseCoordinateOfPie",(function(g,e){var I=e.top,t=e.left,n=e.width,C=e.height,l=Nb(n,C);return{cx:t+Rt(g.cx,n,n/2),cy:I+Rt(g.cy,C,C/2),innerRadius:Rt(g.innerRadius,l,0),outerRadius:Rt(g.outerRadius,l,.8*l),maxRadius:g.maxRadius||Math.sqrt(n*n+C*C)/2}})),LG(TG,"getComposedData",(function(g){var e=g.item,I=g.offset,t=void 0!==e.type.defaultProps?xG(xG({},e.type.defaultProps),e.props):e.props,n=HG.getRealPieData(t);if(!n||!n.length)return null;var C=t.cornerRadius,l=t.startAngle,o=t.endAngle,r=t.paddingAngle,a=t.dataKey,c=t.nameKey,i=t.valueKey,A=t.tooltipType,u=Math.abs(t.minAngle),d=HG.parseCoordinateOfPie(t,I),s=HG.parseDeltaAngle(l,o),b=Math.abs(s),m=a;gt()(a)&&gt()(i)?(IC(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),m="value"):gt()(a)&&(IC(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),m=i);var Z,y,p=n.filter((function(g){return 0!==Qs(g,m,0)})).length,G=b-p*u-(b>=360?p:p-1)*r,h=n.reduce((function(g,e){var I=Qs(e,m,0);return g+(ft(I)?I:0)}),0);h>0&&(Z=n.map((function(g,e){var I,t=Qs(g,m,0),n=Qs(g,c,e),o=(ft(t)?t:0)/h,a=(I=e?y.endAngle+St(s)*r*(0!==t?1:0):l)+St(s)*((0!==t?u:0)+o*G),i=(I+a)/2,b=(d.innerRadius+d.outerRadius)/2,Z=[{name:n,value:t,payload:g,dataKey:m,type:A}],p=wb(d.cx,d.cy,b,i);return y=xG(xG(xG({percent:o,cornerRadius:C,name:n,tooltipPayload:Z,midAngle:i,middleRadius:b,tooltipPosition:p},g),d),{},{value:Qs(g,m),startAngle:I,endAngle:a,payload:g,paddingAngle:St(s)*r})})));return xG(xG({},d),{},{sectors:Z,data:n})}));var jG=function(g){var e=g.chartName,I=g.GraphicalChild,t=g.defaultTooltipEventType,C=void 0===t?"axis":t,l=g.validateTooltipEventTypes,o=void 0===l?["axis"]:l,r=g.axisComponents,a=g.legendContent,c=g.formatAxisMap,i=g.defaultProps,A=function(g,e){var I=e.graphicalItems,t=e.stackGroups,n=e.offset,C=e.updateId,l=e.dataStartIndex,o=e.dataEndIndex,a=g.barSize,c=g.layout,i=g.barGap,A=g.barCategoryGap,u=g.maxBarSize,d=Rp(c),s=d.numericAxisName,b=d.cateAxisName,m=function(g){return!(!g||!g.length)&&g.some((function(g){var e=Dt(g&&g.type);return e&&e.indexOf("Bar")>=0}))}(I),Z=[];return I.forEach((function(I,d){var y=Bp(g.data,{graphicalItems:[I],dataStartIndex:l,dataEndIndex:o}),p=void 0!==I.type.defaultProps?bp(bp({},I.type.defaultProps),I.props):I.props,G=p.dataKey,h=p.maxBarSize,B=p["".concat(s,"Id")],S=p["".concat(b,"Id")],W=r.reduce((function(g,I){var t=e["".concat(I.axisType,"Map")],n=p["".concat(I.axisType,"Id")];t&&t[n]||"zAxis"===I.axisType||dt(!1);var C=t[n];return bp(bp({},g),{},mp(mp({},I.axisType,C),"".concat(I.axisType,"Ticks"),Ps(C)))}),{}),f=W[b],V=W["".concat(b,"Ticks")],v=t&&t[B]&&t[B].hasStack&&function(g,e){var I,t=(null!==(I=g.type)&&void 0!==I&&I.defaultProps?zs(zs({},g.type.defaultProps),g.props):g.props).stackId;if(Vt(t)){var n=e[t];if(n){var C=n.items.indexOf(g);return C>=0?n.stackedData[C]:null}}return null}(I,t[B].stackGroups),X=Dt(I.type).indexOf("Bar")>=0,R=lb(f,V),J=[],k=m&&function(g){var e=g.barSize,I=g.totalSize,t=g.stackGroups,n=void 0===t?{}:t;if(!n)return{};for(var C={},l=Object.keys(n),o=0,r=l.length;o<r;o++)for(var a=n[l[o]].stackGroups,c=Object.keys(a),i=0,A=c.length;i<A;i++){var u=a[c[i]],d=u.items,s=u.cateAxisId,b=d.filter((function(g){return Dt(g.type).indexOf("Bar")>=0}));if(b&&b.length){var m=b[0].type.defaultProps,Z=void 0!==m?zs(zs({},m),b[0].props):b[0].props,y=Z.barSize,p=Z[s];C[p]||(C[p]=[]);var G=gt()(y)?e:y;C[p].push({item:b[0],stackList:b.slice(1),barSize:gt()(G)?void 0:Rt(G,I,0)})}}return C}({barSize:a,stackGroups:t,totalSize:kp(W,b)});if(X){var Y,H,w=gt()(h)?u:h,N=null!==(Y=null!==(H=lb(f,V,!0))&&void 0!==H?H:w)&&void 0!==Y?Y:0;J=function(g){var e=g.barGap,I=g.barCategoryGap,t=g.bandSize,n=g.sizeList,C=void 0===n?[]:n,l=g.maxBarSize,o=C.length;if(o<1)return null;var r,a=Rt(e,t,0,!0),c=[];if(C[0].barSize===+C[0].barSize){var i=!1,A=t/o,u=C.reduce((function(g,e){return g+e.barSize||0}),0);(u+=(o-1)*a)>=t&&(u-=(o-1)*a,a=0),u>=t&&A>0&&(i=!0,u=o*(A*=.9));var d={offset:((t-u)/2|0)-a,size:0};r=C.reduce((function(g,e){var I={item:e.item,position:{offset:d.offset+d.size+a,size:i?A:e.barSize}},t=[].concat(xs(g),[I]);return d=t[t.length-1].position,e.stackList&&e.stackList.length&&e.stackList.forEach((function(g){t.push({item:g,position:d})})),t}),c)}else{var s=Rt(I,t,0,!0);t-2*s-(o-1)*a<=0&&(a=0);var b=(t-2*s-(o-1)*a)/o;b>1&&(b>>=0);var m=l===+l?Math.min(b,l):b;r=C.reduce((function(g,e,I){var t=[].concat(xs(g),[{item:e.item,position:{offset:s+(b+a)*I+(b-m)/2,size:m}}]);return e.stackList&&e.stackList.length&&e.stackList.forEach((function(g){t.push({item:g,position:t[t.length-1].position})})),t}),c)}return r}({barGap:i,barCategoryGap:A,bandSize:N!==R?N:R,sizeList:k[S],maxBarSize:w}),N!==R&&(J=J.map((function(g){return bp(bp({},g),{},{position:bp(bp({},g.position),{},{offset:g.position.offset-N/2})})})))}var K,F,x=I&&I.type&&I.type.getComposedData;x&&Z.push({props:bp(bp({},x(bp(bp({},W),{},{displayedData:y,props:g,dataKey:G,item:I,bandSize:R,barPosition:J,offset:n,stackedData:v,layout:c,dataStartIndex:l,dataEndIndex:o}))),{},mp(mp(mp({key:I.key||"item-".concat(d)},s,W[s]),b,W[b]),"animationId",C)),childIndex:(K=I,F=g.children,Ot(F).indexOf(K)),item:I})})),Z},u=function(g,t){var n=g.props,C=g.dataStartIndex,l=g.dataEndIndex,o=g.updateId;if(!_t({props:n}))return null;var a=n.children,i=n.layout,u=n.stackOffset,d=n.data,s=n.reverseStackOrder,b=Rp(i),m=b.numericAxisName,Z=b.cateAxisName,y=Pt(a,I),p=function(g,e,I,t,n,C){if(!g)return null;var l=(C?e.reverse():e).reduce((function(g,e){var n,C=null!==(n=e.type)&&void 0!==n&&n.defaultProps?zs(zs({},e.type.defaultProps),e.props):e.props,l=C.stackId;if(C.hide)return g;var o=C[I],r=g[o]||{hasStack:!1,stackGroups:{}};if(Vt(l)){var a=r.stackGroups[l]||{numericAxisId:I,cateAxisId:t,items:[]};a.items.push(e),r.hasStack=!0,r.stackGroups[l]=a}else r.stackGroups[Xt("_stackId_")]={numericAxisId:I,cateAxisId:t,items:[e]};return zs(zs({},g),{},Us({},o,r))}),{});return Object.keys(l).reduce((function(e,C){var o=l[C];return o.hasStack&&(o.stackGroups=Object.keys(o.stackGroups).reduce((function(e,C){var l=o.stackGroups[C];return zs(zs({},e),{},Us({},C,{numericAxisId:I,cateAxisId:t,items:l.items,stackedData:eb(g,l.items,n)}))}),{})),zs(zs({},e),{},Us({},C,o))}),{})}(d,y,"".concat(m,"Id"),"".concat(Z,"Id"),u,s),G=r.reduce((function(g,e){var I="".concat(e.axisType,"Map");return bp(bp({},g),{},mp({},I,vp(n,bp(bp({},e),{},{graphicalItems:y,stackGroups:e.axisType===m&&p,dataStartIndex:C,dataEndIndex:l}))))}),{}),h=Jp(bp(bp({},G),{},{props:n,graphicalItems:y}),null===t||void 0===t?void 0:t.legendBBox);Object.keys(G).forEach((function(g){G[g]=c(n,G[g],h,g.replace("Map",""),e)}));var B=function(g){var e=Jt(g),I=Ps(e,!1,!0);return{tooltipTicks:I,orderedTooltipTicks:rt()(I,(function(g){return g.coordinate})),tooltipAxis:e,tooltipAxisBandSize:lb(e,I)}}(G["".concat(Z,"Map")]),S=A(n,bp(bp({},G),{},{dataStartIndex:C,dataEndIndex:l,updateId:o,graphicalItems:y,stackGroups:p,offset:h}));return bp(bp({formattedGraphicalItems:S,graphicalItems:y,offset:h,stackGroups:p},B),G)},d=function(g){function I(g){var t,C,l;return function(g,e){if(!(g instanceof e))throw new TypeError("Cannot call a class as a function")}(this,I),mp(l=rp(this,I,[g]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),mp(l,"accessibilityManager",new pZ),mp(l,"handleLegendBBoxUpdate",(function(g){if(g){var e=l.state,I=e.dataStartIndex,t=e.dataEndIndex,n=e.updateId;l.setState(bp({legendBBox:g},u({props:l.props,dataStartIndex:I,dataEndIndex:t,updateId:n},bp(bp({},l.state),{},{legendBBox:g}))))}})),mp(l,"handleReceiveSyncEvent",(function(g,e,I){if(l.props.syncId===g){if(I===l.eventEmitterSymbol&&"function"!==typeof l.props.syncMethod)return;l.applySyncEvent(e)}})),mp(l,"handleBrushChange",(function(g){var e=g.startIndex,I=g.endIndex;if(e!==l.state.dataStartIndex||I!==l.state.dataEndIndex){var t=l.state.updateId;l.setState((function(){return bp({dataStartIndex:e,dataEndIndex:I},u({props:l.props,dataStartIndex:e,dataEndIndex:I,updateId:t},l.state))})),l.triggerSyncEvent({dataStartIndex:e,dataEndIndex:I})}})),mp(l,"handleMouseEnter",(function(g){var e=l.getMouseInfo(g);if(e){var I=bp(bp({},e),{},{isTooltipActive:!0});l.setState(I),l.triggerSyncEvent(I);var t=l.props.onMouseEnter;It()(t)&&t(I,g)}})),mp(l,"triggeredAfterMouseMove",(function(g){var e=l.getMouseInfo(g),I=e?bp(bp({},e),{},{isTooltipActive:!0}):{isTooltipActive:!1};l.setState(I),l.triggerSyncEvent(I);var t=l.props.onMouseMove;It()(t)&&t(I,g)})),mp(l,"handleItemMouseEnter",(function(g){l.setState((function(){return{isTooltipActive:!0,activeItem:g,activePayload:g.tooltipPayload,activeCoordinate:g.tooltipPosition||{x:g.cx,y:g.cy}}}))})),mp(l,"handleItemMouseLeave",(function(){l.setState((function(){return{isTooltipActive:!1}}))})),mp(l,"handleMouseMove",(function(g){g.persist(),l.throttleTriggeredAfterMouseMove(g)})),mp(l,"handleMouseLeave",(function(g){l.throttleTriggeredAfterMouseMove.cancel();var e={isTooltipActive:!1};l.setState(e),l.triggerSyncEvent(e);var I=l.props.onMouseLeave;It()(I)&&I(e,g)})),mp(l,"handleOuterEvent",(function(g){var e,I=function(g){var e=g&&g.type;return e&&Lt[e]?Lt[e]:null}(g),t=lt()(l.props,"".concat(I));I&&It()(t)&&t(null!==(e=/.*touch.*/i.test(I)?l.getMouseInfo(g.changedTouches[0]):l.getMouseInfo(g))&&void 0!==e?e:{},g)})),mp(l,"handleClick",(function(g){var e=l.getMouseInfo(g);if(e){var I=bp(bp({},e),{},{isTooltipActive:!0});l.setState(I),l.triggerSyncEvent(I);var t=l.props.onClick;It()(t)&&t(I,g)}})),mp(l,"handleMouseDown",(function(g){var e=l.props.onMouseDown;It()(e)&&e(l.getMouseInfo(g),g)})),mp(l,"handleMouseUp",(function(g){var e=l.props.onMouseUp;It()(e)&&e(l.getMouseInfo(g),g)})),mp(l,"handleTouchMove",(function(g){null!=g.changedTouches&&g.changedTouches.length>0&&l.throttleTriggeredAfterMouseMove(g.changedTouches[0])})),mp(l,"handleTouchStart",(function(g){null!=g.changedTouches&&g.changedTouches.length>0&&l.handleMouseDown(g.changedTouches[0])})),mp(l,"handleTouchEnd",(function(g){null!=g.changedTouches&&g.changedTouches.length>0&&l.handleMouseUp(g.changedTouches[0])})),mp(l,"triggerSyncEvent",(function(g){void 0!==l.props.syncId&&dZ.emit(sZ,l.props.syncId,g,l.eventEmitterSymbol)})),mp(l,"applySyncEvent",(function(g){var e=l.props,I=e.layout,t=e.syncMethod,n=l.state.updateId,C=g.dataStartIndex,o=g.dataEndIndex;if(void 0!==g.dataStartIndex||void 0!==g.dataEndIndex)l.setState(bp({dataStartIndex:C,dataEndIndex:o},u({props:l.props,dataStartIndex:C,dataEndIndex:o,updateId:n},l.state)));else if(void 0!==g.activeTooltipIndex){var r=g.chartX,a=g.chartY,c=g.activeTooltipIndex,i=l.state,A=i.offset,d=i.tooltipTicks;if(!A)return;if("function"===typeof t)c=t(d,g);else if("value"===t){c=-1;for(var s=0;s<d.length;s++)if(d[s].value===g.activeLabel){c=s;break}}var b=bp(bp({},A),{},{x:A.left,y:A.top}),m=Math.min(r,b.x+b.width),Z=Math.min(a,b.y+b.height),y=d[c]&&d[c].value,p=Wp(l.state,l.props.data,c),G=d[c]?{x:"horizontal"===I?d[c].coordinate:m,y:"horizontal"===I?Z:d[c].coordinate}:Gp;l.setState(bp(bp({},g),{},{activeLabel:y,activeCoordinate:G,activePayload:p,activeTooltipIndex:c}))}else l.setState(g)})),mp(l,"renderCursor",(function(g){var I,t=l.state,C=t.isTooltipActive,o=t.activeCoordinate,r=t.activePayload,a=t.offset,c=t.activeTooltipIndex,i=t.tooltipAxisBandSize,A=l.getTooltipEventType(),u=null!==(I=g.props.active)&&void 0!==I?I:C,d=l.props.layout,s=g.key||"_recharts-cursor";return n.createElement(gp,{key:s,activeCoordinate:o,activePayload:r,activeTooltipIndex:c,chartName:e,element:g,isActive:u,layout:d,offset:a,tooltipAxisBandSize:i,tooltipEventType:A})})),mp(l,"renderPolarAxis",(function(g,e,I){var t=lt()(g,"type.axisType"),C=lt()(l.state,"".concat(t,"Map")),o=g.type.defaultProps,r=void 0!==o?bp(bp({},o),g.props):g.props,a=C&&C[r["".concat(t,"Id")]];return(0,n.cloneElement)(g,bp(bp({},a),{},{className:At(t,a.className),key:g.key||"".concat(e,"-").concat(I),ticks:Ps(a,!0)}))})),mp(l,"renderPolarGrid",(function(g){var e=g.props,I=e.radialLines,t=e.polarAngles,C=e.polarRadius,o=l.state,r=o.radiusAxisMap,a=o.angleAxisMap,c=Jt(r),i=Jt(a),A=i.cx,u=i.cy,d=i.innerRadius,s=i.outerRadius;return(0,n.cloneElement)(g,{polarAngles:Array.isArray(t)?t:Ps(i,!0).map((function(g){return g.coordinate})),polarRadius:Array.isArray(C)?C:Ps(c,!0).map((function(g){return g.coordinate})),cx:A,cy:u,innerRadius:d,outerRadius:s,key:g.key||"polar-grid",radialLines:I})})),mp(l,"renderLegend",(function(){var g=l.state.formattedGraphicalItems,e=l.props,I=e.children,t=e.width,C=e.height,o=l.props.margin||{},r=t-(o.left||0)-(o.right||0),c=Ks({children:I,formattedGraphicalItems:g,legendWidth:r,legendContent:a});if(!c)return null;var i=c.item,A=lp(c,ep);return(0,n.cloneElement)(i,bp(bp({},A),{},{chartWidth:t,chartHeight:C,margin:o,onBBoxUpdate:l.handleLegendBBoxUpdate}))})),mp(l,"renderTooltip",(function(){var g,e=l.props,I=e.children,t=e.accessibilityLayer,C=qt(I,eC);if(!C)return null;var o=l.state,r=o.isTooltipActive,a=o.activeCoordinate,c=o.activePayload,i=o.activeLabel,A=o.offset,u=null!==(g=C.props.active)&&void 0!==g?g:r;return(0,n.cloneElement)(C,{viewBox:bp(bp({},A),{},{x:A.left,y:A.top}),active:u,label:i,payload:u?c:[],coordinate:a,accessibilityLayer:t})})),mp(l,"renderBrush",(function(g){var e=l.props,I=e.margin,t=e.data,C=l.state,o=C.offset,r=C.dataStartIndex,a=C.dataEndIndex,c=C.updateId;return(0,n.cloneElement)(g,{key:g.key||"_recharts-brush",onChange:_s(l.handleBrushChange,g.props.onChange),data:t,x:ft(g.props.x)?g.props.x:o.left,y:ft(g.props.y)?g.props.y:o.top+o.height+o.brushBottom-(I.bottom||0),width:ft(g.props.width)?g.props.width:o.width,startIndex:r,endIndex:a,updateId:"brush-".concat(c)})})),mp(l,"renderReferenceElement",(function(g,e,I){if(!g)return null;var t=l.clipPathId,C=l.state,o=C.xAxisMap,r=C.yAxisMap,a=C.offset,c=g.type.defaultProps||{},i=g.props,A=i.xAxisId,u=void 0===A?c.xAxisId:A,d=i.yAxisId,s=void 0===d?c.yAxisId:d;return(0,n.cloneElement)(g,{key:g.key||"".concat(e,"-").concat(I),xAxis:o[u],yAxis:r[s],viewBox:{x:a.left,y:a.top,width:a.width,height:a.height},clipPathId:t})})),mp(l,"renderActivePoints",(function(g){var e=g.item,t=g.activePoint,n=g.basePoint,C=g.childIndex,l=g.isRange,o=[],r=e.props.key,a=void 0!==e.item.type.defaultProps?bp(bp({},e.item.type.defaultProps),e.item.props):e.item.props,c=a.activeDot,i=bp(bp({index:C,dataKey:a.dataKey,cx:t.x,cy:t.y,r:4,fill:Ds(e.item),strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},en(c,!1)),Et(c));return o.push(I.renderActiveDot(c,i,"".concat(r,"-activePoint-").concat(C))),n?o.push(I.renderActiveDot(c,bp(bp({},i),{},{cx:n.x,cy:n.y}),"".concat(r,"-basePoint-").concat(C))):l&&o.push(null),o})),mp(l,"renderGraphicChild",(function(g,e,I){var t=l.filterFormatItem(g,e,I);if(!t)return null;var C=l.getTooltipEventType(),o=l.state,r=o.isTooltipActive,a=o.tooltipAxis,c=o.activeTooltipIndex,i=o.activeLabel,A=qt(l.props.children,eC),u=t.props,d=u.points,s=u.isRange,b=u.baseLine,m=void 0!==t.item.type.defaultProps?bp(bp({},t.item.type.defaultProps),t.item.props):t.item.props,Z=m.activeDot,y=m.hide,p=m.activeBar,G=m.activeShape,h=Boolean(!y&&r&&A&&(Z||p||G)),B={};"axis"!==C&&A&&"click"===A.props.trigger?B={onClick:_s(l.handleItemMouseEnter,g.props.onClick)}:"axis"!==C&&(B={onMouseLeave:_s(l.handleItemMouseLeave,g.props.onMouseLeave),onMouseEnter:_s(l.handleItemMouseEnter,g.props.onMouseEnter)});var S=(0,n.cloneElement)(g,bp(bp({},t.props),B));if(h){if(!(c>=0)){var W,f=(null!==(W=l.getItemByXY(l.state.activeCoordinate))&&void 0!==W?W:{graphicalItem:S}).graphicalItem,V=f.item,v=void 0===V?g:V,X=f.childIndex,R=bp(bp(bp({},t.props),B),{},{activeIndex:X});return[(0,n.cloneElement)(v,R),null,null]}var J,k;if(a.dataKey&&!a.allowDuplicatedCategory){var Y="function"===typeof a.dataKey?function(g){return"function"===typeof a.dataKey?a.dataKey(g.payload):null}:"payload.".concat(a.dataKey.toString());J=Yt(d,Y,i),k=s&&b&&Yt(b,Y,i)}else J=null===d||void 0===d?void 0:d[c],k=s&&b&&b[c];if(G||p){var H=void 0!==g.props.activeIndex?g.props.activeIndex:c;return[(0,n.cloneElement)(g,bp(bp(bp({},t.props),B),{},{activeIndex:H})),null,null]}if(!gt()(J))return[S].concat(Ap(l.renderActivePoints({item:t,activePoint:J,basePoint:k,childIndex:c,isRange:s})))}return s?[S,null,null]:[S,null]})),mp(l,"renderCustomized",(function(g,e,I){return(0,n.cloneElement)(g,bp(bp({key:"recharts-customized-".concat(I)},l.props),l.state))})),mp(l,"renderMap",{CartesianGrid:{handler:hp,once:!0},ReferenceArea:{handler:l.renderReferenceElement},ReferenceLine:{handler:hp},ReferenceDot:{handler:l.renderReferenceElement},XAxis:{handler:hp},YAxis:{handler:hp},Brush:{handler:l.renderBrush,once:!0},Bar:{handler:l.renderGraphicChild},Line:{handler:l.renderGraphicChild},Area:{handler:l.renderGraphicChild},Radar:{handler:l.renderGraphicChild},RadialBar:{handler:l.renderGraphicChild},Scatter:{handler:l.renderGraphicChild},Pie:{handler:l.renderGraphicChild},Funnel:{handler:l.renderGraphicChild},Tooltip:{handler:l.renderCursor,once:!0},PolarGrid:{handler:l.renderPolarGrid,once:!0},PolarAngleAxis:{handler:l.renderPolarAxis},PolarRadiusAxis:{handler:l.renderPolarAxis},Customized:{handler:l.renderCustomized}}),l.clipPathId="".concat(null!==(t=g.id)&&void 0!==t?t:Xt("recharts"),"-clip"),l.throttleTriggeredAfterMouseMove=ct()(l.triggeredAfterMouseMove,null!==(C=g.throttleDelay)&&void 0!==C?C:1e3/60),l.state={},l}return function(g,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(e&&e.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),e&&ip(g,e)}(I,g),t=I,l=[{key:"componentDidMount",value:function(){var g,e;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(g=this.props.margin.left)&&void 0!==g?g:0,top:null!==(e=this.props.margin.top)&&void 0!==e?e:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var g=this.props,e=g.children,I=g.data,t=g.height,n=g.layout,C=qt(e,eC);if(C){var l=C.props.defaultIndex;if(!("number"!==typeof l||l<0||l>this.state.tooltipTicks.length-1)){var o=this.state.tooltipTicks[l]&&this.state.tooltipTicks[l].value,r=Wp(this.state,I,l,o),a=this.state.tooltipTicks[l].coordinate,c=(this.state.offset.top+t)/2,i="horizontal"===n?{x:a,y:c}:{y:a,x:c},A=this.state.formattedGraphicalItems.find((function(g){return"Scatter"===g.item.type.name}));A&&(i=bp(bp({},i),A.props.points[l].tooltipPosition),r=A.props.points[l].tooltipPayload);var u={activeTooltipIndex:l,isTooltipActive:!0,activeLabel:o,activePayload:r,activeCoordinate:i};this.setState(u),this.renderCursor(C),this.accessibilityManager.setIndex(l)}}}},{key:"getSnapshotBeforeUpdate",value:function(g,e){return this.props.accessibilityLayer?(this.state.tooltipTicks!==e.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==g.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==g.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(I=this.props.margin.left)&&void 0!==I?I:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0}}),null):null;var I,t}},{key:"componentDidUpdate",value:function(g){In([qt(g.children,eC)],[qt(this.props.children,eC)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var g=qt(this.props.children,eC);if(g&&"boolean"===typeof g.props.shared){var e=g.props.shared?"axis":"item";return o.indexOf(e)>=0?e:C}return C}},{key:"getMouseInfo",value:function(g){if(!this.container)return null;var e,I=this.container,t=I.getBoundingClientRect(),n={top:(e=t).top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft},C={chartX:Math.round(g.pageX-n.left),chartY:Math.round(g.pageY-n.top)},l=t.width/I.offsetWidth||1,o=this.inRange(C.chartX,C.chartY,l);if(!o)return null;var r=this.state,a=r.xAxisMap,c=r.yAxisMap;if("axis"!==this.getTooltipEventType()&&a&&c){var i=Jt(a).scale,A=Jt(c).scale,u=i&&i.invert?i.invert(C.chartX):null,d=A&&A.invert?A.invert(C.chartY):null;return bp(bp({},C),{},{xValue:u,yValue:d})}var s=fp(this.state,this.props.data,this.props.layout,o);return s?bp(bp({},C),s):null}},{key:"inRange",value:function(g,e){var I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,t=this.props.layout,n=g/I,C=e/I;if("horizontal"===t||"vertical"===t){var l=this.state.offset;return n>=l.left&&n<=l.left+l.width&&C>=l.top&&C<=l.top+l.height?{x:n,y:C}:null}var o=this.state,r=o.angleAxisMap,a=o.radiusAxisMap;if(r&&a){var c=Jt(r);return xb({x:n,y:C},c)}return null}},{key:"parseEventsOfWrapper",value:function(){var g=this.props.children,e=this.getTooltipEventType(),I=qt(g,eC),t={};return I&&"axis"===e&&(t="click"===I.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd}),bp(bp({},Et(this.props,this.handleOuterEvent)),t)}},{key:"addListener",value:function(){dZ.on(sZ,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){dZ.removeListener(sZ,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(g,e,I){for(var t=this.state.formattedGraphicalItems,n=0,C=t.length;n<C;n++){var l=t[n];if(l.item===g||l.props.key===g.key||e===Dt(l.item.type)&&I===l.childIndex)return l}return null}},{key:"renderClipPath",value:function(){var g=this.clipPathId,e=this.state.offset,I=e.left,t=e.top,C=e.height,l=e.width;return n.createElement("defs",null,n.createElement("clipPath",{id:g},n.createElement("rect",{x:I,y:t,height:C,width:l})))}},{key:"getXScales",value:function(){var g=this.state.xAxisMap;return g?Object.entries(g).reduce((function(g,e){var I=Cp(e,2),t=I[0],n=I[1];return bp(bp({},g),{},mp({},t,n.scale))}),{}):null}},{key:"getYScales",value:function(){var g=this.state.yAxisMap;return g?Object.entries(g).reduce((function(g,e){var I=Cp(e,2),t=I[0],n=I[1];return bp(bp({},g),{},mp({},t,n.scale))}),{}):null}},{key:"getXScaleByAxisId",value:function(g){var e;return null===(e=this.state.xAxisMap)||void 0===e||null===(e=e[g])||void 0===e?void 0:e.scale}},{key:"getYScaleByAxisId",value:function(g){var e;return null===(e=this.state.yAxisMap)||void 0===e||null===(e=e[g])||void 0===e?void 0:e.scale}},{key:"getItemByXY",value:function(g){var e=this.state,I=e.formattedGraphicalItems,t=e.activeItem;if(I&&I.length)for(var n=0,C=I.length;n<C;n++){var l=I[n],o=l.props,r=l.item,a=void 0!==r.type.defaultProps?bp(bp({},r.type.defaultProps),r.props):r.props,c=Dt(r.type);if("Bar"===c){var i=(o.data||[]).find((function(e){return Kr(g,e)}));if(i)return{graphicalItem:l,payload:i}}else if("RadialBar"===c){var A=(o.data||[]).find((function(e){return xb(g,e)}));if(A)return{graphicalItem:l,payload:A}}else if($Z(l,t)||gy(l,t)||ey(l,t)){var u=Cy({graphicalItem:l,activeTooltipItem:t,itemData:a.data}),d=void 0===a.activeIndex?u:a.activeIndex;return{graphicalItem:bp(bp({},l),{},{childIndex:d}),payload:ey(l,t)?a.data[u]:l.props.data[u]}}}return null}},{key:"render",value:function(){var g=this;if(!_t(this))return null;var e,I,t=this.props,C=t.children,l=t.className,o=t.width,r=t.height,a=t.style,c=t.compact,i=t.title,A=t.desc,u=lp(t,Ip),d=en(u,!1);if(c)return n.createElement(Nm,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},n.createElement(rn,np({},d,{width:o,height:r,title:i,desc:A}),this.renderClipPath(),nn(C,this.renderMap)));this.props.accessibilityLayer&&(d.tabIndex=null!==(e=this.props.tabIndex)&&void 0!==e?e:0,d.role=null!==(I=this.props.role)&&void 0!==I?I:"application",d.onKeyDown=function(e){g.accessibilityManager.keyboardEvent(e)},d.onFocus=function(){g.accessibilityManager.focus()});var s=this.parseEventsOfWrapper();return n.createElement(Nm,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},n.createElement("div",np({className:At("recharts-wrapper",l),style:bp({position:"relative",cursor:"default",width:o,height:r},a)},s,{ref:function(e){g.container=e}}),n.createElement(rn,np({},d,{width:o,height:r,title:i,desc:A,style:pp}),this.renderClipPath(),nn(C,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],l&&op(t.prototype,l),r&&op(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,l,r}(n.Component);mp(d,"displayName",e),mp(d,"defaultProps",bp({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},i)),mp(d,"getDerivedStateFromProps",(function(g,e){var I=g.dataKey,t=g.data,n=g.children,C=g.width,l=g.height,o=g.layout,r=g.stackOffset,a=g.margin,c=e.dataStartIndex,i=e.dataEndIndex;if(void 0===e.updateId){var A=Xp(g);return bp(bp(bp({},A),{},{updateId:0},u(bp(bp({props:g},A),{},{updateId:0}),e)),{},{prevDataKey:I,prevData:t,prevWidth:C,prevHeight:l,prevLayout:o,prevStackOffset:r,prevMargin:a,prevChildren:n})}if(I!==e.prevDataKey||t!==e.prevData||C!==e.prevWidth||l!==e.prevHeight||o!==e.prevLayout||r!==e.prevStackOffset||!Ht(a,e.prevMargin)){var d=Xp(g),s={chartX:e.chartX,chartY:e.chartY,isTooltipActive:e.isTooltipActive},b=bp(bp({},fp(e,t,o)),{},{updateId:e.updateId+1}),m=bp(bp(bp({},d),s),b);return bp(bp(bp({},m),u(bp({props:g},m),e)),{},{prevDataKey:I,prevData:t,prevWidth:C,prevHeight:l,prevLayout:o,prevStackOffset:r,prevMargin:a,prevChildren:n})}if(!In(n,e.prevChildren)){var Z,y,p,G,h=qt(n,fb),B=h&&null!==(Z=null===(y=h.props)||void 0===y?void 0:y.startIndex)&&void 0!==Z?Z:c,S=h&&null!==(p=null===(G=h.props)||void 0===G?void 0:G.endIndex)&&void 0!==p?p:i,W=B!==c||S!==i,f=!gt()(t)&&!W?e.updateId:e.updateId+1;return bp(bp({updateId:f},u(bp(bp({props:g},e),{},{updateId:f,dataStartIndex:B,dataEndIndex:S}),e)),{},{prevChildren:n,dataStartIndex:B,dataEndIndex:S})}return null})),mp(d,"renderActiveDot",(function(g,e,I){var t;return t=(0,n.isValidElement)(g)?(0,n.cloneElement)(g,e):It()(g)?g(e):n.createElement(Zl,e),n.createElement(un,{className:"recharts-active-dot",key:I},t)}));var s=(0,n.forwardRef)((function(g,e){return n.createElement(d,np({},g,{ref:e}))}));return s.displayName=d.displayName,s}({chartName:"PieChart",GraphicalChild:TG,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:gG},{axisType:"radiusAxis",AxisComp:yG}],formatAxisMap:function(g,I,t,n,C){var l=g.width,o=g.height,r=g.startAngle,a=g.endAngle,c=Rt(g.cx,l,l/2),i=Rt(g.cy,o,o/2),A=Nb(l,o,t),u=Rt(g.innerRadius,A,0),d=Rt(g.outerRadius,A,.8*A);return Object.keys(I).reduce((function(g,t){var l,o=I[t],A=o.domain,s=o.reversed;if(gt()(o.range))"angleAxis"===n?l=[r,a]:"radiusAxis"===n&&(l=[u,d]),s&&(l=[l[1],l[0]]);else{var b=Jb(l=o.range,2);r=b[0],a=b[1]}var m=function(g,I,t){var n=g.scale,C=g.type,l=g.layout,o=g.axisType;if("auto"===n)return"radial"===l&&"radiusAxis"===o?{scale:Or(),realScaleType:"band"}:"radial"===l&&"angleAxis"===o?{scale:yi(),realScaleType:"linear"}:"category"===C&&I&&(I.indexOf("LineChart")>=0||I.indexOf("AreaChart")>=0||I.indexOf("ComposedChart")>=0&&!t)?{scale:qr(),realScaleType:"point"}:"category"===C?{scale:Or(),realScaleType:"band"}:{scale:yi(),realScaleType:"linear"};if(bt()(n)){var r="scale".concat(nC()(n));return{scale:(e[r]||qr)(),realScaleType:e[r]?r:"point"}}return It()(n)?{scale:n}:{scale:qr(),realScaleType:"point"}}(o,C),Z=m.realScaleType,y=m.scale;y.domain(A).range(l),function(g){var e=g.domain();if(e&&!(e.length<=2)){var I=e.length,t=g.range(),n=Math.min(t[0],t[1])-$s,C=Math.max(t[0],t[1])+$s,l=g(e[0]),o=g(e[I-1]);(l<n||l>C||o<n||o>C)&&g.domain([e[0],e[I-1]])}}(y);var p=function(g,e){var I=e.realScaleType,t=e.type,n=e.tickCount,C=e.originalDomain,l=e.allowDecimals,o=I||e.scale;if("auto"!==o&&"linear"!==o)return null;if(n&&"number"===t&&C&&("auto"===C[0]||"auto"===C[1])){var r=g.domain();if(!r.length)return null;var a=ms(r,n,l);return g.domain([xd()(a),Kd()(a)]),{niceTicks:a}}if(n&&"number"===t){var c=g.domain();return{niceTicks:Zs(c,n,l)}}return null}(y,Xb(Xb({},o),{},{realScaleType:Z})),G=Xb(Xb(Xb({},o),p),{},{range:l,radius:d,realScaleType:Z,scale:y,cx:c,cy:i,innerRadius:u,outerRadius:d,startAngle:r,endAngle:a});return Xb(Xb({},g),{},Rb({},t,G))}),{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const OG=["#0088FE","#00C49F","#FFBB28","#FF8042"],PG=g=>{let{data:e}=g;return(0,Sg.jsxs)(jG,{width:400,height:400,children:[(0,Sg.jsx)(TG,{data:e,cx:200,cy:200,labelLine:!1,label:g=>{let{name:e,value:I}=g;return`${e} (${I})`},outerRadius:80,fill:"#8884d8",children:e.map(((g,e)=>(0,Sg.jsx)(wG,{fill:OG[e%OG.length]},`cell-${e}`)))}),(0,Sg.jsx)(eC,{}),(0,Sg.jsx)(bl,{})]})},qG=()=>{const[g,e]=(0,n.useState)([]),[I,t]=(0,n.useState)(!0),[C,l]=(0,n.useState)(null),o=sessionStorage.getItem("bbName")||"",r=(0,n.useCallback)((async()=>{if(!o)return l("Blood bank name is not set."),void t(!1);try{const g=await(async g=>await DI.get(`${TI}/userController/requests/${g}`))(o);e(g.data)}catch(g){console.error("Error fetching requests:",g),l("Failed to fetch requests. Please try again.")}finally{t(!1)}}),[o]);(0,n.useEffect)((()=>{r()}),[r]);return I?(0,Sg.jsx)("div",{children:"Loading requests..."}):C?(0,Sg.jsx)("div",{children:C}):(0,Sg.jsxs)("div",{className:"requests-form",children:[(0,Sg.jsxs)("h2",{className:"text-2xl font-semibold mb-4",children:["Requests for ",o]}),(0,Sg.jsx)("button",{onClick:()=>{t(!0),r()},className:"bg-blue-500 text-white py-2 px-4 rounded mb-4 hover:bg-blue-600",children:"Refresh"}),g.length>0?(0,Sg.jsx)("div",{className:"flex flex-col gap-4",children:(0,Sg.jsx)("div",{className:"overflow-y-auto",style:{maxHeight:"400px"},children:g.map((g=>(0,Sg.jsxs)("div",{className:"bg-white shadow-md rounded-lg border border-gray-200 p-4 mb-4",style:{height:"200px"},children:[(0,Sg.jsx)("div",{className:"font-bold text-lg mb-2",children:g.userName}),(0,Sg.jsxs)("div",{className:"text-gray-700 mb-1",children:[(0,Sg.jsx)("strong",{children:"Phone Number:"})," ",g.phoneNumber]}),(0,Sg.jsxs)("div",{className:"text-gray-700 mb-1",children:[(0,Sg.jsx)("strong",{children:"Requested Blood Type:"})," ",g.rBloodType]}),(0,Sg.jsxs)("div",{className:"text-gray-700",children:[(0,Sg.jsx)("strong",{children:"Blood Bank Name:"})," ",g.bbName]}),(0,Sg.jsxs)("div",{className:"mt-4 flex justify-between",children:[(0,Sg.jsx)("button",{onClick:()=>(async g=>{console.log(`Request ${g} accepted`);try{await jI(g),r()}catch(e){console.error("Error accepting request:",e)}})(g.id),className:"bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600",children:"Accept"}),(0,Sg.jsx)("button",{onClick:()=>(async g=>{console.log(`Request ${g} declined`);try{await jI(g),r()}catch(e){console.error("Error declining request:",e)}})(g.id),className:"bg-red-500 text-white py-2 px-4 rounded hover:bg-red-600",children:"Decline"})]})]},g.id)))})}):(0,Sg.jsx)("p",{children:"No requests available."})]})},_G=()=>{const[g,e]=(0,n.useState)([]),I=sessionStorage.getItem("bbName"),t=(0,n.useCallback)((async()=>{if(I)try{const g=await(g=>DI.get(`${TI}/bloodunits/piechart/${g}`))(I),t=g.data,n=Object.entries(t).map((g=>{let[e,I]=g;return{name:e,value:I}}));e(n)}catch(g){console.error("Error fetching pie chart data:",g)}else console.error("Blood bank name is not available in session storage.")}),[I]);(0,n.useEffect)((()=>{t()}),[t]);return(0,Sg.jsxs)("div",{className:"flex",children:[(0,Sg.jsxs)("aside",{className:"w-64 h-screen bg-gray-800 text-white fixed",children:[(0,Sg.jsxs)("div",{className:"p-4",children:[(0,Sg.jsx)("h2",{className:"text-2xl font-bold",children:"BloodLinks Dashboard"}),(0,Sg.jsx)("nav",{className:"mt-4",children:(0,Sg.jsxs)("ul",{children:[(0,Sg.jsx)("li",{className:"hover:bg-gray-700 p-2 rounded",children:"Add Blood Unit"}),(0,Sg.jsx)("li",{className:"hover:bg-gray-700 p-2 rounded",children:"Make Payment"}),(0,Sg.jsx)("li",{className:"hover:bg-gray-700 p-2 rounded",children:"View Database Info"})]})})]}),(0,Sg.jsx)("button",{onClick:()=>{console.log("Logging out..."),sessionStorage.clear(),window.location.href="/login"},className:"absolute bottom-0 w-full bg-red-600 text-white py-2 rounded hover:bg-red-700 mb-0",children:"Logout"})]}),(0,Sg.jsxs)("main",{className:"flex-1 p-6 bg-gray-200 ml-64",children:[(0,Sg.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Dashboard"}),(0,Sg.jsx)("div",{className:"mb-6",children:(0,Sg.jsx)(qI,{onAdd:async g=>{console.log("Adding Blood Unit:",g)}})}),(0,Sg.jsx)("div",{className:"mb-6",children:(0,Sg.jsx)(_I,{onPay:async g=>{console.log("Making Payment:",g)}})}),(0,Sg.jsxs)("div",{className:"flex space-x-4 mt-10",children:[(0,Sg.jsxs)("div",{className:"bg-white p-6 rounded shadow w-1/2",children:[(0,Sg.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Data Overview"}),(0,Sg.jsx)("button",{onClick:()=>{t()},className:"mb-4 bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700",children:"Refresh"}),(0,Sg.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Database Info"}),g.length>0?(0,Sg.jsx)(PG,{data:g}):(0,Sg.jsx)("p",{children:"No data available. Fetch information from the database."})]}),(0,Sg.jsxs)("div",{className:"bg-white p-6 rounded shadow w-1/2",children:[(0,Sg.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Requests"}),(0,Sg.jsx)(qG,{})]})]})]})]})},$G=g=>{let{element:e}=g;const{isAuthenticated:I}=Vg();return I?e:(0,Sg.jsx)(ug,{to:"/login"})},gh=()=>(0,Sg.jsxs)("div",{className:"bg-gray-100",children:[(0,Sg.jsx)("nav",{className:"bg-red-600 text-white fixed top-0 w-full z-10 shadow-lg",children:(0,Sg.jsxs)("div",{className:"container mx-auto flex justify-between items-center p-4",children:[(0,Sg.jsx)("h1",{className:"text-xl font-bold",children:"Blood Links"}),(0,Sg.jsxs)("ul",{className:"flex space-x-4",children:[(0,Sg.jsx)("li",{children:(0,Sg.jsx)("a",{href:"#about",className:"hover:underline",children:"About Us"})}),(0,Sg.jsx)("li",{children:(0,Sg.jsx)("a",{href:"#why",className:"hover:underline",children:"Why Donate"})}),(0,Sg.jsx)("li",{children:(0,Sg.jsx)("a",{href:"#developers",className:"hover:underline",children:"Developers"})}),(0,Sg.jsx)("li",{children:(0,Sg.jsx)("a",{href:"/login",className:"bg-red-700 hover:bg-red-800 text-white rounded px-4 py-2",children:"Login As Administrator"})})]})]})}),(0,Sg.jsxs)("header",{className:"bg-red-700 text-white py-80 text-center pt-80",children:[(0,Sg.jsxs)("h2",{className:"text-2xl md:text-4xl lg:text-7xl font-bold tracking-tight",children:["Welcome to Blood Links",(0,Sg.jsxs)("div",{className:"relative mx-auto inline-block w-max",children:[(0,Sg.jsx)("div",{className:"absolute left-0 top-[1px] bg-clip-text bg-no-repeat text-transparent bg-gradient-to-r py-4 from-purple-500 via-violet-500 to-pink-500",children:(0,Sg.jsx)("span",{children:"Connecting Donors and Recipients."})}),(0,Sg.jsx)("div",{className:"relative bg-clip-text text-transparent bg-no-repeat bg-gradient-to-r from-purple-500 via-violet-500 to-pink-500 py-4",children:(0,Sg.jsx)("span",{children:"Connecting Donors and Recipients."})})]})]}),(0,Sg.jsx)("p",{className:"text-lg mt-4",children:"Your trusted platform for finding blood banks"})]}),(0,Sg.jsxs)("main",{className:"pt-24",children:[(0,Sg.jsxs)("section",{className:"bg-white p-6 mx-4 my-4 rounded-lg shadow flex flex-col md:flex-row",id:"about",children:[(0,Sg.jsx)("div",{className:"md:w-1/2 flex justify-center items-center",children:(0,Sg.jsx)("img",{src:"https://www.lifeblood.com.au/sites/default/files/2024-09/life-is-the-reason-blood-L1-featured-530x398.jpg",alt:"Blood Donation",className:"rounded-lg shadow-md w-full h-auto"})}),(0,Sg.jsxs)("div",{className:"md:w-1/2 p-6",children:[(0,Sg.jsx)("h2",{className:"text-2xl font-semibold text-center",children:"About Us"}),(0,Sg.jsx)("p",{className:"mt-4",children:"Blood Links is an innovative platform designed to help you locate nearby blood banks and contribute to saving lives. Our platform bridges the gap between donors and blood banks, ensuring timely and efficient support for those in critical need."}),(0,Sg.jsx)("p",{className:"mt-2",children:"At Blood Links, we believe every drop of blood counts. By connecting the right people at the right time, we ensure that lives are saved when it matters most."}),(0,Sg.jsx)("p",{className:"mt-2",children:"Join us today and be a part of this life-saving journey!"})]})]}),(0,Sg.jsxs)("section",{className:"bg-white p-6 mx-4 my-4 rounded-lg shadow mt-2",id:"why",children:[(0,Sg.jsx)("h2",{className:"text-2xl font-semibold text-center text-red-600",children:"Why Donate Blood?"}),(0,Sg.jsx)("p",{className:"text-center mt-4 text-gray-700",children:"Blood donation is one of the most selfless acts of kindness. By donating blood, you\u2019re saving lives and supporting individuals battling life-threatening conditions."}),(0,Sg.jsx)("p",{className:"text-center mt-4 text-gray-700",children:"A single pint of blood can save up to three lives."}),(0,Sg.jsx)("div",{className:"flex justify-center mt-4",children:(0,Sg.jsx)("a",{href:"/#",className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg",children:"Download The App Now"})})]}),(0,Sg.jsxs)("section",{className:"bg-white p-8 mx-4 my-4 rounded-lg shadow-lg mt-2",id:"faq",children:[(0,Sg.jsx)("h2",{className:"text-3xl font-semibold text-center text-red-600 mb-6",children:"Your Most Asked Questions"}),(0,Sg.jsx)("ul",{className:"space-y-6",children:(0,Sg.jsxs)("li",{className:"p-4 border border-gray-300 rounded-lg shadow-sm",children:[(0,Sg.jsxs)("div",{className:"flex items-center",children:[(0,Sg.jsx)("svg",{className:"w-6 h-6 text-red-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Sg.jsx)("path",{d:"M10 2a8 8 0 100 16 8 8 0 000-16zm1 11H9v-1h2v1zm0-3H9V7h2v3z"})}),(0,Sg.jsx)("strong",{className:"text-lg",children:"What prescribed medications will prevent me from donating?"})]}),(0,Sg.jsx)("p",{className:"mt-2",children:"Certain medications may affect your eligibility. Please consult with your healthcare provider or the donation center."})]})})]}),(0,Sg.jsxs)("section",{className:"bg-white p-6 mx-4 my-4 rounded-lg shadow mt-2",id:"developers",children:[(0,Sg.jsx)("h2",{className:"text-2xl font-semibold text-center",children:"Meet the People Behind The Idea"}),(0,Sg.jsx)("p",{className:"text-center mt-4",children:"We are the team behind Blood Links, committed to saving lives."}),(0,Sg.jsx)("div",{className:"flex flex-wrap justify-center mt-6",children:[{name:"Avuthu Dipner Reddy",image:"https://via.placeholder.com/150",quote:"Saving lives is a mission."},{name:"Developer 2",image:"https://via.placeholder.com/150",quote:"Innovating for a better tomorrow."},{name:"Developer 3",image:"https://via.placeholder.com/150",quote:"Empowering communities."},{name:"Developer 4",image:"https://via.placeholder.com/150",quote:"Building a brighter future."}].map(((g,e)=>(0,Sg.jsxs)("div",{className:"w-full sm:w-1/2 lg:w-1/4 p-4 text-center",children:[(0,Sg.jsx)("img",{src:g.image,alt:g.name,className:"rounded-full w-32 h-32 mx-auto"}),(0,Sg.jsx)("h3",{className:"text-lg font-semibold mt-4",children:g.name}),(0,Sg.jsxs)("p",{className:"mt-2 text-sm italic",children:['"',g.quote,'"']})]},e)))})]})]}),(0,Sg.jsx)("footer",{className:"bg-gray-800 text-white text-center py-4",children:(0,Sg.jsx)("p",{children:"\xa9 2024 Blood Links. All rights reserved."})})]}),eh=()=>{const{state:g}=_(),{paymentDetails:e,date:I}=g,t=gg();return(0,Sg.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-100 to-gray-300 p-6",children:(0,Sg.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md border border-gray-300",children:[(0,Sg.jsx)("h2",{className:"text-3xl font-bold text-center mb-6 border-b-2 border-gray-400 pb-2",children:"Payment Receipt"}),(0,Sg.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[(0,Sg.jsx)("strong",{children:"Date:"})," ",I]}),(0,Sg.jsx)("div",{className:"border-b border-gray-400 mb-4"}),(0,Sg.jsxs)("div",{className:"grid grid-cols-2 mb-2",children:[(0,Sg.jsx)("p",{className:"text-sm text-gray-700",children:(0,Sg.jsx)("strong",{children:"BID:"})}),(0,Sg.jsx)("p",{className:"text-sm text-gray-700 text-right",children:e.bid}),(0,Sg.jsx)("p",{className:"text-sm text-gray-700",children:(0,Sg.jsx)("strong",{children:"Patient Name:"})}),(0,Sg.jsx)("p",{className:"text-sm text-gray-700 text-right",children:e.patientName}),(0,Sg.jsx)("p",{className:"text-sm text-gray-700",children:(0,Sg.jsx)("strong",{children:"Patient Number:"})}),(0,Sg.jsx)("p",{className:"text-sm text-gray-700 text-right",children:e.patientNumber}),(0,Sg.jsx)("p",{className:"text-sm text-gray-700",children:(0,Sg.jsx)("strong",{children:"Blood Bank Name:"})}),(0,Sg.jsx)("p",{className:"text-sm text-gray-700 text-right",children:e.bbName}),(0,Sg.jsx)("p",{className:"text-sm text-gray-700",children:(0,Sg.jsx)("strong",{children:"Blood Type:"})}),(0,Sg.jsx)("p",{className:"text-sm text-gray-700 text-right",children:e.bloodType})]}),(0,Sg.jsx)("div",{className:"border-b border-gray-400 my-4"}),(0,Sg.jsxs)("div",{className:"grid grid-cols-2 mb-2",children:[(0,Sg.jsx)("p",{className:"text-lg font-bold text-gray-800",children:"Total Amount:"}),(0,Sg.jsxs)("p",{className:"text-lg font-bold text-gray-800 text-right",children:["$",e.amount]})]}),(0,Sg.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,Sg.jsx)("button",{onClick:()=>t("/dashboard"),className:"bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400",children:"Back to Dashboard"}),(0,Sg.jsx)("button",{onClick:()=>window.print(),className:"bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-400",children:"Print Receipt"})]})]})})},Ih=g=>{let{element:e}=g;const{isPaymentSuccessful:I}=Vg();return I?e:(0,Sg.jsx)(ug,{to:"/dashboard"})},th=()=>(0,Sg.jsx)(fg,{children:(0,Sg.jsx)(Gg,{children:(0,Sg.jsxs)(bg,{children:[(0,Sg.jsx)(dg,{path:"/",element:(0,Sg.jsx)(gh,{})}),(0,Sg.jsx)(dg,{path:"/login",element:(0,Sg.jsx)(vg,{})}),(0,Sg.jsx)(dg,{path:"/dashboard",element:(0,Sg.jsx)($G,{element:(0,Sg.jsx)(_G,{})})}),(0,Sg.jsx)(dg,{path:"/receipt",element:(0,Sg.jsx)(Ih,{element:(0,Sg.jsx)(eh,{})})})," "]})})}),nh=g=>{g&&g instanceof Function&&I.e(453).then(I.bind(I,6453)).then((e=>{let{getCLS:I,getFID:t,getFCP:n,getLCP:C,getTTFB:l}=e;I(g),t(g),n(g),C(g),l(g)}))};l.createRoot(document.getElementById("root")).render((0,Sg.jsx)(n.StrictMode,{children:(0,Sg.jsx)(th,{})})),nh()})()})();
//# sourceMappingURL=main.0272c253.js.map